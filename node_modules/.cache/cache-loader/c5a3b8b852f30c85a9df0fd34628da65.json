{"remainingRequest":"C:\\mine\\搭webpack环境\\so\\node_modules\\thread-loader\\dist\\cjs.js!C:\\mine\\搭webpack环境\\so\\node_modules\\babel-loader\\lib\\index.js!C:\\mine\\搭webpack环境\\so\\node_modules\\babel-loader\\lib\\index.js!C:\\mine\\搭webpack环境\\so\\node_modules\\vee-validate\\dist\\vee-validate.esm.js","dependencies":[{"path":"C:\\mine\\搭webpack环境\\so\\node_modules\\vee-validate\\dist\\vee-validate.esm.js","mtime":1557404430000},{"path":"C:\\mine\\搭webpack环境\\so\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\mine\\搭webpack环境\\so\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\mine\\搭webpack环境\\so\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\mine\\搭webpack环境\\so\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX3R5cGVvZjMob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09ICJzeW1ib2wiKSB7IF90eXBlb2YzID0gZnVuY3Rpb24gX3R5cGVvZjMob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mMyA9IGZ1bmN0aW9uIF90eXBlb2YzKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mMyhvYmopOyB9CgpmdW5jdGlvbiBfdHlwZW9mMihvYmopIHsKICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBfdHlwZW9mMyhTeW1ib2wuaXRlcmF0b3IpID09PSAic3ltYm9sIikgewogICAgX3R5cGVvZjIgPSBmdW5jdGlvbiBfdHlwZW9mMihvYmopIHsKICAgICAgcmV0dXJuIF90eXBlb2YzKG9iaik7CiAgICB9OwogIH0gZWxzZSB7CiAgICBfdHlwZW9mMiA9IGZ1bmN0aW9uIF90eXBlb2YyKG9iaikgewogICAgICByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiBfdHlwZW9mMyhvYmopOwogICAgfTsKICB9CgogIHJldHVybiBfdHlwZW9mMihvYmopOwp9Ci8qKgogICogdmVlLXZhbGlkYXRlIHYyLjIuNwogICogKGMpIDIwMTkgQWJkZWxyYWhtYW4gQXdhZAogICogQGxpY2Vuc2UgTUlUCiAgKi8KLy8gCgoKdmFyIGlzVGV4dElucHV0ID0gZnVuY3Rpb24gaXNUZXh0SW5wdXQoZWwpIHsKICByZXR1cm4gaW5jbHVkZXMoWyd0ZXh0JywgJ3Bhc3N3b3JkJywgJ3NlYXJjaCcsICdlbWFpbCcsICd0ZWwnLCAndXJsJywgJ3RleHRhcmVhJywgJ251bWJlciddLCBlbC50eXBlKTsKfTsKCnZhciBpc0NoZWNrYm94T3JSYWRpb0lucHV0ID0gZnVuY3Rpb24gaXNDaGVja2JveE9yUmFkaW9JbnB1dChlbCkgewogIHJldHVybiBpbmNsdWRlcyhbJ3JhZGlvJywgJ2NoZWNrYm94J10sIGVsLnR5cGUpOwp9OwoKdmFyIGlzRGF0ZUlucHV0ID0gZnVuY3Rpb24gaXNEYXRlSW5wdXQoZWwpIHsKICByZXR1cm4gaW5jbHVkZXMoWydkYXRlJywgJ3dlZWsnLCAnbW9udGgnLCAnZGF0ZXRpbWUtbG9jYWwnLCAndGltZSddLCBlbC50eXBlKTsKfTsKLyoqCiAqIEdldHMgdGhlIGRhdGEgYXR0cmlidXRlLiB0aGUgbmFtZSBtdXN0IGJlIGtlYmFiLWNhc2UuCiAqLwoKCnZhciBnZXREYXRhQXR0cmlidXRlID0gZnVuY3Rpb24gZ2V0RGF0YUF0dHJpYnV0ZShlbCwgbmFtZSkgewogIHJldHVybiBlbC5nZXRBdHRyaWJ1dGUoImRhdGEtdnYtIiArIG5hbWUpOwp9OwoKdmFyIGlzTmFOJDEgPSBmdW5jdGlvbiBpc05hTiQxKHZhbHVlKSB7CiAgaWYgKCdpc05hTicgaW4gTnVtYmVyKSB7CiAgICByZXR1cm4gTnVtYmVyLmlzTmFOKHZhbHVlKTsKICB9IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZQoKCiAgcmV0dXJuIHZhbHVlID09PSB2YWx1ZTsKfTsKLyoqCiAqIENoZWNrcyBpZiB0aGUgdmFsdWVzIGFyZSBlaXRoZXIgbnVsbCBvciB1bmRlZmluZWQuCiAqLwoKCnZhciBpc051bGxPclVuZGVmaW5lZCA9IGZ1bmN0aW9uIGlzTnVsbE9yVW5kZWZpbmVkKCkgewogIHZhciB2YWx1ZXMgPSBbXSwKICAgICAgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsKCiAgd2hpbGUgKGxlbi0tKSB7CiAgICB2YWx1ZXNbbGVuXSA9IGFyZ3VtZW50c1tsZW5dOwogIH0KCiAgcmV0dXJuIHZhbHVlcy5ldmVyeShmdW5jdGlvbiAodmFsdWUpIHsKICAgIHJldHVybiB2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkOwogIH0pOwp9OwovKioKICogQ3JlYXRlcyB0aGUgZGVmYXVsdCBmbGFncyBvYmplY3QuCiAqLwoKCnZhciBjcmVhdGVGbGFncyA9IGZ1bmN0aW9uIGNyZWF0ZUZsYWdzKCkgewogIHJldHVybiB7CiAgICB1bnRvdWNoZWQ6IHRydWUsCiAgICB0b3VjaGVkOiBmYWxzZSwKICAgIGRpcnR5OiBmYWxzZSwKICAgIHByaXN0aW5lOiB0cnVlLAogICAgdmFsaWQ6IG51bGwsCiAgICBpbnZhbGlkOiBudWxsLAogICAgdmFsaWRhdGVkOiBmYWxzZSwKICAgIHBlbmRpbmc6IGZhbHNlLAogICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgY2hhbmdlZDogZmFsc2UKICB9Owp9OwovKioKICogU2hhbGxvdyBvYmplY3QgY29tcGFyaXNvbi4KICovCgoKdmFyIGlzRXF1YWwgPSBmdW5jdGlvbiBpc0VxdWFsKGxocywgcmhzKSB7CiAgaWYgKGxocyBpbnN0YW5jZW9mIFJlZ0V4cCAmJiByaHMgaW5zdGFuY2VvZiBSZWdFeHApIHsKICAgIHJldHVybiBpc0VxdWFsKGxocy5zb3VyY2UsIHJocy5zb3VyY2UpICYmIGlzRXF1YWwobGhzLmZsYWdzLCByaHMuZmxhZ3MpOwogIH0KCiAgaWYgKEFycmF5LmlzQXJyYXkobGhzKSAmJiBBcnJheS5pc0FycmF5KHJocykpIHsKICAgIGlmIChsaHMubGVuZ3RoICE9PSByaHMubGVuZ3RoKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxocy5sZW5ndGg7IGkrKykgewogICAgICBpZiAoIWlzRXF1YWwobGhzW2ldLCByaHNbaV0pKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHRydWU7CiAgfSAvLyBpZiBib3RoIGFyZSBvYmplY3RzLCBjb21wYXJlIGVhY2gga2V5IHJlY3Vyc2l2ZWx5LgoKCiAgaWYgKGlzT2JqZWN0KGxocykgJiYgaXNPYmplY3QocmhzKSkgewogICAgcmV0dXJuIE9iamVjdC5rZXlzKGxocykuZXZlcnkoZnVuY3Rpb24gKGtleSkgewogICAgICByZXR1cm4gaXNFcXVhbChsaHNba2V5XSwgcmhzW2tleV0pOwogICAgfSkgJiYgT2JqZWN0LmtleXMocmhzKS5ldmVyeShmdW5jdGlvbiAoa2V5KSB7CiAgICAgIHJldHVybiBpc0VxdWFsKGxoc1trZXldLCByaHNba2V5XSk7CiAgICB9KTsKICB9CgogIGlmIChpc05hTiQxKGxocykgJiYgaXNOYU4kMShyaHMpKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIHJldHVybiBsaHMgPT09IHJoczsKfTsKLyoqCiAqIERldGVybWluZXMgdGhlIGlucHV0IGZpZWxkIHNjb3BlLgogKi8KCgp2YXIgZ2V0U2NvcGUgPSBmdW5jdGlvbiBnZXRTY29wZShlbCkgewogIHZhciBzY29wZSA9IGdldERhdGFBdHRyaWJ1dGUoZWwsICdzY29wZScpOwoKICBpZiAoaXNOdWxsT3JVbmRlZmluZWQoc2NvcGUpKSB7CiAgICB2YXIgZm9ybSA9IGdldEZvcm0oZWwpOwoKICAgIGlmIChmb3JtKSB7CiAgICAgIHNjb3BlID0gZ2V0RGF0YUF0dHJpYnV0ZShmb3JtLCAnc2NvcGUnKTsKICAgIH0KICB9CgogIHJldHVybiAhaXNOdWxsT3JVbmRlZmluZWQoc2NvcGUpID8gc2NvcGUgOiBudWxsOwp9OwovKioKICogR2V0IHRoZSBjbG9zZXN0IGZvcm0gZWxlbWVudC4KICovCgoKdmFyIGdldEZvcm0gPSBmdW5jdGlvbiBnZXRGb3JtKGVsKSB7CiAgaWYgKGlzTnVsbE9yVW5kZWZpbmVkKGVsKSkgewogICAgcmV0dXJuIG51bGw7CiAgfQoKICBpZiAoZWwudGFnTmFtZSA9PT0gJ0ZPUk0nKSB7CiAgICByZXR1cm4gZWw7CiAgfQoKICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKGVsLmZvcm0pKSB7CiAgICByZXR1cm4gZWwuZm9ybTsKICB9CgogIHJldHVybiAhaXNOdWxsT3JVbmRlZmluZWQoZWwucGFyZW50Tm9kZSkgPyBnZXRGb3JtKGVsLnBhcmVudE5vZGUpIDogbnVsbDsKfTsKLyoqCiAqIEdldHMgdGhlIHZhbHVlIGluIGFuIG9iamVjdCBzYWZlbHkuCiAqLwoKCnZhciBnZXRQYXRoID0gZnVuY3Rpb24gZ2V0UGF0aChwYXRoLCB0YXJnZXQsIGRlZikgewogIGlmIChkZWYgPT09IHZvaWQgMCkgZGVmID0gdW5kZWZpbmVkOwoKICBpZiAoIXBhdGggfHwgIXRhcmdldCkgewogICAgcmV0dXJuIGRlZjsKICB9CgogIHZhciB2YWx1ZSA9IHRhcmdldDsKICBwYXRoLnNwbGl0KCcuJykuZXZlcnkoZnVuY3Rpb24gKHByb3ApIHsKICAgIGlmIChwcm9wIGluIHZhbHVlKSB7CiAgICAgIHZhbHVlID0gdmFsdWVbcHJvcF07CiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIHZhbHVlID0gZGVmOwogICAgcmV0dXJuIGZhbHNlOwogIH0pOwogIHJldHVybiB2YWx1ZTsKfTsKLyoqCiAqIENoZWNrcyBpZiBwYXRoIGV4aXN0cyB3aXRoaW4gYW4gb2JqZWN0LgogKi8KCgp2YXIgaGFzUGF0aCA9IGZ1bmN0aW9uIGhhc1BhdGgocGF0aCwgdGFyZ2V0KSB7CiAgdmFyIG9iaiA9IHRhcmdldDsKICB2YXIgcHJldmlvdXNQYXRoID0gbnVsbDsKICB2YXIgaXNOdWxsT3JOb25PYmplY3QgPSBmYWxzZTsKICB2YXIgaXNWYWxpZFBhdGggPSBwYXRoLnNwbGl0KCcuJykucmVkdWNlKGZ1bmN0aW9uIChyZWR1Y2VyLCBwcm9wKSB7CiAgICBpZiAob2JqID09IG51bGwgfHwgX3R5cGVvZjIob2JqKSAhPT0gJ29iamVjdCcpIHsKICAgICAgaXNOdWxsT3JOb25PYmplY3QgPSB0cnVlOwogICAgICByZXR1cm4gcmVkdWNlciAmJiBmYWxzZTsKICAgIH0KCiAgICBpZiAocHJvcCBpbiBvYmopIHsKICAgICAgb2JqID0gb2JqW3Byb3BdOwogICAgICBwcmV2aW91c1BhdGggPSBwcmV2aW91c1BhdGggPT09IG51bGwgPyBwcm9wIDogcHJldmlvdXNQYXRoICsgJy4nICsgcHJvcDsKICAgICAgcmV0dXJuIHJlZHVjZXIgJiYgdHJ1ZTsKICAgIH0KCiAgICByZXR1cm4gcmVkdWNlciAmJiBmYWxzZTsKICB9LCB0cnVlKTsKCiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHsKICAgIGlmIChpc051bGxPck5vbk9iamVjdCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IocHJldmlvdXNQYXRoICsgJyBpcyBub3QgYW4gb2JqZWN0Jyk7CiAgICB9CiAgfQoKICByZXR1cm4gaXNWYWxpZFBhdGg7Cn07Ci8qKgogKiBQYXJzZXMgYSBydWxlIHN0cmluZyBleHByZXNzaW9uLgogKi8KCgp2YXIgcGFyc2VSdWxlID0gZnVuY3Rpb24gcGFyc2VSdWxlKHJ1bGUpIHsKICB2YXIgcGFyYW1zID0gW107CiAgdmFyIG5hbWUgPSBydWxlLnNwbGl0KCc6JylbMF07CgogIGlmIChpbmNsdWRlcyhydWxlLCAnOicpKSB7CiAgICBwYXJhbXMgPSBydWxlLnNwbGl0KCc6Jykuc2xpY2UoMSkuam9pbignOicpLnNwbGl0KCcsJyk7CiAgfQoKICByZXR1cm4gewogICAgbmFtZTogbmFtZSwKICAgIHBhcmFtczogcGFyYW1zCiAgfTsKfTsKLyoqCiAqIERlYm91bmNlcyBhIGZ1bmN0aW9uLgogKi8KCgp2YXIgZGVib3VuY2UgPSBmdW5jdGlvbiBkZWJvdW5jZShmbiwgd2FpdCwgdG9rZW4pIHsKICBpZiAod2FpdCA9PT0gdm9pZCAwKSB3YWl0ID0gMDsKICBpZiAodG9rZW4gPT09IHZvaWQgMCkgdG9rZW4gPSB7CiAgICBjYW5jZWxsZWQ6IGZhbHNlCiAgfTsKCiAgaWYgKHdhaXQgPT09IDApIHsKICAgIHJldHVybiBmbjsKICB9CgogIHZhciB0aW1lb3V0OwogIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgYXJncyA9IFtdLAogICAgICAgIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7CgogICAgd2hpbGUgKGxlbi0tKSB7CiAgICAgIGFyZ3NbbGVuXSA9IGFyZ3VtZW50c1tsZW5dOwogICAgfQoKICAgIHZhciBsYXRlciA9IGZ1bmN0aW9uIGxhdGVyKCkgewogICAgICB0aW1lb3V0ID0gbnVsbDsgLy8gY2hlY2sgaWYgdGhlIGZuIGNhbGwgd2FzIGNhbmNlbGxlZC4KCiAgICAgIGlmICghdG9rZW4uY2FuY2VsbGVkKSB7CiAgICAgICAgZm4uYXBwbHkodm9pZCAwLCBhcmdzKTsKICAgICAgfQogICAgfTsKCiAgICBjbGVhclRpbWVvdXQodGltZW91dCk7CiAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7CgogICAgaWYgKCF0aW1lb3V0KSB7CiAgICAgIGZuLmFwcGx5KHZvaWQgMCwgYXJncyk7CiAgICB9CiAgfTsKfTsKLyoqCiAqIEFwcGVuZHMgYSBydWxlIGRlZmluaXRpb24gdG8gYSBsaXN0IG9mIHJ1bGVzLgogKi8KCgp2YXIgYXBwZW5kUnVsZSA9IGZ1bmN0aW9uIGFwcGVuZFJ1bGUocnVsZSwgcnVsZXMpIHsKICBpZiAoIXJ1bGVzKSB7CiAgICByZXR1cm4gbm9ybWFsaXplUnVsZXMocnVsZSk7CiAgfQoKICBpZiAoIXJ1bGUpIHsKICAgIHJldHVybiBub3JtYWxpemVSdWxlcyhydWxlcyk7CiAgfQoKICBpZiAodHlwZW9mIHJ1bGVzID09PSAnc3RyaW5nJykgewogICAgcnVsZXMgPSBub3JtYWxpemVSdWxlcyhydWxlcyk7CiAgfQoKICByZXR1cm4gYXNzaWduKHt9LCBydWxlcywgbm9ybWFsaXplUnVsZXMocnVsZSkpOwp9OwovKioKICogTm9ybWFsaXplcyB0aGUgZ2l2ZW4gcnVsZXMgZXhwcmVzc2lvbi4KICovCgoKdmFyIG5vcm1hbGl6ZVJ1bGVzID0gZnVuY3Rpb24gbm9ybWFsaXplUnVsZXMocnVsZXMpIHsKICAvLyBpZiBmYWxzeSB2YWx1ZSByZXR1cm4gYW4gZW1wdHkgb2JqZWN0LgogIGlmICghcnVsZXMpIHsKICAgIHJldHVybiB7fTsKICB9CgogIGlmIChpc09iamVjdChydWxlcykpIHsKICAgIC8vICRGbG93Rml4TWUKICAgIHJldHVybiBPYmplY3Qua2V5cyhydWxlcykucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCBjdXJyKSB7CiAgICAgIHZhciBwYXJhbXMgPSBbXTsgLy8gJEZsb3dGaXhNZQoKICAgICAgaWYgKHJ1bGVzW2N1cnJdID09PSB0cnVlKSB7CiAgICAgICAgcGFyYW1zID0gW107CiAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShydWxlc1tjdXJyXSkpIHsKICAgICAgICBwYXJhbXMgPSBydWxlc1tjdXJyXTsKICAgICAgfSBlbHNlIGlmIChpc09iamVjdChydWxlc1tjdXJyXSkpIHsKICAgICAgICBwYXJhbXMgPSBydWxlc1tjdXJyXTsKICAgICAgfSBlbHNlIHsKICAgICAgICBwYXJhbXMgPSBbcnVsZXNbY3Vycl1dOwogICAgICB9IC8vICRGbG93Rml4TWUKCgogICAgICBpZiAocnVsZXNbY3Vycl0gIT09IGZhbHNlKSB7CiAgICAgICAgcHJldltjdXJyXSA9IHBhcmFtczsKICAgICAgfQoKICAgICAgcmV0dXJuIHByZXY7CiAgICB9LCB7fSk7CiAgfQoKICBpZiAodHlwZW9mIHJ1bGVzICE9PSAnc3RyaW5nJykgewogICAgd2FybigncnVsZXMgbXVzdCBiZSBlaXRoZXIgYSBzdHJpbmcgb3IgYW4gb2JqZWN0LicpOwogICAgcmV0dXJuIHt9OwogIH0KCiAgcmV0dXJuIHJ1bGVzLnNwbGl0KCd8JykucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCBydWxlKSB7CiAgICB2YXIgcGFyc2VkUnVsZSA9IHBhcnNlUnVsZShydWxlKTsKCiAgICBpZiAoIXBhcnNlZFJ1bGUubmFtZSkgewogICAgICByZXR1cm4gcHJldjsKICAgIH0KCiAgICBwcmV2W3BhcnNlZFJ1bGUubmFtZV0gPSBwYXJzZWRSdWxlLnBhcmFtczsKICAgIHJldHVybiBwcmV2OwogIH0sIHt9KTsKfTsKLyoqCiAqIEVtaXRzIGEgd2FybmluZyB0byB0aGUgY29uc29sZS4KICovCgoKdmFyIHdhcm4gPSBmdW5jdGlvbiB3YXJuKG1lc3NhZ2UpIHsKICBjb25zb2xlLndhcm4oIlt2ZWUtdmFsaWRhdGVdICIgKyBtZXNzYWdlKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZQp9OwovKioKICogQ3JlYXRlcyBhIGJyYW5kZWQgZXJyb3Igb2JqZWN0LgogKi8KCgp2YXIgY3JlYXRlRXJyb3IgPSBmdW5jdGlvbiBjcmVhdGVFcnJvcihtZXNzYWdlKSB7CiAgcmV0dXJuIG5ldyBFcnJvcigiW3ZlZS12YWxpZGF0ZV0gIiArIG1lc3NhZ2UpOwp9OwovKioKICogQ2hlY2tzIGlmIHRoZSB2YWx1ZSBpcyBhbiBvYmplY3QuCiAqLwoKCnZhciBpc09iamVjdCA9IGZ1bmN0aW9uIGlzT2JqZWN0KG9iaikgewogIHJldHVybiBvYmogIT09IG51bGwgJiYgb2JqICYmIF90eXBlb2YyKG9iaikgPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KG9iaik7Cn07Ci8qKgogKiBDaGVja3MgaWYgYSBmdW5jdGlvbiBpcyBjYWxsYWJsZS4KICovCgoKdmFyIGlzQ2FsbGFibGUgPSBmdW5jdGlvbiBpc0NhbGxhYmxlKGZ1bmMpIHsKICByZXR1cm4gdHlwZW9mIGZ1bmMgPT09ICdmdW5jdGlvbic7Cn07Ci8qKgogKiBDaGVjayBpZiBlbGVtZW50IGhhcyB0aGUgY3NzIGNsYXNzIG9uIGl0LgogKi8KCgp2YXIgaGFzQ2xhc3MgPSBmdW5jdGlvbiBoYXNDbGFzcyhlbCwgY2xhc3NOYW1lKSB7CiAgaWYgKGVsLmNsYXNzTGlzdCkgewogICAgcmV0dXJuIGVsLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpOwogIH0KCiAgcmV0dXJuICEhZWwuY2xhc3NOYW1lLm1hdGNoKG5ldyBSZWdFeHAoIihcXHN8XikiICsgY2xhc3NOYW1lICsgIihcXHN8JCkiKSk7Cn07Ci8qKgogKiBBZGRzIHRoZSBwcm92aWRlZCBjc3MgY2xhc3NOYW1lIHRvIHRoZSBlbGVtZW50LgogKi8KCgp2YXIgYWRkQ2xhc3MgPSBmdW5jdGlvbiBhZGRDbGFzcyhlbCwgY2xhc3NOYW1lKSB7CiAgaWYgKGVsLmNsYXNzTGlzdCkgewogICAgZWwuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpOwogICAgcmV0dXJuOwogIH0KCiAgaWYgKCFoYXNDbGFzcyhlbCwgY2xhc3NOYW1lKSkgewogICAgZWwuY2xhc3NOYW1lICs9ICIgIiArIGNsYXNzTmFtZTsKICB9Cn07Ci8qKgogKiBSZW1vdmUgdGhlIHByb3ZpZGVkIGNzcyBjbGFzc05hbWUgZnJvbSB0aGUgZWxlbWVudC4KICovCgoKdmFyIHJlbW92ZUNsYXNzID0gZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWwsIGNsYXNzTmFtZSkgewogIGlmIChlbC5jbGFzc0xpc3QpIHsKICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTsKICAgIHJldHVybjsKICB9CgogIGlmIChoYXNDbGFzcyhlbCwgY2xhc3NOYW1lKSkgewogICAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoIihcXHN8XikiICsgY2xhc3NOYW1lICsgIihcXHN8JCkiKTsKICAgIGVsLmNsYXNzTmFtZSA9IGVsLmNsYXNzTmFtZS5yZXBsYWNlKHJlZywgJyAnKTsKICB9Cn07Ci8qKgogKiBBZGRzIG9yIHJlbW92ZXMgYSBjbGFzcyBuYW1lIG9uIHRoZSBpbnB1dCBkZXBlbmRpbmcgb24gdGhlIHN0YXR1cyBmbGFnLgogKi8KCgp2YXIgdG9nZ2xlQ2xhc3MgPSBmdW5jdGlvbiB0b2dnbGVDbGFzcyhlbCwgY2xhc3NOYW1lLCBzdGF0dXMpIHsKICBpZiAoIWVsIHx8ICFjbGFzc05hbWUpIHsKICAgIHJldHVybjsKICB9CgogIGlmIChBcnJheS5pc0FycmF5KGNsYXNzTmFtZSkpIHsKICAgIGNsYXNzTmFtZS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIHJldHVybiB0b2dnbGVDbGFzcyhlbCwgaXRlbSwgc3RhdHVzKTsKICAgIH0pOwogICAgcmV0dXJuOwogIH0KCiAgaWYgKHN0YXR1cykgewogICAgcmV0dXJuIGFkZENsYXNzKGVsLCBjbGFzc05hbWUpOwogIH0KCiAgcmVtb3ZlQ2xhc3MoZWwsIGNsYXNzTmFtZSk7Cn07Ci8qKgogKiBDb252ZXJ0cyBhbiBhcnJheS1saWtlIG9iamVjdCB0byBhcnJheSwgcHJvdmlkZXMgYSBzaW1wbGUgcG9seWZpbGwgZm9yIEFycmF5LmZyb20KICovCgoKdmFyIHRvQXJyYXkgPSBmdW5jdGlvbiB0b0FycmF5KGFycmF5TGlrZSkgewogIGlmIChpc0NhbGxhYmxlKEFycmF5LmZyb20pKSB7CiAgICByZXR1cm4gQXJyYXkuZnJvbShhcnJheUxpa2UpOwogIH0KCiAgdmFyIGFycmF5ID0gW107CiAgdmFyIGxlbmd0aCA9IGFycmF5TGlrZS5sZW5ndGg7CiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewogICAgYXJyYXkucHVzaChhcnJheUxpa2VbaV0pOwogIH0KICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwoKCiAgcmV0dXJuIGFycmF5Owp9OwovKioKICogQ29udmVydHMgYW4gYXJyYXktbGlrZSBvYmplY3QgdG8gYXJyYXkgYW5kIHBsYWNlIG90aGVyIGVsZW1lbnRzIGluIGFuIGFycmF5CiAqLwoKCnZhciBlbnN1cmVBcnJheSA9IGZ1bmN0aW9uIGVuc3VyZUFycmF5KGFycmF5TGlrZSkgewogIGlmIChBcnJheS5pc0FycmF5KGFycmF5TGlrZSkpIHsKICAgIHJldHVybiBbXS5jb25jYXQoYXJyYXlMaWtlKTsKICB9CgogIHZhciBhcnJheSA9IHRvQXJyYXkoYXJyYXlMaWtlKTsKICByZXR1cm4gaXNFbXB0eUFycmF5KGFycmF5KSA/IFthcnJheUxpa2VdIDogYXJyYXk7Cn07Ci8qKgogKiBBc3NpZ24gcG9seWZpbGwgZnJvbSB0aGUgbWRuLgogKi8KCgp2YXIgYXNzaWduID0gZnVuY3Rpb24gYXNzaWduKHRhcmdldCkgewogIHZhciBvdGhlcnMgPSBbXSwKICAgICAgbGVuID0gYXJndW1lbnRzLmxlbmd0aCAtIDE7CgogIHdoaWxlIChsZW4tLSA+IDApIHsKICAgIG90aGVyc1tsZW5dID0gYXJndW1lbnRzW2xlbiArIDFdOwogIH0KICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqLwoKCiAgaWYgKGlzQ2FsbGFibGUoT2JqZWN0LmFzc2lnbikpIHsKICAgIHJldHVybiBPYmplY3QuYXNzaWduLmFwcGx5KE9iamVjdCwgW3RhcmdldF0uY29uY2F0KG90aGVycykpOwogIH0KICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwoKCiAgaWYgKHRhcmdldCA9PSBudWxsKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3QnKTsKICB9CiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KCgogIHZhciB0byA9IE9iamVjdCh0YXJnZXQpOwogIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCgogIG90aGVycy5mb3JFYWNoKGZ1bmN0aW9uIChhcmcpIHsKICAgIC8vIFNraXAgb3ZlciBpZiB1bmRlZmluZWQgb3IgbnVsbAogICAgaWYgKGFyZyAhPSBudWxsKSB7CiAgICAgIE9iamVjdC5rZXlzKGFyZykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgdG9ba2V5XSA9IGFyZ1trZXldOwogICAgICB9KTsKICAgIH0KICB9KTsKICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwoKICByZXR1cm4gdG87Cn07Cgp2YXIgaWQgPSAwOwp2YXIgaWRUZW1wbGF0ZSA9ICd7aWR9JzsKLyoqCiAqIEdlbmVyYXRlcyBhIHVuaXF1ZSBpZC4KICovCgp2YXIgdW5pcUlkID0gZnVuY3Rpb24gdW5pcUlkKCkgewogIC8vIGhhbmRsZSB0b28gbWFueSB1c2VzIG9mIHVuaXFJZCwgYWx0aG91Z2ggdW5saWtlbHkuCiAgaWYgKGlkID49IDk5OTkpIHsKICAgIGlkID0gMDsgLy8gc2hpZnQgdGhlIHRlbXBsYXRlLgoKICAgIGlkVGVtcGxhdGUgPSBpZFRlbXBsYXRlLnJlcGxhY2UoJ3tpZH0nLCAnX3tpZH0nKTsKICB9CgogIGlkKys7CiAgdmFyIG5ld0lkID0gaWRUZW1wbGF0ZS5yZXBsYWNlKCd7aWR9JywgU3RyaW5nKGlkKSk7CiAgcmV0dXJuIG5ld0lkOwp9OwoKdmFyIGZpbmRJbmRleCA9IGZ1bmN0aW9uIGZpbmRJbmRleChhcnJheUxpa2UsIHByZWRpY2F0ZSkgewogIHZhciBhcnJheSA9IEFycmF5LmlzQXJyYXkoYXJyYXlMaWtlKSA/IGFycmF5TGlrZSA6IHRvQXJyYXkoYXJyYXlMaWtlKTsKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykgewogICAgaWYgKHByZWRpY2F0ZShhcnJheVtpXSkpIHsKICAgICAgcmV0dXJuIGk7CiAgICB9CiAgfQoKICByZXR1cm4gLTE7Cn07Ci8qKgogKiBmaW5kcyB0aGUgZmlyc3QgZWxlbWVudCB0aGF0IHNhdGlzZmllcyB0aGUgcHJlZGljYXRlIGNhbGxiYWNrLCBwb2x5ZmlsbHMgYXJyYXkuZmluZAogKi8KCgp2YXIgZmluZCA9IGZ1bmN0aW9uIGZpbmQoYXJyYXlMaWtlLCBwcmVkaWNhdGUpIHsKICB2YXIgYXJyYXkgPSBBcnJheS5pc0FycmF5KGFycmF5TGlrZSkgPyBhcnJheUxpa2UgOiB0b0FycmF5KGFycmF5TGlrZSk7CiAgdmFyIGlkeCA9IGZpbmRJbmRleChhcnJheSwgcHJlZGljYXRlKTsKICByZXR1cm4gaWR4ID09PSAtMSA/IHVuZGVmaW5lZCA6IGFycmF5W2lkeF07Cn07Cgp2YXIgaXNCdWlsdEluQ29tcG9uZW50ID0gZnVuY3Rpb24gaXNCdWlsdEluQ29tcG9uZW50KHZub2RlKSB7CiAgaWYgKCF2bm9kZSkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgdmFyIHRhZyA9IHZub2RlLmNvbXBvbmVudE9wdGlvbnMudGFnOwogIHJldHVybiAvXihrZWVwLWFsaXZlfHRyYW5zaXRpb258dHJhbnNpdGlvbi1ncm91cCkkLy50ZXN0KHRhZyk7Cn07Cgp2YXIgbWFrZURlbGF5T2JqZWN0ID0gZnVuY3Rpb24gbWFrZURlbGF5T2JqZWN0KGV2ZW50cywgZGVsYXksIGRlbGF5Q29uZmlnKSB7CiAgaWYgKHR5cGVvZiBkZWxheSA9PT0gJ251bWJlcicpIHsKICAgIHJldHVybiBldmVudHMucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCBlKSB7CiAgICAgIHByZXZbZV0gPSBkZWxheTsKICAgICAgcmV0dXJuIHByZXY7CiAgICB9LCB7fSk7CiAgfQoKICByZXR1cm4gZXZlbnRzLnJlZHVjZShmdW5jdGlvbiAocHJldiwgZSkgewogICAgaWYgKF90eXBlb2YyKGRlbGF5KSA9PT0gJ29iamVjdCcgJiYgZSBpbiBkZWxheSkgewogICAgICBwcmV2W2VdID0gZGVsYXlbZV07CiAgICAgIHJldHVybiBwcmV2OwogICAgfQoKICAgIGlmICh0eXBlb2YgZGVsYXlDb25maWcgPT09ICdudW1iZXInKSB7CiAgICAgIHByZXZbZV0gPSBkZWxheUNvbmZpZzsKICAgICAgcmV0dXJuIHByZXY7CiAgICB9CgogICAgcHJldltlXSA9IGRlbGF5Q29uZmlnICYmIGRlbGF5Q29uZmlnW2VdIHx8IDA7CiAgICByZXR1cm4gcHJldjsKICB9LCB7fSk7Cn07Cgp2YXIgZGVlcFBhcnNlSW50ID0gZnVuY3Rpb24gZGVlcFBhcnNlSW50KGlucHV0KSB7CiAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ251bWJlcicpIHsKICAgIHJldHVybiBpbnB1dDsKICB9CgogIGlmICh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnKSB7CiAgICByZXR1cm4gcGFyc2VJbnQoaW5wdXQpOwogIH0KCiAgdmFyIG1hcCA9IHt9OwoKICBmb3IgKHZhciBlbGVtZW50IGluIGlucHV0KSB7CiAgICBtYXBbZWxlbWVudF0gPSBwYXJzZUludChpbnB1dFtlbGVtZW50XSk7CiAgfQoKICByZXR1cm4gbWFwOwp9OwoKdmFyIG1lcmdlID0gZnVuY3Rpb24gbWVyZ2UodGFyZ2V0LCBzb3VyY2UpIHsKICBpZiAoIShpc09iamVjdCh0YXJnZXQpICYmIGlzT2JqZWN0KHNvdXJjZSkpKSB7CiAgICByZXR1cm4gdGFyZ2V0OwogIH0KCiAgT2JqZWN0LmtleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgIHZhciBvYmosIG9iaiQxOwoKICAgIGlmIChpc09iamVjdChzb3VyY2Vba2V5XSkpIHsKICAgICAgaWYgKCF0YXJnZXRba2V5XSkgewogICAgICAgIGFzc2lnbih0YXJnZXQsIChvYmogPSB7fSwgb2JqW2tleV0gPSB7fSwgb2JqKSk7CiAgICAgIH0KCiAgICAgIG1lcmdlKHRhcmdldFtrZXldLCBzb3VyY2Vba2V5XSk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBhc3NpZ24odGFyZ2V0LCAob2JqJDEgPSB7fSwgb2JqJDFba2V5XSA9IHNvdXJjZVtrZXldLCBvYmokMSkpOwogIH0pOwogIHJldHVybiB0YXJnZXQ7Cn07Cgp2YXIgZmlsbFJ1bGVzRnJvbUVsZW1lbnQgPSBmdW5jdGlvbiBmaWxsUnVsZXNGcm9tRWxlbWVudChlbCwgcnVsZXMpIHsKICBpZiAoZWwucmVxdWlyZWQpIHsKICAgIHJ1bGVzID0gYXBwZW5kUnVsZSgncmVxdWlyZWQnLCBydWxlcyk7CiAgfQoKICBpZiAoaXNUZXh0SW5wdXQoZWwpKSB7CiAgICBpZiAoZWwudHlwZSA9PT0gJ2VtYWlsJykgewogICAgICBydWxlcyA9IGFwcGVuZFJ1bGUoImVtYWlsIiArIChlbC5tdWx0aXBsZSA/ICc6bXVsdGlwbGUnIDogJycpLCBydWxlcyk7CiAgICB9CgogICAgaWYgKGVsLnBhdHRlcm4pIHsKICAgICAgcnVsZXMgPSBhcHBlbmRSdWxlKHsKICAgICAgICByZWdleDogZWwucGF0dGVybgogICAgICB9LCBydWxlcyk7CiAgICB9IC8vIDUyNDI4OCBpcyB0aGUgbWF4IG9uIHNvbWUgYnJvd3NlcnMgYW5kIHRlc3QgZW52aXJvbm1lbnRzLgoKCiAgICBpZiAoZWwubWF4TGVuZ3RoID49IDAgJiYgZWwubWF4TGVuZ3RoIDwgNTI0Mjg4KSB7CiAgICAgIHJ1bGVzID0gYXBwZW5kUnVsZSgibWF4OiIgKyBlbC5tYXhMZW5ndGgsIHJ1bGVzKTsKICAgIH0KCiAgICBpZiAoZWwubWluTGVuZ3RoID4gMCkgewogICAgICBydWxlcyA9IGFwcGVuZFJ1bGUoIm1pbjoiICsgZWwubWluTGVuZ3RoLCBydWxlcyk7CiAgICB9CgogICAgaWYgKGVsLnR5cGUgPT09ICdudW1iZXInKSB7CiAgICAgIHJ1bGVzID0gYXBwZW5kUnVsZSgnZGVjaW1hbCcsIHJ1bGVzKTsKCiAgICAgIGlmIChlbC5taW4gIT09ICcnKSB7CiAgICAgICAgcnVsZXMgPSBhcHBlbmRSdWxlKCJtaW5fdmFsdWU6IiArIGVsLm1pbiwgcnVsZXMpOwogICAgICB9CgogICAgICBpZiAoZWwubWF4ICE9PSAnJykgewogICAgICAgIHJ1bGVzID0gYXBwZW5kUnVsZSgibWF4X3ZhbHVlOiIgKyBlbC5tYXgsIHJ1bGVzKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBydWxlczsKICB9CgogIGlmIChpc0RhdGVJbnB1dChlbCkpIHsKICAgIHZhciB0aW1lRm9ybWF0ID0gZWwuc3RlcCAmJiBOdW1iZXIoZWwuc3RlcCkgPCA2MCA/ICdISDptbTpzcycgOiAnSEg6bW0nOwoKICAgIGlmIChlbC50eXBlID09PSAnZGF0ZScpIHsKICAgICAgcmV0dXJuIGFwcGVuZFJ1bGUoJ2RhdGVfZm9ybWF0Onl5eXktTU0tZGQnLCBydWxlcyk7CiAgICB9CgogICAgaWYgKGVsLnR5cGUgPT09ICdkYXRldGltZS1sb2NhbCcpIHsKICAgICAgcmV0dXJuIGFwcGVuZFJ1bGUoImRhdGVfZm9ybWF0Onl5eXktTU0tZGRUIiArIHRpbWVGb3JtYXQsIHJ1bGVzKTsKICAgIH0KCiAgICBpZiAoZWwudHlwZSA9PT0gJ21vbnRoJykgewogICAgICByZXR1cm4gYXBwZW5kUnVsZSgnZGF0ZV9mb3JtYXQ6eXl5eS1NTScsIHJ1bGVzKTsKICAgIH0KCiAgICBpZiAoZWwudHlwZSA9PT0gJ3dlZWsnKSB7CiAgICAgIHJldHVybiBhcHBlbmRSdWxlKCdkYXRlX2Zvcm1hdDp5eXl5LVtXXVdXJywgcnVsZXMpOwogICAgfQoKICAgIGlmIChlbC50eXBlID09PSAndGltZScpIHsKICAgICAgcmV0dXJuIGFwcGVuZFJ1bGUoImRhdGVfZm9ybWF0OiIgKyB0aW1lRm9ybWF0LCBydWxlcyk7CiAgICB9CiAgfQoKICByZXR1cm4gcnVsZXM7Cn07Cgp2YXIgdmFsdWVzID0gZnVuY3Rpb24gdmFsdWVzKG9iaikgewogIGlmIChpc0NhbGxhYmxlKE9iamVjdC52YWx1ZXMpKSB7CiAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhvYmopOwogIH0gLy8gZmFsbGJhY2sgdG8ga2V5cygpCgogIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCgoKICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5tYXAoZnVuY3Rpb24gKGspIHsKICAgIHJldHVybiBvYmpba107CiAgfSk7Cn07Cgp2YXIgcGFyc2VTZWxlY3RvciA9IGZ1bmN0aW9uIHBhcnNlU2VsZWN0b3Ioc2VsZWN0b3IpIHsKICB2YXIgcnVsZSA9IG51bGw7CgogIGlmIChpbmNsdWRlcyhzZWxlY3RvciwgJzonKSkgewogICAgcnVsZSA9IHNlbGVjdG9yLnNwbGl0KCc6JykucG9wKCk7CiAgICBzZWxlY3RvciA9IHNlbGVjdG9yLnJlcGxhY2UoIjoiICsgcnVsZSwgJycpOwogIH0KCiAgaWYgKHNlbGVjdG9yWzBdID09PSAnIycpIHsKICAgIHJldHVybiB7CiAgICAgIGlkOiBzZWxlY3Rvci5zbGljZSgxKSwKICAgICAgcnVsZTogcnVsZSwKICAgICAgbmFtZTogbnVsbCwKICAgICAgc2NvcGU6IG51bGwKICAgIH07CiAgfQoKICB2YXIgc2NvcGUgPSBudWxsOwogIHZhciBuYW1lID0gc2VsZWN0b3I7CgogIGlmIChpbmNsdWRlcyhzZWxlY3RvciwgJy4nKSkgewogICAgdmFyIHBhcnRzID0gc2VsZWN0b3Iuc3BsaXQoJy4nKTsKICAgIHNjb3BlID0gcGFydHNbMF07CiAgICBuYW1lID0gcGFydHMuc2xpY2UoMSkuam9pbignLicpOwogIH0KCiAgcmV0dXJuIHsKICAgIGlkOiBudWxsLAogICAgc2NvcGU6IHNjb3BlLAogICAgbmFtZTogbmFtZSwKICAgIHJ1bGU6IHJ1bGUKICB9Owp9OwoKdmFyIGluY2x1ZGVzID0gZnVuY3Rpb24gaW5jbHVkZXMoY29sbGVjdGlvbiwgaXRlbSkgewogIHJldHVybiBjb2xsZWN0aW9uLmluZGV4T2YoaXRlbSkgIT09IC0xOwp9OwoKdmFyIGlzRW1wdHlBcnJheSA9IGZ1bmN0aW9uIGlzRW1wdHlBcnJheShhcnIpIHsKICByZXR1cm4gQXJyYXkuaXNBcnJheShhcnIpICYmIGFyci5sZW5ndGggPT09IDA7Cn07Cgp2YXIgZGVmaW5lTm9uUmVhY3RpdmUgPSBmdW5jdGlvbiBkZWZpbmVOb25SZWFjdGl2ZShvYmosIHByb3AsIHZhbHVlKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgcHJvcCwgewogICAgY29uZmlndXJhYmxlOiBmYWxzZSwKICAgIHdyaXRhYmxlOiB0cnVlLAogICAgdmFsdWU6IHZhbHVlCiAgfSk7Cn07IC8vIAoKCnZhciBMT0NBTEUgPSAnZW4nOwoKdmFyIERpY3Rpb25hcnkgPSBmdW5jdGlvbiBEaWN0aW9uYXJ5KGRpY3Rpb25hcnkpIHsKICBpZiAoZGljdGlvbmFyeSA9PT0gdm9pZCAwKSBkaWN0aW9uYXJ5ID0ge307CiAgdGhpcy5jb250YWluZXIgPSB7fTsKICB0aGlzLm1lcmdlKGRpY3Rpb25hcnkpOwp9OwoKdmFyIHByb3RvdHlwZUFjY2Vzc29ycyA9IHsKICBsb2NhbGU6IHsKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogIH0KfTsKCnByb3RvdHlwZUFjY2Vzc29ycy5sb2NhbGUuZ2V0ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBMT0NBTEU7Cn07Cgpwcm90b3R5cGVBY2Nlc3NvcnMubG9jYWxlLnNldCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIExPQ0FMRSA9IHZhbHVlIHx8ICdlbic7Cn07CgpEaWN0aW9uYXJ5LnByb3RvdHlwZS5oYXNMb2NhbGUgPSBmdW5jdGlvbiBoYXNMb2NhbGUobG9jYWxlKSB7CiAgcmV0dXJuICEhdGhpcy5jb250YWluZXJbbG9jYWxlXTsKfTsKCkRpY3Rpb25hcnkucHJvdG90eXBlLnNldERhdGVGb3JtYXQgPSBmdW5jdGlvbiBzZXREYXRlRm9ybWF0KGxvY2FsZSwgZm9ybWF0KSB7CiAgaWYgKCF0aGlzLmNvbnRhaW5lcltsb2NhbGVdKSB7CiAgICB0aGlzLmNvbnRhaW5lcltsb2NhbGVdID0ge307CiAgfQoKICB0aGlzLmNvbnRhaW5lcltsb2NhbGVdLmRhdGVGb3JtYXQgPSBmb3JtYXQ7Cn07CgpEaWN0aW9uYXJ5LnByb3RvdHlwZS5nZXREYXRlRm9ybWF0ID0gZnVuY3Rpb24gZ2V0RGF0ZUZvcm1hdChsb2NhbGUpIHsKICBpZiAoIXRoaXMuY29udGFpbmVyW2xvY2FsZV0gfHwgIXRoaXMuY29udGFpbmVyW2xvY2FsZV0uZGF0ZUZvcm1hdCkgewogICAgcmV0dXJuIG51bGw7CiAgfQoKICByZXR1cm4gdGhpcy5jb250YWluZXJbbG9jYWxlXS5kYXRlRm9ybWF0Owp9OwoKRGljdGlvbmFyeS5wcm90b3R5cGUuZ2V0TWVzc2FnZSA9IGZ1bmN0aW9uIGdldE1lc3NhZ2UobG9jYWxlLCBrZXksIGRhdGEpIHsKICB2YXIgbWVzc2FnZSA9IG51bGw7CgogIGlmICghdGhpcy5oYXNNZXNzYWdlKGxvY2FsZSwga2V5KSkgewogICAgbWVzc2FnZSA9IHRoaXMuX2dldERlZmF1bHRNZXNzYWdlKGxvY2FsZSk7CiAgfSBlbHNlIHsKICAgIG1lc3NhZ2UgPSB0aGlzLmNvbnRhaW5lcltsb2NhbGVdLm1lc3NhZ2VzW2tleV07CiAgfQoKICByZXR1cm4gaXNDYWxsYWJsZShtZXNzYWdlKSA/IG1lc3NhZ2UuYXBwbHkodm9pZCAwLCBkYXRhKSA6IG1lc3NhZ2U7Cn07Ci8qKgogKiBHZXRzIGEgc3BlY2lmaWMgbWVzc2FnZSBmb3IgZmllbGQuIGZhbGxzIGJhY2sgdG8gdGhlIHJ1bGUgbWVzc2FnZS4KICovCgoKRGljdGlvbmFyeS5wcm90b3R5cGUuZ2V0RmllbGRNZXNzYWdlID0gZnVuY3Rpb24gZ2V0RmllbGRNZXNzYWdlKGxvY2FsZSwgZmllbGQsIGtleSwgZGF0YSkgewogIGlmICghdGhpcy5oYXNMb2NhbGUobG9jYWxlKSkgewogICAgcmV0dXJuIHRoaXMuZ2V0TWVzc2FnZShsb2NhbGUsIGtleSwgZGF0YSk7CiAgfQoKICB2YXIgZGljdCA9IHRoaXMuY29udGFpbmVyW2xvY2FsZV0uY3VzdG9tICYmIHRoaXMuY29udGFpbmVyW2xvY2FsZV0uY3VzdG9tW2ZpZWxkXTsKCiAgaWYgKCFkaWN0IHx8ICFkaWN0W2tleV0pIHsKICAgIHJldHVybiB0aGlzLmdldE1lc3NhZ2UobG9jYWxlLCBrZXksIGRhdGEpOwogIH0KCiAgdmFyIG1lc3NhZ2UgPSBkaWN0W2tleV07CiAgcmV0dXJuIGlzQ2FsbGFibGUobWVzc2FnZSkgPyBtZXNzYWdlLmFwcGx5KHZvaWQgMCwgZGF0YSkgOiBtZXNzYWdlOwp9OwoKRGljdGlvbmFyeS5wcm90b3R5cGUuX2dldERlZmF1bHRNZXNzYWdlID0gZnVuY3Rpb24gX2dldERlZmF1bHRNZXNzYWdlKGxvY2FsZSkgewogIGlmICh0aGlzLmhhc01lc3NhZ2UobG9jYWxlLCAnX2RlZmF1bHQnKSkgewogICAgcmV0dXJuIHRoaXMuY29udGFpbmVyW2xvY2FsZV0ubWVzc2FnZXMuX2RlZmF1bHQ7CiAgfQoKICByZXR1cm4gdGhpcy5jb250YWluZXIuZW4ubWVzc2FnZXMuX2RlZmF1bHQ7Cn07CgpEaWN0aW9uYXJ5LnByb3RvdHlwZS5nZXRBdHRyaWJ1dGUgPSBmdW5jdGlvbiBnZXRBdHRyaWJ1dGUobG9jYWxlLCBrZXksIGZhbGxiYWNrKSB7CiAgaWYgKGZhbGxiYWNrID09PSB2b2lkIDApIGZhbGxiYWNrID0gJyc7CgogIGlmICghdGhpcy5oYXNBdHRyaWJ1dGUobG9jYWxlLCBrZXkpKSB7CiAgICByZXR1cm4gZmFsbGJhY2s7CiAgfQoKICByZXR1cm4gdGhpcy5jb250YWluZXJbbG9jYWxlXS5hdHRyaWJ1dGVzW2tleV07Cn07CgpEaWN0aW9uYXJ5LnByb3RvdHlwZS5oYXNNZXNzYWdlID0gZnVuY3Rpb24gaGFzTWVzc2FnZShsb2NhbGUsIGtleSkgewogIHJldHVybiAhISh0aGlzLmhhc0xvY2FsZShsb2NhbGUpICYmIHRoaXMuY29udGFpbmVyW2xvY2FsZV0ubWVzc2FnZXMgJiYgdGhpcy5jb250YWluZXJbbG9jYWxlXS5tZXNzYWdlc1trZXldKTsKfTsKCkRpY3Rpb25hcnkucHJvdG90eXBlLmhhc0F0dHJpYnV0ZSA9IGZ1bmN0aW9uIGhhc0F0dHJpYnV0ZShsb2NhbGUsIGtleSkgewogIHJldHVybiAhISh0aGlzLmhhc0xvY2FsZShsb2NhbGUpICYmIHRoaXMuY29udGFpbmVyW2xvY2FsZV0uYXR0cmlidXRlcyAmJiB0aGlzLmNvbnRhaW5lcltsb2NhbGVdLmF0dHJpYnV0ZXNba2V5XSk7Cn07CgpEaWN0aW9uYXJ5LnByb3RvdHlwZS5tZXJnZSA9IGZ1bmN0aW9uIG1lcmdlJDEoZGljdGlvbmFyeSkgewogIG1lcmdlKHRoaXMuY29udGFpbmVyLCBkaWN0aW9uYXJ5KTsKfTsKCkRpY3Rpb25hcnkucHJvdG90eXBlLnNldE1lc3NhZ2UgPSBmdW5jdGlvbiBzZXRNZXNzYWdlKGxvY2FsZSwga2V5LCBtZXNzYWdlKSB7CiAgaWYgKCF0aGlzLmhhc0xvY2FsZShsb2NhbGUpKSB7CiAgICB0aGlzLmNvbnRhaW5lcltsb2NhbGVdID0gewogICAgICBtZXNzYWdlczoge30sCiAgICAgIGF0dHJpYnV0ZXM6IHt9CiAgICB9OwogIH0KCiAgdGhpcy5jb250YWluZXJbbG9jYWxlXS5tZXNzYWdlc1trZXldID0gbWVzc2FnZTsKfTsKCkRpY3Rpb25hcnkucHJvdG90eXBlLnNldEF0dHJpYnV0ZSA9IGZ1bmN0aW9uIHNldEF0dHJpYnV0ZShsb2NhbGUsIGtleSwgYXR0cmlidXRlKSB7CiAgaWYgKCF0aGlzLmhhc0xvY2FsZShsb2NhbGUpKSB7CiAgICB0aGlzLmNvbnRhaW5lcltsb2NhbGVdID0gewogICAgICBtZXNzYWdlczoge30sCiAgICAgIGF0dHJpYnV0ZXM6IHt9CiAgICB9OwogIH0KCiAgdGhpcy5jb250YWluZXJbbG9jYWxlXS5hdHRyaWJ1dGVzW2tleV0gPSBhdHRyaWJ1dGU7Cn07CgpPYmplY3QuZGVmaW5lUHJvcGVydGllcyhEaWN0aW9uYXJ5LnByb3RvdHlwZSwgcHJvdG90eXBlQWNjZXNzb3JzKTsKdmFyIGRyaXZlcnMgPSB7CiAgImRlZmF1bHQiOiBuZXcgRGljdGlvbmFyeSh7CiAgICBlbjogewogICAgICBtZXNzYWdlczoge30sCiAgICAgIGF0dHJpYnV0ZXM6IHt9LAogICAgICBjdXN0b206IHt9CiAgICB9CiAgfSkKfTsKdmFyIGN1cnJlbnREcml2ZXIgPSAnZGVmYXVsdCc7Cgp2YXIgRGljdGlvbmFyeVJlc29sdmVyID0gZnVuY3Rpb24gRGljdGlvbmFyeVJlc29sdmVyKCkge307CgpEaWN0aW9uYXJ5UmVzb2x2ZXIuX2NoZWNrRHJpdmVyTmFtZSA9IGZ1bmN0aW9uIF9jaGVja0RyaXZlck5hbWUoZHJpdmVyKSB7CiAgaWYgKCFkcml2ZXIpIHsKICAgIHRocm93IGNyZWF0ZUVycm9yKCd5b3UgbXVzdCBwcm92aWRlIGEgbmFtZSB0byB0aGUgZGljdGlvbmFyeSBkcml2ZXInKTsKICB9Cn07CgpEaWN0aW9uYXJ5UmVzb2x2ZXIuc2V0RHJpdmVyID0gZnVuY3Rpb24gc2V0RHJpdmVyKGRyaXZlciwgaW1wbGVtZW50YXRpb24pIHsKICBpZiAoaW1wbGVtZW50YXRpb24gPT09IHZvaWQgMCkgaW1wbGVtZW50YXRpb24gPSBudWxsOwoKICB0aGlzLl9jaGVja0RyaXZlck5hbWUoZHJpdmVyKTsKCiAgaWYgKGltcGxlbWVudGF0aW9uKSB7CiAgICBkcml2ZXJzW2RyaXZlcl0gPSBpbXBsZW1lbnRhdGlvbjsKICB9CgogIGN1cnJlbnREcml2ZXIgPSBkcml2ZXI7Cn07CgpEaWN0aW9uYXJ5UmVzb2x2ZXIuZ2V0RHJpdmVyID0gZnVuY3Rpb24gZ2V0RHJpdmVyKCkgewogIHJldHVybiBkcml2ZXJzW2N1cnJlbnREcml2ZXJdOwp9OyAvLyAKCgp2YXIgRXJyb3JCYWcgPSBmdW5jdGlvbiBFcnJvckJhZyhlcnJvckJhZywgaWQpIHsKICBpZiAoZXJyb3JCYWcgPT09IHZvaWQgMCkgZXJyb3JCYWcgPSBudWxsOwogIGlmIChpZCA9PT0gdm9pZCAwKSBpZCA9IG51bGw7CiAgdGhpcy52bUlkID0gaWQgfHwgbnVsbDsgLy8gbWFrZSB0aGlzIGJhZyBhIG1pcnJvciBvZiB0aGUgcHJvdmlkZWQgb25lLCBzaGFyaW5nIHRoZSBzYW1lIGl0ZW1zIHJlZmVyZW5jZS4KCiAgaWYgKGVycm9yQmFnICYmIGVycm9yQmFnIGluc3RhbmNlb2YgRXJyb3JCYWcpIHsKICAgIHRoaXMuaXRlbXMgPSBlcnJvckJhZy5pdGVtczsKICB9IGVsc2UgewogICAgdGhpcy5pdGVtcyA9IFtdOwogIH0KfTsKCkVycm9yQmFnLnByb3RvdHlwZVt0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nID8gU3ltYm9sLml0ZXJhdG9yIDogJ0BAaXRlcmF0b3InXSA9IGZ1bmN0aW9uICgpIHsKICB2YXIgdGhpcyQxID0gdGhpczsKICB2YXIgaW5kZXggPSAwOwogIHJldHVybiB7CiAgICBuZXh0OiBmdW5jdGlvbiBuZXh0KCkgewogICAgICByZXR1cm4gewogICAgICAgIHZhbHVlOiB0aGlzJDEuaXRlbXNbaW5kZXgrK10sCiAgICAgICAgZG9uZTogaW5kZXggPiB0aGlzJDEuaXRlbXMubGVuZ3RoCiAgICAgIH07CiAgICB9CiAgfTsKfTsKLyoqCiAqIEFkZHMgYW4gZXJyb3IgdG8gdGhlIGludGVybmFsIGFycmF5LgogKi8KCgpFcnJvckJhZy5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gYWRkKGVycm9yKSB7CiAgdmFyIHJlZjsKICAocmVmID0gdGhpcy5pdGVtcykucHVzaC5hcHBseShyZWYsIHRoaXMuX25vcm1hbGl6ZUVycm9yKGVycm9yKSk7Cn07Ci8qKgogKiBOb3JtYWxpemVzIHBhc3NlZCBlcnJvcnMgdG8gYW4gZXJyb3IgYXJyYXkuCiAqLwoKCkVycm9yQmFnLnByb3RvdHlwZS5fbm9ybWFsaXplRXJyb3IgPSBmdW5jdGlvbiBfbm9ybWFsaXplRXJyb3IoZXJyb3IpIHsKICB2YXIgdGhpcyQxID0gdGhpczsKCiAgaWYgKEFycmF5LmlzQXJyYXkoZXJyb3IpKSB7CiAgICByZXR1cm4gZXJyb3IubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgIGUuc2NvcGUgPSAhaXNOdWxsT3JVbmRlZmluZWQoZS5zY29wZSkgPyBlLnNjb3BlIDogbnVsbDsKICAgICAgZS52bUlkID0gIWlzTnVsbE9yVW5kZWZpbmVkKGUudm1JZCkgPyBlLnZtSWQgOiB0aGlzJDEudm1JZCB8fCBudWxsOwogICAgICByZXR1cm4gZTsKICAgIH0pOwogIH0KCiAgZXJyb3Iuc2NvcGUgPSAhaXNOdWxsT3JVbmRlZmluZWQoZXJyb3Iuc2NvcGUpID8gZXJyb3Iuc2NvcGUgOiBudWxsOwogIGVycm9yLnZtSWQgPSAhaXNOdWxsT3JVbmRlZmluZWQoZXJyb3Iudm1JZCkgPyBlcnJvci52bUlkIDogdGhpcy52bUlkIHx8IG51bGw7CiAgcmV0dXJuIFtlcnJvcl07Cn07Ci8qKgogKiBSZWdlbnJhdGVzIGVycm9yIG1lc3NhZ2VzIGlmIHRoZXkgaGF2ZSBhIGdlbmVyYXRvciBmdW5jdGlvbi4KICovCgoKRXJyb3JCYWcucHJvdG90eXBlLnJlZ2VuZXJhdGUgPSBmdW5jdGlvbiByZWdlbmVyYXRlKCkgewogIHRoaXMuaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaSkgewogICAgaS5tc2cgPSBpc0NhbGxhYmxlKGkucmVnZW5lcmF0ZSkgPyBpLnJlZ2VuZXJhdGUoKSA6IGkubXNnOwogIH0pOwp9OwovKioKICogVXBkYXRlcyBhIGZpZWxkIGVycm9yIHdpdGggdGhlIG5ldyBmaWVsZCBzY29wZS4KICovCgoKRXJyb3JCYWcucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIHVwZGF0ZShpZCwgZXJyb3IpIHsKICB2YXIgaXRlbSA9IGZpbmQodGhpcy5pdGVtcywgZnVuY3Rpb24gKGkpIHsKICAgIHJldHVybiBpLmlkID09PSBpZDsKICB9KTsKCiAgaWYgKCFpdGVtKSB7CiAgICByZXR1cm47CiAgfQoKICB2YXIgaWR4ID0gdGhpcy5pdGVtcy5pbmRleE9mKGl0ZW0pOwogIHRoaXMuaXRlbXMuc3BsaWNlKGlkeCwgMSk7CiAgaXRlbS5zY29wZSA9IGVycm9yLnNjb3BlOwogIHRoaXMuaXRlbXMucHVzaChpdGVtKTsKfTsKLyoqCiAqIEdldHMgYWxsIGVycm9yIG1lc3NhZ2VzIGZyb20gdGhlIGludGVybmFsIGFycmF5LgogKi8KCgpFcnJvckJhZy5wcm90b3R5cGUuYWxsID0gZnVuY3Rpb24gYWxsKHNjb3BlKSB7CiAgdmFyIHRoaXMkMSA9IHRoaXM7CgogIHZhciBmaWx0ZXJGbiA9IGZ1bmN0aW9uIGZpbHRlckZuKGl0ZW0pIHsKICAgIHZhciBtYXRjaGVzU2NvcGUgPSB0cnVlOwogICAgdmFyIG1hdGNoZXNWTSA9IHRydWU7CgogICAgaWYgKCFpc051bGxPclVuZGVmaW5lZChzY29wZSkpIHsKICAgICAgbWF0Y2hlc1Njb3BlID0gaXRlbS5zY29wZSA9PT0gc2NvcGU7CiAgICB9CgogICAgaWYgKCFpc051bGxPclVuZGVmaW5lZCh0aGlzJDEudm1JZCkpIHsKICAgICAgbWF0Y2hlc1ZNID0gaXRlbS52bUlkID09PSB0aGlzJDEudm1JZDsKICAgIH0KCiAgICByZXR1cm4gbWF0Y2hlc1ZNICYmIG1hdGNoZXNTY29wZTsKICB9OwoKICByZXR1cm4gdGhpcy5pdGVtcy5maWx0ZXIoZmlsdGVyRm4pLm1hcChmdW5jdGlvbiAoZSkgewogICAgcmV0dXJuIGUubXNnOwogIH0pOwp9OwovKioKICogQ2hlY2tzIGlmIHRoZXJlIGFyZSBhbnkgZXJyb3JzIGluIHRoZSBpbnRlcm5hbCBhcnJheS4KICovCgoKRXJyb3JCYWcucHJvdG90eXBlLmFueSA9IGZ1bmN0aW9uIGFueShzY29wZSkgewogIHZhciB0aGlzJDEgPSB0aGlzOwoKICB2YXIgZmlsdGVyRm4gPSBmdW5jdGlvbiBmaWx0ZXJGbihpdGVtKSB7CiAgICB2YXIgbWF0Y2hlc1Njb3BlID0gdHJ1ZTsKICAgIHZhciBtYXRjaGVzVk0gPSB0cnVlOwoKICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQoc2NvcGUpKSB7CiAgICAgIG1hdGNoZXNTY29wZSA9IGl0ZW0uc2NvcGUgPT09IHNjb3BlOwogICAgfQoKICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQodGhpcyQxLnZtSWQpKSB7CiAgICAgIG1hdGNoZXNWTSA9IGl0ZW0udm1JZCA9PT0gdGhpcyQxLnZtSWQ7CiAgICB9CgogICAgcmV0dXJuIG1hdGNoZXNWTSAmJiBtYXRjaGVzU2NvcGU7CiAgfTsKCiAgcmV0dXJuICEhdGhpcy5pdGVtcy5maWx0ZXIoZmlsdGVyRm4pLmxlbmd0aDsKfTsKLyoqCiAqIFJlbW92ZXMgYWxsIGl0ZW1zIGZyb20gdGhlIGludGVybmFsIGFycmF5LgogKi8KCgpFcnJvckJhZy5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiBjbGVhcihzY29wZSkgewogIHZhciB0aGlzJDEgPSB0aGlzOwogIHZhciBtYXRjaGVzVk0gPSBpc051bGxPclVuZGVmaW5lZCh0aGlzLnZtSWQpID8gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRydWU7CiAgfSA6IGZ1bmN0aW9uIChpKSB7CiAgICByZXR1cm4gaS52bUlkID09PSB0aGlzJDEudm1JZDsKICB9OwoKICBpZiAoaXNOdWxsT3JVbmRlZmluZWQoc2NvcGUpKSB7CiAgICBzY29wZSA9IG51bGw7CiAgfQoKICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaXRlbXMubGVuZ3RoOyArK2kpIHsKICAgIGlmIChtYXRjaGVzVk0odGhpcy5pdGVtc1tpXSkgJiYgdGhpcy5pdGVtc1tpXS5zY29wZSA9PT0gc2NvcGUpIHsKICAgICAgdGhpcy5pdGVtcy5zcGxpY2UoaSwgMSk7CiAgICAgIC0taTsKICAgIH0KICB9Cn07Ci8qKgogKiBDb2xsZWN0cyBlcnJvcnMgaW50byBncm91cHMgb3IgZm9yIGEgc3BlY2lmaWMgZmllbGQuCiAqLwoKCkVycm9yQmFnLnByb3RvdHlwZS5jb2xsZWN0ID0gZnVuY3Rpb24gY29sbGVjdChmaWVsZCwgc2NvcGUsIG1hcCkgewogIHZhciB0aGlzJDEgPSB0aGlzOwogIGlmIChtYXAgPT09IHZvaWQgMCkgbWFwID0gdHJ1ZTsKICB2YXIgaXNTaW5nbGVGaWVsZCA9ICFpc051bGxPclVuZGVmaW5lZChmaWVsZCkgJiYgIWZpZWxkLmluY2x1ZGVzKCcqJyk7CgogIHZhciBncm91cEVycm9ycyA9IGZ1bmN0aW9uIGdyb3VwRXJyb3JzKGl0ZW1zKSB7CiAgICB2YXIgZXJyb3JzID0gaXRlbXMucmVkdWNlKGZ1bmN0aW9uIChjb2xsZWN0aW9uLCBlcnJvcikgewogICAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKHRoaXMkMS52bUlkKSAmJiBlcnJvci52bUlkICE9PSB0aGlzJDEudm1JZCkgewogICAgICAgIHJldHVybiBjb2xsZWN0aW9uOwogICAgICB9CgogICAgICBpZiAoIWNvbGxlY3Rpb25bZXJyb3IuZmllbGRdKSB7CiAgICAgICAgY29sbGVjdGlvbltlcnJvci5maWVsZF0gPSBbXTsKICAgICAgfQoKICAgICAgY29sbGVjdGlvbltlcnJvci5maWVsZF0ucHVzaChtYXAgPyBlcnJvci5tc2cgOiBlcnJvcik7CiAgICAgIHJldHVybiBjb2xsZWN0aW9uOwogICAgfSwge30pOyAvLyByZWR1Y2UgdGhlIGNvbGxlY3Rpb24gdG8gYmUgYSBzaW5nbGUgYXJyYXkuCgogICAgaWYgKGlzU2luZ2xlRmllbGQpIHsKICAgICAgcmV0dXJuIHZhbHVlcyhlcnJvcnMpWzBdIHx8IFtdOwogICAgfQoKICAgIHJldHVybiBlcnJvcnM7CiAgfTsKCiAgaWYgKGlzTnVsbE9yVW5kZWZpbmVkKGZpZWxkKSkgewogICAgcmV0dXJuIGdyb3VwRXJyb3JzKHRoaXMuaXRlbXMpOwogIH0KCiAgdmFyIHNlbGVjdG9yID0gaXNOdWxsT3JVbmRlZmluZWQoc2NvcGUpID8gU3RyaW5nKGZpZWxkKSA6IHNjb3BlICsgIi4iICsgZmllbGQ7CgogIHZhciByZWYgPSB0aGlzLl9tYWtlQ2FuZGlkYXRlRmlsdGVycyhzZWxlY3Rvcik7CgogIHZhciBpc1ByaW1hcnkgPSByZWYuaXNQcmltYXJ5OwogIHZhciBpc0FsdCA9IHJlZi5pc0FsdDsKICB2YXIgY29sbGVjdGVkID0gdGhpcy5pdGVtcy5yZWR1Y2UoZnVuY3Rpb24gKHByZXYsIGN1cnIpIHsKICAgIGlmIChpc1ByaW1hcnkoY3VycikpIHsKICAgICAgcHJldi5wcmltYXJ5LnB1c2goY3Vycik7CiAgICB9CgogICAgaWYgKGlzQWx0KGN1cnIpKSB7CiAgICAgIHByZXYuYWx0LnB1c2goY3Vycik7CiAgICB9CgogICAgcmV0dXJuIHByZXY7CiAgfSwgewogICAgcHJpbWFyeTogW10sCiAgICBhbHQ6IFtdCiAgfSk7CiAgY29sbGVjdGVkID0gY29sbGVjdGVkLnByaW1hcnkubGVuZ3RoID8gY29sbGVjdGVkLnByaW1hcnkgOiBjb2xsZWN0ZWQuYWx0OwogIHJldHVybiBncm91cEVycm9ycyhjb2xsZWN0ZWQpOwp9OwovKioKICogR2V0cyB0aGUgaW50ZXJuYWwgYXJyYXkgbGVuZ3RoLgogKi8KCgpFcnJvckJhZy5wcm90b3R5cGUuY291bnQgPSBmdW5jdGlvbiBjb3VudCgpIHsKICB2YXIgdGhpcyQxID0gdGhpczsKCiAgaWYgKHRoaXMudm1JZCkgewogICAgcmV0dXJuIHRoaXMuaXRlbXMuZmlsdGVyKGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlLnZtSWQgPT09IHRoaXMkMS52bUlkOwogICAgfSkubGVuZ3RoOwogIH0KCiAgcmV0dXJuIHRoaXMuaXRlbXMubGVuZ3RoOwp9OwovKioKICogRmluZHMgYW5kIGZldGNoZXMgdGhlIGZpcnN0IGVycm9yIG1lc3NhZ2UgZm9yIHRoZSBzcGVjaWZpZWQgZmllbGQgaWQuCiAqLwoKCkVycm9yQmFnLnByb3RvdHlwZS5maXJzdEJ5SWQgPSBmdW5jdGlvbiBmaXJzdEJ5SWQoaWQpIHsKICB2YXIgZXJyb3IgPSBmaW5kKHRoaXMuaXRlbXMsIGZ1bmN0aW9uIChpKSB7CiAgICByZXR1cm4gaS5pZCA9PT0gaWQ7CiAgfSk7CiAgcmV0dXJuIGVycm9yID8gZXJyb3IubXNnIDogdW5kZWZpbmVkOwp9OwovKioKICogR2V0cyB0aGUgZmlyc3QgZXJyb3IgbWVzc2FnZSBmb3IgYSBzcGVjaWZpYyBmaWVsZC4KICovCgoKRXJyb3JCYWcucHJvdG90eXBlLmZpcnN0ID0gZnVuY3Rpb24gZmlyc3QoZmllbGQsIHNjb3BlKSB7CiAgaWYgKHNjb3BlID09PSB2b2lkIDApIHNjb3BlID0gbnVsbDsKICB2YXIgc2VsZWN0b3IgPSBpc051bGxPclVuZGVmaW5lZChzY29wZSkgPyBmaWVsZCA6IHNjb3BlICsgIi4iICsgZmllbGQ7CgogIHZhciBtYXRjaCA9IHRoaXMuX21hdGNoKHNlbGVjdG9yKTsKCiAgcmV0dXJuIG1hdGNoICYmIG1hdGNoLm1zZzsKfTsKLyoqCiAqIFJldHVybnMgdGhlIGZpcnN0IGVycm9yIHJ1bGUgZm9yIHRoZSBzcGVjaWZpZWQgZmllbGQKICovCgoKRXJyb3JCYWcucHJvdG90eXBlLmZpcnN0UnVsZSA9IGZ1bmN0aW9uIGZpcnN0UnVsZShmaWVsZCwgc2NvcGUpIHsKICB2YXIgZXJyb3JzID0gdGhpcy5jb2xsZWN0KGZpZWxkLCBzY29wZSwgZmFsc2UpOwogIHJldHVybiBlcnJvcnMubGVuZ3RoICYmIGVycm9yc1swXS5ydWxlIHx8IHVuZGVmaW5lZDsKfTsKLyoqCiAqIENoZWNrcyBpZiB0aGUgaW50ZXJuYWwgYXJyYXkgaGFzIGF0IGxlYXN0IG9uZSBlcnJvciBmb3IgdGhlIHNwZWNpZmllZCBmaWVsZC4KICovCgoKRXJyb3JCYWcucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uIGhhcyhmaWVsZCwgc2NvcGUpIHsKICBpZiAoc2NvcGUgPT09IHZvaWQgMCkgc2NvcGUgPSBudWxsOwogIHJldHVybiAhIXRoaXMuZmlyc3QoZmllbGQsIHNjb3BlKTsKfTsKLyoqCiAqIEdldHMgdGhlIGZpcnN0IGVycm9yIG1lc3NhZ2UgZm9yIGEgc3BlY2lmaWMgZmllbGQgYW5kIGEgcnVsZS4KICovCgoKRXJyb3JCYWcucHJvdG90eXBlLmZpcnN0QnlSdWxlID0gZnVuY3Rpb24gZmlyc3RCeVJ1bGUobmFtZSwgcnVsZSwgc2NvcGUpIHsKICBpZiAoc2NvcGUgPT09IHZvaWQgMCkgc2NvcGUgPSBudWxsOwogIHZhciBlcnJvciA9IHRoaXMuY29sbGVjdChuYW1lLCBzY29wZSwgZmFsc2UpLmZpbHRlcihmdW5jdGlvbiAoZSkgewogICAgcmV0dXJuIGUucnVsZSA9PT0gcnVsZTsKICB9KVswXTsKICByZXR1cm4gZXJyb3IgJiYgZXJyb3IubXNnIHx8IHVuZGVmaW5lZDsKfTsKLyoqCiAqIEdldHMgdGhlIGZpcnN0IGVycm9yIG1lc3NhZ2UgZm9yIGEgc3BlY2lmaWMgZmllbGQgdGhhdCBub3QgbWF0Y2ggdGhlIHJ1bGUuCiAqLwoKCkVycm9yQmFnLnByb3RvdHlwZS5maXJzdE5vdCA9IGZ1bmN0aW9uIGZpcnN0Tm90KG5hbWUsIHJ1bGUsIHNjb3BlKSB7CiAgaWYgKHJ1bGUgPT09IHZvaWQgMCkgcnVsZSA9ICdyZXF1aXJlZCc7CiAgaWYgKHNjb3BlID09PSB2b2lkIDApIHNjb3BlID0gbnVsbDsKICB2YXIgZXJyb3IgPSB0aGlzLmNvbGxlY3QobmFtZSwgc2NvcGUsIGZhbHNlKS5maWx0ZXIoZnVuY3Rpb24gKGUpIHsKICAgIHJldHVybiBlLnJ1bGUgIT09IHJ1bGU7CiAgfSlbMF07CiAgcmV0dXJuIGVycm9yICYmIGVycm9yLm1zZyB8fCB1bmRlZmluZWQ7Cn07Ci8qKgogKiBSZW1vdmVzIGVycm9ycyBieSBtYXRjaGluZyBhZ2FpbnN0IHRoZSBpZCBvciBpZHMuCiAqLwoKCkVycm9yQmFnLnByb3RvdHlwZS5yZW1vdmVCeUlkID0gZnVuY3Rpb24gcmVtb3ZlQnlJZChpZCkgewogIHZhciBjb25kaXRpb24gPSBmdW5jdGlvbiBjb25kaXRpb24oaXRlbSkgewogICAgcmV0dXJuIGl0ZW0uaWQgPT09IGlkOwogIH07CgogIGlmIChBcnJheS5pc0FycmF5KGlkKSkgewogICAgY29uZGl0aW9uID0gZnVuY3Rpb24gY29uZGl0aW9uKGl0ZW0pIHsKICAgICAgcmV0dXJuIGlkLmluZGV4T2YoaXRlbS5pZCkgIT09IC0xOwogICAgfTsKICB9CgogIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5pdGVtcy5sZW5ndGg7ICsraSkgewogICAgaWYgKGNvbmRpdGlvbih0aGlzLml0ZW1zW2ldKSkgewogICAgICB0aGlzLml0ZW1zLnNwbGljZShpLCAxKTsKICAgICAgLS1pOwogICAgfQogIH0KfTsKLyoqCiAqIFJlbW92ZXMgYWxsIGVycm9yIG1lc3NhZ2VzIGFzc29jaWF0ZWQgd2l0aCBhIHNwZWNpZmljIGZpZWxkLgogKi8KCgpFcnJvckJhZy5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gcmVtb3ZlKGZpZWxkLCBzY29wZSwgdm1JZCkgewogIGlmIChpc051bGxPclVuZGVmaW5lZChmaWVsZCkpIHsKICAgIHJldHVybjsKICB9CgogIHZhciBzZWxlY3RvciA9IGlzTnVsbE9yVW5kZWZpbmVkKHNjb3BlKSA/IFN0cmluZyhmaWVsZCkgOiBzY29wZSArICIuIiArIGZpZWxkOwoKICB2YXIgcmVmID0gdGhpcy5fbWFrZUNhbmRpZGF0ZUZpbHRlcnMoc2VsZWN0b3IpOwoKICB2YXIgaXNQcmltYXJ5ID0gcmVmLmlzUHJpbWFyeTsKICB2YXIgaXNBbHQgPSByZWYuaXNBbHQ7CgogIHZhciBtYXRjaGVzID0gZnVuY3Rpb24gbWF0Y2hlcyhpdGVtKSB7CiAgICByZXR1cm4gaXNQcmltYXJ5KGl0ZW0pIHx8IGlzQWx0KGl0ZW0pOwogIH07CgogIHZhciBzaG91bGRSZW1vdmUgPSBmdW5jdGlvbiBzaG91bGRSZW1vdmUoaXRlbSkgewogICAgaWYgKGlzTnVsbE9yVW5kZWZpbmVkKHZtSWQpKSB7CiAgICAgIHJldHVybiBtYXRjaGVzKGl0ZW0pOwogICAgfQoKICAgIHJldHVybiBtYXRjaGVzKGl0ZW0pICYmIGl0ZW0udm1JZCA9PT0gdm1JZDsKICB9OwoKICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaXRlbXMubGVuZ3RoOyArK2kpIHsKICAgIGlmIChzaG91bGRSZW1vdmUodGhpcy5pdGVtc1tpXSkpIHsKICAgICAgdGhpcy5pdGVtcy5zcGxpY2UoaSwgMSk7CiAgICAgIC0taTsKICAgIH0KICB9Cn07CgpFcnJvckJhZy5wcm90b3R5cGUuX21ha2VDYW5kaWRhdGVGaWx0ZXJzID0gZnVuY3Rpb24gX21ha2VDYW5kaWRhdGVGaWx0ZXJzKHNlbGVjdG9yKSB7CiAgdmFyIHRoaXMkMSA9IHRoaXM7CgogIHZhciBtYXRjaGVzUnVsZSA9IGZ1bmN0aW9uIG1hdGNoZXNSdWxlKCkgewogICAgcmV0dXJuIHRydWU7CiAgfTsKCiAgdmFyIG1hdGNoZXNTY29wZSA9IGZ1bmN0aW9uIG1hdGNoZXNTY29wZSgpIHsKICAgIHJldHVybiB0cnVlOwogIH07CgogIHZhciBtYXRjaGVzTmFtZSA9IGZ1bmN0aW9uIG1hdGNoZXNOYW1lKCkgewogICAgcmV0dXJuIHRydWU7CiAgfTsKCiAgdmFyIG1hdGNoZXNWTSA9IGZ1bmN0aW9uIG1hdGNoZXNWTSgpIHsKICAgIHJldHVybiB0cnVlOwogIH07CgogIHZhciByZWYgPSBwYXJzZVNlbGVjdG9yKHNlbGVjdG9yKTsKICB2YXIgaWQgPSByZWYuaWQ7CiAgdmFyIHJ1bGUgPSByZWYucnVsZTsKICB2YXIgc2NvcGUgPSByZWYuc2NvcGU7CiAgdmFyIG5hbWUgPSByZWYubmFtZTsKCiAgaWYgKHJ1bGUpIHsKICAgIG1hdGNoZXNSdWxlID0gZnVuY3Rpb24gbWF0Y2hlc1J1bGUoaXRlbSkgewogICAgICByZXR1cm4gaXRlbS5ydWxlID09PSBydWxlOwogICAgfTsKICB9IC8vIG1hdGNoIGJ5IGlkLCBjYW4gYmUgY29tYmluZWQgd2l0aCBydWxlIHNlbGVjdGlvbi4KCgogIGlmIChpZCkgewogICAgcmV0dXJuIHsKICAgICAgaXNQcmltYXJ5OiBmdW5jdGlvbiBpc1ByaW1hcnkoaXRlbSkgewogICAgICAgIHJldHVybiBtYXRjaGVzUnVsZShpdGVtKSAmJiBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgcmV0dXJuIGlkID09PSBpdGVtLmlkOwogICAgICAgIH07CiAgICAgIH0sCiAgICAgIGlzQWx0OiBmdW5jdGlvbiBpc0FsdCgpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH07CiAgfQoKICBpZiAoaXNOdWxsT3JVbmRlZmluZWQoc2NvcGUpKSB7CiAgICAvLyBpZiBubyBzY29wZSBzcGVjaWZpZWQsIG1ha2Ugc3VyZSB0aGUgZm91bmQgZXJyb3IgaGFzIG5vIHNjb3BlLgogICAgbWF0Y2hlc1Njb3BlID0gZnVuY3Rpb24gbWF0Y2hlc1Njb3BlKGl0ZW0pIHsKICAgICAgcmV0dXJuIGlzTnVsbE9yVW5kZWZpbmVkKGl0ZW0uc2NvcGUpOwogICAgfTsKICB9IGVsc2UgewogICAgbWF0Y2hlc1Njb3BlID0gZnVuY3Rpb24gbWF0Y2hlc1Njb3BlKGl0ZW0pIHsKICAgICAgcmV0dXJuIGl0ZW0uc2NvcGUgPT09IHNjb3BlOwogICAgfTsKICB9CgogIGlmICghaXNOdWxsT3JVbmRlZmluZWQobmFtZSkgJiYgbmFtZSAhPT0gJyonKSB7CiAgICBtYXRjaGVzTmFtZSA9IGZ1bmN0aW9uIG1hdGNoZXNOYW1lKGl0ZW0pIHsKICAgICAgcmV0dXJuIGl0ZW0uZmllbGQgPT09IG5hbWU7CiAgICB9OwogIH0KCiAgaWYgKCFpc051bGxPclVuZGVmaW5lZCh0aGlzLnZtSWQpKSB7CiAgICBtYXRjaGVzVk0gPSBmdW5jdGlvbiBtYXRjaGVzVk0oaXRlbSkgewogICAgICByZXR1cm4gaXRlbS52bUlkID09PSB0aGlzJDEudm1JZDsKICAgIH07CiAgfSAvLyBtYXRjaGVzIHRoZSBmaXJzdCBjYW5kaWRhdGUuCgoKICB2YXIgaXNQcmltYXJ5ID0gZnVuY3Rpb24gaXNQcmltYXJ5KGl0ZW0pIHsKICAgIHJldHVybiBtYXRjaGVzVk0oaXRlbSkgJiYgbWF0Y2hlc05hbWUoaXRlbSkgJiYgbWF0Y2hlc1J1bGUoaXRlbSkgJiYgbWF0Y2hlc1Njb3BlKGl0ZW0pOwogIH07IC8vIG1hdGNoZXMgYSBzZWNvbmQgY2FuZGlkYXRlLCB3aGljaCBpcyBhIGZpZWxkIHdpdGggYSBuYW1lIGNvbnRhaW5pbmcgdGhlICcuJyBjaGFyYWN0ZXIuCgoKICB2YXIgaXNBbHQgPSBmdW5jdGlvbiBpc0FsdChpdGVtKSB7CiAgICByZXR1cm4gbWF0Y2hlc1ZNKGl0ZW0pICYmIG1hdGNoZXNSdWxlKGl0ZW0pICYmIGl0ZW0uZmllbGQgPT09IHNjb3BlICsgIi4iICsgbmFtZTsKICB9OwoKICByZXR1cm4gewogICAgaXNQcmltYXJ5OiBpc1ByaW1hcnksCiAgICBpc0FsdDogaXNBbHQKICB9Owp9OwoKRXJyb3JCYWcucHJvdG90eXBlLl9tYXRjaCA9IGZ1bmN0aW9uIF9tYXRjaChzZWxlY3RvcikgewogIGlmIChpc051bGxPclVuZGVmaW5lZChzZWxlY3RvcikpIHsKICAgIHJldHVybiB1bmRlZmluZWQ7CiAgfQoKICB2YXIgcmVmID0gdGhpcy5fbWFrZUNhbmRpZGF0ZUZpbHRlcnMoc2VsZWN0b3IpOwoKICB2YXIgaXNQcmltYXJ5ID0gcmVmLmlzUHJpbWFyeTsKICB2YXIgaXNBbHQgPSByZWYuaXNBbHQ7CiAgcmV0dXJuIHRoaXMuaXRlbXMucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCBpdGVtLCBpZHgsIGFycikgewogICAgdmFyIGlzTGFzdCA9IGlkeCA9PT0gYXJyLmxlbmd0aCAtIDE7CgogICAgaWYgKHByZXYucHJpbWFyeSkgewogICAgICByZXR1cm4gaXNMYXN0ID8gcHJldi5wcmltYXJ5IDogcHJldjsKICAgIH0KCiAgICBpZiAoaXNQcmltYXJ5KGl0ZW0pKSB7CiAgICAgIHByZXYucHJpbWFyeSA9IGl0ZW07CiAgICB9CgogICAgaWYgKGlzQWx0KGl0ZW0pKSB7CiAgICAgIHByZXYuYWx0ID0gaXRlbTsKICAgIH0gLy8ga2VlcCBnb2luZy4KCgogICAgaWYgKCFpc0xhc3QpIHsKICAgICAgcmV0dXJuIHByZXY7CiAgICB9CgogICAgcmV0dXJuIHByZXYucHJpbWFyeSB8fCBwcmV2LmFsdDsKICB9LCB7fSk7Cn07Cgp2YXIgREVGQVVMVF9DT05GSUcgPSB7CiAgbG9jYWxlOiAnZW4nLAogIGRlbGF5OiAwLAogIGVycm9yQmFnTmFtZTogJ2Vycm9ycycsCiAgZGljdGlvbmFyeTogbnVsbCwKICBmaWVsZHNCYWdOYW1lOiAnZmllbGRzJywKICBjbGFzc2VzOiBmYWxzZSwKICBjbGFzc05hbWVzOiBudWxsLAogIGV2ZW50czogJ2lucHV0JywKICBpbmplY3Q6IHRydWUsCiAgZmFzdEV4aXQ6IHRydWUsCiAgYXJpYTogdHJ1ZSwKICB2YWxpZGl0eTogZmFsc2UsCiAgbW9kZTogJ2FnZ3Jlc3NpdmUnLAogIHVzZUNvbnN0cmFpbnRBdHRyczogdHJ1ZSwKICBpMThuOiBudWxsLAogIGkxOG5Sb290S2V5OiAndmFsaWRhdGlvbicKfTsKdmFyIGN1cnJlbnRDb25maWcgPSBhc3NpZ24oe30sIERFRkFVTFRfQ09ORklHKTsKCnZhciByZXNvbHZlQ29uZmlnID0gZnVuY3Rpb24gcmVzb2x2ZUNvbmZpZyhjdHgpIHsKICB2YXIgc2VsZkNvbmZpZyA9IGdldFBhdGgoJyRvcHRpb25zLiRfdmVlVmFsaWRhdGUnLCBjdHgsIHt9KTsKICByZXR1cm4gYXNzaWduKHt9LCBjdXJyZW50Q29uZmlnLCBzZWxmQ29uZmlnKTsKfTsKCnZhciBnZXRDb25maWcgPSBmdW5jdGlvbiBnZXRDb25maWcoKSB7CiAgcmV0dXJuIGN1cnJlbnRDb25maWc7Cn07Cgp2YXIgc2V0Q29uZmlnID0gZnVuY3Rpb24gc2V0Q29uZmlnKG5ld0NvbmYpIHsKICBjdXJyZW50Q29uZmlnID0gYXNzaWduKHt9LCBjdXJyZW50Q29uZmlnLCBuZXdDb25mKTsKfTsgLy8gVk5vZGUgVXRpbHMKLy8gR2V0cyB0aGUgbW9kZWwgb2JqZWN0IG9uIHRoZSB2bm9kZS4KCgpmdW5jdGlvbiBmaW5kTW9kZWwodm5vZGUpIHsKICBpZiAoIXZub2RlLmRhdGEpIHsKICAgIHJldHVybiBudWxsOwogIH0gLy8gQ29tcG9uZW50IE1vZGVsCgoKICBpZiAodm5vZGUuZGF0YS5tb2RlbCkgewogICAgcmV0dXJuIHZub2RlLmRhdGEubW9kZWw7CiAgfQoKICByZXR1cm4gISF2bm9kZS5kYXRhLmRpcmVjdGl2ZXMgJiYgZmluZCh2bm9kZS5kYXRhLmRpcmVjdGl2ZXMsIGZ1bmN0aW9uIChkKSB7CiAgICByZXR1cm4gZC5uYW1lID09PSAnbW9kZWwnOwogIH0pOwp9CgpmdW5jdGlvbiBleHRyYWN0Q2hpbGRyZW4odm5vZGUpIHsKICBpZiAoQXJyYXkuaXNBcnJheSh2bm9kZSkpIHsKICAgIHJldHVybiB2bm9kZTsKICB9CgogIGlmIChBcnJheS5pc0FycmF5KHZub2RlLmNoaWxkcmVuKSkgewogICAgcmV0dXJuIHZub2RlLmNoaWxkcmVuOwogIH0KCiAgaWYgKHZub2RlLmNvbXBvbmVudE9wdGlvbnMgJiYgQXJyYXkuaXNBcnJheSh2bm9kZS5jb21wb25lbnRPcHRpb25zLmNoaWxkcmVuKSkgewogICAgcmV0dXJuIHZub2RlLmNvbXBvbmVudE9wdGlvbnMuY2hpbGRyZW47CiAgfQoKICByZXR1cm4gW107Cn0KCmZ1bmN0aW9uIGV4dHJhY3RWTm9kZXModm5vZGUpIHsKICBpZiAoZmluZE1vZGVsKHZub2RlKSkgewogICAgcmV0dXJuIFt2bm9kZV07CiAgfQoKICB2YXIgY2hpbGRyZW4gPSBleHRyYWN0Q2hpbGRyZW4odm5vZGUpOwogIHJldHVybiBjaGlsZHJlbi5yZWR1Y2UoZnVuY3Rpb24gKG5vZGVzLCBub2RlKSB7CiAgICB2YXIgY2FuZGlkYXRlcyA9IGV4dHJhY3RWTm9kZXMobm9kZSk7CgogICAgaWYgKGNhbmRpZGF0ZXMubGVuZ3RoKSB7CiAgICAgIG5vZGVzLnB1c2guYXBwbHkobm9kZXMsIGNhbmRpZGF0ZXMpOwogICAgfQoKICAgIHJldHVybiBub2RlczsKICB9LCBbXSk7Cn0gLy8gUmVzb2x2ZXMgdi1tb2RlbCBjb25maWcgaWYgZXhpc3RzLgoKCmZ1bmN0aW9uIGZpbmRNb2RlbENvbmZpZyh2bm9kZSkgewogIGlmICghdm5vZGUuY29tcG9uZW50T3B0aW9ucykgewogICAgcmV0dXJuIG51bGw7CiAgfQoKICByZXR1cm4gdm5vZGUuY29tcG9uZW50T3B0aW9ucy5DdG9yLm9wdGlvbnMubW9kZWw7Cn0gLy8gQWRkcyBhIGxpc3RlbmVyIHRvIHZub2RlIGxpc3RlbmVyIG9iamVjdC4KCgpmdW5jdGlvbiBtZXJnZVZOb2RlTGlzdGVuZXJzKG9iaiwgZXZlbnROYW1lLCBoYW5kbGVyKSB7CiAgLy8gSGFzIGEgc2luZ2xlIGxpc3RlbmVyLgogIGlmIChpc0NhbGxhYmxlKG9ialtldmVudE5hbWVdKSkgewogICAgdmFyIHByZXZIYW5kbGVyID0gb2JqW2V2ZW50TmFtZV07CiAgICBvYmpbZXZlbnROYW1lXSA9IFtwcmV2SGFuZGxlcl07CiAgfSAvLyBoYXMgb3RoZXIgbGlzdGVuZXJzLgoKCiAgaWYgKEFycmF5LmlzQXJyYXkob2JqW2V2ZW50TmFtZV0pKSB7CiAgICBvYmpbZXZlbnROYW1lXS5wdXNoKGhhbmRsZXIpOwogICAgcmV0dXJuOwogIH0gLy8gbm8gbGlzdGVuZXIgYXQgYWxsLgoKCiAgaWYgKGlzTnVsbE9yVW5kZWZpbmVkKG9ialtldmVudE5hbWVdKSkgewogICAgb2JqW2V2ZW50TmFtZV0gPSBbaGFuZGxlcl07CiAgfQp9IC8vIEFkZHMgYSBsaXN0ZW5lciB0byBhIG5hdGl2ZSBIVE1MIHZub2RlLgoKCmZ1bmN0aW9uIGFkZE5hdGl2ZU5vZGVMaXN0ZW5lcihub2RlLCBldmVudE5hbWUsIGhhbmRsZXIpIHsKICBpZiAoaXNOdWxsT3JVbmRlZmluZWQobm9kZS5kYXRhLm9uKSkgewogICAgbm9kZS5kYXRhLm9uID0ge307CiAgfQoKICBtZXJnZVZOb2RlTGlzdGVuZXJzKG5vZGUuZGF0YS5vbiwgZXZlbnROYW1lLCBoYW5kbGVyKTsKfSAvLyBBZGRzIGEgbGlzdGVuZXIgdG8gYSBWdWUgY29tcG9uZW50IHZub2RlLgoKCmZ1bmN0aW9uIGFkZENvbXBvbmVudE5vZGVMaXN0ZW5lcihub2RlLCBldmVudE5hbWUsIGhhbmRsZXIpIHsKICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwogIGlmICghbm9kZS5jb21wb25lbnRPcHRpb25zLmxpc3RlbmVycykgewogICAgbm9kZS5jb21wb25lbnRPcHRpb25zLmxpc3RlbmVycyA9IHt9OwogIH0KCiAgbWVyZ2VWTm9kZUxpc3RlbmVycyhub2RlLmNvbXBvbmVudE9wdGlvbnMubGlzdGVuZXJzLCBldmVudE5hbWUsIGhhbmRsZXIpOwp9CgpmdW5jdGlvbiBhZGRWTm9kZUxpc3RlbmVyKHZub2RlLCBldmVudE5hbWUsIGhhbmRsZXIpIHsKICBpZiAodm5vZGUuY29tcG9uZW50T3B0aW9ucykgewogICAgYWRkQ29tcG9uZW50Tm9kZUxpc3RlbmVyKHZub2RlLCBldmVudE5hbWUsIGhhbmRsZXIpOwogICAgcmV0dXJuOwogIH0KCiAgYWRkTmF0aXZlTm9kZUxpc3RlbmVyKHZub2RlLCBldmVudE5hbWUsIGhhbmRsZXIpOwp9IC8vIERldGVybWluZXMgaWYgYGNoYW5nZWAgc2hvdWxkIGJlIHVzZWQgb3ZlciBgaW5wdXRgIGZvciBsaXN0ZW5lcnMuCgoKZnVuY3Rpb24gZ2V0SW5wdXRFdmVudE5hbWUodm5vZGUsIG1vZGVsKSB7CiAgLy8gSXMgYSBjb21wb25lbnQuCiAgaWYgKHZub2RlLmNvbXBvbmVudE9wdGlvbnMpIHsKICAgIHZhciByZWYgPSBmaW5kTW9kZWxDb25maWcodm5vZGUpIHx8IHsKICAgICAgZXZlbnQ6ICdpbnB1dCcKICAgIH07CiAgICB2YXIgZXZlbnQgPSByZWYuZXZlbnQ7CiAgICByZXR1cm4gZXZlbnQ7CiAgfSAvLyBMYXp5IE1vZGVscyBhbmQgc2VsZWN0IHRhZyB0eXBpY2FsbHkgdXNlIGNoYW5nZSBldmVudAoKCiAgaWYgKG1vZGVsICYmIG1vZGVsLm1vZGlmaWVycyAmJiBtb2RlbC5tb2RpZmllcnMubGF6eSB8fCB2bm9kZS50YWcgPT09ICdzZWxlY3QnKSB7CiAgICByZXR1cm4gJ2NoYW5nZSc7CiAgfSAvLyBpcyBhIHRleHR1YWwtdHlwZSBpbnB1dC4KCgogIGlmICh2bm9kZS5kYXRhLmF0dHJzICYmIGlzVGV4dElucHV0KHsKICAgIHR5cGU6IHZub2RlLmRhdGEuYXR0cnMudHlwZSB8fCAndGV4dCcKICB9KSkgewogICAgcmV0dXJuICdpbnB1dCc7CiAgfQoKICByZXR1cm4gJ2NoYW5nZSc7Cn0KCmZ1bmN0aW9uIG5vcm1hbGl6ZVNsb3RzKHNsb3RzLCBjdHgpIHsKICByZXR1cm4gT2JqZWN0LmtleXMoc2xvdHMpLnJlZHVjZShmdW5jdGlvbiAoYXJyLCBrZXkpIHsKICAgIHNsb3RzW2tleV0uZm9yRWFjaChmdW5jdGlvbiAodm5vZGUpIHsKICAgICAgaWYgKCF2bm9kZS5jb250ZXh0KSB7CiAgICAgICAgc2xvdHNba2V5XS5jb250ZXh0ID0gY3R4OwoKICAgICAgICBpZiAoIXZub2RlLmRhdGEpIHsKICAgICAgICAgIHZub2RlLmRhdGEgPSB7fTsKICAgICAgICB9CgogICAgICAgIHZub2RlLmRhdGEuc2xvdCA9IGtleTsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gYXJyLmNvbmNhdChzbG90c1trZXldKTsKICB9LCBbXSk7Cn0KLyoqCiAqIEdlbmVyYXRlcyB0aGUgb3B0aW9ucyByZXF1aXJlZCB0byBjb25zdHJ1Y3QgYSBmaWVsZC4KICovCgoKdmFyIFJlc29sdmVyID0gZnVuY3Rpb24gUmVzb2x2ZXIoKSB7fTsKClJlc29sdmVyLmdlbmVyYXRlID0gZnVuY3Rpb24gZ2VuZXJhdGUoZWwsIGJpbmRpbmcsIHZub2RlKSB7CiAgdmFyIG1vZGVsID0gUmVzb2x2ZXIucmVzb2x2ZU1vZGVsKGJpbmRpbmcsIHZub2RlKTsKICB2YXIgb3B0aW9ucyA9IHJlc29sdmVDb25maWcodm5vZGUuY29udGV4dCk7CiAgcmV0dXJuIHsKICAgIG5hbWU6IFJlc29sdmVyLnJlc29sdmVOYW1lKGVsLCB2bm9kZSksCiAgICBlbDogZWwsCiAgICBsaXN0ZW46ICFiaW5kaW5nLm1vZGlmaWVycy5kaXNhYmxlLAogICAgYmFpbHM6IGJpbmRpbmcubW9kaWZpZXJzLmJhaWxzID8gdHJ1ZSA6IGJpbmRpbmcubW9kaWZpZXJzLmNvbnRpbnVlcyA9PT0gdHJ1ZSA/IGZhbHNlIDogdW5kZWZpbmVkLAogICAgc2NvcGU6IFJlc29sdmVyLnJlc29sdmVTY29wZShlbCwgYmluZGluZywgdm5vZGUpLAogICAgdm06IHZub2RlLmNvbnRleHQsCiAgICBleHByZXNzaW9uOiBiaW5kaW5nLnZhbHVlLAogICAgY29tcG9uZW50OiB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSwKICAgIGNsYXNzZXM6IG9wdGlvbnMuY2xhc3NlcywKICAgIGNsYXNzTmFtZXM6IG9wdGlvbnMuY2xhc3NOYW1lcywKICAgIGdldHRlcjogUmVzb2x2ZXIucmVzb2x2ZUdldHRlcihlbCwgdm5vZGUsIG1vZGVsKSwKICAgIGV2ZW50czogUmVzb2x2ZXIucmVzb2x2ZUV2ZW50cyhlbCwgdm5vZGUpIHx8IG9wdGlvbnMuZXZlbnRzLAogICAgbW9kZWw6IG1vZGVsLAogICAgZGVsYXk6IFJlc29sdmVyLnJlc29sdmVEZWxheShlbCwgdm5vZGUsIG9wdGlvbnMpLAogICAgcnVsZXM6IFJlc29sdmVyLnJlc29sdmVSdWxlcyhlbCwgYmluZGluZywgdm5vZGUpLAogICAgaW1tZWRpYXRlOiAhIWJpbmRpbmcubW9kaWZpZXJzLmluaXRpYWwgfHwgISFiaW5kaW5nLm1vZGlmaWVycy5pbW1lZGlhdGUsCiAgICBwZXJzaXN0OiAhIWJpbmRpbmcubW9kaWZpZXJzLnBlcnNpc3QsCiAgICB2YWxpZGl0eTogb3B0aW9ucy52YWxpZGl0eSAmJiAhdm5vZGUuY29tcG9uZW50SW5zdGFuY2UsCiAgICBhcmlhOiBvcHRpb25zLmFyaWEgJiYgIXZub2RlLmNvbXBvbmVudEluc3RhbmNlLAogICAgaW5pdGlhbFZhbHVlOiBSZXNvbHZlci5yZXNvbHZlSW5pdGlhbFZhbHVlKHZub2RlKQogIH07Cn07CgpSZXNvbHZlci5nZXRDdG9yQ29uZmlnID0gZnVuY3Rpb24gZ2V0Q3RvckNvbmZpZyh2bm9kZSkgewogIGlmICghdm5vZGUuY29tcG9uZW50SW5zdGFuY2UpIHsKICAgIHJldHVybiBudWxsOwogIH0KCiAgdmFyIGNvbmZpZyA9IGdldFBhdGgoJ2NvbXBvbmVudEluc3RhbmNlLiRvcHRpb25zLiRfdmVlVmFsaWRhdGUnLCB2bm9kZSk7CiAgcmV0dXJuIGNvbmZpZzsKfTsKLyoqCiAqIFJlc29sdmVzIHRoZSBydWxlcyBkZWZpbmVkIG9uIGFuIGVsZW1lbnQuCiAqLwoKClJlc29sdmVyLnJlc29sdmVSdWxlcyA9IGZ1bmN0aW9uIHJlc29sdmVSdWxlcyhlbCwgYmluZGluZywgdm5vZGUpIHsKICB2YXIgcnVsZXMgPSAnJzsKCiAgaWYgKCFiaW5kaW5nLnZhbHVlICYmICghYmluZGluZyB8fCAhYmluZGluZy5leHByZXNzaW9uKSkgewogICAgcnVsZXMgPSBnZXREYXRhQXR0cmlidXRlKGVsLCAncnVsZXMnKTsKICB9CgogIGlmIChiaW5kaW5nLnZhbHVlICYmIGluY2x1ZGVzKFsnc3RyaW5nJywgJ29iamVjdCddLCBfdHlwZW9mMihiaW5kaW5nLnZhbHVlLnJ1bGVzKSkpIHsKICAgIHJ1bGVzID0gYmluZGluZy52YWx1ZS5ydWxlczsKICB9IGVsc2UgaWYgKGJpbmRpbmcudmFsdWUpIHsKICAgIHJ1bGVzID0gYmluZGluZy52YWx1ZTsKICB9CgogIGlmICh2bm9kZS5jb21wb25lbnRJbnN0YW5jZSkgewogICAgcmV0dXJuIHJ1bGVzOwogIH0gLy8gSWYgdmFsaWRpdHkgaXMgZGlzYWJsZWQsIGlnbm9yZSBmaWVsZCBydWxlcy4KCgogIHZhciBub3JtYWxpemVkID0gbm9ybWFsaXplUnVsZXMocnVsZXMpOwoKICBpZiAoIWdldENvbmZpZygpLnVzZUNvbnN0cmFpbnRBdHRycykgewogICAgcmV0dXJuIG5vcm1hbGl6ZWQ7CiAgfQoKICByZXR1cm4gYXNzaWduKHt9LCBmaWxsUnVsZXNGcm9tRWxlbWVudChlbCwge30pLCBub3JtYWxpemVkKTsKfTsKLyoqCiAqIEBwYXJhbSB7Kn0gdm5vZGUKICovCgoKUmVzb2x2ZXIucmVzb2x2ZUluaXRpYWxWYWx1ZSA9IGZ1bmN0aW9uIHJlc29sdmVJbml0aWFsVmFsdWUodm5vZGUpIHsKICB2YXIgbW9kZWwgPSB2bm9kZS5kYXRhLm1vZGVsIHx8IGZpbmQodm5vZGUuZGF0YS5kaXJlY3RpdmVzLCBmdW5jdGlvbiAoZCkgewogICAgcmV0dXJuIGQubmFtZSA9PT0gJ21vZGVsJzsKICB9KTsKICByZXR1cm4gbW9kZWwgJiYgbW9kZWwudmFsdWU7Cn07Ci8qKgogKiBSZXNvbHZlcyB0aGUgZGVsYXkgdmFsdWUuCiAqIEBwYXJhbSB7Kn0gZWwKICogQHBhcmFtIHsqfSB2bm9kZQogKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucwogKi8KCgpSZXNvbHZlci5yZXNvbHZlRGVsYXkgPSBmdW5jdGlvbiByZXNvbHZlRGVsYXkoZWwsIHZub2RlLCBvcHRpb25zKSB7CiAgdmFyIGRlbGF5ID0gZ2V0RGF0YUF0dHJpYnV0ZShlbCwgJ2RlbGF5Jyk7CiAgdmFyIGdsb2JhbERlbGF5ID0gb3B0aW9ucyAmJiAnZGVsYXknIGluIG9wdGlvbnMgPyBvcHRpb25zLmRlbGF5IDogMDsKCiAgaWYgKCFkZWxheSAmJiB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSAmJiB2bm9kZS5jb21wb25lbnRJbnN0YW5jZS4kYXR0cnMpIHsKICAgIGRlbGF5ID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2UuJGF0dHJzWydkYXRhLXZ2LWRlbGF5J107CiAgfQoKICBpZiAoIWlzT2JqZWN0KGdsb2JhbERlbGF5KSkgewogICAgcmV0dXJuIGRlZXBQYXJzZUludChkZWxheSB8fCBnbG9iYWxEZWxheSk7CiAgfQoKICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKGRlbGF5KSkgewogICAgZ2xvYmFsRGVsYXkuaW5wdXQgPSBkZWxheTsKICB9CgogIHJldHVybiBkZWVwUGFyc2VJbnQoZ2xvYmFsRGVsYXkpOwp9OwovKioKICogUmVzb2x2ZXMgdGhlIGV2ZW50cyB0byB2YWxpZGF0ZSBpbiByZXNwb25zZSB0by4KICogQHBhcmFtIHsqfSBlbAogKiBAcGFyYW0geyp9IHZub2RlCiAqLwoKClJlc29sdmVyLnJlc29sdmVFdmVudHMgPSBmdW5jdGlvbiByZXNvbHZlRXZlbnRzKGVsLCB2bm9kZSkgewogIC8vIHJlc29sdmUgaXQgZnJvbSB0aGUgcm9vdCBlbGVtZW50LgogIHZhciBldmVudHMgPSBnZXREYXRhQXR0cmlidXRlKGVsLCAndmFsaWRhdGUtb24nKTsgLy8gcmVzb2x2ZSBmcm9tIGRhdGEtdnYtdmFsaWRhdGUtb24gaWYgaXRzIGEgdnVlIGNvbXBvbmVudC4KCiAgaWYgKCFldmVudHMgJiYgdm5vZGUuY29tcG9uZW50SW5zdGFuY2UgJiYgdm5vZGUuY29tcG9uZW50SW5zdGFuY2UuJGF0dHJzKSB7CiAgICBldmVudHMgPSB2bm9kZS5jb21wb25lbnRJbnN0YW5jZS4kYXR0cnNbJ2RhdGEtdnYtdmFsaWRhdGUtb24nXTsKICB9IC8vIHJlc29sdmUgaXQgZnJvbSAkX3ZlZVZhbGlkYXRlIG9wdGlvbnMuCgoKICBpZiAoIWV2ZW50cyAmJiB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSkgewogICAgdmFyIGNvbmZpZyA9IFJlc29sdmVyLmdldEN0b3JDb25maWcodm5vZGUpOwogICAgZXZlbnRzID0gY29uZmlnICYmIGNvbmZpZy5ldmVudHM7CiAgfQoKICBpZiAoIWV2ZW50cyAmJiBnZXRDb25maWcoKS5ldmVudHMpIHsKICAgIGV2ZW50cyA9IGdldENvbmZpZygpLmV2ZW50czsKICB9IC8vIHJlc29sdmUgdGhlIG1vZGVsIGV2ZW50IGlmIGl0cyBjb25maWd1cmVkIGZvciBjdXN0b20gY29tcG9uZW50cy4KCgogIGlmIChldmVudHMgJiYgdm5vZGUuY29tcG9uZW50SW5zdGFuY2UgJiYgaW5jbHVkZXMoZXZlbnRzLCAnaW5wdXQnKSkgewogICAgdmFyIHJlZiA9IHZub2RlLmNvbXBvbmVudEluc3RhbmNlLiRvcHRpb25zLm1vZGVsIHx8IHsKICAgICAgZXZlbnQ6ICdpbnB1dCcKICAgIH07CiAgICB2YXIgZXZlbnQgPSByZWYuZXZlbnQ7IC8vIGlmIHRoZSBwcm9wIHdhcyBjb25maWd1cmVkIGJ1dCBub3QgdGhlIG1vZGVsLgoKICAgIGlmICghZXZlbnQpIHsKICAgICAgcmV0dXJuIGV2ZW50czsKICAgIH0KCiAgICBldmVudHMgPSBldmVudHMucmVwbGFjZSgnaW5wdXQnLCBldmVudCk7CiAgfQoKICByZXR1cm4gZXZlbnRzOwp9OwovKioKICogUmVzb2x2ZXMgdGhlIHNjb3BlIGZvciB0aGUgZmllbGQuCiAqIEBwYXJhbSB7Kn0gZWwKICogQHBhcmFtIHsqfSBiaW5kaW5nCiAqLwoKClJlc29sdmVyLnJlc29sdmVTY29wZSA9IGZ1bmN0aW9uIHJlc29sdmVTY29wZShlbCwgYmluZGluZywgdm5vZGUpIHsKICBpZiAodm5vZGUgPT09IHZvaWQgMCkgdm5vZGUgPSB7fTsKICB2YXIgc2NvcGUgPSBudWxsOwoKICBpZiAodm5vZGUuY29tcG9uZW50SW5zdGFuY2UgJiYgaXNOdWxsT3JVbmRlZmluZWQoc2NvcGUpKSB7CiAgICBzY29wZSA9IHZub2RlLmNvbXBvbmVudEluc3RhbmNlLiRhdHRycyAmJiB2bm9kZS5jb21wb25lbnRJbnN0YW5jZS4kYXR0cnNbJ2RhdGEtdnYtc2NvcGUnXTsKICB9CgogIHJldHVybiAhaXNOdWxsT3JVbmRlZmluZWQoc2NvcGUpID8gc2NvcGUgOiBnZXRTY29wZShlbCk7Cn07Ci8qKgogKiBDaGVja3MgaWYgdGhlIG5vZGUgZGlyZWN0aXZlcyBjb250YWlucyBhIHYtbW9kZWwgb3IgYSBzcGVjaWZpZWQgYXJnLgogKiBBcmdzIHRha2UgcHJpb3JpdHkgb3ZlciBtb2RlbHMuCiAqCiAqIEByZXR1cm4ge09iamVjdH0KICovCgoKUmVzb2x2ZXIucmVzb2x2ZU1vZGVsID0gZnVuY3Rpb24gcmVzb2x2ZU1vZGVsKGJpbmRpbmcsIHZub2RlKSB7CiAgaWYgKGJpbmRpbmcuYXJnKSB7CiAgICByZXR1cm4gewogICAgICBleHByZXNzaW9uOiBiaW5kaW5nLmFyZwogICAgfTsKICB9CgogIHZhciBtb2RlbCA9IGZpbmRNb2RlbCh2bm9kZSk7CgogIGlmICghbW9kZWwpIHsKICAgIHJldHVybiBudWxsOwogIH0gLy8gaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS9ibG9iL2Rldi9zcmMvY29yZS91dGlsL2xhbmcuanMjTDI2CgoKICB2YXIgd2F0Y2hhYmxlID0gIS9bXlx3LiRdLy50ZXN0KG1vZGVsLmV4cHJlc3Npb24pICYmIGhhc1BhdGgobW9kZWwuZXhwcmVzc2lvbiwgdm5vZGUuY29udGV4dCk7CiAgdmFyIGxhenkgPSAhIShtb2RlbC5tb2RpZmllcnMgJiYgbW9kZWwubW9kaWZpZXJzLmxhenkpOwoKICBpZiAoIXdhdGNoYWJsZSkgewogICAgcmV0dXJuIHsKICAgICAgZXhwcmVzc2lvbjogbnVsbCwKICAgICAgbGF6eTogbGF6eQogICAgfTsKICB9CgogIHJldHVybiB7CiAgICBleHByZXNzaW9uOiBtb2RlbC5leHByZXNzaW9uLAogICAgbGF6eTogbGF6eQogIH07Cn07Ci8qKgogKiBSZXNvbHZlcyB0aGUgZmllbGQgbmFtZSB0byB0cmlnZ2VyIHZhbGlkYXRpb25zLgogKiBAcmV0dXJuIHtTdHJpbmd9IFRoZSBmaWVsZCBuYW1lLgogKi8KCgpSZXNvbHZlci5yZXNvbHZlTmFtZSA9IGZ1bmN0aW9uIHJlc29sdmVOYW1lKGVsLCB2bm9kZSkgewogIHZhciBuYW1lID0gZ2V0RGF0YUF0dHJpYnV0ZShlbCwgJ25hbWUnKTsKCiAgaWYgKCFuYW1lICYmICF2bm9kZS5jb21wb25lbnRJbnN0YW5jZSkgewogICAgcmV0dXJuIGVsLm5hbWU7CiAgfQoKICBpZiAoIW5hbWUgJiYgdm5vZGUuY29tcG9uZW50SW5zdGFuY2UgJiYgdm5vZGUuY29tcG9uZW50SW5zdGFuY2UuJGF0dHJzKSB7CiAgICBuYW1lID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2UuJGF0dHJzWydkYXRhLXZ2LW5hbWUnXSB8fCB2bm9kZS5jb21wb25lbnRJbnN0YW5jZS4kYXR0cnNbJ25hbWUnXTsKICB9CgogIGlmICghbmFtZSAmJiB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSkgewogICAgdmFyIGNvbmZpZyA9IFJlc29sdmVyLmdldEN0b3JDb25maWcodm5vZGUpOwoKICAgIGlmIChjb25maWcgJiYgaXNDYWxsYWJsZShjb25maWcubmFtZSkpIHsKICAgICAgdmFyIGJvdW5kR2V0dGVyID0gY29uZmlnLm5hbWUuYmluZCh2bm9kZS5jb21wb25lbnRJbnN0YW5jZSk7CiAgICAgIHJldHVybiBib3VuZEdldHRlcigpOwogICAgfQoKICAgIHJldHVybiB2bm9kZS5jb21wb25lbnRJbnN0YW5jZS5uYW1lOwogIH0KCiAgcmV0dXJuIG5hbWU7Cn07Ci8qKgogKiBSZXR1cm5zIGEgdmFsdWUgZ2V0dGVyIGlucHV0IHR5cGUuCiAqLwoKClJlc29sdmVyLnJlc29sdmVHZXR0ZXIgPSBmdW5jdGlvbiByZXNvbHZlR2V0dGVyKGVsLCB2bm9kZSwgbW9kZWwpIHsKICBpZiAobW9kZWwgJiYgbW9kZWwuZXhwcmVzc2lvbikgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIGdldFBhdGgobW9kZWwuZXhwcmVzc2lvbiwgdm5vZGUuY29udGV4dCk7CiAgICB9OwogIH0KCiAgaWYgKHZub2RlLmNvbXBvbmVudEluc3RhbmNlKSB7CiAgICB2YXIgcGF0aCA9IGdldERhdGFBdHRyaWJ1dGUoZWwsICd2YWx1ZS1wYXRoJykgfHwgdm5vZGUuY29tcG9uZW50SW5zdGFuY2UuJGF0dHJzICYmIHZub2RlLmNvbXBvbmVudEluc3RhbmNlLiRhdHRyc1snZGF0YS12di12YWx1ZS1wYXRoJ107CgogICAgaWYgKHBhdGgpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gZ2V0UGF0aChwYXRoLCB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSk7CiAgICAgIH07CiAgICB9CgogICAgdmFyIGNvbmZpZyA9IFJlc29sdmVyLmdldEN0b3JDb25maWcodm5vZGUpOwoKICAgIGlmIChjb25maWcgJiYgaXNDYWxsYWJsZShjb25maWcudmFsdWUpKSB7CiAgICAgIHZhciBib3VuZEdldHRlciA9IGNvbmZpZy52YWx1ZS5iaW5kKHZub2RlLmNvbXBvbmVudEluc3RhbmNlKTsKICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gYm91bmRHZXR0ZXIoKTsKICAgICAgfTsKICAgIH0KCiAgICB2YXIgcmVmID0gdm5vZGUuY29tcG9uZW50SW5zdGFuY2UuJG9wdGlvbnMubW9kZWwgfHwgewogICAgICBwcm9wOiAndmFsdWUnCiAgICB9OwogICAgdmFyIHByb3AgPSByZWYucHJvcDsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB2bm9kZS5jb21wb25lbnRJbnN0YW5jZVtwcm9wXTsKICAgIH07CiAgfQoKICBzd2l0Y2ggKGVsLnR5cGUpIHsKICAgIGNhc2UgJ2NoZWNrYm94JzoKICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgZWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiaW5wdXRbbmFtZT1cIiIgKyBlbC5uYW1lICsgIlwiXSIpOwogICAgICAgIGVscyA9IHRvQXJyYXkoZWxzKS5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICByZXR1cm4gZWwuY2hlY2tlZDsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKCFlbHMubGVuZ3RoKSB7CiAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGVscy5tYXAoZnVuY3Rpb24gKGNoZWNrYm94KSB7CiAgICAgICAgICByZXR1cm4gY2hlY2tib3gudmFsdWU7CiAgICAgICAgfSk7CiAgICAgIH07CgogICAgY2FzZSAncmFkaW8nOgogICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBlbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dFtuYW1lPVwiIiArIGVsLm5hbWUgKyAiXCJdIik7CiAgICAgICAgdmFyIGVsbSA9IGZpbmQoZWxzLCBmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgIHJldHVybiBlbC5jaGVja2VkOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBlbG0gJiYgZWxtLnZhbHVlOwogICAgICB9OwoKICAgIGNhc2UgJ2ZpbGUnOgogICAgICByZXR1cm4gZnVuY3Rpb24gKGNvbnRleHQpIHsKICAgICAgICByZXR1cm4gdG9BcnJheShlbC5maWxlcyk7CiAgICAgIH07CgogICAgY2FzZSAnc2VsZWN0LW11bHRpcGxlJzoKICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gdG9BcnJheShlbC5vcHRpb25zKS5maWx0ZXIoZnVuY3Rpb24gKG9wdCkgewogICAgICAgICAgcmV0dXJuIG9wdC5zZWxlY3RlZDsKICAgICAgICB9KS5tYXAoZnVuY3Rpb24gKG9wdCkgewogICAgICAgICAgcmV0dXJuIG9wdC52YWx1ZTsKICAgICAgICB9KTsKICAgICAgfTsKCiAgICBkZWZhdWx0OgogICAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBlbCAmJiBlbC52YWx1ZTsKICAgICAgfTsKICB9Cn07Cgp2YXIgUlVMRVMgPSB7fTsKCnZhciBSdWxlQ29udGFpbmVyID0gZnVuY3Rpb24gUnVsZUNvbnRhaW5lcigpIHt9OwoKdmFyIHN0YXRpY0FjY2Vzc29ycyA9IHsKICBydWxlczogewogICAgY29uZmlndXJhYmxlOiB0cnVlCiAgfQp9OwoKUnVsZUNvbnRhaW5lci5hZGQgPSBmdW5jdGlvbiBhZGQobmFtZSwgcmVmKSB7CiAgdmFyIHZhbGlkYXRlID0gcmVmLnZhbGlkYXRlOwogIHZhciBvcHRpb25zID0gcmVmLm9wdGlvbnM7CiAgdmFyIHBhcmFtTmFtZXMgPSByZWYucGFyYW1OYW1lczsKICBSVUxFU1tuYW1lXSA9IHsKICAgIHZhbGlkYXRlOiB2YWxpZGF0ZSwKICAgIG9wdGlvbnM6IG9wdGlvbnMsCiAgICBwYXJhbU5hbWVzOiBwYXJhbU5hbWVzCiAgfTsKfTsKCnN0YXRpY0FjY2Vzc29ycy5ydWxlcy5nZXQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIFJVTEVTOwp9OwoKUnVsZUNvbnRhaW5lci5oYXMgPSBmdW5jdGlvbiBoYXMobmFtZSkgewogIHJldHVybiAhIVJVTEVTW25hbWVdOwp9OwoKUnVsZUNvbnRhaW5lci5pc0ltbWVkaWF0ZSA9IGZ1bmN0aW9uIGlzSW1tZWRpYXRlKG5hbWUpIHsKICByZXR1cm4gISEoUlVMRVNbbmFtZV0gJiYgUlVMRVNbbmFtZV0ub3B0aW9ucy5pbW1lZGlhdGUpOwp9OwoKUnVsZUNvbnRhaW5lci5pc1JlcXVpcmVSdWxlID0gZnVuY3Rpb24gaXNSZXF1aXJlUnVsZShuYW1lKSB7CiAgcmV0dXJuICEhKFJVTEVTW25hbWVdICYmIFJVTEVTW25hbWVdLm9wdGlvbnMuY29tcHV0ZXNSZXF1aXJlZCk7Cn07CgpSdWxlQ29udGFpbmVyLmlzVGFyZ2V0UnVsZSA9IGZ1bmN0aW9uIGlzVGFyZ2V0UnVsZShuYW1lKSB7CiAgcmV0dXJuICEhKFJVTEVTW25hbWVdICYmIFJVTEVTW25hbWVdLm9wdGlvbnMuaGFzVGFyZ2V0KTsKfTsKClJ1bGVDb250YWluZXIucmVtb3ZlID0gZnVuY3Rpb24gcmVtb3ZlKHJ1bGVOYW1lKSB7CiAgZGVsZXRlIFJVTEVTW3J1bGVOYW1lXTsKfTsKClJ1bGVDb250YWluZXIuZ2V0UGFyYW1OYW1lcyA9IGZ1bmN0aW9uIGdldFBhcmFtTmFtZXMocnVsZU5hbWUpIHsKICByZXR1cm4gUlVMRVNbcnVsZU5hbWVdICYmIFJVTEVTW3J1bGVOYW1lXS5wYXJhbU5hbWVzOwp9OwoKUnVsZUNvbnRhaW5lci5nZXRPcHRpb25zID0gZnVuY3Rpb24gZ2V0T3B0aW9ucyhydWxlTmFtZSkgewogIHJldHVybiBSVUxFU1tydWxlTmFtZV0gJiYgUlVMRVNbcnVsZU5hbWVdLm9wdGlvbnM7Cn07CgpSdWxlQ29udGFpbmVyLmdldFZhbGlkYXRvck1ldGhvZCA9IGZ1bmN0aW9uIGdldFZhbGlkYXRvck1ldGhvZChydWxlTmFtZSkgewogIHJldHVybiBSVUxFU1tydWxlTmFtZV0gPyBSVUxFU1tydWxlTmFtZV0udmFsaWRhdGUgOiBudWxsOwp9OwoKT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoUnVsZUNvbnRhaW5lciwgc3RhdGljQWNjZXNzb3JzKTsgLy8gCgp2YXIgaXNFdmVudCA9IGZ1bmN0aW9uIGlzRXZlbnQoZXZ0KSB7CiAgcmV0dXJuIHR5cGVvZiBFdmVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgaXNDYWxsYWJsZShFdmVudCkgJiYgZXZ0IGluc3RhbmNlb2YgRXZlbnQgfHwgZXZ0ICYmIGV2dC5zcmNFbGVtZW50Owp9OwoKdmFyIG5vcm1hbGl6ZUV2ZW50cyA9IGZ1bmN0aW9uIG5vcm1hbGl6ZUV2ZW50cyhldnRzKSB7CiAgaWYgKCFldnRzKSB7CiAgICByZXR1cm4gW107CiAgfQoKICByZXR1cm4gdHlwZW9mIGV2dHMgPT09ICdzdHJpbmcnID8gZXZ0cy5zcGxpdCgnfCcpIDogZXZ0czsKfTsKCnZhciBzdXBwb3J0c1Bhc3NpdmUgPSB0cnVlOwoKdmFyIGRldGVjdFBhc3NpdmVTdXBwb3J0ID0gZnVuY3Rpb24gZGV0ZWN0UGFzc2l2ZVN1cHBvcnQoKSB7CiAgdHJ5IHsKICAgIHZhciBvcHRzID0gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAncGFzc2l2ZScsIHsKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgc3VwcG9ydHNQYXNzaXZlID0gdHJ1ZTsKICAgICAgfQogICAgfSk7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGVzdFBhc3NpdmUnLCBudWxsLCBvcHRzKTsKICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd0ZXN0UGFzc2l2ZScsIG51bGwsIG9wdHMpOwogIH0gY2F0Y2ggKGUpIHsKICAgIHN1cHBvcnRzUGFzc2l2ZSA9IGZhbHNlOwogIH0KCiAgcmV0dXJuIHN1cHBvcnRzUGFzc2l2ZTsKfTsKCnZhciBhZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcihlbCwgZXZlbnROYW1lLCBjYikgewogIGVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBjYiwgc3VwcG9ydHNQYXNzaXZlID8gewogICAgcGFzc2l2ZTogdHJ1ZQogIH0gOiBmYWxzZSk7Cn07IC8vIAoKCnZhciBERUZBVUxUX09QVElPTlMgPSB7CiAgdGFyZ2V0T2Y6IG51bGwsCiAgaW1tZWRpYXRlOiBmYWxzZSwKICBwZXJzaXN0OiBmYWxzZSwKICBzY29wZTogbnVsbCwKICBsaXN0ZW46IHRydWUsCiAgbmFtZTogbnVsbCwKICBydWxlczoge30sCiAgdm06IG51bGwsCiAgY2xhc3NlczogZmFsc2UsCiAgdmFsaWRpdHk6IHRydWUsCiAgYXJpYTogdHJ1ZSwKICBldmVudHM6ICdpbnB1dHxibHVyJywKICBkZWxheTogMCwKICBjbGFzc05hbWVzOiB7CiAgICB0b3VjaGVkOiAndG91Y2hlZCcsCiAgICAvLyB0aGUgY29udHJvbCBoYXMgYmVlbiBibHVycmVkCiAgICB1bnRvdWNoZWQ6ICd1bnRvdWNoZWQnLAogICAgLy8gdGhlIGNvbnRyb2wgaGFzbid0IGJlZW4gYmx1cnJlZAogICAgdmFsaWQ6ICd2YWxpZCcsCiAgICAvLyBtb2RlbCBpcyB2YWxpZAogICAgaW52YWxpZDogJ2ludmFsaWQnLAogICAgLy8gbW9kZWwgaXMgaW52YWxpZAogICAgcHJpc3RpbmU6ICdwcmlzdGluZScsCiAgICAvLyBjb250cm9sIGhhcyBub3QgYmVlbiBpbnRlcmFjdGVkIHdpdGgKICAgIGRpcnR5OiAnZGlydHknIC8vIGNvbnRyb2wgaGFzIGJlZW4gaW50ZXJhY3RlZCB3aXRoCgogIH0KfTsKCnZhciBGaWVsZCA9IGZ1bmN0aW9uIEZpZWxkKG9wdGlvbnMpIHsKICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSBvcHRpb25zID0ge307CiAgdGhpcy5pZCA9IHVuaXFJZCgpOwogIHRoaXMuZWwgPSBvcHRpb25zLmVsOwogIHRoaXMudXBkYXRlZCA9IGZhbHNlOwogIHRoaXMudm1JZCA9IG9wdGlvbnMudm1JZDsKICBkZWZpbmVOb25SZWFjdGl2ZSh0aGlzLCAnZGVwZW5kZW5jaWVzJywgW10pOwogIGRlZmluZU5vblJlYWN0aXZlKHRoaXMsICd3YXRjaGVycycsIFtdKTsKICBkZWZpbmVOb25SZWFjdGl2ZSh0aGlzLCAnZXZlbnRzJywgW10pOwogIHRoaXMuZGVsYXkgPSAwOwogIHRoaXMucnVsZXMgPSB7fTsKICB0aGlzLmZvcmNlUmVxdWlyZWQgPSBmYWxzZTsKCiAgdGhpcy5fY2FjaGVJZChvcHRpb25zKTsKCiAgdGhpcy5jbGFzc05hbWVzID0gYXNzaWduKHt9LCBERUZBVUxUX09QVElPTlMuY2xhc3NOYW1lcyk7CiAgb3B0aW9ucyA9IGFzc2lnbih7fSwgREVGQVVMVF9PUFRJT05TLCBvcHRpb25zKTsKICB0aGlzLl9kZWxheSA9ICFpc051bGxPclVuZGVmaW5lZChvcHRpb25zLmRlbGF5KSA/IG9wdGlvbnMuZGVsYXkgOiAwOyAvLyBjYWNoZSBpbml0aWFsIGRlbGF5CgogIHRoaXMudmFsaWRpdHkgPSBvcHRpb25zLnZhbGlkaXR5OwogIHRoaXMuYXJpYSA9IG9wdGlvbnMuYXJpYTsKICB0aGlzLmZsYWdzID0gb3B0aW9ucy5mbGFncyB8fCBjcmVhdGVGbGFncygpOwogIGRlZmluZU5vblJlYWN0aXZlKHRoaXMsICd2bScsIG9wdGlvbnMudm0pOwogIGRlZmluZU5vblJlYWN0aXZlKHRoaXMsICdjb21wb25lbnRJbnN0YW5jZScsIG9wdGlvbnMuY29tcG9uZW50KTsKICB0aGlzLmN0b3JDb25maWcgPSB0aGlzLmNvbXBvbmVudEluc3RhbmNlID8gZ2V0UGF0aCgnJG9wdGlvbnMuJF92ZWVWYWxpZGF0ZScsIHRoaXMuY29tcG9uZW50SW5zdGFuY2UpIDogdW5kZWZpbmVkOwogIHRoaXMudXBkYXRlKG9wdGlvbnMpOyAvLyBzZXQgaW5pdGlhbCB2YWx1ZS4KCiAgdGhpcy5pbml0aWFsVmFsdWUgPSB0aGlzLnZhbHVlOwogIHRoaXMudXBkYXRlZCA9IGZhbHNlOwp9OwoKdmFyIHByb3RvdHlwZUFjY2Vzc29ycyQxID0gewogIHZhbGlkYXRvcjogewogICAgY29uZmlndXJhYmxlOiB0cnVlCiAgfSwKICBpc1JlcXVpcmVkOiB7CiAgICBjb25maWd1cmFibGU6IHRydWUKICB9LAogIGlzRGlzYWJsZWQ6IHsKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogIH0sCiAgYWxpYXM6IHsKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogIH0sCiAgdmFsdWU6IHsKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogIH0sCiAgYmFpbHM6IHsKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogIH0sCiAgcmVqZWN0c0ZhbHNlOiB7CiAgICBjb25maWd1cmFibGU6IHRydWUKICB9Cn07Cgpwcm90b3R5cGVBY2Nlc3NvcnMkMS52YWxpZGF0b3IuZ2V0ID0gZnVuY3Rpb24gKCkgewogIGlmICghdGhpcy52bSB8fCAhdGhpcy52bS4kdmFsaWRhdG9yKSB7CiAgICByZXR1cm4gewogICAgICB2YWxpZGF0ZTogZnVuY3Rpb24gdmFsaWRhdGUoKSB7fQogICAgfTsKICB9CgogIHJldHVybiB0aGlzLnZtLiR2YWxpZGF0b3I7Cn07Cgpwcm90b3R5cGVBY2Nlc3NvcnMkMS5pc1JlcXVpcmVkLmdldCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gISF0aGlzLnJ1bGVzLnJlcXVpcmVkIHx8IHRoaXMuZm9yY2VSZXF1aXJlZDsKfTsKCnByb3RvdHlwZUFjY2Vzc29ycyQxLmlzRGlzYWJsZWQuZ2V0ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiAhISh0aGlzLmVsICYmIHRoaXMuZWwuZGlzYWJsZWQpOwp9OwovKioKICogR2V0cyB0aGUgZGlzcGxheSBuYW1lICh1c2VyLWZyaWVuZGx5IG5hbWUpLgogKi8KCgpwcm90b3R5cGVBY2Nlc3NvcnMkMS5hbGlhcy5nZXQgPSBmdW5jdGlvbiAoKSB7CiAgaWYgKHRoaXMuX2FsaWFzKSB7CiAgICByZXR1cm4gdGhpcy5fYWxpYXM7CiAgfQoKICB2YXIgYWxpYXMgPSBudWxsOwoKICBpZiAodGhpcy5jdG9yQ29uZmlnICYmIHRoaXMuY3RvckNvbmZpZy5hbGlhcykgewogICAgYWxpYXMgPSBpc0NhbGxhYmxlKHRoaXMuY3RvckNvbmZpZy5hbGlhcykgPyB0aGlzLmN0b3JDb25maWcuYWxpYXMuY2FsbCh0aGlzLmNvbXBvbmVudEluc3RhbmNlKSA6IHRoaXMuY3RvckNvbmZpZy5hbGlhczsKICB9CgogIGlmICghYWxpYXMgJiYgdGhpcy5lbCkgewogICAgYWxpYXMgPSBnZXREYXRhQXR0cmlidXRlKHRoaXMuZWwsICdhcycpOwogIH0KCiAgaWYgKCFhbGlhcyAmJiB0aGlzLmNvbXBvbmVudEluc3RhbmNlKSB7CiAgICByZXR1cm4gdGhpcy5jb21wb25lbnRJbnN0YW5jZS4kYXR0cnMgJiYgdGhpcy5jb21wb25lbnRJbnN0YW5jZS4kYXR0cnNbJ2RhdGEtdnYtYXMnXTsKICB9CgogIHJldHVybiBhbGlhczsKfTsKLyoqCiAqIEdldHMgdGhlIGlucHV0IHZhbHVlLgogKi8KCgpwcm90b3R5cGVBY2Nlc3NvcnMkMS52YWx1ZS5nZXQgPSBmdW5jdGlvbiAoKSB7CiAgaWYgKCFpc0NhbGxhYmxlKHRoaXMuZ2V0dGVyKSkgewogICAgcmV0dXJuIHVuZGVmaW5lZDsKICB9CgogIHJldHVybiB0aGlzLmdldHRlcigpOwp9OwoKcHJvdG90eXBlQWNjZXNzb3JzJDEuYmFpbHMuZ2V0ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiB0aGlzLl9iYWlsczsKfTsKLyoqCiAqIElmIHRoZSBmaWVsZCByZWplY3RzIGZhbHNlIGFzIGEgdmFsaWQgdmFsdWUgZm9yIHRoZSByZXF1aXJlZCBydWxlLgogKi8KCgpwcm90b3R5cGVBY2Nlc3NvcnMkMS5yZWplY3RzRmFsc2UuZ2V0ID0gZnVuY3Rpb24gKCkgewogIGlmICh0aGlzLmNvbXBvbmVudEluc3RhbmNlICYmIHRoaXMuY3RvckNvbmZpZykgewogICAgcmV0dXJuICEhdGhpcy5jdG9yQ29uZmlnLnJlamVjdHNGYWxzZTsKICB9CgogIGlmICghdGhpcy5lbCkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgcmV0dXJuIHRoaXMuZWwudHlwZSA9PT0gJ2NoZWNrYm94JzsKfTsKLyoqCiAqIERldGVybWluZXMgaWYgdGhlIGluc3RhbmNlIG1hdGNoZXMgdGhlIG9wdGlvbnMgcHJvdmlkZWQuCiAqLwoKCkZpZWxkLnByb3RvdHlwZS5tYXRjaGVzID0gZnVuY3Rpb24gbWF0Y2hlcyhvcHRpb25zKSB7CiAgdmFyIHRoaXMkMSA9IHRoaXM7CgogIGlmICghb3B0aW9ucykgewogICAgcmV0dXJuIHRydWU7CiAgfQoKICBpZiAob3B0aW9ucy5pZCkgewogICAgcmV0dXJuIHRoaXMuaWQgPT09IG9wdGlvbnMuaWQ7CiAgfQoKICB2YXIgbWF0Y2hlc0NvbXBvbmVudElkID0gaXNOdWxsT3JVbmRlZmluZWQob3B0aW9ucy52bUlkKSA/IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB0cnVlOwogIH0gOiBmdW5jdGlvbiAoaWQpIHsKICAgIHJldHVybiBpZCA9PT0gdGhpcyQxLnZtSWQ7CiAgfTsKCiAgaWYgKCFtYXRjaGVzQ29tcG9uZW50SWQob3B0aW9ucy52bUlkKSkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgaWYgKG9wdGlvbnMubmFtZSA9PT0gdW5kZWZpbmVkICYmIG9wdGlvbnMuc2NvcGUgPT09IHVuZGVmaW5lZCkgewogICAgcmV0dXJuIHRydWU7CiAgfQoKICBpZiAob3B0aW9ucy5zY29wZSA9PT0gdW5kZWZpbmVkKSB7CiAgICByZXR1cm4gdGhpcy5uYW1lID09PSBvcHRpb25zLm5hbWU7CiAgfQoKICBpZiAob3B0aW9ucy5uYW1lID09PSB1bmRlZmluZWQpIHsKICAgIHJldHVybiB0aGlzLnNjb3BlID09PSBvcHRpb25zLnNjb3BlOwogIH0KCiAgcmV0dXJuIG9wdGlvbnMubmFtZSA9PT0gdGhpcy5uYW1lICYmIG9wdGlvbnMuc2NvcGUgPT09IHRoaXMuc2NvcGU7Cn07Ci8qKgogKiBDYWNoZXMgdGhlIGZpZWxkIGlkLgogKi8KCgpGaWVsZC5wcm90b3R5cGUuX2NhY2hlSWQgPSBmdW5jdGlvbiBfY2FjaGVJZChvcHRpb25zKSB7CiAgaWYgKHRoaXMuZWwgJiYgIW9wdGlvbnMudGFyZ2V0T2YpIHsKICAgIHRoaXMuZWwuX3ZlZVZhbGlkYXRlSWQgPSB0aGlzLmlkOwogIH0KfTsKLyoqCiAqIEtlZXBzIGEgcmVmZXJlbmNlIG9mIHRoZSBtb3N0IGN1cnJlbnQgdmFsaWRhdGlvbiBydW4uCiAqLwoKCkZpZWxkLnByb3RvdHlwZS53YWl0Rm9yID0gZnVuY3Rpb24gd2FpdEZvcihwZW5kaW5nUHJvbWlzZSkgewogIHRoaXMuX3dhaXRpbmdGb3IgPSBwZW5kaW5nUHJvbWlzZTsKfTsKCkZpZWxkLnByb3RvdHlwZS5pc1dhaXRpbmdGb3IgPSBmdW5jdGlvbiBpc1dhaXRpbmdGb3IocHJvbWlzZSkgewogIHJldHVybiB0aGlzLl93YWl0aW5nRm9yID09PSBwcm9taXNlOwp9OwovKioKICogVXBkYXRlcyB0aGUgZmllbGQgd2l0aCBjaGFuZ2VkIGRhdGEuCiAqLwoKCkZpZWxkLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUob3B0aW9ucykgewogIHRoaXMudGFyZ2V0T2YgPSBvcHRpb25zLnRhcmdldE9mIHx8IG51bGw7CiAgdGhpcy5pbW1lZGlhdGUgPSBvcHRpb25zLmltbWVkaWF0ZSB8fCB0aGlzLmltbWVkaWF0ZSB8fCBmYWxzZTsKICB0aGlzLnBlcnNpc3QgPSBvcHRpb25zLnBlcnNpc3QgfHwgdGhpcy5wZXJzaXN0IHx8IGZhbHNlOyAvLyB1cGRhdGUgZXJyb3JzIHNjb3BlIGlmIHRoZSBmaWVsZCBzY29wZSB3YXMgY2hhbmdlZC4KCiAgaWYgKCFpc051bGxPclVuZGVmaW5lZChvcHRpb25zLnNjb3BlKSAmJiBvcHRpb25zLnNjb3BlICE9PSB0aGlzLnNjb3BlICYmIGlzQ2FsbGFibGUodGhpcy52YWxpZGF0b3IudXBkYXRlKSkgewogICAgdGhpcy52YWxpZGF0b3IudXBkYXRlKHRoaXMuaWQsIHsKICAgICAgc2NvcGU6IG9wdGlvbnMuc2NvcGUKICAgIH0pOwogIH0KCiAgdGhpcy5zY29wZSA9ICFpc051bGxPclVuZGVmaW5lZChvcHRpb25zLnNjb3BlKSA/IG9wdGlvbnMuc2NvcGUgOiAhaXNOdWxsT3JVbmRlZmluZWQodGhpcy5zY29wZSkgPyB0aGlzLnNjb3BlIDogbnVsbDsKICB0aGlzLm5hbWUgPSAoIWlzTnVsbE9yVW5kZWZpbmVkKG9wdGlvbnMubmFtZSkgPyBTdHJpbmcob3B0aW9ucy5uYW1lKSA6IG9wdGlvbnMubmFtZSkgfHwgdGhpcy5uYW1lIHx8IG51bGw7CiAgdGhpcy5ydWxlcyA9IG9wdGlvbnMucnVsZXMgIT09IHVuZGVmaW5lZCA/IG5vcm1hbGl6ZVJ1bGVzKG9wdGlvbnMucnVsZXMpIDogdGhpcy5ydWxlczsKICB0aGlzLl9iYWlscyA9IG9wdGlvbnMuYmFpbHMgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuYmFpbHMgOiB0aGlzLl9iYWlsczsKICB0aGlzLm1vZGVsID0gb3B0aW9ucy5tb2RlbCB8fCB0aGlzLm1vZGVsOwogIHRoaXMubGlzdGVuID0gb3B0aW9ucy5saXN0ZW4gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubGlzdGVuIDogdGhpcy5saXN0ZW47CiAgdGhpcy5jbGFzc2VzID0gKG9wdGlvbnMuY2xhc3NlcyB8fCB0aGlzLmNsYXNzZXMgfHwgZmFsc2UpICYmICF0aGlzLmNvbXBvbmVudEluc3RhbmNlOwogIHRoaXMuY2xhc3NOYW1lcyA9IGlzT2JqZWN0KG9wdGlvbnMuY2xhc3NOYW1lcykgPyBtZXJnZSh0aGlzLmNsYXNzTmFtZXMsIG9wdGlvbnMuY2xhc3NOYW1lcykgOiB0aGlzLmNsYXNzTmFtZXM7CiAgdGhpcy5nZXR0ZXIgPSBpc0NhbGxhYmxlKG9wdGlvbnMuZ2V0dGVyKSA/IG9wdGlvbnMuZ2V0dGVyIDogdGhpcy5nZXR0ZXI7CiAgdGhpcy5fYWxpYXMgPSBvcHRpb25zLmFsaWFzIHx8IHRoaXMuX2FsaWFzOwogIHRoaXMuZXZlbnRzID0gb3B0aW9ucy5ldmVudHMgPyBub3JtYWxpemVFdmVudHMob3B0aW9ucy5ldmVudHMpIDogdGhpcy5ldmVudHM7CiAgdGhpcy5kZWxheSA9IG1ha2VEZWxheU9iamVjdCh0aGlzLmV2ZW50cywgb3B0aW9ucy5kZWxheSB8fCB0aGlzLmRlbGF5LCB0aGlzLl9kZWxheSk7CiAgdGhpcy51cGRhdGVEZXBlbmRlbmNpZXMoKTsKICB0aGlzLmFkZEFjdGlvbkxpc3RlbmVycygpOwoKICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhdGhpcy5uYW1lICYmICF0aGlzLnRhcmdldE9mKSB7CiAgICB3YXJuKCdBIGZpZWxkIGlzIG1pc3NpbmcgYSAibmFtZSIgb3IgImRhdGEtdnYtbmFtZSIgYXR0cmlidXRlJyk7CiAgfSAvLyB1cGRhdGUgcmVxdWlyZWQgZmxhZyBmbGFncwoKCiAgaWYgKG9wdGlvbnMucnVsZXMgIT09IHVuZGVmaW5lZCkgewogICAgdGhpcy5mbGFncy5yZXF1aXJlZCA9IHRoaXMuaXNSZXF1aXJlZDsKICB9IC8vIHZhbGlkYXRlIGlmIGl0IHdhcyB2YWxpZGF0ZWQgYmVmb3JlIGFuZCBmaWVsZCB3YXMgdXBkYXRlZCBhbmQgdGhlcmUgd2FzIGEgcnVsZXMgbXV0YXRpb24uCgoKICBpZiAodGhpcy5mbGFncy52YWxpZGF0ZWQgJiYgb3B0aW9ucy5ydWxlcyAhPT0gdW5kZWZpbmVkICYmIHRoaXMudXBkYXRlZCkgewogICAgdGhpcy52YWxpZGF0b3IudmFsaWRhdGUoIiMiICsgdGhpcy5pZCk7CiAgfQoKICB0aGlzLnVwZGF0ZWQgPSB0cnVlOwogIHRoaXMuYWRkVmFsdWVMaXN0ZW5lcnMoKTsgLy8gbm8gbmVlZCB0byBjb250aW51ZS4KCiAgaWYgKCF0aGlzLmVsKSB7CiAgICByZXR1cm47CiAgfQoKICB0aGlzLnVwZGF0ZUNsYXNzZXMoKTsKICB0aGlzLnVwZGF0ZUFyaWFBdHRycygpOwp9OwovKioKICogUmVzZXRzIGZpZWxkIGZsYWdzIGFuZCBlcnJvcnMuCiAqLwoKCkZpZWxkLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uIHJlc2V0KCkgewogIHZhciB0aGlzJDEgPSB0aGlzOwoKICBpZiAodGhpcy5fY2FuY2VsbGF0aW9uVG9rZW4pIHsKICAgIHRoaXMuX2NhbmNlbGxhdGlvblRva2VuLmNhbmNlbGxlZCA9IHRydWU7CiAgICBkZWxldGUgdGhpcy5fY2FuY2VsbGF0aW9uVG9rZW47CiAgfQoKICB2YXIgZGVmYXVsdHMgPSBjcmVhdGVGbGFncygpOwogIE9iamVjdC5rZXlzKHRoaXMuZmxhZ3MpLmZpbHRlcihmdW5jdGlvbiAoZmxhZykgewogICAgcmV0dXJuIGZsYWcgIT09ICdyZXF1aXJlZCc7CiAgfSkuZm9yRWFjaChmdW5jdGlvbiAoZmxhZykgewogICAgdGhpcyQxLmZsYWdzW2ZsYWddID0gZGVmYXVsdHNbZmxhZ107CiAgfSk7IC8vIHVwZGF0ZSBpbml0aWFsIHZhbHVlCgogIHRoaXMuaW5pdGlhbFZhbHVlID0gdGhpcy52YWx1ZTsKICB0aGlzLmZsYWdzLmNoYW5nZWQgPSBmYWxzZTsKICB0aGlzLmFkZFZhbHVlTGlzdGVuZXJzKCk7CiAgdGhpcy5hZGRBY3Rpb25MaXN0ZW5lcnMoKTsKICB0aGlzLnVwZGF0ZUNsYXNzZXModHJ1ZSk7CiAgdGhpcy51cGRhdGVBcmlhQXR0cnMoKTsKICB0aGlzLnVwZGF0ZUN1c3RvbVZhbGlkaXR5KCk7Cn07Ci8qKgogKiBTZXRzIHRoZSBmbGFncyBhbmQgdGhlaXIgbmVnYXRlZCBjb3VudGVycGFydHMsIGFuZCB1cGRhdGVzIHRoZSBjbGFzc2VzIGFuZCByZS1hZGRzIGFjdGlvbiBsaXN0ZW5lcnMuCiAqLwoKCkZpZWxkLnByb3RvdHlwZS5zZXRGbGFncyA9IGZ1bmN0aW9uIHNldEZsYWdzKGZsYWdzKSB7CiAgdmFyIHRoaXMkMSA9IHRoaXM7CiAgdmFyIG5lZ2F0ZWQgPSB7CiAgICBwcmlzdGluZTogJ2RpcnR5JywKICAgIGRpcnR5OiAncHJpc3RpbmUnLAogICAgdmFsaWQ6ICdpbnZhbGlkJywKICAgIGludmFsaWQ6ICd2YWxpZCcsCiAgICB0b3VjaGVkOiAndW50b3VjaGVkJywKICAgIHVudG91Y2hlZDogJ3RvdWNoZWQnCiAgfTsKICBPYmplY3Qua2V5cyhmbGFncykuZm9yRWFjaChmdW5jdGlvbiAoZmxhZykgewogICAgdGhpcyQxLmZsYWdzW2ZsYWddID0gZmxhZ3NbZmxhZ107IC8vIGlmIGl0IGhhcyBhIG5lZ2F0aW9uIGFuZCB3YXMgbm90IHNwZWNpZmllZCwgc2V0IGl0IGFzIHdlbGwuCgogICAgaWYgKG5lZ2F0ZWRbZmxhZ10gJiYgZmxhZ3NbbmVnYXRlZFtmbGFnXV0gPT09IHVuZGVmaW5lZCkgewogICAgICB0aGlzJDEuZmxhZ3NbbmVnYXRlZFtmbGFnXV0gPSAhZmxhZ3NbZmxhZ107CiAgICB9CiAgfSk7CgogIGlmIChmbGFncy51bnRvdWNoZWQgIT09IHVuZGVmaW5lZCB8fCBmbGFncy50b3VjaGVkICE9PSB1bmRlZmluZWQgfHwgZmxhZ3MuZGlydHkgIT09IHVuZGVmaW5lZCB8fCBmbGFncy5wcmlzdGluZSAhPT0gdW5kZWZpbmVkKSB7CiAgICB0aGlzLmFkZEFjdGlvbkxpc3RlbmVycygpOwogIH0KCiAgdGhpcy51cGRhdGVDbGFzc2VzKCk7CiAgdGhpcy51cGRhdGVBcmlhQXR0cnMoKTsKICB0aGlzLnVwZGF0ZUN1c3RvbVZhbGlkaXR5KCk7Cn07Ci8qKgogKiBEZXRlcm1pbmVzIGlmIHRoZSBmaWVsZCByZXF1aXJlcyByZWZlcmVuY2VzIHRvIHRhcmdldCBmaWVsZHMuCiovCgoKRmllbGQucHJvdG90eXBlLnVwZGF0ZURlcGVuZGVuY2llcyA9IGZ1bmN0aW9uIHVwZGF0ZURlcGVuZGVuY2llcygpIHsKICB2YXIgdGhpcyQxID0gdGhpczsgLy8gcmVzZXQgZGVwZW5kZW5jaWVzLgoKICB0aGlzLmRlcGVuZGVuY2llcy5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7CiAgICByZXR1cm4gZC5maWVsZC5kZXN0cm95KCk7CiAgfSk7CiAgdGhpcy5kZXBlbmRlbmNpZXMgPSBbXTsgLy8gd2UgZ2V0IHRoZSBzZWxlY3RvcnMgZm9yIGVhY2ggZmllbGQuCgogIHZhciBmaWVsZHMgPSBPYmplY3Qua2V5cyh0aGlzLnJ1bGVzKS5yZWR1Y2UoZnVuY3Rpb24gKHByZXYsIHIpIHsKICAgIGlmIChSdWxlQ29udGFpbmVyLmlzVGFyZ2V0UnVsZShyKSkgewogICAgICBwcmV2LnB1c2goewogICAgICAgIHNlbGVjdG9yOiB0aGlzJDEucnVsZXNbcl1bMF0sCiAgICAgICAgbmFtZTogcgogICAgICB9KTsKICAgIH0KCiAgICByZXR1cm4gcHJldjsKICB9LCBbXSk7CgogIGlmICghZmllbGRzLmxlbmd0aCB8fCAhdGhpcy52bSB8fCAhdGhpcy52bS4kZWwpIHsKICAgIHJldHVybjsKICB9IC8vIG11c3QgYmUgY29udGFpbmVkIHdpdGhpbiB0aGUgc2FtZSBjb21wb25lbnQsIHNvIHdlIHVzZSB0aGUgdm0gcm9vdCBlbGVtZW50IGNvbnN0cmFpbiBvdXIgZG9tIHNlYXJjaC4KCgogIGZpZWxkcy5mb3JFYWNoKGZ1bmN0aW9uIChyZWYkMSkgewogICAgdmFyIHNlbGVjdG9yID0gcmVmJDEuc2VsZWN0b3I7CiAgICB2YXIgbmFtZSA9IHJlZiQxLm5hbWU7CiAgICB2YXIgcmVmID0gdGhpcyQxLnZtLiRyZWZzW3NlbGVjdG9yXTsKICAgIHZhciBlbCA9IEFycmF5LmlzQXJyYXkocmVmKSA/IHJlZlswXSA6IHJlZjsKCiAgICBpZiAoIWVsKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB2YXIgb3B0aW9ucyA9IHsKICAgICAgdm06IHRoaXMkMS52bSwKICAgICAgY2xhc3NlczogdGhpcyQxLmNsYXNzZXMsCiAgICAgIGNsYXNzTmFtZXM6IHRoaXMkMS5jbGFzc05hbWVzLAogICAgICBkZWxheTogdGhpcyQxLmRlbGF5LAogICAgICBzY29wZTogdGhpcyQxLnNjb3BlLAogICAgICBldmVudHM6IHRoaXMkMS5ldmVudHMuam9pbignfCcpLAogICAgICBpbW1lZGlhdGU6IHRoaXMkMS5pbW1lZGlhdGUsCiAgICAgIHRhcmdldE9mOiB0aGlzJDEuaWQKICAgIH07IC8vIHByb2JhYmx5IGEgY29tcG9uZW50LgoKICAgIGlmIChpc0NhbGxhYmxlKGVsLiR3YXRjaCkpIHsKICAgICAgb3B0aW9ucy5jb21wb25lbnQgPSBlbDsKICAgICAgb3B0aW9ucy5lbCA9IGVsLiRlbDsKICAgICAgb3B0aW9ucy5nZXR0ZXIgPSBSZXNvbHZlci5yZXNvbHZlR2V0dGVyKGVsLiRlbCwgZWwuJHZub2RlKTsKICAgIH0gZWxzZSB7CiAgICAgIG9wdGlvbnMuZWwgPSBlbDsKICAgICAgb3B0aW9ucy5nZXR0ZXIgPSBSZXNvbHZlci5yZXNvbHZlR2V0dGVyKGVsLCB7fSk7CiAgICB9CgogICAgdGhpcyQxLmRlcGVuZGVuY2llcy5wdXNoKHsKICAgICAgbmFtZTogbmFtZSwKICAgICAgZmllbGQ6IG5ldyBGaWVsZChvcHRpb25zKQogICAgfSk7CiAgfSk7Cn07Ci8qKgogKiBSZW1vdmVzIGxpc3RlbmVycy4KICovCgoKRmllbGQucHJvdG90eXBlLnVud2F0Y2ggPSBmdW5jdGlvbiB1bndhdGNoKHRhZykgewogIGlmICh0YWcgPT09IHZvaWQgMCkgdGFnID0gbnVsbDsKCiAgaWYgKCF0YWcpIHsKICAgIHRoaXMud2F0Y2hlcnMuZm9yRWFjaChmdW5jdGlvbiAodykgewogICAgICByZXR1cm4gdy51bndhdGNoKCk7CiAgICB9KTsKICAgIHRoaXMud2F0Y2hlcnMgPSBbXTsKICAgIHJldHVybjsKICB9CgogIHRoaXMud2F0Y2hlcnMuZmlsdGVyKGZ1bmN0aW9uICh3KSB7CiAgICByZXR1cm4gdGFnLnRlc3Qody50YWcpOwogIH0pLmZvckVhY2goZnVuY3Rpb24gKHcpIHsKICAgIHJldHVybiB3LnVud2F0Y2goKTsKICB9KTsKICB0aGlzLndhdGNoZXJzID0gdGhpcy53YXRjaGVycy5maWx0ZXIoZnVuY3Rpb24gKHcpIHsKICAgIHJldHVybiAhdGFnLnRlc3Qody50YWcpOwogIH0pOwp9OwovKioKICogVXBkYXRlcyB0aGUgZWxlbWVudCBjbGFzc2VzIGRlcGVuZGluZyBvbiBlYWNoIGZpZWxkIGZsYWcgc3RhdHVzLgogKi8KCgpGaWVsZC5wcm90b3R5cGUudXBkYXRlQ2xhc3NlcyA9IGZ1bmN0aW9uIHVwZGF0ZUNsYXNzZXMoaXNSZXNldCkgewogIHZhciB0aGlzJDEgPSB0aGlzOwogIGlmIChpc1Jlc2V0ID09PSB2b2lkIDApIGlzUmVzZXQgPSBmYWxzZTsKCiAgaWYgKCF0aGlzLmNsYXNzZXMgfHwgdGhpcy5pc0Rpc2FibGVkKSB7CiAgICByZXR1cm47CiAgfQoKICB2YXIgYXBwbHlDbGFzc2VzID0gZnVuY3Rpb24gYXBwbHlDbGFzc2VzKGVsKSB7CiAgICB0b2dnbGVDbGFzcyhlbCwgdGhpcyQxLmNsYXNzTmFtZXMuZGlydHksIHRoaXMkMS5mbGFncy5kaXJ0eSk7CiAgICB0b2dnbGVDbGFzcyhlbCwgdGhpcyQxLmNsYXNzTmFtZXMucHJpc3RpbmUsIHRoaXMkMS5mbGFncy5wcmlzdGluZSk7CiAgICB0b2dnbGVDbGFzcyhlbCwgdGhpcyQxLmNsYXNzTmFtZXMudG91Y2hlZCwgdGhpcyQxLmZsYWdzLnRvdWNoZWQpOwogICAgdG9nZ2xlQ2xhc3MoZWwsIHRoaXMkMS5jbGFzc05hbWVzLnVudG91Y2hlZCwgdGhpcyQxLmZsYWdzLnVudG91Y2hlZCk7IC8vIHJlbW92ZSB2YWxpZC9pbnZhbGlkIGNsYXNzZXMgb24gcmVzZXQuCgogICAgaWYgKGlzUmVzZXQpIHsKICAgICAgdG9nZ2xlQ2xhc3MoZWwsIHRoaXMkMS5jbGFzc05hbWVzLnZhbGlkLCBmYWxzZSk7CiAgICAgIHRvZ2dsZUNsYXNzKGVsLCB0aGlzJDEuY2xhc3NOYW1lcy5pbnZhbGlkLCBmYWxzZSk7CiAgICB9IC8vIG1ha2Ugc3VyZSB3ZSBkb24ndCBzZXQgYW55IGNsYXNzZXMgaWYgdGhlIHN0YXRlIGlzIHVuZGV0ZXJtaW5lZC4KCgogICAgaWYgKCFpc051bGxPclVuZGVmaW5lZCh0aGlzJDEuZmxhZ3MudmFsaWQpICYmIHRoaXMkMS5mbGFncy52YWxpZGF0ZWQpIHsKICAgICAgdG9nZ2xlQ2xhc3MoZWwsIHRoaXMkMS5jbGFzc05hbWVzLnZhbGlkLCB0aGlzJDEuZmxhZ3MudmFsaWQpOwogICAgfQoKICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQodGhpcyQxLmZsYWdzLmludmFsaWQpICYmIHRoaXMkMS5mbGFncy52YWxpZGF0ZWQpIHsKICAgICAgdG9nZ2xlQ2xhc3MoZWwsIHRoaXMkMS5jbGFzc05hbWVzLmludmFsaWQsIHRoaXMkMS5mbGFncy5pbnZhbGlkKTsKICAgIH0KICB9OwoKICBpZiAoIWlzQ2hlY2tib3hPclJhZGlvSW5wdXQodGhpcy5lbCkpIHsKICAgIGFwcGx5Q2xhc3Nlcyh0aGlzLmVsKTsKICAgIHJldHVybjsKICB9CgogIHZhciBlbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dFtuYW1lPVwiIiArIHRoaXMuZWwubmFtZSArICJcIl0iKTsKICB0b0FycmF5KGVscykuZm9yRWFjaChhcHBseUNsYXNzZXMpOwp9OwovKioKICogQWRkcyB0aGUgbGlzdGVuZXJzIHJlcXVpcmVkIGZvciBhdXRvbWF0aWMgY2xhc3NlcyBhbmQgc29tZSBmbGFncy4KICovCgoKRmllbGQucHJvdG90eXBlLmFkZEFjdGlvbkxpc3RlbmVycyA9IGZ1bmN0aW9uIGFkZEFjdGlvbkxpc3RlbmVycygpIHsKICB2YXIgdGhpcyQxID0gdGhpczsgLy8gcmVtb3ZlIHByZXZpb3VzIGxpc3RlbmVycy4KCiAgdGhpcy51bndhdGNoKC9jbGFzcy8pOwoKICBpZiAoIXRoaXMuZWwpIHsKICAgIHJldHVybjsKICB9CgogIHZhciBvbkJsdXIgPSBmdW5jdGlvbiBvbkJsdXIoKSB7CiAgICB0aGlzJDEuZmxhZ3MudG91Y2hlZCA9IHRydWU7CiAgICB0aGlzJDEuZmxhZ3MudW50b3VjaGVkID0gZmFsc2U7CgogICAgaWYgKHRoaXMkMS5jbGFzc2VzKSB7CiAgICAgIHRvZ2dsZUNsYXNzKHRoaXMkMS5lbCwgdGhpcyQxLmNsYXNzTmFtZXMudG91Y2hlZCwgdHJ1ZSk7CiAgICAgIHRvZ2dsZUNsYXNzKHRoaXMkMS5lbCwgdGhpcyQxLmNsYXNzTmFtZXMudW50b3VjaGVkLCBmYWxzZSk7CiAgICB9IC8vIG9ubHkgbmVlZGVkIG9uY2UuCgoKICAgIHRoaXMkMS51bndhdGNoKC9eY2xhc3NfYmx1ciQvKTsKICB9OwoKICB2YXIgaW5wdXRFdmVudCA9IGlzVGV4dElucHV0KHRoaXMuZWwpID8gJ2lucHV0JyA6ICdjaGFuZ2UnOwoKICB2YXIgb25JbnB1dCA9IGZ1bmN0aW9uIG9uSW5wdXQoKSB7CiAgICB0aGlzJDEuZmxhZ3MuZGlydHkgPSB0cnVlOwogICAgdGhpcyQxLmZsYWdzLnByaXN0aW5lID0gZmFsc2U7CgogICAgaWYgKHRoaXMkMS5jbGFzc2VzKSB7CiAgICAgIHRvZ2dsZUNsYXNzKHRoaXMkMS5lbCwgdGhpcyQxLmNsYXNzTmFtZXMucHJpc3RpbmUsIGZhbHNlKTsKICAgICAgdG9nZ2xlQ2xhc3ModGhpcyQxLmVsLCB0aGlzJDEuY2xhc3NOYW1lcy5kaXJ0eSwgdHJ1ZSk7CiAgICB9IC8vIG9ubHkgbmVlZGVkIG9uY2UuCgoKICAgIHRoaXMkMS51bndhdGNoKC9eY2xhc3NfaW5wdXQkLyk7CiAgfTsKCiAgaWYgKHRoaXMuY29tcG9uZW50SW5zdGFuY2UgJiYgaXNDYWxsYWJsZSh0aGlzLmNvbXBvbmVudEluc3RhbmNlLiRvbmNlKSkgewogICAgdGhpcy5jb21wb25lbnRJbnN0YW5jZS4kb25jZSgnaW5wdXQnLCBvbklucHV0KTsKICAgIHRoaXMuY29tcG9uZW50SW5zdGFuY2UuJG9uY2UoJ2JsdXInLCBvbkJsdXIpOwogICAgdGhpcy53YXRjaGVycy5wdXNoKHsKICAgICAgdGFnOiAnY2xhc3NfaW5wdXQnLAogICAgICB1bndhdGNoOiBmdW5jdGlvbiB1bndhdGNoKCkgewogICAgICAgIHRoaXMkMS5jb21wb25lbnRJbnN0YW5jZS4kb2ZmKCdpbnB1dCcsIG9uSW5wdXQpOwogICAgICB9CiAgICB9KTsKICAgIHRoaXMud2F0Y2hlcnMucHVzaCh7CiAgICAgIHRhZzogJ2NsYXNzX2JsdXInLAogICAgICB1bndhdGNoOiBmdW5jdGlvbiB1bndhdGNoKCkgewogICAgICAgIHRoaXMkMS5jb21wb25lbnRJbnN0YW5jZS4kb2ZmKCdibHVyJywgb25CbHVyKTsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm47CiAgfQoKICBpZiAoIXRoaXMuZWwpIHsKICAgIHJldHVybjsKICB9CgogIGFkZEV2ZW50TGlzdGVuZXIodGhpcy5lbCwgaW5wdXRFdmVudCwgb25JbnB1dCk7IC8vIENoZWNrYm94ZXMgYW5kIHJhZGlvIGJ1dHRvbnMgb24gTWFjIGRvbid0IGVtaXQgYmx1ciBuYXR1cmFsbHksIHNvIHdlIGxpc3RlbiBvbiBjbGljayBpbnN0ZWFkLgoKICB2YXIgYmx1ckV2ZW50ID0gaXNDaGVja2JveE9yUmFkaW9JbnB1dCh0aGlzLmVsKSA/ICdjaGFuZ2UnIDogJ2JsdXInOwogIGFkZEV2ZW50TGlzdGVuZXIodGhpcy5lbCwgYmx1ckV2ZW50LCBvbkJsdXIpOwogIHRoaXMud2F0Y2hlcnMucHVzaCh7CiAgICB0YWc6ICdjbGFzc19pbnB1dCcsCiAgICB1bndhdGNoOiBmdW5jdGlvbiB1bndhdGNoKCkgewogICAgICB0aGlzJDEuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihpbnB1dEV2ZW50LCBvbklucHV0KTsKICAgIH0KICB9KTsKICB0aGlzLndhdGNoZXJzLnB1c2goewogICAgdGFnOiAnY2xhc3NfYmx1cicsCiAgICB1bndhdGNoOiBmdW5jdGlvbiB1bndhdGNoKCkgewogICAgICB0aGlzJDEuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihibHVyRXZlbnQsIG9uQmx1cik7CiAgICB9CiAgfSk7Cn07CgpGaWVsZC5wcm90b3R5cGUuY2hlY2tWYWx1ZUNoYW5nZWQgPSBmdW5jdGlvbiBjaGVja1ZhbHVlQ2hhbmdlZCgpIHsKICAvLyBoYW5kbGUgc29tZSBwZW9wbGUgaW5pdGlhbGl6ZSB0aGUgdmFsdWUgdG8gbnVsbCwgc2luY2UgdGV4dCBpbnB1dHMgaGF2ZSBlbXB0eSBzdHJpbmcgdmFsdWUuCiAgaWYgKHRoaXMuaW5pdGlhbFZhbHVlID09PSBudWxsICYmIHRoaXMudmFsdWUgPT09ICcnICYmIGlzVGV4dElucHV0KHRoaXMuZWwpKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICByZXR1cm4gdGhpcy52YWx1ZSAhPT0gdGhpcy5pbml0aWFsVmFsdWU7Cn07Ci8qKgogKiBEZXRlcm1pbmVzIHRoZSBzdWl0YWJsZSBwcmltYXJ5IGV2ZW50IHRvIGxpc3RlbiBmb3IuCiAqLwoKCkZpZWxkLnByb3RvdHlwZS5fZGV0ZXJtaW5lSW5wdXRFdmVudCA9IGZ1bmN0aW9uIF9kZXRlcm1pbmVJbnB1dEV2ZW50KCkgewogIC8vIGlmIGl0cyBhIGN1c3RvbSBjb21wb25lbnQsIHVzZSB0aGUgY3VzdG9taXplZCBtb2RlbCBldmVudCBvciB0aGUgaW5wdXQgZXZlbnQuCiAgaWYgKHRoaXMuY29tcG9uZW50SW5zdGFuY2UpIHsKICAgIHJldHVybiB0aGlzLmNvbXBvbmVudEluc3RhbmNlLiRvcHRpb25zLm1vZGVsICYmIHRoaXMuY29tcG9uZW50SW5zdGFuY2UuJG9wdGlvbnMubW9kZWwuZXZlbnQgfHwgJ2lucHV0JzsKICB9CgogIGlmICh0aGlzLm1vZGVsICYmIHRoaXMubW9kZWwubGF6eSkgewogICAgcmV0dXJuICdjaGFuZ2UnOwogIH0KCiAgaWYgKGlzVGV4dElucHV0KHRoaXMuZWwpKSB7CiAgICByZXR1cm4gJ2lucHV0JzsKICB9CgogIHJldHVybiAnY2hhbmdlJzsKfTsKLyoqCiAqIERldGVybWluZXMgdGhlIGxpc3Qgb2YgZXZlbnRzIHRvIGxpc3RlbiB0by4KICovCgoKRmllbGQucHJvdG90eXBlLl9kZXRlcm1pbmVFdmVudExpc3QgPSBmdW5jdGlvbiBfZGV0ZXJtaW5lRXZlbnRMaXN0KGRlZmF1bHRJbnB1dEV2ZW50KSB7CiAgdmFyIHRoaXMkMSA9IHRoaXM7IC8vIGlmIG5vIGV2ZW50IGlzIGNvbmZpZ3VyZWQsIG9yIGl0IGlzIGEgY29tcG9uZW50IG9yIGEgdGV4dCBpbnB1dCB0aGVuIHJlc3BlY3QgdGhlIHVzZXIgY2hvaWNlLgoKICBpZiAoIXRoaXMuZXZlbnRzLmxlbmd0aCB8fCB0aGlzLmNvbXBvbmVudEluc3RhbmNlIHx8IGlzVGV4dElucHV0KHRoaXMuZWwpKSB7CiAgICByZXR1cm4gW10uY29uY2F0KHRoaXMuZXZlbnRzKS5tYXAoZnVuY3Rpb24gKGV2dCkgewogICAgICBpZiAoZXZ0ID09PSAnaW5wdXQnICYmIHRoaXMkMS5tb2RlbCAmJiB0aGlzJDEubW9kZWwubGF6eSkgewogICAgICAgIHJldHVybiAnY2hhbmdlJzsKICAgICAgfQoKICAgICAgcmV0dXJuIGV2dDsKICAgIH0pOwogIH0gLy8gZm9yY2Ugc3VpdGFibGUgZXZlbnQgZm9yIG5vbi10ZXh0IHR5cGUgZmllbGRzLgoKCiAgcmV0dXJuIHRoaXMuZXZlbnRzLm1hcChmdW5jdGlvbiAoZSkgewogICAgaWYgKGUgPT09ICdpbnB1dCcpIHsKICAgICAgcmV0dXJuIGRlZmF1bHRJbnB1dEV2ZW50OwogICAgfQoKICAgIHJldHVybiBlOwogIH0pOwp9OwovKioKICogQWRkcyB0aGUgbGlzdGVuZXJzIHJlcXVpcmVkIGZvciB2YWxpZGF0aW9uLgogKi8KCgpGaWVsZC5wcm90b3R5cGUuYWRkVmFsdWVMaXN0ZW5lcnMgPSBmdW5jdGlvbiBhZGRWYWx1ZUxpc3RlbmVycygpIHsKICB2YXIgdGhpcyQxID0gdGhpczsKICB0aGlzLnVud2F0Y2goL15pbnB1dF8uKy8pOwoKICBpZiAoIXRoaXMubGlzdGVuIHx8ICF0aGlzLmVsKSB7CiAgICByZXR1cm47CiAgfQoKICB2YXIgdG9rZW4gPSB7CiAgICBjYW5jZWxsZWQ6IGZhbHNlCiAgfTsKICB2YXIgZm4gPSB0aGlzLnRhcmdldE9mID8gZnVuY3Rpb24gKCkgewogICAgdmFyIHRhcmdldCA9IHRoaXMkMS52YWxpZGF0b3IuX3Jlc29sdmVGaWVsZCgiIyIgKyB0aGlzJDEudGFyZ2V0T2YpOwoKICAgIGlmICh0YXJnZXQgJiYgdGFyZ2V0LmZsYWdzLnZhbGlkYXRlZCkgewogICAgICB0aGlzJDEudmFsaWRhdG9yLnZhbGlkYXRlKCIjIiArIHRoaXMkMS50YXJnZXRPZik7CiAgICB9CiAgfSA6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBhcmdzID0gW10sCiAgICAgICAgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsKCiAgICB3aGlsZSAobGVuLS0pIHsKICAgICAgYXJnc1tsZW5dID0gYXJndW1lbnRzW2xlbl07CiAgICB9IC8vIGlmIGl0cyBhIERPTSBldmVudCwgcmVzb2x2ZSB0aGUgdmFsdWUsIG90aGVyd2lzZSB1c2UgdGhlIGZpcnN0IHBhcmFtZXRlciBhcyB0aGUgdmFsdWUuCgoKICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCB8fCBpc0V2ZW50KGFyZ3NbMF0pKSB7CiAgICAgIGFyZ3NbMF0gPSB0aGlzJDEudmFsdWU7CiAgICB9CgogICAgdGhpcyQxLmZsYWdzLnBlbmRpbmcgPSB0cnVlOwogICAgdGhpcyQxLl9jYW5jZWxsYXRpb25Ub2tlbiA9IHRva2VuOwogICAgdGhpcyQxLnZhbGlkYXRvci52YWxpZGF0ZSgiIyIgKyB0aGlzJDEuaWQsIGFyZ3NbMF0pOwogIH07CgogIHZhciBpbnB1dEV2ZW50ID0gdGhpcy5fZGV0ZXJtaW5lSW5wdXRFdmVudCgpOwoKICB2YXIgZXZlbnRzID0gdGhpcy5fZGV0ZXJtaW5lRXZlbnRMaXN0KGlucHV0RXZlbnQpOyAvLyBpZiB0aGVyZSBpcyBhIG1vZGVsIGFuZCBhbiBvbiBpbnB1dCB2YWxpZGF0aW9uIGlzIHJlcXVlc3RlZC4KCgogIGlmICh0aGlzLm1vZGVsICYmIGluY2x1ZGVzKGV2ZW50cywgaW5wdXRFdmVudCkpIHsKICAgIHZhciBjdHggPSBudWxsOwogICAgdmFyIGV4cHJlc3Npb24gPSB0aGlzLm1vZGVsLmV4cHJlc3Npb247IC8vIGlmIGl0cyB3YXRjaGFibGUgZnJvbSB0aGUgY29udGV4dCB2bS4KCiAgICBpZiAodGhpcy5tb2RlbC5leHByZXNzaW9uKSB7CiAgICAgIGN0eCA9IHRoaXMudm07CiAgICAgIGV4cHJlc3Npb24gPSB0aGlzLm1vZGVsLmV4cHJlc3Npb247CiAgICB9IC8vIHdhdGNoIGl0IGZyb20gdGhlIGN1c3RvbSBjb21wb25lbnQgdm0gaW5zdGVhZC4KCgogICAgaWYgKCFleHByZXNzaW9uICYmIHRoaXMuY29tcG9uZW50SW5zdGFuY2UgJiYgdGhpcy5jb21wb25lbnRJbnN0YW5jZS4kb3B0aW9ucy5tb2RlbCkgewogICAgICBjdHggPSB0aGlzLmNvbXBvbmVudEluc3RhbmNlOwogICAgICBleHByZXNzaW9uID0gdGhpcy5jb21wb25lbnRJbnN0YW5jZS4kb3B0aW9ucy5tb2RlbC5wcm9wIHx8ICd2YWx1ZSc7CiAgICB9CgogICAgaWYgKGN0eCAmJiBleHByZXNzaW9uKSB7CiAgICAgIHZhciBkZWJvdW5jZWRGbiA9IGRlYm91bmNlKGZuLCB0aGlzLmRlbGF5W2lucHV0RXZlbnRdLCB0b2tlbik7CgogICAgICB2YXIgX3Vud2F0Y2ggPSBjdHguJHdhdGNoKGV4cHJlc3Npb24sIGRlYm91bmNlZEZuKTsKCiAgICAgIHRoaXMud2F0Y2hlcnMucHVzaCh7CiAgICAgICAgdGFnOiAnaW5wdXRfbW9kZWwnLAogICAgICAgIHVud2F0Y2g6IGZ1bmN0aW9uIHVud2F0Y2goKSB7CiAgICAgICAgICB0aGlzJDEudm0uJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3Vud2F0Y2goKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7IC8vIGZpbHRlciBvdXQgaW5wdXQgZXZlbnQgYXMgaXQgaXMgYWxyZWFkeSBoYW5kbGVkIGJ5IHRoZSB3YXRjaGVyIEFQSS4KCiAgICAgIGV2ZW50cyA9IGV2ZW50cy5maWx0ZXIoZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gZSAhPT0gaW5wdXRFdmVudDsKICAgICAgfSk7CiAgICB9CiAgfSAvLyBBZGQgZXZlbnRzLgoKCiAgZXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgIHZhciBkZWJvdW5jZWRGbiA9IGRlYm91bmNlKGZuLCB0aGlzJDEuZGVsYXlbZV0sIHRva2VuKTsKCiAgICB0aGlzJDEuX2FkZENvbXBvbmVudEV2ZW50TGlzdGVuZXIoZSwgZGVib3VuY2VkRm4pOwoKICAgIHRoaXMkMS5fYWRkSFRNTEV2ZW50TGlzdGVuZXIoZSwgZGVib3VuY2VkRm4pOwogIH0pOwp9OwoKRmllbGQucHJvdG90eXBlLl9hZGRDb21wb25lbnRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gX2FkZENvbXBvbmVudEV2ZW50TGlzdGVuZXIoZXZ0LCB2YWxpZGF0ZSkgewogIHZhciB0aGlzJDEgPSB0aGlzOwoKICBpZiAoIXRoaXMuY29tcG9uZW50SW5zdGFuY2UpIHsKICAgIHJldHVybjsKICB9CgogIHRoaXMuY29tcG9uZW50SW5zdGFuY2UuJG9uKGV2dCwgdmFsaWRhdGUpOwogIHRoaXMud2F0Y2hlcnMucHVzaCh7CiAgICB0YWc6ICdpbnB1dF92dWUnLAogICAgdW53YXRjaDogZnVuY3Rpb24gdW53YXRjaCgpIHsKICAgICAgdGhpcyQxLmNvbXBvbmVudEluc3RhbmNlLiRvZmYoZXZ0LCB2YWxpZGF0ZSk7CiAgICB9CiAgfSk7Cn07CgpGaWVsZC5wcm90b3R5cGUuX2FkZEhUTUxFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gX2FkZEhUTUxFdmVudExpc3RlbmVyKGV2dCwgdmFsaWRhdGUpIHsKICB2YXIgdGhpcyQxID0gdGhpczsKCiAgaWYgKCF0aGlzLmVsIHx8IHRoaXMuY29tcG9uZW50SW5zdGFuY2UpIHsKICAgIHJldHVybjsKICB9IC8vIGxpc3RlbiBmb3IgdGhlIGN1cnJlbnQgZWxlbWVudC4KCgogIHZhciBhZGRMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZExpc3RlbmVyKGVsKSB7CiAgICBhZGRFdmVudExpc3RlbmVyKGVsLCBldnQsIHZhbGlkYXRlKTsKICAgIHRoaXMkMS53YXRjaGVycy5wdXNoKHsKICAgICAgdGFnOiAnaW5wdXRfbmF0aXZlJywKICAgICAgdW53YXRjaDogZnVuY3Rpb24gdW53YXRjaCgpIHsKICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKGV2dCwgdmFsaWRhdGUpOwogICAgICB9CiAgICB9KTsKICB9OwoKICBhZGRMaXN0ZW5lcih0aGlzLmVsKTsKCiAgaWYgKCFpc0NoZWNrYm94T3JSYWRpb0lucHV0KHRoaXMuZWwpKSB7CiAgICByZXR1cm47CiAgfQoKICB2YXIgZWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiaW5wdXRbbmFtZT1cIiIgKyB0aGlzLmVsLm5hbWUgKyAiXCJdIik7CiAgdG9BcnJheShlbHMpLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7CiAgICAvLyBza2lwIGlmIGl0IGlzIGFkZGVkIGJ5IHYtdmFsaWRhdGUgYW5kIGlzIG5vdCB0aGUgY3VycmVudCBlbGVtZW50LgogICAgaWYgKGVsLl92ZWVWYWxpZGF0ZUlkICYmIGVsICE9PSB0aGlzJDEuZWwpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGFkZExpc3RlbmVyKGVsKTsKICB9KTsKfTsKLyoqCiAqIFVwZGF0ZXMgYXJpYSBhdHRyaWJ1dGVzIG9uIHRoZSBlbGVtZW50LgogKi8KCgpGaWVsZC5wcm90b3R5cGUudXBkYXRlQXJpYUF0dHJzID0gZnVuY3Rpb24gdXBkYXRlQXJpYUF0dHJzKCkgewogIHZhciB0aGlzJDEgPSB0aGlzOwoKICBpZiAoIXRoaXMuYXJpYSB8fCAhdGhpcy5lbCB8fCAhaXNDYWxsYWJsZSh0aGlzLmVsLnNldEF0dHJpYnV0ZSkpIHsKICAgIHJldHVybjsKICB9CgogIHZhciBhcHBseUFyaWFBdHRycyA9IGZ1bmN0aW9uIGFwcGx5QXJpYUF0dHJzKGVsKSB7CiAgICBlbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtcmVxdWlyZWQnLCB0aGlzJDEuaXNSZXF1aXJlZCA/ICd0cnVlJyA6ICdmYWxzZScpOwogICAgZWwuc2V0QXR0cmlidXRlKCdhcmlhLWludmFsaWQnLCB0aGlzJDEuZmxhZ3MuaW52YWxpZCA/ICd0cnVlJyA6ICdmYWxzZScpOwogIH07CgogIGlmICghaXNDaGVja2JveE9yUmFkaW9JbnB1dCh0aGlzLmVsKSkgewogICAgYXBwbHlBcmlhQXR0cnModGhpcy5lbCk7CiAgICByZXR1cm47CiAgfQoKICB2YXIgZWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiaW5wdXRbbmFtZT1cIiIgKyB0aGlzLmVsLm5hbWUgKyAiXCJdIik7CiAgdG9BcnJheShlbHMpLmZvckVhY2goYXBwbHlBcmlhQXR0cnMpOwp9OwovKioKICogVXBkYXRlcyB0aGUgY3VzdG9tIHZhbGlkaXR5IGZvciB0aGUgZmllbGQuCiAqLwoKCkZpZWxkLnByb3RvdHlwZS51cGRhdGVDdXN0b21WYWxpZGl0eSA9IGZ1bmN0aW9uIHVwZGF0ZUN1c3RvbVZhbGlkaXR5KCkgewogIGlmICghdGhpcy52YWxpZGl0eSB8fCAhdGhpcy5lbCB8fCAhaXNDYWxsYWJsZSh0aGlzLmVsLnNldEN1c3RvbVZhbGlkaXR5KSB8fCAhdGhpcy52YWxpZGF0b3IuZXJyb3JzKSB7CiAgICByZXR1cm47CiAgfQoKICB0aGlzLmVsLnNldEN1c3RvbVZhbGlkaXR5KHRoaXMuZmxhZ3MudmFsaWQgPyAnJyA6IHRoaXMudmFsaWRhdG9yLmVycm9ycy5maXJzdEJ5SWQodGhpcy5pZCkgfHwgJycpOwp9OwovKioKICogUmVtb3ZlcyBhbGwgbGlzdGVuZXJzLgogKi8KCgpGaWVsZC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIGRlc3Ryb3koKSB7CiAgLy8gaWdub3JlIHRoZSByZXN1bHQgb2YgYW55IG9uZ29pbmcgdmFsaWRhdGlvbi4KICBpZiAodGhpcy5fY2FuY2VsbGF0aW9uVG9rZW4pIHsKICAgIHRoaXMuX2NhbmNlbGxhdGlvblRva2VuLmNhbmNlbGxlZCA9IHRydWU7CiAgfQoKICB0aGlzLnVud2F0Y2goKTsKICB0aGlzLmRlcGVuZGVuY2llcy5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7CiAgICByZXR1cm4gZC5maWVsZC5kZXN0cm95KCk7CiAgfSk7CiAgdGhpcy5kZXBlbmRlbmNpZXMgPSBbXTsKfTsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEZpZWxkLnByb3RvdHlwZSwgcHJvdG90eXBlQWNjZXNzb3JzJDEpOyAvLyAKCnZhciBGaWVsZEJhZyA9IGZ1bmN0aW9uIEZpZWxkQmFnKGl0ZW1zKSB7CiAgaWYgKGl0ZW1zID09PSB2b2lkIDApIGl0ZW1zID0gW107CiAgdGhpcy5pdGVtcyA9IGl0ZW1zIHx8IFtdOwogIHRoaXMuaXRlbXNCeUlkID0gdGhpcy5pdGVtcy5yZWR1Y2UoZnVuY3Rpb24gKGl0ZW1zQnlJZCwgaXRlbSkgewogICAgaXRlbXNCeUlkW2l0ZW0uaWRdID0gaXRlbTsKICAgIHJldHVybiBpdGVtc0J5SWQ7CiAgfSwge30pOwp9OwoKdmFyIHByb3RvdHlwZUFjY2Vzc29ycyQyID0gewogIGxlbmd0aDogewogICAgY29uZmlndXJhYmxlOiB0cnVlCiAgfQp9OwoKRmllbGRCYWcucHJvdG90eXBlW3R5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgPyBTeW1ib2wuaXRlcmF0b3IgOiAnQEBpdGVyYXRvciddID0gZnVuY3Rpb24gKCkgewogIHZhciB0aGlzJDEgPSB0aGlzOwogIHZhciBpbmRleCA9IDA7CiAgcmV0dXJuIHsKICAgIG5leHQ6IGZ1bmN0aW9uIG5leHQoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdmFsdWU6IHRoaXMkMS5pdGVtc1tpbmRleCsrXSwKICAgICAgICBkb25lOiBpbmRleCA+IHRoaXMkMS5pdGVtcy5sZW5ndGgKICAgICAgfTsKICAgIH0KICB9Owp9OwovKioKICogR2V0cyB0aGUgY3VycmVudCBpdGVtcyBsZW5ndGguCiAqLwoKCnByb3RvdHlwZUFjY2Vzc29ycyQyLmxlbmd0aC5nZXQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIHRoaXMuaXRlbXMubGVuZ3RoOwp9OwovKioKICogRmluZHMgdGhlIGZpcnN0IGZpZWxkIHRoYXQgbWF0Y2hlcyB0aGUgcHJvdmlkZWQgbWF0Y2hlciBvYmplY3QuCiAqLwoKCkZpZWxkQmFnLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gZmluZCQxKG1hdGNoZXIpIHsKICByZXR1cm4gZmluZCh0aGlzLml0ZW1zLCBmdW5jdGlvbiAoaXRlbSkgewogICAgcmV0dXJuIGl0ZW0ubWF0Y2hlcyhtYXRjaGVyKTsKICB9KTsKfTsKLyoqCiAqIEZpbmRzIHRoZSBmaWVsZCB3aXRoIHRoZSBnaXZlbiBpZCwgdXNpbmcgYSBwbGFpbiBvYmplY3QgYXMgYSBtYXAgdG8gbGluawogKiBpZHMgdG8gaXRlbXMgZmFzdGVyIHRoYW4gYnkgbG9vcGluZyBvdmVyIHRoZSBhcnJheSBhbmQgbWF0Y2hpbmcuCiAqLwoKCkZpZWxkQmFnLnByb3RvdHlwZS5maW5kQnlJZCA9IGZ1bmN0aW9uIGZpbmRCeUlkKGlkKSB7CiAgcmV0dXJuIHRoaXMuaXRlbXNCeUlkW2lkXSB8fCBudWxsOwp9OwovKioKICogRmlsdGVycyB0aGUgaXRlbXMgZG93biB0byB0aGUgbWF0Y2hlZCBmaWVsZHMuCiAqLwoKCkZpZWxkQmFnLnByb3RvdHlwZS5maWx0ZXIgPSBmdW5jdGlvbiBmaWx0ZXIobWF0Y2hlcikgewogIC8vIG11bHRpcGxlIG1hdGNoZXJzIHRvIGJlIHRyaWVkLgogIGlmIChBcnJheS5pc0FycmF5KG1hdGNoZXIpKSB7CiAgICByZXR1cm4gdGhpcy5pdGVtcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgcmV0dXJuIG1hdGNoZXIuc29tZShmdW5jdGlvbiAobSkgewogICAgICAgIHJldHVybiBpdGVtLm1hdGNoZXMobSk7CiAgICAgIH0pOwogICAgfSk7CiAgfQoKICByZXR1cm4gdGhpcy5pdGVtcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgIHJldHVybiBpdGVtLm1hdGNoZXMobWF0Y2hlcik7CiAgfSk7Cn07Ci8qKgogKiBNYXBzIHRoZSBmaWVsZCBpdGVtcyB1c2luZyB0aGUgbWFwcGluZyBmdW5jdGlvbi4KICovCgoKRmllbGRCYWcucHJvdG90eXBlLm1hcCA9IGZ1bmN0aW9uIG1hcChtYXBwZXIpIHsKICByZXR1cm4gdGhpcy5pdGVtcy5tYXAobWFwcGVyKTsKfTsKLyoqCiAqIEZpbmRzIGFuZCByZW1vdmVzIHRoZSBmaXJzdCBmaWVsZCB0aGF0IG1hdGNoZXMgdGhlIHByb3ZpZGVkIG1hdGNoZXIgb2JqZWN0LCByZXR1cm5zIHRoZSByZW1vdmVkIGl0ZW0uCiAqLwoKCkZpZWxkQmFnLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUobWF0Y2hlcikgewogIHZhciBpdGVtID0gbnVsbDsKCiAgaWYgKG1hdGNoZXIgaW5zdGFuY2VvZiBGaWVsZCkgewogICAgaXRlbSA9IG1hdGNoZXI7CiAgfSBlbHNlIHsKICAgIGl0ZW0gPSB0aGlzLmZpbmQobWF0Y2hlcik7CiAgfQoKICBpZiAoIWl0ZW0pIHsKICAgIHJldHVybiBudWxsOwogIH0KCiAgdmFyIGluZGV4ID0gdGhpcy5pdGVtcy5pbmRleE9mKGl0ZW0pOwogIHRoaXMuaXRlbXMuc3BsaWNlKGluZGV4LCAxKTsKICBkZWxldGUgdGhpcy5pdGVtc0J5SWRbaXRlbS5pZF07CiAgcmV0dXJuIGl0ZW07Cn07Ci8qKgogKiBBZGRzIGEgZmllbGQgaXRlbSB0byB0aGUgbGlzdC4KICovCgoKRmllbGRCYWcucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiBwdXNoKGl0ZW0pIHsKICBpZiAoIShpdGVtIGluc3RhbmNlb2YgRmllbGQpKSB7CiAgICB0aHJvdyBjcmVhdGVFcnJvcignRmllbGRCYWcgb25seSBhY2NlcHRzIGluc3RhbmNlcyBvZiBGaWVsZCB0aGF0IGhhcyBhbiBpZCBkZWZpbmVkLicpOwogIH0KCiAgaWYgKCFpdGVtLmlkKSB7CiAgICB0aHJvdyBjcmVhdGVFcnJvcignRmllbGQgaWQgbXVzdCBiZSBkZWZpbmVkLicpOwogIH0KCiAgaWYgKHRoaXMuZmluZEJ5SWQoaXRlbS5pZCkpIHsKICAgIHRocm93IGNyZWF0ZUVycm9yKCJGaWVsZCB3aXRoIGlkICIgKyBpdGVtLmlkICsgIiBpcyBhbHJlYWR5IGFkZGVkLiIpOwogIH0KCiAgdGhpcy5pdGVtcy5wdXNoKGl0ZW0pOwogIHRoaXMuaXRlbXNCeUlkW2l0ZW0uaWRdID0gaXRlbTsKfTsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEZpZWxkQmFnLnByb3RvdHlwZSwgcHJvdG90eXBlQWNjZXNzb3JzJDIpOwoKdmFyIFNjb3BlZFZhbGlkYXRvciA9IGZ1bmN0aW9uIFNjb3BlZFZhbGlkYXRvcihiYXNlLCB2bSkgewogIHRoaXMuaWQgPSB2bS5fdWlkOwogIHRoaXMuX2Jhc2UgPSBiYXNlOwogIHRoaXMuX3BhdXNlZCA9IGZhbHNlOyAvLyBjcmVhdGUgYSBtaXJyb3IgYmFnIHdpdGggbGltaXRlZCBjb21wb25lbnQgc2NvcGUuCgogIHRoaXMuZXJyb3JzID0gbmV3IEVycm9yQmFnKGJhc2UuZXJyb3JzLCB0aGlzLmlkKTsKfTsKCnZhciBwcm90b3R5cGVBY2Nlc3NvcnMkMyA9IHsKICBmbGFnczogewogICAgY29uZmlndXJhYmxlOiB0cnVlCiAgfSwKICBydWxlczogewogICAgY29uZmlndXJhYmxlOiB0cnVlCiAgfSwKICBmaWVsZHM6IHsKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogIH0sCiAgZGljdGlvbmFyeTogewogICAgY29uZmlndXJhYmxlOiB0cnVlCiAgfSwKICBsb2NhbGU6IHsKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogIH0KfTsKCnByb3RvdHlwZUFjY2Vzc29ycyQzLmZsYWdzLmdldCA9IGZ1bmN0aW9uICgpIHsKICB2YXIgdGhpcyQxID0gdGhpczsKICByZXR1cm4gdGhpcy5fYmFzZS5maWVsZHMuaXRlbXMuZmlsdGVyKGZ1bmN0aW9uIChmKSB7CiAgICByZXR1cm4gZi52bUlkID09PSB0aGlzJDEuaWQ7CiAgfSkucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGZpZWxkKSB7CiAgICBpZiAoZmllbGQuc2NvcGUpIHsKICAgICAgaWYgKCFhY2NbIiQiICsgZmllbGQuc2NvcGVdKSB7CiAgICAgICAgYWNjWyIkIiArIGZpZWxkLnNjb3BlXSA9IHt9OwogICAgICB9CgogICAgICBhY2NbIiQiICsgZmllbGQuc2NvcGVdW2ZpZWxkLm5hbWVdID0gZmllbGQuZmxhZ3M7CiAgICB9CgogICAgYWNjW2ZpZWxkLm5hbWVdID0gZmllbGQuZmxhZ3M7CiAgICByZXR1cm4gYWNjOwogIH0sIHt9KTsKfTsKCnByb3RvdHlwZUFjY2Vzc29ycyQzLnJ1bGVzLmdldCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gdGhpcy5fYmFzZS5ydWxlczsKfTsKCnByb3RvdHlwZUFjY2Vzc29ycyQzLmZpZWxkcy5nZXQgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIG5ldyBGaWVsZEJhZyh0aGlzLl9iYXNlLmZpZWxkcy5maWx0ZXIoewogICAgdm1JZDogdGhpcy5pZAogIH0pKTsKfTsKCnByb3RvdHlwZUFjY2Vzc29ycyQzLmRpY3Rpb25hcnkuZ2V0ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiB0aGlzLl9iYXNlLmRpY3Rpb25hcnk7Cn07Cgpwcm90b3R5cGVBY2Nlc3NvcnMkMy5sb2NhbGUuZ2V0ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiB0aGlzLl9iYXNlLmxvY2FsZTsKfTsKCnByb3RvdHlwZUFjY2Vzc29ycyQzLmxvY2FsZS5zZXQgPSBmdW5jdGlvbiAodmFsKSB7CiAgdGhpcy5fYmFzZS5sb2NhbGUgPSB2YWw7Cn07CgpTY29wZWRWYWxpZGF0b3IucHJvdG90eXBlLmxvY2FsaXplID0gZnVuY3Rpb24gbG9jYWxpemUoKSB7CiAgdmFyIHJlZjsKICB2YXIgYXJncyA9IFtdLAogICAgICBsZW4gPSBhcmd1bWVudHMubGVuZ3RoOwoKICB3aGlsZSAobGVuLS0pIHsKICAgIGFyZ3NbbGVuXSA9IGFyZ3VtZW50c1tsZW5dOwogIH0KCiAgcmV0dXJuIChyZWYgPSB0aGlzLl9iYXNlKS5sb2NhbGl6ZS5hcHBseShyZWYsIGFyZ3MpOwp9OwoKU2NvcGVkVmFsaWRhdG9yLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiB1cGRhdGUoKSB7CiAgdmFyIHJlZjsKICB2YXIgYXJncyA9IFtdLAogICAgICBsZW4gPSBhcmd1bWVudHMubGVuZ3RoOwoKICB3aGlsZSAobGVuLS0pIHsKICAgIGFyZ3NbbGVuXSA9IGFyZ3VtZW50c1tsZW5dOwogIH0KCiAgcmV0dXJuIChyZWYgPSB0aGlzLl9iYXNlKS51cGRhdGUuYXBwbHkocmVmLCBhcmdzKTsKfTsKClNjb3BlZFZhbGlkYXRvci5wcm90b3R5cGUuYXR0YWNoID0gZnVuY3Rpb24gYXR0YWNoKG9wdHMpIHsKICB2YXIgYXR0YWNoT3B0cyA9IGFzc2lnbih7fSwgb3B0cywgewogICAgdm1JZDogdGhpcy5pZAogIH0pOwogIHJldHVybiB0aGlzLl9iYXNlLmF0dGFjaChhdHRhY2hPcHRzKTsKfTsKClNjb3BlZFZhbGlkYXRvci5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbiBwYXVzZSgpIHsKICB0aGlzLl9wYXVzZWQgPSB0cnVlOwp9OwoKU2NvcGVkVmFsaWRhdG9yLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbiByZXN1bWUoKSB7CiAgdGhpcy5fcGF1c2VkID0gZmFsc2U7Cn07CgpTY29wZWRWYWxpZGF0b3IucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIHJlbW92ZShydWxlTmFtZSkgewogIHJldHVybiB0aGlzLl9iYXNlLnJlbW92ZShydWxlTmFtZSk7Cn07CgpTY29wZWRWYWxpZGF0b3IucHJvdG90eXBlLmRldGFjaCA9IGZ1bmN0aW9uIGRldGFjaChuYW1lLCBzY29wZSkgewogIHJldHVybiB0aGlzLl9iYXNlLmRldGFjaChuYW1lLCBzY29wZSwgdGhpcy5pZCk7Cn07CgpTY29wZWRWYWxpZGF0b3IucHJvdG90eXBlLmV4dGVuZCA9IGZ1bmN0aW9uIGV4dGVuZCgpIHsKICB2YXIgcmVmOwogIHZhciBhcmdzID0gW10sCiAgICAgIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7CgogIHdoaWxlIChsZW4tLSkgewogICAgYXJnc1tsZW5dID0gYXJndW1lbnRzW2xlbl07CiAgfQoKICByZXR1cm4gKHJlZiA9IHRoaXMuX2Jhc2UpLmV4dGVuZC5hcHBseShyZWYsIGFyZ3MpOwp9OwoKU2NvcGVkVmFsaWRhdG9yLnByb3RvdHlwZS52YWxpZGF0ZSA9IGZ1bmN0aW9uIHZhbGlkYXRlKGRlc2NyaXB0b3IsIHZhbHVlLCBvcHRzKSB7CiAgaWYgKG9wdHMgPT09IHZvaWQgMCkgb3B0cyA9IHt9OwoKICBpZiAodGhpcy5fcGF1c2VkKSB7CiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRydWUpOwogIH0KCiAgcmV0dXJuIHRoaXMuX2Jhc2UudmFsaWRhdGUoZGVzY3JpcHRvciwgdmFsdWUsIGFzc2lnbih7fSwgewogICAgdm1JZDogdGhpcy5pZAogIH0sIG9wdHMgfHwge30pKTsKfTsKClNjb3BlZFZhbGlkYXRvci5wcm90b3R5cGUudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KCkgewogIHZhciByZWY7CiAgdmFyIGFyZ3MgPSBbXSwKICAgICAgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsKCiAgd2hpbGUgKGxlbi0tKSB7CiAgICBhcmdzW2xlbl0gPSBhcmd1bWVudHNbbGVuXTsKICB9CgogIHJldHVybiAocmVmID0gdGhpcy5fYmFzZSkudmVyaWZ5LmFwcGx5KHJlZiwgYXJncyk7Cn07CgpTY29wZWRWYWxpZGF0b3IucHJvdG90eXBlLnZhbGlkYXRlQWxsID0gZnVuY3Rpb24gdmFsaWRhdGVBbGwodmFsdWVzLCBvcHRzKSB7CiAgaWYgKG9wdHMgPT09IHZvaWQgMCkgb3B0cyA9IHt9OwoKICBpZiAodGhpcy5fcGF1c2VkKSB7CiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRydWUpOwogIH0KCiAgcmV0dXJuIHRoaXMuX2Jhc2UudmFsaWRhdGVBbGwodmFsdWVzLCBhc3NpZ24oe30sIHsKICAgIHZtSWQ6IHRoaXMuaWQKICB9LCBvcHRzIHx8IHt9KSk7Cn07CgpTY29wZWRWYWxpZGF0b3IucHJvdG90eXBlLnZhbGlkYXRlU2NvcGVzID0gZnVuY3Rpb24gdmFsaWRhdGVTY29wZXMob3B0cykgewogIGlmIChvcHRzID09PSB2b2lkIDApIG9wdHMgPSB7fTsKCiAgaWYgKHRoaXMuX3BhdXNlZCkgewogICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0cnVlKTsKICB9CgogIHJldHVybiB0aGlzLl9iYXNlLnZhbGlkYXRlU2NvcGVzKGFzc2lnbih7fSwgewogICAgdm1JZDogdGhpcy5pZAogIH0sIG9wdHMgfHwge30pKTsKfTsKClNjb3BlZFZhbGlkYXRvci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIGRlc3Ryb3koKSB7CiAgZGVsZXRlIHRoaXMuaWQ7CiAgZGVsZXRlIHRoaXMuX2Jhc2U7Cn07CgpTY29wZWRWYWxpZGF0b3IucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gcmVzZXQobWF0Y2hlcikgewogIHJldHVybiB0aGlzLl9iYXNlLnJlc2V0KE9iamVjdC5hc3NpZ24oe30sIG1hdGNoZXIgfHwge30sIHsKICAgIHZtSWQ6IHRoaXMuaWQKICB9KSk7Cn07CgpTY29wZWRWYWxpZGF0b3IucHJvdG90eXBlLmZsYWcgPSBmdW5jdGlvbiBmbGFnKCkgewogIHZhciByZWY7CiAgdmFyIGFyZ3MgPSBbXSwKICAgICAgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsKCiAgd2hpbGUgKGxlbi0tKSB7CiAgICBhcmdzW2xlbl0gPSBhcmd1bWVudHNbbGVuXTsKICB9CgogIHJldHVybiAocmVmID0gdGhpcy5fYmFzZSkuZmxhZy5hcHBseShyZWYsIGFyZ3MuY29uY2F0KFt0aGlzLmlkXSkpOwp9OwoKU2NvcGVkVmFsaWRhdG9yLnByb3RvdHlwZS5fcmVzb2x2ZUZpZWxkID0gZnVuY3Rpb24gX3Jlc29sdmVGaWVsZCgpIHsKICB2YXIgcmVmOwogIHZhciBhcmdzID0gW10sCiAgICAgIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7CgogIHdoaWxlIChsZW4tLSkgewogICAgYXJnc1tsZW5dID0gYXJndW1lbnRzW2xlbl07CiAgfQoKICByZXR1cm4gKHJlZiA9IHRoaXMuX2Jhc2UpLl9yZXNvbHZlRmllbGQuYXBwbHkocmVmLCBhcmdzKTsKfTsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFNjb3BlZFZhbGlkYXRvci5wcm90b3R5cGUsIHByb3RvdHlwZUFjY2Vzc29ycyQzKTsKdmFyIFZBTElEQVRPUiA9IG51bGw7Cgp2YXIgZ2V0VmFsaWRhdG9yID0gZnVuY3Rpb24gZ2V0VmFsaWRhdG9yKCkgewogIHJldHVybiBWQUxJREFUT1I7Cn07Cgp2YXIgc2V0VmFsaWRhdG9yID0gZnVuY3Rpb24gc2V0VmFsaWRhdG9yKHZhbHVlKSB7CiAgVkFMSURBVE9SID0gdmFsdWU7CiAgcmV0dXJuIHZhbHVlOwp9OyAvLyAKCi8qKgogKiBDaGVja3MgaWYgYSBwYXJlbnQgdmFsaWRhdG9yIGluc3RhbmNlIHdhcyByZXF1ZXN0ZWQuCiAqLwoKCnZhciByZXF1ZXN0c1ZhbGlkYXRvciA9IGZ1bmN0aW9uIHJlcXVlc3RzVmFsaWRhdG9yKGluamVjdGlvbnMpIHsKICBpZiAoaXNPYmplY3QoaW5qZWN0aW9ucykgJiYgaW5qZWN0aW9ucy4kdmFsaWRhdG9yKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIHJldHVybiBmYWxzZTsKfTsKCnZhciBtaXhpbiA9IHsKICBwcm92aWRlOiBmdW5jdGlvbiBwcm92aWRlKCkgewogICAgaWYgKHRoaXMuJHZhbGlkYXRvciAmJiAhaXNCdWlsdEluQ29tcG9uZW50KHRoaXMuJHZub2RlKSkgewogICAgICByZXR1cm4gewogICAgICAgICR2YWxpZGF0b3I6IHRoaXMuJHZhbGlkYXRvcgogICAgICB9OwogICAgfQoKICAgIHJldHVybiB7fTsKICB9LAogIGJlZm9yZUNyZWF0ZTogZnVuY3Rpb24gYmVmb3JlQ3JlYXRlKCkgewogICAgLy8gaWYgYnVpbHQgaW4gZG8gbm90aGluZy4KICAgIGlmIChpc0J1aWx0SW5Db21wb25lbnQodGhpcy4kdm5vZGUpIHx8IHRoaXMuJG9wdGlvbnMuJF9fdmVlSW5qZWN0ID09PSBmYWxzZSkgewogICAgICByZXR1cm47CiAgICB9IC8vIGlmIGl0cyBhIHJvb3QgaW5zdGFuY2Ugc2V0IHRoZSBjb25maWcgaWYgaXQgZXhpc3RzLgoKCiAgICBpZiAoIXRoaXMuJHBhcmVudCkgewogICAgICBzZXRDb25maWcodGhpcy4kb3B0aW9ucy4kX3ZlZVZhbGlkYXRlIHx8IHt9KTsKICAgIH0KCiAgICB2YXIgb3B0aW9ucyA9IHJlc29sdmVDb25maWcodGhpcyk7IC8vIGlmIGl0cyBhIHJvb3QgaW5zdGFuY2UsIGluamVjdCBhbnl3YXlzLCBvciBpZiBpdCByZXF1ZXN0ZWQgYSBuZXcgaW5zdGFuY2UuCgogICAgaWYgKCF0aGlzLiRwYXJlbnQgfHwgdGhpcy4kb3B0aW9ucy4kX3ZlZVZhbGlkYXRlICYmIC9uZXcvLnRlc3QodGhpcy4kb3B0aW9ucy4kX3ZlZVZhbGlkYXRlLnZhbGlkYXRvcikpIHsKICAgICAgdGhpcy4kdmFsaWRhdG9yID0gbmV3IFNjb3BlZFZhbGlkYXRvcihnZXRWYWxpZGF0b3IoKSwgdGhpcyk7CiAgICB9CgogICAgdmFyIHJlcXVlc3RlZCA9IHJlcXVlc3RzVmFsaWRhdG9yKHRoaXMuJG9wdGlvbnMuaW5qZWN0KTsgLy8gaWYgYXV0b21hdGljIGluamVjdGlvbiBpcyBlbmFibGVkIGFuZCBubyBpbnN0YW5jZSB3YXMgcmVxdWVzdGVkLgoKICAgIGlmICghdGhpcy4kdmFsaWRhdG9yICYmIG9wdGlvbnMuaW5qZWN0ICYmICFyZXF1ZXN0ZWQpIHsKICAgICAgdGhpcy4kdmFsaWRhdG9yID0gbmV3IFNjb3BlZFZhbGlkYXRvcihnZXRWYWxpZGF0b3IoKSwgdGhpcyk7CiAgICB9IC8vIGRvbid0IGluamVjdCBlcnJvcnMgb3IgZmllbGRCYWcgYXMgbm8gdmFsaWRhdG9yIHdhcyByZXNvbHZlZC4KCgogICAgaWYgKCFyZXF1ZXN0ZWQgJiYgIXRoaXMuJHZhbGlkYXRvcikgewogICAgICByZXR1cm47CiAgICB9IC8vIFRoZXJlIGlzIGEgdmFsaWRhdG9yIGJ1dCBpdCBpc24ndCBpbmplY3RlZCwgbWFyayBhcyByZWFjdGl2ZS4KCgogICAgaWYgKCFyZXF1ZXN0ZWQgJiYgdGhpcy4kdmFsaWRhdG9yKSB7CiAgICAgIHZhciBWdWUgPSB0aGlzLiRvcHRpb25zLl9iYXNlOyAvLyB0aGUgdnVlIGNvbnN0cnVjdG9yLgoKICAgICAgVnVlLnV0aWwuZGVmaW5lUmVhY3RpdmUodGhpcy4kdmFsaWRhdG9yLCAnZXJyb3JzJywgdGhpcy4kdmFsaWRhdG9yLmVycm9ycyk7CiAgICB9CgogICAgaWYgKCF0aGlzLiRvcHRpb25zLmNvbXB1dGVkKSB7CiAgICAgIHRoaXMuJG9wdGlvbnMuY29tcHV0ZWQgPSB7fTsKICAgIH0KCiAgICB0aGlzLiRvcHRpb25zLmNvbXB1dGVkW29wdGlvbnMuZXJyb3JCYWdOYW1lIHx8ICdlcnJvcnMnXSA9IGZ1bmN0aW9uIGVycm9yQmFnR2V0dGVyKCkgewogICAgICByZXR1cm4gdGhpcy4kdmFsaWRhdG9yLmVycm9yczsKICAgIH07CgogICAgdGhpcy4kb3B0aW9ucy5jb21wdXRlZFtvcHRpb25zLmZpZWxkc0JhZ05hbWUgfHwgJ2ZpZWxkcyddID0gZnVuY3Rpb24gZmllbGRCYWdHZXR0ZXIoKSB7CiAgICAgIHJldHVybiB0aGlzLiR2YWxpZGF0b3IuZmllbGRzLml0ZW1zLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBmaWVsZCkgewogICAgICAgIGlmIChmaWVsZC5zY29wZSkgewogICAgICAgICAgaWYgKCFhY2NbIiQiICsgZmllbGQuc2NvcGVdKSB7CiAgICAgICAgICAgIGFjY1siJCIgKyBmaWVsZC5zY29wZV0gPSB7fTsKICAgICAgICAgIH0KCiAgICAgICAgICBhY2NbIiQiICsgZmllbGQuc2NvcGVdW2ZpZWxkLm5hbWVdID0gZmllbGQuZmxhZ3M7CiAgICAgICAgICByZXR1cm4gYWNjOwogICAgICAgIH0KCiAgICAgICAgYWNjW2ZpZWxkLm5hbWVdID0gZmllbGQuZmxhZ3M7CiAgICAgICAgcmV0dXJuIGFjYzsKICAgICAgfSwge30pOwogICAgfTsKICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICBpZiAodGhpcy4kdmFsaWRhdG9yICYmIHRoaXMuX3VpZCA9PT0gdGhpcy4kdmFsaWRhdG9yLmlkKSB7CiAgICAgIHRoaXMuJHZhbGlkYXRvci5lcnJvcnMuY2xlYXIoKTsgLy8gcmVtb3ZlIGVycm9ycyBnZW5lcmF0ZWQgYnkgdGhpcyBjb21wb25lbnQuCiAgICB9CiAgfQp9OyAvLyAKCi8qKgogKiBGaW5kcyB0aGUgcmVxdWVzdGVkIGZpZWxkIGJ5IGlkIGZyb20gdGhlIGNvbnRleHQgb2JqZWN0LgogKi8KCmZ1bmN0aW9uIGZpbmRGaWVsZChlbCwgY29udGV4dCkgewogIGlmICghY29udGV4dCB8fCAhY29udGV4dC4kdmFsaWRhdG9yKSB7CiAgICByZXR1cm4gbnVsbDsKICB9CgogIHJldHVybiBjb250ZXh0LiR2YWxpZGF0b3IuZmllbGRzLmZpbmRCeUlkKGVsLl92ZWVWYWxpZGF0ZUlkKTsKfQoKdmFyIGRpcmVjdGl2ZSA9IHsKICBiaW5kOiBmdW5jdGlvbiBiaW5kKGVsLCBiaW5kaW5nLCB2bm9kZSkgewogICAgdmFyIHZhbGlkYXRvciA9IHZub2RlLmNvbnRleHQuJHZhbGlkYXRvcjsKCiAgICBpZiAoIXZhbGlkYXRvcikgewogICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgewogICAgICAgIHdhcm4oIk5vIHZhbGlkYXRvciBpbnN0YW5jZSBpcyBwcmVzZW50IG9uIHZtLCBkaWQgeW91IGZvcmdldCB0byBpbmplY3QgJyR2YWxpZGF0b3InPyIpOwogICAgICB9CgogICAgICByZXR1cm47CiAgICB9CgogICAgdmFyIGZpZWxkT3B0aW9ucyA9IFJlc29sdmVyLmdlbmVyYXRlKGVsLCBiaW5kaW5nLCB2bm9kZSk7CiAgICB2YWxpZGF0b3IuYXR0YWNoKGZpZWxkT3B0aW9ucyk7CiAgfSwKICBpbnNlcnRlZDogZnVuY3Rpb24gaW5zZXJ0ZWQoZWwsIGJpbmRpbmcsIHZub2RlKSB7CiAgICB2YXIgZmllbGQgPSBmaW5kRmllbGQoZWwsIHZub2RlLmNvbnRleHQpOwogICAgdmFyIHNjb3BlID0gUmVzb2x2ZXIucmVzb2x2ZVNjb3BlKGVsLCBiaW5kaW5nLCB2bm9kZSk7IC8vIHNraXAgaWYgc2NvcGUgaGFzbid0IGNoYW5nZWQuCgogICAgaWYgKCFmaWVsZCB8fCBzY29wZSA9PT0gZmllbGQuc2NvcGUpIHsKICAgICAgcmV0dXJuOwogICAgfSAvLyBvbmx5IHVwZGF0ZSBzY29wZS4KCgogICAgZmllbGQudXBkYXRlKHsKICAgICAgc2NvcGU6IHNjb3BlCiAgICB9KTsgLy8gYWxsb3dzIHRoZSBmaWVsZCB0byByZS1ldmFsdWF0ZWQgb25jZSBtb3JlIGluIHRoZSB1cGRhdGUgaG9vay4KCiAgICBmaWVsZC51cGRhdGVkID0gZmFsc2U7CiAgfSwKICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShlbCwgYmluZGluZywgdm5vZGUpIHsKICAgIHZhciBmaWVsZCA9IGZpbmRGaWVsZChlbCwgdm5vZGUuY29udGV4dCk7IC8vIG1ha2Ugc3VyZSB3ZSBkb24ndCBkbyB1bm5lY2Nhc2FyeSB3b3JrIGlmIG5vIGltcG9ydGFudCBjaGFuZ2Ugd2FzIGRvbmUuCgogICAgaWYgKCFmaWVsZCB8fCBmaWVsZC51cGRhdGVkICYmIGlzRXF1YWwoYmluZGluZy52YWx1ZSwgYmluZGluZy5vbGRWYWx1ZSkpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHZhciBzY29wZSA9IFJlc29sdmVyLnJlc29sdmVTY29wZShlbCwgYmluZGluZywgdm5vZGUpOwogICAgdmFyIHJ1bGVzID0gUmVzb2x2ZXIucmVzb2x2ZVJ1bGVzKGVsLCBiaW5kaW5nLCB2bm9kZSk7CiAgICBmaWVsZC51cGRhdGUoewogICAgICBzY29wZTogc2NvcGUsCiAgICAgIHJ1bGVzOiBydWxlcwogICAgfSk7CiAgfSwKICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZChlbCwgYmluZGluZywgcmVmKSB7CiAgICB2YXIgY29udGV4dCA9IHJlZi5jb250ZXh0OwogICAgdmFyIGZpZWxkID0gZmluZEZpZWxkKGVsLCBjb250ZXh0KTsKCiAgICBpZiAoIWZpZWxkKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBjb250ZXh0LiR2YWxpZGF0b3IuZGV0YWNoKGZpZWxkKTsKICB9Cn07IC8vIAoKdmFyIFZhbGlkYXRvciA9IGZ1bmN0aW9uIFZhbGlkYXRvcih2YWxpZGF0aW9ucywgb3B0aW9ucywgcGx1Z2luQ29udGFpbmVyKSB7CiAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgb3B0aW9ucyA9IHsKICAgIGZhc3RFeGl0OiB0cnVlCiAgfTsKICBpZiAocGx1Z2luQ29udGFpbmVyID09PSB2b2lkIDApIHBsdWdpbkNvbnRhaW5lciA9IG51bGw7CiAgdGhpcy5lcnJvcnMgPSBuZXcgRXJyb3JCYWcoKTsKICB0aGlzLmZpZWxkcyA9IG5ldyBGaWVsZEJhZygpOwoKICB0aGlzLl9jcmVhdGVGaWVsZHModmFsaWRhdGlvbnMpOwoKICB0aGlzLnBhdXNlZCA9IGZhbHNlOwogIHRoaXMuZmFzdEV4aXQgPSAhaXNOdWxsT3JVbmRlZmluZWQob3B0aW9ucyAmJiBvcHRpb25zLmZhc3RFeGl0KSA/IG9wdGlvbnMuZmFzdEV4aXQgOiB0cnVlOwogIHRoaXMuJHZlZSA9IHBsdWdpbkNvbnRhaW5lciB8fCB7CiAgICBfdm06IHsKICAgICAgJG5leHRUaWNrOiBmdW5jdGlvbiAkbmV4dFRpY2soY2IpIHsKICAgICAgICByZXR1cm4gaXNDYWxsYWJsZShjYikgPyBjYigpIDogUHJvbWlzZS5yZXNvbHZlKCk7CiAgICAgIH0sCiAgICAgICRlbWl0OiBmdW5jdGlvbiAkZW1pdCgpIHt9LAogICAgICAkb2ZmOiBmdW5jdGlvbiAkb2ZmKCkge30KICAgIH0KICB9Owp9OwoKdmFyIHByb3RvdHlwZUFjY2Vzc29ycyQ0ID0gewogIHJ1bGVzOiB7CiAgICBjb25maWd1cmFibGU6IHRydWUKICB9LAogIGRpY3Rpb25hcnk6IHsKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogIH0sCiAgZmxhZ3M6IHsKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogIH0sCiAgbG9jYWxlOiB7CiAgICBjb25maWd1cmFibGU6IHRydWUKICB9Cn07CnZhciBzdGF0aWNBY2Nlc3NvcnMkMSA9IHsKICBydWxlczogewogICAgY29uZmlndXJhYmxlOiB0cnVlCiAgfSwKICBkaWN0aW9uYXJ5OiB7CiAgICBjb25maWd1cmFibGU6IHRydWUKICB9LAogIGxvY2FsZTogewogICAgY29uZmlndXJhYmxlOiB0cnVlCiAgfQp9OwovKioKICogQGRlcHJlY2F0ZWQKICovCgpzdGF0aWNBY2Nlc3NvcnMkMS5ydWxlcy5nZXQgPSBmdW5jdGlvbiAoKSB7CiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHsKICAgIHdhcm4oJ3RoaXMgYWNjZXNzb3Igd2lsbCBiZSBkZXByZWNhdGVkLCB1c2UgYGltcG9ydCB7IHJ1bGVzIH0gZnJvbSAidmVlLXZhbGlkYXRlImAgaW5zdGVhZC4nKTsKICB9CgogIHJldHVybiBSdWxlQ29udGFpbmVyLnJ1bGVzOwp9OwovKioKICogQGRlcHJlY2F0ZWQKICovCgoKcHJvdG90eXBlQWNjZXNzb3JzJDQucnVsZXMuZ2V0ID0gZnVuY3Rpb24gKCkgewogIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICB3YXJuKCd0aGlzIGFjY2Vzc29yIHdpbGwgYmUgZGVwcmVjYXRlZCwgdXNlIGBpbXBvcnQgeyBydWxlcyB9IGZyb20gInZlZS12YWxpZGF0ZSJgIGluc3RlYWQuJyk7CiAgfQoKICByZXR1cm4gUnVsZUNvbnRhaW5lci5ydWxlczsKfTsKCnByb3RvdHlwZUFjY2Vzc29ycyQ0LmRpY3Rpb25hcnkuZ2V0ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBEaWN0aW9uYXJ5UmVzb2x2ZXIuZ2V0RHJpdmVyKCk7Cn07CgpzdGF0aWNBY2Nlc3NvcnMkMS5kaWN0aW9uYXJ5LmdldCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gRGljdGlvbmFyeVJlc29sdmVyLmdldERyaXZlcigpOwp9OwoKcHJvdG90eXBlQWNjZXNzb3JzJDQuZmxhZ3MuZ2V0ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiB0aGlzLmZpZWxkcy5pdGVtcy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgZmllbGQpIHsKICAgIHZhciBvYmo7CgogICAgaWYgKGZpZWxkLnNjb3BlKSB7CiAgICAgIGFjY1siJCIgKyBmaWVsZC5zY29wZV0gPSAob2JqID0ge30sIG9ialtmaWVsZC5uYW1lXSA9IGZpZWxkLmZsYWdzLCBvYmopOwogICAgICByZXR1cm4gYWNjOwogICAgfQoKICAgIGFjY1tmaWVsZC5uYW1lXSA9IGZpZWxkLmZsYWdzOwogICAgcmV0dXJuIGFjYzsKICB9LCB7fSk7Cn07Ci8qKgogKiBHZXR0ZXIgZm9yIHRoZSBjdXJyZW50IGxvY2FsZS4KICovCgoKcHJvdG90eXBlQWNjZXNzb3JzJDQubG9jYWxlLmdldCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gVmFsaWRhdG9yLmxvY2FsZTsKfTsKLyoqCiAqIFNldHRlciBmb3IgdGhlIHZhbGlkYXRvciBsb2NhbGUuCiAqLwoKCnByb3RvdHlwZUFjY2Vzc29ycyQ0LmxvY2FsZS5zZXQgPSBmdW5jdGlvbiAodmFsdWUpIHsKICBWYWxpZGF0b3IubG9jYWxlID0gdmFsdWU7Cn07CgpzdGF0aWNBY2Nlc3NvcnMkMS5sb2NhbGUuZ2V0ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBEaWN0aW9uYXJ5UmVzb2x2ZXIuZ2V0RHJpdmVyKCkubG9jYWxlOwp9OwovKioKICogU2V0dGVyIGZvciB0aGUgdmFsaWRhdG9yIGxvY2FsZS4KICovCgoKc3RhdGljQWNjZXNzb3JzJDEubG9jYWxlLnNldCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHZhciBoYXNDaGFuZ2VkID0gdmFsdWUgIT09IERpY3Rpb25hcnlSZXNvbHZlci5nZXREcml2ZXIoKS5sb2NhbGU7CiAgRGljdGlvbmFyeVJlc29sdmVyLmdldERyaXZlcigpLmxvY2FsZSA9IHZhbHVlOwoKICBpZiAoaGFzQ2hhbmdlZCAmJiBWYWxpZGF0b3IuJHZlZSAmJiBWYWxpZGF0b3IuJHZlZS5fdm0pIHsKICAgIFZhbGlkYXRvci4kdmVlLl92bS4kZW1pdCgnbG9jYWxlQ2hhbmdlZCcpOwogIH0KfTsKLyoqCiAqIFN0YXRpYyBjb25zdHJ1Y3Rvci4KICogQGRlcHJlY2F0ZWQKICovCgoKVmFsaWRhdG9yLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZSh2YWxpZGF0aW9ucywgb3B0aW9ucykgewogIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICB3YXJuKCdQbGVhc2UgdXNlIGBuZXdgIHRvIGNyZWF0ZSBuZXcgdmFsaWRhdG9yIGluc3RhbmNlcy4nKTsKICB9CgogIHJldHVybiBuZXcgVmFsaWRhdG9yKHZhbGlkYXRpb25zLCBvcHRpb25zKTsKfTsKLyoqCiAqIEFkZHMgYSBjdXN0b20gdmFsaWRhdG9yIHRvIHRoZSBsaXN0IG9mIHZhbGlkYXRpb24gcnVsZXMuCiAqLwoKClZhbGlkYXRvci5leHRlbmQgPSBmdW5jdGlvbiBleHRlbmQobmFtZSwgdmFsaWRhdG9yLCBvcHRpb25zKSB7CiAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgb3B0aW9ucyA9IHt9OwoKICBWYWxpZGF0b3IuX2d1YXJkRXh0ZW5kKG5hbWUsIHZhbGlkYXRvcik7IC8vIHJ1bGVzIGltcG9ydGVkIGZyb20gdGhlIG1pbmltYWwgYnVuZGxlCiAgLy8gd2lsbCBoYXZlIHRoZSBvcHRpb25zIGVtYmVkZGVkIGluIHRoZW0KCgogIHZhciBtZXJnZWRPcHRzID0gdmFsaWRhdG9yLm9wdGlvbnMgfHwge307CgogIFZhbGlkYXRvci5fbWVyZ2UobmFtZSwgewogICAgdmFsaWRhdG9yOiB2YWxpZGF0b3IsCiAgICBwYXJhbU5hbWVzOiBvcHRpb25zICYmIG9wdGlvbnMucGFyYW1OYW1lcyB8fCB2YWxpZGF0b3IucGFyYW1OYW1lcywKICAgIG9wdGlvbnM6IGFzc2lnbih7CiAgICAgIGhhc1RhcmdldDogZmFsc2UsCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgfSwgbWVyZ2VkT3B0cywgb3B0aW9ucyB8fCB7fSkKICB9KTsKfTsKLyoqCiAqIFJlbW92ZXMgYSBydWxlIGZyb20gdGhlIGxpc3Qgb2YgdmFsaWRhdG9ycy4KICogQGRlcHJlY2F0ZWQKICovCgoKVmFsaWRhdG9yLnJlbW92ZSA9IGZ1bmN0aW9uIHJlbW92ZShuYW1lKSB7CiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHsKICAgIHdhcm4oJ3RoaXMgbWV0aG9kIHdpbGwgYmUgZGVwcmVjYXRlZCwgeW91IGNhbiBzdGlsbCBvdmVycmlkZSB5b3VyIHJ1bGVzIHdpdGggYGV4dGVuZGAnKTsKICB9CgogIFJ1bGVDb250YWluZXIucmVtb3ZlKG5hbWUpOwp9OwovKioKICogQWRkcyBhbmQgc2V0cyB0aGUgY3VycmVudCBsb2NhbGUgZm9yIHRoZSB2YWxpZGF0b3IuCiovCgoKVmFsaWRhdG9yLnByb3RvdHlwZS5sb2NhbGl6ZSA9IGZ1bmN0aW9uIGxvY2FsaXplKGxhbmcsIGRpY3Rpb25hcnkpIHsKICBWYWxpZGF0b3IubG9jYWxpemUobGFuZywgZGljdGlvbmFyeSk7Cn07Ci8qKgogKiBBZGRzIGFuZCBzZXRzIHRoZSBjdXJyZW50IGxvY2FsZSBmb3IgdGhlIHZhbGlkYXRvci4KICovCgoKVmFsaWRhdG9yLmxvY2FsaXplID0gZnVuY3Rpb24gbG9jYWxpemUobGFuZywgZGljdGlvbmFyeSkgewogIHZhciBvYmo7CgogIGlmIChpc09iamVjdChsYW5nKSkgewogICAgRGljdGlvbmFyeVJlc29sdmVyLmdldERyaXZlcigpLm1lcmdlKGxhbmcpOwogICAgcmV0dXJuOwogIH0gLy8gbWVyZ2UgdGhlIGRpY3Rpb25hcnkuCgoKICBpZiAoZGljdGlvbmFyeSkgewogICAgdmFyIGxvY2FsZSA9IGxhbmcgfHwgZGljdGlvbmFyeS5uYW1lOwogICAgZGljdGlvbmFyeSA9IGFzc2lnbih7fSwgZGljdGlvbmFyeSk7CiAgICBEaWN0aW9uYXJ5UmVzb2x2ZXIuZ2V0RHJpdmVyKCkubWVyZ2UoKG9iaiA9IHt9LCBvYmpbbG9jYWxlXSA9IGRpY3Rpb25hcnksIG9iaikpOwogIH0KCiAgaWYgKGxhbmcpIHsKICAgIC8vIHNldCB0aGUgbG9jYWxlLgogICAgVmFsaWRhdG9yLmxvY2FsZSA9IGxhbmc7CiAgfQp9OwovKioKICogUmVnaXN0ZXJzIGEgZmllbGQgdG8gYmUgdmFsaWRhdGVkLgogKi8KCgpWYWxpZGF0b3IucHJvdG90eXBlLmF0dGFjaCA9IGZ1bmN0aW9uIGF0dGFjaChmaWVsZE9wdHMpIHsKICB2YXIgdGhpcyQxID0gdGhpczsgLy8gV2Ugc2VhcmNoIGZvciBhIGZpZWxkIHdpdGggdGhlIHNhbWUgbmFtZSAmIHNjb3BlLCBoYXZpbmcgcGVyc2lzdCBlbmFibGVkCgogIHZhciBvbGRGaWVsZE1hdGNoZXIgPSB7CiAgICBuYW1lOiBmaWVsZE9wdHMubmFtZSwKICAgIHNjb3BlOiBmaWVsZE9wdHMuc2NvcGUsCiAgICBwZXJzaXN0OiB0cnVlCiAgfTsKICB2YXIgb2xkRmllbGQgPSBmaWVsZE9wdHMucGVyc2lzdCA/IHRoaXMuZmllbGRzLmZpbmQob2xkRmllbGRNYXRjaGVyKSA6IG51bGw7CgogIGlmIChvbGRGaWVsZCkgewogICAgLy8gV2Uga2VlcCB0aGUgZmxhZ3Mgb2YgdGhlIG9sZCBmaWVsZCwgdGhlbiB3ZSByZW1vdmUgaXRzIGluc3RhbmNlCiAgICBmaWVsZE9wdHMuZmxhZ3MgPSBvbGRGaWVsZC5mbGFnczsKICAgIG9sZEZpZWxkLmRlc3Ryb3koKTsKICAgIHRoaXMuZmllbGRzLnJlbW92ZShvbGRGaWVsZCk7CiAgfSAvLyBmaXhlcyBpbml0aWFsIHZhbHVlIGRldGVjdGlvbiB3aXRoIHYtbW9kZWwgYW5kIHNlbGVjdCBlbGVtZW50cy4KCgogIHZhciB2YWx1ZSA9IGZpZWxkT3B0cy5pbml0aWFsVmFsdWU7CiAgdmFyIGZpZWxkID0gbmV3IEZpZWxkKGZpZWxkT3B0cyk7CiAgdGhpcy5maWVsZHMucHVzaChmaWVsZCk7IC8vIHZhbGlkYXRlIHRoZSBmaWVsZCBpbml0aWFsbHkKCiAgaWYgKGZpZWxkLmltbWVkaWF0ZSkgewogICAgdGhpcy4kdmVlLl92bS4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdGhpcyQxLnZhbGlkYXRlKCIjIiArIGZpZWxkLmlkLCB2YWx1ZSB8fCBmaWVsZC52YWx1ZSwgewogICAgICAgIHZtSWQ6IGZpZWxkT3B0cy52bUlkCiAgICAgIH0pOwogICAgfSk7CiAgfSBlbHNlIHsKICAgIHRoaXMuX3ZhbGlkYXRlKGZpZWxkLCB2YWx1ZSB8fCBmaWVsZC52YWx1ZSwgewogICAgICBpbml0aWFsOiB0cnVlCiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgZmllbGQuZmxhZ3MudmFsaWQgPSByZXN1bHQudmFsaWQ7CiAgICAgIGZpZWxkLmZsYWdzLmludmFsaWQgPSAhcmVzdWx0LnZhbGlkOwogICAgfSk7CiAgfQoKICByZXR1cm4gZmllbGQ7Cn07Ci8qKgogKiBTZXRzIHRoZSBmbGFncyBvbiBhIGZpZWxkLgogKi8KCgpWYWxpZGF0b3IucHJvdG90eXBlLmZsYWcgPSBmdW5jdGlvbiBmbGFnKG5hbWUsIGZsYWdzLCB1aWQpIHsKICBpZiAodWlkID09PSB2b2lkIDApIHVpZCA9IG51bGw7CgogIHZhciBmaWVsZCA9IHRoaXMuX3Jlc29sdmVGaWVsZChuYW1lLCB1bmRlZmluZWQsIHVpZCk7CgogIGlmICghZmllbGQgfHwgIWZsYWdzKSB7CiAgICByZXR1cm47CiAgfQoKICBmaWVsZC5zZXRGbGFncyhmbGFncyk7Cn07Ci8qKgogKiBSZW1vdmVzIGEgZmllbGQgZnJvbSB0aGUgdmFsaWRhdG9yLgogKi8KCgpWYWxpZGF0b3IucHJvdG90eXBlLmRldGFjaCA9IGZ1bmN0aW9uIGRldGFjaChuYW1lLCBzY29wZSwgdWlkKSB7CiAgdmFyIGZpZWxkID0gaXNDYWxsYWJsZShuYW1lLmRlc3Ryb3kpID8gbmFtZSA6IHRoaXMuX3Jlc29sdmVGaWVsZChuYW1lLCBzY29wZSwgdWlkKTsKCiAgaWYgKCFmaWVsZCkgewogICAgcmV0dXJuOwogIH0gLy8gV2UgZGVzdHJveS9yZW1vdmUgdGhlIGZpZWxkICYgZXJyb3IgaW5zdGFuY2VzIGlmIGl0J3Mgbm90IGEgYHBlcnNpc3RgIG9uZQoKCiAgaWYgKCFmaWVsZC5wZXJzaXN0KSB7CiAgICBmaWVsZC5kZXN0cm95KCk7CiAgICB0aGlzLmVycm9ycy5yZW1vdmUoZmllbGQubmFtZSwgZmllbGQuc2NvcGUsIGZpZWxkLnZtSWQpOwogICAgdGhpcy5maWVsZHMucmVtb3ZlKGZpZWxkKTsKICB9Cn07Ci8qKgogKiBBZGRzIGEgY3VzdG9tIHZhbGlkYXRvciB0byB0aGUgbGlzdCBvZiB2YWxpZGF0aW9uIHJ1bGVzLgogKi8KCgpWYWxpZGF0b3IucHJvdG90eXBlLmV4dGVuZCA9IGZ1bmN0aW9uIGV4dGVuZChuYW1lLCB2YWxpZGF0b3IsIG9wdGlvbnMpIHsKICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSBvcHRpb25zID0ge307CiAgVmFsaWRhdG9yLmV4dGVuZChuYW1lLCB2YWxpZGF0b3IsIG9wdGlvbnMpOwp9OwoKVmFsaWRhdG9yLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uIHJlc2V0KG1hdGNoZXIpIHsKICB2YXIgdGhpcyQxID0gdGhpczsgLy8gdHdvIHRpY2tzCgogIHJldHVybiB0aGlzLiR2ZWUuX3ZtLiRuZXh0VGljaygpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRoaXMkMS4kdmVlLl92bS4kbmV4dFRpY2soKTsKICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgIHRoaXMkMS5maWVsZHMuZmlsdGVyKG1hdGNoZXIpLmZvckVhY2goZnVuY3Rpb24gKGZpZWxkKSB7CiAgICAgIGZpZWxkLndhaXRGb3IobnVsbCk7CiAgICAgIGZpZWxkLnJlc2V0KCk7IC8vIHJlc2V0IGZpZWxkIGZsYWdzLgoKICAgICAgdGhpcyQxLmVycm9ycy5yZW1vdmUoZmllbGQubmFtZSwgZmllbGQuc2NvcGUsIG1hdGNoZXIgJiYgbWF0Y2hlci52bUlkKTsKICAgIH0pOwogIH0pOwp9OwovKioKICogVXBkYXRlcyBhIGZpZWxkLCB1cGRhdGluZyBib3RoIGVycm9ycyBhbmQgZmxhZ3MuCiAqLwoKClZhbGlkYXRvci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gdXBkYXRlKGlkLCByZWYpIHsKICB2YXIgc2NvcGUgPSByZWYuc2NvcGU7CgogIHZhciBmaWVsZCA9IHRoaXMuX3Jlc29sdmVGaWVsZCgiIyIgKyBpZCk7CgogIGlmICghZmllbGQpIHsKICAgIHJldHVybjsKICB9IC8vIHJlbW92ZSBvbGQgc2NvcGUuCgoKICB0aGlzLmVycm9ycy51cGRhdGUoaWQsIHsKICAgIHNjb3BlOiBzY29wZQogIH0pOwp9OwovKioKICogUmVtb3ZlcyBhIHJ1bGUgZnJvbSB0aGUgbGlzdCBvZiB2YWxpZGF0b3JzLgogKiBAZGVwcmVjYXRlZAogKi8KCgpWYWxpZGF0b3IucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIHJlbW92ZShuYW1lKSB7CiAgVmFsaWRhdG9yLnJlbW92ZShuYW1lKTsKfTsKLyoqCiAqIFZhbGlkYXRlcyBhIHZhbHVlIGFnYWluc3QgYSByZWdpc3RlcmVkIGZpZWxkIHZhbGlkYXRpb25zLgogKi8KCgpWYWxpZGF0b3IucHJvdG90eXBlLnZhbGlkYXRlID0gZnVuY3Rpb24gdmFsaWRhdGUoZmllbGREZXNjcmlwdG9yLCB2YWx1ZSwgcmVmKSB7CiAgdmFyIHRoaXMkMSA9IHRoaXM7CiAgaWYgKHJlZiA9PT0gdm9pZCAwKSByZWYgPSB7fTsKICB2YXIgc2lsZW50ID0gcmVmLnNpbGVudDsKICB2YXIgdm1JZCA9IHJlZi52bUlkOwoKICBpZiAodGhpcy5wYXVzZWQpIHsKICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodHJ1ZSk7CiAgfSAvLyBvdmVybG9hZCB0byB2YWxpZGF0ZSBhbGwuCgoKICBpZiAoaXNOdWxsT3JVbmRlZmluZWQoZmllbGREZXNjcmlwdG9yKSkgewogICAgcmV0dXJuIHRoaXMudmFsaWRhdGVTY29wZXMoewogICAgICBzaWxlbnQ6IHNpbGVudCwKICAgICAgdm1JZDogdm1JZAogICAgfSk7CiAgfSAvLyBvdmVybG9hZCB0byB2YWxpZGF0ZSBzY29wZS1sZXNzIGZpZWxkcy4KCgogIGlmIChmaWVsZERlc2NyaXB0b3IgPT09ICcqJykgewogICAgcmV0dXJuIHRoaXMudmFsaWRhdGVBbGwodW5kZWZpbmVkLCB7CiAgICAgIHNpbGVudDogc2lsZW50LAogICAgICB2bUlkOiB2bUlkCiAgICB9KTsKICB9IC8vIGlmIHNjb3BlIHZhbGlkYXRpb24gd2FzIHJlcXVlc3RlZC4KCgogIGlmICgvXiguKylcLlwqJC8udGVzdChmaWVsZERlc2NyaXB0b3IpKSB7CiAgICB2YXIgbWF0Y2hlZCA9IGZpZWxkRGVzY3JpcHRvci5tYXRjaCgvXiguKylcLlwqJC8pWzFdOwogICAgcmV0dXJuIHRoaXMudmFsaWRhdGVBbGwobWF0Y2hlZCk7CiAgfQoKICB2YXIgZmllbGQgPSB0aGlzLl9yZXNvbHZlRmllbGQoZmllbGREZXNjcmlwdG9yKTsKCiAgaWYgKCFmaWVsZCkgewogICAgcmV0dXJuIHRoaXMuX2hhbmRsZUZpZWxkTm90Rm91bmQoZmllbGREZXNjcmlwdG9yKTsKICB9CgogIGlmICghc2lsZW50KSB7CiAgICBmaWVsZC5mbGFncy5wZW5kaW5nID0gdHJ1ZTsKICB9CgogIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7CiAgICB2YWx1ZSA9IGZpZWxkLnZhbHVlOwogIH0KCiAgdmFyIHZhbGlkYXRpb25Qcm9taXNlID0gdGhpcy5fdmFsaWRhdGUoZmllbGQsIHZhbHVlKTsKCiAgZmllbGQud2FpdEZvcih2YWxpZGF0aW9uUHJvbWlzZSk7CiAgcmV0dXJuIHZhbGlkYXRpb25Qcm9taXNlLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgaWYgKCFzaWxlbnQgJiYgZmllbGQuaXNXYWl0aW5nRm9yKHZhbGlkYXRpb25Qcm9taXNlKSkgewogICAgICAvLyBhbGxvdyBuZXh0IHZhbGlkYXRpb24gdG8gbXV0YXRlIHRoZSBzdGF0ZS4KICAgICAgZmllbGQud2FpdEZvcihudWxsKTsKCiAgICAgIHRoaXMkMS5faGFuZGxlVmFsaWRhdGlvblJlc3VsdHMoW3Jlc3VsdF0sIHZtSWQpOwogICAgfQoKICAgIHJldHVybiByZXN1bHQudmFsaWQ7CiAgfSk7Cn07Ci8qKgogKiBQYXVzZXMgdGhlIHZhbGlkYXRvci4KICovCgoKVmFsaWRhdG9yLnByb3RvdHlwZS5wYXVzZSA9IGZ1bmN0aW9uIHBhdXNlKCkgewogIHRoaXMucGF1c2VkID0gdHJ1ZTsKICByZXR1cm4gdGhpczsKfTsKLyoqCiAqIFJlc3VtZXMgdGhlIHZhbGlkYXRvci4KICovCgoKVmFsaWRhdG9yLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbiByZXN1bWUoKSB7CiAgdGhpcy5wYXVzZWQgPSBmYWxzZTsKICByZXR1cm4gdGhpczsKfTsKLyoqCiAqIFZhbGlkYXRlcyBlYWNoIHZhbHVlIGFnYWluc3QgdGhlIGNvcnJlc3BvbmRpbmcgZmllbGQgdmFsaWRhdGlvbnMuCiAqLwoKClZhbGlkYXRvci5wcm90b3R5cGUudmFsaWRhdGVBbGwgPSBmdW5jdGlvbiB2YWxpZGF0ZUFsbCh2YWx1ZXMsIHJlZikgewogIHZhciB0aGlzJDEgPSB0aGlzOwogIGlmIChyZWYgPT09IHZvaWQgMCkgcmVmID0ge307CiAgdmFyIHNpbGVudCA9IHJlZi5zaWxlbnQ7CiAgdmFyIHZtSWQgPSByZWYudm1JZDsKCiAgaWYgKHRoaXMucGF1c2VkKSB7CiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRydWUpOwogIH0KCiAgdmFyIG1hdGNoZXIgPSBudWxsOwogIHZhciBwcm92aWRlZFZhbHVlcyA9IGZhbHNlOwoKICBpZiAodHlwZW9mIHZhbHVlcyA9PT0gJ3N0cmluZycpIHsKICAgIG1hdGNoZXIgPSB7CiAgICAgIHNjb3BlOiB2YWx1ZXMsCiAgICAgIHZtSWQ6IHZtSWQKICAgIH07CiAgfSBlbHNlIGlmIChpc09iamVjdCh2YWx1ZXMpKSB7CiAgICBtYXRjaGVyID0gT2JqZWN0LmtleXModmFsdWVzKS5tYXAoZnVuY3Rpb24gKGtleSkgewogICAgICByZXR1cm4gewogICAgICAgIG5hbWU6IGtleSwKICAgICAgICB2bUlkOiB2bUlkLAogICAgICAgIHNjb3BlOiBudWxsCiAgICAgIH07CiAgICB9KTsKICAgIHByb3ZpZGVkVmFsdWVzID0gdHJ1ZTsKICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWVzKSkgewogICAgbWF0Y2hlciA9IHZhbHVlcy5tYXAoZnVuY3Rpb24gKGtleSkgewogICAgICByZXR1cm4gX3R5cGVvZjIoa2V5KSA9PT0gJ29iamVjdCcgPyBPYmplY3QuYXNzaWduKHsKICAgICAgICB2bUlkOiB2bUlkCiAgICAgIH0sIGtleSkgOiB7CiAgICAgICAgbmFtZToga2V5LAogICAgICAgIHZtSWQ6IHZtSWQKICAgICAgfTsKICAgIH0pOwogIH0gZWxzZSB7CiAgICBtYXRjaGVyID0gewogICAgICBzY29wZTogbnVsbCwKICAgICAgdm1JZDogdm1JZAogICAgfTsKICB9CgogIHJldHVybiBQcm9taXNlLmFsbCh0aGlzLmZpZWxkcy5maWx0ZXIobWF0Y2hlcikubWFwKGZ1bmN0aW9uIChmaWVsZCkgewogICAgcmV0dXJuIHRoaXMkMS5fdmFsaWRhdGUoZmllbGQsIHByb3ZpZGVkVmFsdWVzID8gdmFsdWVzW2ZpZWxkLm5hbWVdIDogZmllbGQudmFsdWUpOwogIH0pKS50aGVuKGZ1bmN0aW9uIChyZXN1bHRzKSB7CiAgICBpZiAoIXNpbGVudCkgewogICAgICB0aGlzJDEuX2hhbmRsZVZhbGlkYXRpb25SZXN1bHRzKHJlc3VsdHMsIHZtSWQpOwogICAgfQoKICAgIHJldHVybiByZXN1bHRzLmV2ZXJ5KGZ1bmN0aW9uICh0KSB7CiAgICAgIHJldHVybiB0LnZhbGlkOwogICAgfSk7CiAgfSk7Cn07Ci8qKgogKiBWYWxpZGF0ZXMgYWxsIHNjb3Blcy4KICovCgoKVmFsaWRhdG9yLnByb3RvdHlwZS52YWxpZGF0ZVNjb3BlcyA9IGZ1bmN0aW9uIHZhbGlkYXRlU2NvcGVzKHJlZikgewogIHZhciB0aGlzJDEgPSB0aGlzOwogIGlmIChyZWYgPT09IHZvaWQgMCkgcmVmID0ge307CiAgdmFyIHNpbGVudCA9IHJlZi5zaWxlbnQ7CiAgdmFyIHZtSWQgPSByZWYudm1JZDsKCiAgaWYgKHRoaXMucGF1c2VkKSB7CiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRydWUpOwogIH0KCiAgcmV0dXJuIFByb21pc2UuYWxsKHRoaXMuZmllbGRzLmZpbHRlcih7CiAgICB2bUlkOiB2bUlkCiAgfSkubWFwKGZ1bmN0aW9uIChmaWVsZCkgewogICAgcmV0dXJuIHRoaXMkMS5fdmFsaWRhdGUoZmllbGQsIGZpZWxkLnZhbHVlKTsKICB9KSkudGhlbihmdW5jdGlvbiAocmVzdWx0cykgewogICAgaWYgKCFzaWxlbnQpIHsKICAgICAgdGhpcyQxLl9oYW5kbGVWYWxpZGF0aW9uUmVzdWx0cyhyZXN1bHRzLCB2bUlkKTsKICAgIH0KCiAgICByZXR1cm4gcmVzdWx0cy5ldmVyeShmdW5jdGlvbiAodCkgewogICAgICByZXR1cm4gdC52YWxpZDsKICAgIH0pOwogIH0pOwp9OwovKioKICogVmFsaWRhdGVzIGEgdmFsdWUgYWdhaW5zdCB0aGUgcnVsZXMuCiAqLwoKClZhbGlkYXRvci5wcm90b3R5cGUudmVyaWZ5ID0gZnVuY3Rpb24gdmVyaWZ5KHZhbHVlLCBydWxlcywgb3B0aW9ucykgewogIGlmIChvcHRpb25zID09PSB2b2lkIDApIG9wdGlvbnMgPSB7fTsKICB2YXIgZmllbGQgPSB7CiAgICBuYW1lOiBvcHRpb25zICYmIG9wdGlvbnMubmFtZSB8fCAne2ZpZWxkfScsCiAgICBydWxlczogbm9ybWFsaXplUnVsZXMocnVsZXMpLAogICAgYmFpbHM6IGdldFBhdGgoJ2JhaWxzJywgb3B0aW9ucywgdHJ1ZSksCiAgICBmb3JjZVJlcXVpcmVkOiBmYWxzZSwKCiAgICBnZXQgaXNSZXF1aXJlZCgpIHsKICAgICAgcmV0dXJuICEhdGhpcy5ydWxlcy5yZXF1aXJlZCB8fCB0aGlzLmZvcmNlUmVxdWlyZWQ7CiAgICB9CgogIH07CiAgdmFyIHRhcmdldFJ1bGVzID0gT2JqZWN0LmtleXMoZmllbGQucnVsZXMpLmZpbHRlcihSdWxlQ29udGFpbmVyLmlzVGFyZ2V0UnVsZSk7CgogIGlmICh0YXJnZXRSdWxlcy5sZW5ndGggJiYgb3B0aW9ucyAmJiBpc09iamVjdChvcHRpb25zLnZhbHVlcykpIHsKICAgIGZpZWxkLmRlcGVuZGVuY2llcyA9IHRhcmdldFJ1bGVzLm1hcChmdW5jdGlvbiAocnVsZSkgewogICAgICB2YXIgcmVmID0gZmllbGQucnVsZXNbcnVsZV07CiAgICAgIHZhciB0YXJnZXRLZXkgPSByZWZbMF07CiAgICAgIHJldHVybiB7CiAgICAgICAgbmFtZTogcnVsZSwKICAgICAgICBmaWVsZDogewogICAgICAgICAgdmFsdWU6IG9wdGlvbnMudmFsdWVzW3RhcmdldEtleV0KICAgICAgICB9CiAgICAgIH07CiAgICB9KTsKICB9CgogIHJldHVybiB0aGlzLl92YWxpZGF0ZShmaWVsZCwgdmFsdWUpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgdmFyIGVycm9ycyA9IFtdOwogICAgdmFyIHJ1bGVNYXAgPSB7fTsKICAgIHJlc3VsdC5lcnJvcnMuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICBlcnJvcnMucHVzaChlLm1zZyk7CiAgICAgIHJ1bGVNYXBbZS5ydWxlXSA9IGUubXNnOwogICAgfSk7CiAgICByZXR1cm4gewogICAgICB2YWxpZDogcmVzdWx0LnZhbGlkLAogICAgICBlcnJvcnM6IGVycm9ycywKICAgICAgZmFpbGVkUnVsZXM6IHJ1bGVNYXAKICAgIH07CiAgfSk7Cn07Ci8qKgogKiBQZXJmb3JtIGNsZWFudXAuCiAqLwoKClZhbGlkYXRvci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIGRlc3Ryb3koKSB7CiAgdGhpcy4kdmVlLl92bS4kb2ZmKCdsb2NhbGVDaGFuZ2VkJyk7Cn07Ci8qKgogKiBDcmVhdGVzIHRoZSBmaWVsZHMgdG8gYmUgdmFsaWRhdGVkLgogKi8KCgpWYWxpZGF0b3IucHJvdG90eXBlLl9jcmVhdGVGaWVsZHMgPSBmdW5jdGlvbiBfY3JlYXRlRmllbGRzKHZhbGlkYXRpb25zKSB7CiAgdmFyIHRoaXMkMSA9IHRoaXM7CgogIGlmICghdmFsaWRhdGlvbnMpIHsKICAgIHJldHVybjsKICB9CgogIE9iamVjdC5rZXlzKHZhbGlkYXRpb25zKS5mb3JFYWNoKGZ1bmN0aW9uIChmaWVsZCkgewogICAgdmFyIG9wdGlvbnMgPSBhc3NpZ24oe30sIHsKICAgICAgbmFtZTogZmllbGQsCiAgICAgIHJ1bGVzOiB2YWxpZGF0aW9uc1tmaWVsZF0KICAgIH0pOwogICAgdGhpcyQxLmF0dGFjaChvcHRpb25zKTsKICB9KTsKfTsKLyoqCiAqIERhdGUgcnVsZXMgbmVlZCB0aGUgZXhpc3RlbmNlIG9mIGEgZm9ybWF0LCBzbyBkYXRlX2Zvcm1hdCBtdXN0IGJlIHN1cHBsaWVkLgogKi8KCgpWYWxpZGF0b3IucHJvdG90eXBlLl9nZXREYXRlRm9ybWF0ID0gZnVuY3Rpb24gX2dldERhdGVGb3JtYXQodmFsaWRhdGlvbnMpIHsKICB2YXIgZm9ybWF0ID0gbnVsbDsKCiAgaWYgKHZhbGlkYXRpb25zLmRhdGVfZm9ybWF0ICYmIEFycmF5LmlzQXJyYXkodmFsaWRhdGlvbnMuZGF0ZV9mb3JtYXQpKSB7CiAgICBmb3JtYXQgPSB2YWxpZGF0aW9ucy5kYXRlX2Zvcm1hdFswXTsKICB9CgogIHJldHVybiBmb3JtYXQgfHwgRGljdGlvbmFyeVJlc29sdmVyLmdldERyaXZlcigpLmdldERhdGVGb3JtYXQodGhpcy5sb2NhbGUpOwp9OwovKioKICogRm9ybWF0cyBhbiBlcnJvciBtZXNzYWdlIGZvciBmaWVsZCBhbmQgYSBydWxlLgogKi8KCgpWYWxpZGF0b3IucHJvdG90eXBlLl9mb3JtYXRFcnJvck1lc3NhZ2UgPSBmdW5jdGlvbiBfZm9ybWF0RXJyb3JNZXNzYWdlKGZpZWxkLCBydWxlLCBkYXRhLCB0YXJnZXROYW1lKSB7CiAgaWYgKGRhdGEgPT09IHZvaWQgMCkgZGF0YSA9IHt9OwogIGlmICh0YXJnZXROYW1lID09PSB2b2lkIDApIHRhcmdldE5hbWUgPSBudWxsOwoKICB2YXIgbmFtZSA9IHRoaXMuX2dldEZpZWxkRGlzcGxheU5hbWUoZmllbGQpOwoKICB2YXIgcGFyYW1zID0gdGhpcy5fZ2V0TG9jYWxpemVkUGFyYW1zKHJ1bGUsIHRhcmdldE5hbWUpOwoKICByZXR1cm4gRGljdGlvbmFyeVJlc29sdmVyLmdldERyaXZlcigpLmdldEZpZWxkTWVzc2FnZSh0aGlzLmxvY2FsZSwgZmllbGQubmFtZSwgcnVsZS5uYW1lLCBbbmFtZSwgcGFyYW1zLCBkYXRhXSk7Cn07Ci8qKgogKiBXZSBuZWVkIHRvIGNvbnZlcnQgYW55IG9iamVjdCBwYXJhbSB0byBhbiBhcnJheSBmb3JtYXQgc2luY2UgdGhlIGxvY2FsZXMgZG8gbm90IGhhbmRsZSBwYXJhbXMgYXMgb2JqZWN0cyB5ZXQuCiAqLwoKClZhbGlkYXRvci5wcm90b3R5cGUuX2NvbnZlcnRQYXJhbU9iamVjdFRvQXJyYXkgPSBmdW5jdGlvbiBfY29udmVydFBhcmFtT2JqZWN0VG9BcnJheShvYmosIHJ1bGVOYW1lKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkgewogICAgcmV0dXJuIG9iajsKICB9CgogIHZhciBwYXJhbU5hbWVzID0gUnVsZUNvbnRhaW5lci5nZXRQYXJhbU5hbWVzKHJ1bGVOYW1lKTsKCiAgaWYgKCFwYXJhbU5hbWVzIHx8ICFpc09iamVjdChvYmopKSB7CiAgICByZXR1cm4gb2JqOwogIH0KCiAgcmV0dXJuIHBhcmFtTmFtZXMucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCBwYXJhbU5hbWUpIHsKICAgIGlmIChwYXJhbU5hbWUgaW4gb2JqKSB7CiAgICAgIHByZXYucHVzaChvYmpbcGFyYW1OYW1lXSk7CiAgICB9CgogICAgcmV0dXJuIHByZXY7CiAgfSwgW10pOwp9OwovKioKICogVHJhbnNsYXRlcyB0aGUgcGFyYW1ldGVycyBwYXNzZWQgdG8gdGhlIHJ1bGUgKG1haW5seSBmb3IgdGFyZ2V0IGZpZWxkcykuCiAqLwoKClZhbGlkYXRvci5wcm90b3R5cGUuX2dldExvY2FsaXplZFBhcmFtcyA9IGZ1bmN0aW9uIF9nZXRMb2NhbGl6ZWRQYXJhbXMocnVsZSwgdGFyZ2V0TmFtZSkgewogIGlmICh0YXJnZXROYW1lID09PSB2b2lkIDApIHRhcmdldE5hbWUgPSBudWxsOwoKICB2YXIgcGFyYW1zID0gdGhpcy5fY29udmVydFBhcmFtT2JqZWN0VG9BcnJheShydWxlLnBhcmFtcywgcnVsZS5uYW1lKTsKCiAgaWYgKHJ1bGUub3B0aW9ucy5oYXNUYXJnZXQgJiYgcGFyYW1zICYmIHBhcmFtc1swXSkgewogICAgdmFyIGxvY2FsaXplZE5hbWUgPSB0YXJnZXROYW1lIHx8IERpY3Rpb25hcnlSZXNvbHZlci5nZXREcml2ZXIoKS5nZXRBdHRyaWJ1dGUodGhpcy5sb2NhbGUsIHBhcmFtc1swXSwgcGFyYW1zWzBdKTsKICAgIHJldHVybiBbbG9jYWxpemVkTmFtZV0uY29uY2F0KHBhcmFtcy5zbGljZSgxKSk7CiAgfQoKICByZXR1cm4gcGFyYW1zOwp9OwovKioKICogUmVzb2x2ZXMgYW4gYXBwcm9wcmlhdGUgZGlzcGxheSBuYW1lLCBmaXJzdCBjaGVja2luZyAnZGF0YS1hcycgb3IgdGhlIHJlZ2lzdGVyZWQgJ3ByZXR0eU5hbWUnCiAqLwoKClZhbGlkYXRvci5wcm90b3R5cGUuX2dldEZpZWxkRGlzcGxheU5hbWUgPSBmdW5jdGlvbiBfZ2V0RmllbGREaXNwbGF5TmFtZShmaWVsZCkgewogIHJldHVybiBmaWVsZC5hbGlhcyB8fCBEaWN0aW9uYXJ5UmVzb2x2ZXIuZ2V0RHJpdmVyKCkuZ2V0QXR0cmlidXRlKHRoaXMubG9jYWxlLCBmaWVsZC5uYW1lLCBmaWVsZC5uYW1lKTsKfTsKLyoqCiAqIENvbnZlcnRzIGFuIGFycmF5IG9mIHBhcmFtcyB0byBhbiBvYmplY3Qgd2l0aCBuYW1lZCBwcm9wZXJ0aWVzLgogKiBPbmx5IHdvcmtzIGlmIHRoZSBydWxlIGlzIGNvbmZpZ3VyZWQgd2l0aCBhIHBhcmFtTmFtZXMgYXJyYXkuCiAqIFJldHVybnMgdGhlIHNhbWUgcGFyYW1zIGlmIGl0IGNhbm5vdCBjb252ZXJ0IGl0LgogKi8KCgpWYWxpZGF0b3IucHJvdG90eXBlLl9jb252ZXJ0UGFyYW1BcnJheVRvT2JqID0gZnVuY3Rpb24gX2NvbnZlcnRQYXJhbUFycmF5VG9PYmoocGFyYW1zLCBydWxlTmFtZSkgewogIHZhciBwYXJhbU5hbWVzID0gUnVsZUNvbnRhaW5lci5nZXRQYXJhbU5hbWVzKHJ1bGVOYW1lKTsKCiAgaWYgKCFwYXJhbU5hbWVzKSB7CiAgICByZXR1cm4gcGFyYW1zOwogIH0KCiAgaWYgKGlzT2JqZWN0KHBhcmFtcykpIHsKICAgIC8vIGNoZWNrIGlmIHRoZSBvYmplY3QgaXMgZWl0aGVyIGEgY29uZmlnIG9iamVjdCBvciBhIHNpbmdsZSBwYXJhbWV0ZXIgdGhhdCBpcyBhbiBvYmplY3QuCiAgICB2YXIgaGFzS2V5cyA9IHBhcmFtTmFtZXMuc29tZShmdW5jdGlvbiAobmFtZSkgewogICAgICByZXR1cm4gT2JqZWN0LmtleXMocGFyYW1zKS5pbmRleE9mKG5hbWUpICE9PSAtMTsKICAgIH0pOyAvLyBpZiBpdCBoYXMgc29tZSBvZiB0aGUga2V5cywgcmV0dXJuIGl0IGFzIGlzLgoKICAgIGlmIChoYXNLZXlzKSB7CiAgICAgIHJldHVybiBwYXJhbXM7CiAgICB9IC8vIG90aGVyd2lzZSB3cmFwIHRoZSBvYmplY3QgaW4gYW4gYXJyYXkuCgoKICAgIHBhcmFtcyA9IFtwYXJhbXNdOwogIH0gLy8gUmVkdWNlIHRoZSBwYXJhbXNOYW1lcyB0byBhIHBhcmFtIG9iamVjdC4KCgogIHJldHVybiBwYXJhbXMucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCB2YWx1ZSwgaWR4KSB7CiAgICBwcmV2W3BhcmFtTmFtZXNbaWR4XV0gPSB2YWx1ZTsKICAgIHJldHVybiBwcmV2OwogIH0sIHt9KTsKfTsKLyoqCiAqIFRlc3RzIGEgc2luZ2xlIGlucHV0IHZhbHVlIGFnYWluc3QgYSBydWxlLgogKi8KCgpWYWxpZGF0b3IucHJvdG90eXBlLl90ZXN0ID0gZnVuY3Rpb24gX3Rlc3QoZmllbGQsIHZhbHVlLCBydWxlKSB7CiAgdmFyIHRoaXMkMSA9IHRoaXM7CiAgdmFyIHZhbGlkYXRvciA9IFJ1bGVDb250YWluZXIuZ2V0VmFsaWRhdG9yTWV0aG9kKHJ1bGUubmFtZSk7CiAgdmFyIHBhcmFtcyA9IEFycmF5LmlzQXJyYXkocnVsZS5wYXJhbXMpID8gdG9BcnJheShydWxlLnBhcmFtcykgOiBydWxlLnBhcmFtczsKCiAgaWYgKCFwYXJhbXMpIHsKICAgIHBhcmFtcyA9IFtdOwogIH0KCiAgdmFyIHRhcmdldE5hbWUgPSBudWxsOwoKICBpZiAoIXZhbGlkYXRvciB8fCB0eXBlb2YgdmFsaWRhdG9yICE9PSAnZnVuY3Rpb24nKSB7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoY3JlYXRlRXJyb3IoIk5vIHN1Y2ggdmFsaWRhdG9yICciICsgcnVsZS5uYW1lICsgIicgZXhpc3RzLiIpKTsKICB9IC8vIGhhcyBmaWVsZCBkZXBlbmRlbmNpZXMuCgoKICBpZiAocnVsZS5vcHRpb25zLmhhc1RhcmdldCAmJiBmaWVsZC5kZXBlbmRlbmNpZXMpIHsKICAgIHZhciB0YXJnZXQgPSBmaW5kKGZpZWxkLmRlcGVuZGVuY2llcywgZnVuY3Rpb24gKGQpIHsKICAgICAgcmV0dXJuIGQubmFtZSA9PT0gcnVsZS5uYW1lOwogICAgfSk7CgogICAgaWYgKHRhcmdldCkgewogICAgICB0YXJnZXROYW1lID0gdGFyZ2V0LmZpZWxkLmFsaWFzOwogICAgICBwYXJhbXMgPSBbdGFyZ2V0LmZpZWxkLnZhbHVlXS5jb25jYXQocGFyYW1zLnNsaWNlKDEpKTsKICAgIH0KICB9IGVsc2UgaWYgKHJ1bGUubmFtZSA9PT0gJ3JlcXVpcmVkJyAmJiBmaWVsZC5yZWplY3RzRmFsc2UpIHsKICAgIC8vIGludmFsaWRhdGUgZmFsc2UgaWYgbm8gYXJncyB3ZXJlIHNwZWNpZmllZCBhbmQgdGhlIGZpZWxkIHJlamVjdHMgZmFsc2UgYnkgZGVmYXVsdC4KICAgIHBhcmFtcyA9IHBhcmFtcy5sZW5ndGggPyBwYXJhbXMgOiBbdHJ1ZV07CiAgfQoKICBpZiAocnVsZS5vcHRpb25zLmlzRGF0ZSkgewogICAgdmFyIGRhdGVGb3JtYXQgPSB0aGlzLl9nZXREYXRlRm9ybWF0KGZpZWxkLnJ1bGVzKTsKCiAgICBpZiAocnVsZS5uYW1lICE9PSAnZGF0ZV9mb3JtYXQnKSB7CiAgICAgIHBhcmFtcy5wdXNoKGRhdGVGb3JtYXQpOwogICAgfQogIH0KCiAgdmFyIHJlc3VsdCA9IHZhbGlkYXRvcih2YWx1ZSwgdGhpcy5fY29udmVydFBhcmFtQXJyYXlUb09iaihwYXJhbXMsIHJ1bGUubmFtZSkpOyAvLyBJZiBpdCBpcyBhIHByb21pc2UuCgogIGlmIChpc0NhbGxhYmxlKHJlc3VsdC50aGVuKSkgewogICAgcmV0dXJuIHJlc3VsdC50aGVuKGZ1bmN0aW9uICh2YWx1ZXMpIHsKICAgICAgdmFyIGFsbFZhbGlkID0gdHJ1ZTsKICAgICAgdmFyIGRhdGEgPSB7fTsKCiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlcykpIHsKICAgICAgICBhbGxWYWxpZCA9IHZhbHVlcy5ldmVyeShmdW5jdGlvbiAodCkgewogICAgICAgICAgcmV0dXJuIGlzT2JqZWN0KHQpID8gdC52YWxpZCA6IHQ7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gSXMgYSBzaW5nbGUgb2JqZWN0L2Jvb2xlYW4uCiAgICAgICAgYWxsVmFsaWQgPSBpc09iamVjdCh2YWx1ZXMpID8gdmFsdWVzLnZhbGlkIDogdmFsdWVzOwogICAgICAgIGRhdGEgPSB2YWx1ZXMuZGF0YTsKICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICB2YWxpZDogYWxsVmFsaWQsCiAgICAgICAgZGF0YTogcmVzdWx0LmRhdGEsCiAgICAgICAgZXJyb3JzOiBhbGxWYWxpZCA/IFtdIDogW3RoaXMkMS5fY3JlYXRlRmllbGRFcnJvcihmaWVsZCwgcnVsZSwgZGF0YSwgdGFyZ2V0TmFtZSldCiAgICAgIH07CiAgICB9KTsKICB9CgogIGlmICghaXNPYmplY3QocmVzdWx0KSkgewogICAgcmVzdWx0ID0gewogICAgICB2YWxpZDogcmVzdWx0LAogICAgICBkYXRhOiB7fQogICAgfTsKICB9CgogIHJldHVybiB7CiAgICB2YWxpZDogcmVzdWx0LnZhbGlkLAogICAgZGF0YTogcmVzdWx0LmRhdGEsCiAgICBlcnJvcnM6IHJlc3VsdC52YWxpZCA/IFtdIDogW3RoaXMuX2NyZWF0ZUZpZWxkRXJyb3IoZmllbGQsIHJ1bGUsIHJlc3VsdC5kYXRhLCB0YXJnZXROYW1lKV0KICB9Owp9OwovKioKICogTWVyZ2VzIGEgdmFsaWRhdG9yIG9iamVjdCBpbnRvIHRoZSBSVUxFUyBhbmQgTWVzc2FnZXMuCiAqLwoKClZhbGlkYXRvci5fbWVyZ2UgPSBmdW5jdGlvbiBfbWVyZ2UobmFtZSwgcmVmKSB7CiAgdmFyIHZhbGlkYXRvciA9IHJlZi52YWxpZGF0b3I7CiAgdmFyIG9wdGlvbnMgPSByZWYub3B0aW9uczsKICB2YXIgcGFyYW1OYW1lcyA9IHJlZi5wYXJhbU5hbWVzOwogIHZhciB2YWxpZGF0ZSA9IGlzQ2FsbGFibGUodmFsaWRhdG9yKSA/IHZhbGlkYXRvciA6IHZhbGlkYXRvci52YWxpZGF0ZTsKCiAgaWYgKHZhbGlkYXRvci5nZXRNZXNzYWdlKSB7CiAgICBEaWN0aW9uYXJ5UmVzb2x2ZXIuZ2V0RHJpdmVyKCkuc2V0TWVzc2FnZShWYWxpZGF0b3IubG9jYWxlLCBuYW1lLCB2YWxpZGF0b3IuZ2V0TWVzc2FnZSk7CiAgfQoKICBSdWxlQ29udGFpbmVyLmFkZChuYW1lLCB7CiAgICB2YWxpZGF0ZTogdmFsaWRhdGUsCiAgICBvcHRpb25zOiBvcHRpb25zLAogICAgcGFyYW1OYW1lczogcGFyYW1OYW1lcwogIH0pOwp9OwovKioKICogR3VhcmRzIGZyb20gZXh0ZW5zaW9uIHZpb2xhdGlvbnMuCiAqLwoKClZhbGlkYXRvci5fZ3VhcmRFeHRlbmQgPSBmdW5jdGlvbiBfZ3VhcmRFeHRlbmQobmFtZSwgdmFsaWRhdG9yKSB7CiAgaWYgKGlzQ2FsbGFibGUodmFsaWRhdG9yKSkgewogICAgcmV0dXJuOwogIH0KCiAgaWYgKCFpc0NhbGxhYmxlKHZhbGlkYXRvci52YWxpZGF0ZSkpIHsKICAgIHRocm93IGNyZWF0ZUVycm9yKCJFeHRlbnNpb24gRXJyb3I6IFRoZSB2YWxpZGF0b3IgJyIgKyBuYW1lICsgIicgbXVzdCBiZSBhIGZ1bmN0aW9uIG9yIGhhdmUgYSAndmFsaWRhdGUnIG1ldGhvZC4iKTsKICB9Cn07Ci8qKgogKiBDcmVhdGVzIGEgRmllbGQgRXJyb3IgT2JqZWN0LgogKi8KCgpWYWxpZGF0b3IucHJvdG90eXBlLl9jcmVhdGVGaWVsZEVycm9yID0gZnVuY3Rpb24gX2NyZWF0ZUZpZWxkRXJyb3IoZmllbGQsIHJ1bGUsIGRhdGEsIHRhcmdldE5hbWUpIHsKICB2YXIgdGhpcyQxID0gdGhpczsKICByZXR1cm4gewogICAgaWQ6IGZpZWxkLmlkLAogICAgdm1JZDogZmllbGQudm1JZCwKICAgIGZpZWxkOiBmaWVsZC5uYW1lLAogICAgbXNnOiB0aGlzLl9mb3JtYXRFcnJvck1lc3NhZ2UoZmllbGQsIHJ1bGUsIGRhdGEsIHRhcmdldE5hbWUpLAogICAgcnVsZTogcnVsZS5uYW1lLAogICAgc2NvcGU6IGZpZWxkLnNjb3BlLAogICAgcmVnZW5lcmF0ZTogZnVuY3Rpb24gcmVnZW5lcmF0ZSgpIHsKICAgICAgcmV0dXJuIHRoaXMkMS5fZm9ybWF0RXJyb3JNZXNzYWdlKGZpZWxkLCBydWxlLCBkYXRhLCB0YXJnZXROYW1lKTsKICAgIH0KICB9Owp9OwovKioKICogVHJpZXMgZGlmZmVyZW50IHN0cmF0ZWdpZXMgdG8gZmluZCBhIGZpZWxkLgogKi8KCgpWYWxpZGF0b3IucHJvdG90eXBlLl9yZXNvbHZlRmllbGQgPSBmdW5jdGlvbiBfcmVzb2x2ZUZpZWxkKG5hbWUsIHNjb3BlLCB1aWQpIHsKICBpZiAobmFtZVswXSA9PT0gJyMnKSB7CiAgICByZXR1cm4gdGhpcy5maWVsZHMuZmluZEJ5SWQobmFtZS5zbGljZSgxKSk7CiAgfQoKICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKHNjb3BlKSkgewogICAgcmV0dXJuIHRoaXMuZmllbGRzLmZpbmQoewogICAgICBuYW1lOiBuYW1lLAogICAgICBzY29wZTogc2NvcGUsCiAgICAgIHZtSWQ6IHVpZAogICAgfSk7CiAgfQoKICBpZiAoaW5jbHVkZXMobmFtZSwgJy4nKSkgewogICAgdmFyIHJlZiA9IG5hbWUuc3BsaXQoJy4nKTsKICAgIHZhciBmaWVsZFNjb3BlID0gcmVmWzBdOwogICAgdmFyIGZpZWxkTmFtZSA9IHJlZi5zbGljZSgxKTsKICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGRzLmZpbmQoewogICAgICBuYW1lOiBmaWVsZE5hbWUuam9pbignLicpLAogICAgICBzY29wZTogZmllbGRTY29wZSwKICAgICAgdm1JZDogdWlkCiAgICB9KTsKCiAgICBpZiAoZmllbGQpIHsKICAgICAgcmV0dXJuIGZpZWxkOwogICAgfQogIH0KCiAgcmV0dXJuIHRoaXMuZmllbGRzLmZpbmQoewogICAgbmFtZTogbmFtZSwKICAgIHNjb3BlOiBudWxsLAogICAgdm1JZDogdWlkCiAgfSk7Cn07Ci8qKgogKiBIYW5kbGVzIHdoZW4gYSBmaWVsZCBpcyBub3QgZm91bmQuCiAqLwoKClZhbGlkYXRvci5wcm90b3R5cGUuX2hhbmRsZUZpZWxkTm90Rm91bmQgPSBmdW5jdGlvbiBfaGFuZGxlRmllbGROb3RGb3VuZChuYW1lLCBzY29wZSkgewogIHZhciBmdWxsTmFtZSA9IGlzTnVsbE9yVW5kZWZpbmVkKHNjb3BlKSA/IG5hbWUgOiAiIiArICghaXNOdWxsT3JVbmRlZmluZWQoc2NvcGUpID8gc2NvcGUgKyAnLicgOiAnJykgKyBuYW1lOwogIHJldHVybiBQcm9taXNlLnJlamVjdChjcmVhdGVFcnJvcigiVmFsaWRhdGluZyBhIG5vbi1leGlzdGVudCBmaWVsZDogXCIiICsgZnVsbE5hbWUgKyAiXCIuIFVzZSBcImF0dGFjaCgpXCIgZmlyc3QuIikpOwp9OwovKioKICogSGFuZGxlcyB2YWxpZGF0aW9uIHJlc3VsdHMuCiAqLwoKClZhbGlkYXRvci5wcm90b3R5cGUuX2hhbmRsZVZhbGlkYXRpb25SZXN1bHRzID0gZnVuY3Rpb24gX2hhbmRsZVZhbGlkYXRpb25SZXN1bHRzKHJlc3VsdHMsIHZtSWQpIHsKICB2YXIgdGhpcyQxID0gdGhpczsKICB2YXIgbWF0Y2hlcnMgPSByZXN1bHRzLm1hcChmdW5jdGlvbiAocmVzdWx0KSB7CiAgICByZXR1cm4gewogICAgICBpZDogcmVzdWx0LmlkCiAgICB9OwogIH0pOwogIHRoaXMuZXJyb3JzLnJlbW92ZUJ5SWQobWF0Y2hlcnMubWFwKGZ1bmN0aW9uIChtKSB7CiAgICByZXR1cm4gbS5pZDsKICB9KSk7IC8vIHJlbW92ZSBieSBuYW1lIGFuZCBzY29wZSB0byByZW1vdmUgYW55IGN1c3RvbSBlcnJvcnMgYWRkZWQuCgogIHJlc3VsdHMuZm9yRWFjaChmdW5jdGlvbiAocmVzdWx0KSB7CiAgICB0aGlzJDEuZXJyb3JzLnJlbW92ZShyZXN1bHQuZmllbGQsIHJlc3VsdC5zY29wZSwgdm1JZCk7CiAgfSk7CiAgdmFyIGFsbEVycm9ycyA9IHJlc3VsdHMucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCBjdXJyKSB7CiAgICBwcmV2LnB1c2guYXBwbHkocHJldiwgY3Vyci5lcnJvcnMpOwogICAgcmV0dXJuIHByZXY7CiAgfSwgW10pOwogIHRoaXMuZXJyb3JzLmFkZChhbGxFcnJvcnMpOyAvLyBoYW5kbGUgZmxhZ3MuCgogIHRoaXMuZmllbGRzLmZpbHRlcihtYXRjaGVycykuZm9yRWFjaChmdW5jdGlvbiAoZmllbGQpIHsKICAgIHZhciByZXN1bHQgPSBmaW5kKHJlc3VsdHMsIGZ1bmN0aW9uIChyKSB7CiAgICAgIHJldHVybiByLmlkID09PSBmaWVsZC5pZDsKICAgIH0pOwogICAgZmllbGQuc2V0RmxhZ3MoewogICAgICBwZW5kaW5nOiBmYWxzZSwKICAgICAgdmFsaWQ6IHJlc3VsdC52YWxpZCwKICAgICAgdmFsaWRhdGVkOiB0cnVlCiAgICB9KTsKICB9KTsKfTsKClZhbGlkYXRvci5wcm90b3R5cGUuX3Nob3VsZFNraXAgPSBmdW5jdGlvbiBfc2hvdWxkU2tpcChmaWVsZCwgdmFsdWUpIHsKICAvLyBmaWVsZCBpcyBjb25maWd1cmVkIHRvIHJ1biB0aHJvdWdoIHRoZSBwaXBlbGluZSByZWdhcmRsZXNzCiAgaWYgKGZpZWxkLmJhaWxzID09PSBmYWxzZSkgewogICAgcmV0dXJuIGZhbHNlOwogIH0gLy8gZGlzYWJsZWQgZmllbGRzIGFyZSBza2lwcGVkIGlmIHVzZUNvbnN0cmFpbnRBdHRycyBpcyBlbmFibGVkIGluIGNvbmZpZwoKCiAgaWYgKGZpZWxkLmlzRGlzYWJsZWQgJiYgZ2V0Q29uZmlnKCkudXNlQ29uc3RyYWludEF0dHJzKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9IC8vIHNraXAgaWYgdGhlIGZpZWxkIGlzIG5vdCByZXF1aXJlZCBhbmQgaGFzIGFuIGVtcHR5IHZhbHVlLgoKCiAgcmV0dXJuICFmaWVsZC5pc1JlcXVpcmVkICYmIChpc051bGxPclVuZGVmaW5lZCh2YWx1ZSkgfHwgdmFsdWUgPT09ICcnIHx8IGlzRW1wdHlBcnJheSh2YWx1ZSkpOwp9OwoKVmFsaWRhdG9yLnByb3RvdHlwZS5fc2hvdWxkQmFpbCA9IGZ1bmN0aW9uIF9zaG91bGRCYWlsKGZpZWxkKSB7CiAgLy8gaWYgdGhlIGZpZWxkIHdhcyBjb25maWd1cmVkIGV4cGxpY2l0bHkuCiAgaWYgKGZpZWxkLmJhaWxzICE9PSB1bmRlZmluZWQpIHsKICAgIHJldHVybiBmaWVsZC5iYWlsczsKICB9CgogIHJldHVybiB0aGlzLmZhc3RFeGl0Owp9OwovKioKICogU3RhcnRzIHRoZSB2YWxpZGF0aW9uIHByb2Nlc3MuCiAqLwoKClZhbGlkYXRvci5wcm90b3R5cGUuX3ZhbGlkYXRlID0gZnVuY3Rpb24gX3ZhbGlkYXRlKGZpZWxkLCB2YWx1ZSwgcmVmKSB7CiAgdmFyIHRoaXMkMSA9IHRoaXM7CiAgaWYgKHJlZiA9PT0gdm9pZCAwKSByZWYgPSB7fTsKICB2YXIgaW5pdGlhbCA9IHJlZi5pbml0aWFsOwogIHZhciByZXF1aXJlUnVsZXMgPSBPYmplY3Qua2V5cyhmaWVsZC5ydWxlcykuZmlsdGVyKFJ1bGVDb250YWluZXIuaXNSZXF1aXJlUnVsZSk7CiAgZmllbGQuZm9yY2VSZXF1aXJlZCA9IGZhbHNlOwogIHJlcXVpcmVSdWxlcy5mb3JFYWNoKGZ1bmN0aW9uIChydWxlKSB7CiAgICB2YXIgcnVsZU9wdGlvbnMgPSBSdWxlQ29udGFpbmVyLmdldE9wdGlvbnMocnVsZSk7CgogICAgdmFyIHJlc3VsdCA9IHRoaXMkMS5fdGVzdChmaWVsZCwgdmFsdWUsIHsKICAgICAgbmFtZTogcnVsZSwKICAgICAgcGFyYW1zOiBmaWVsZC5ydWxlc1tydWxlXSwKICAgICAgb3B0aW9uczogcnVsZU9wdGlvbnMKICAgIH0pOwoKICAgIGlmIChpc0NhbGxhYmxlKHJlc3VsdC50aGVuKSkgewogICAgICB0aHJvdyBjcmVhdGVFcnJvcignUmVxdWlyZSBydWxlcyBjYW5ub3QgYmUgYXN5bmMnKTsKICAgIH0KCiAgICBpZiAoIWlzT2JqZWN0KHJlc3VsdCkpIHsKICAgICAgdGhyb3cgY3JlYXRlRXJyb3IoJ1JlcXVpcmUgcnVsZXMgaGFzIHRvIHJldHVybiBhbiBvYmplY3QgKHNlZSBkb2NzKScpOwogICAgfQoKICAgIGlmIChyZXN1bHQuZGF0YS5yZXF1aXJlZCA9PT0gdHJ1ZSkgewogICAgICBmaWVsZC5mb3JjZVJlcXVpcmVkID0gdHJ1ZTsKICAgIH0KICB9KTsKCiAgaWYgKHRoaXMuX3Nob3VsZFNraXAoZmllbGQsIHZhbHVlKSkgewogICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7CiAgICAgIHZhbGlkOiB0cnVlLAogICAgICBpZDogZmllbGQuaWQsCiAgICAgIGZpZWxkOiBmaWVsZC5uYW1lLAogICAgICBzY29wZTogZmllbGQuc2NvcGUsCiAgICAgIGVycm9yczogW10KICAgIH0pOwogIH0KCiAgdmFyIHByb21pc2VzID0gW107CiAgdmFyIGVycm9ycyA9IFtdOwogIHZhciBpc0V4aXRFYXJseSA9IGZhbHNlOwoKICBpZiAoaXNDYWxsYWJsZShmaWVsZC5jaGVja1ZhbHVlQ2hhbmdlZCkpIHsKICAgIGZpZWxkLmZsYWdzLmNoYW5nZWQgPSBmaWVsZC5jaGVja1ZhbHVlQ2hhbmdlZCgpOwogIH0gLy8gdXNlIG9mICcuc29tZSgpJyBpcyB0byBicmVhayBpdGVyYXRpb24gaW4gbWlkZGxlIGJ5IHJldHVybmluZyB0cnVlCgoKICBPYmplY3Qua2V5cyhmaWVsZC5ydWxlcykuZmlsdGVyKGZ1bmN0aW9uIChydWxlKSB7CiAgICBpZiAoIWluaXRpYWwgfHwgIVJ1bGVDb250YWluZXIuaGFzKHJ1bGUpKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIHJldHVybiBSdWxlQ29udGFpbmVyLmlzSW1tZWRpYXRlKHJ1bGUpOwogIH0pLnNvbWUoZnVuY3Rpb24gKHJ1bGUpIHsKICAgIHZhciBydWxlT3B0aW9ucyA9IFJ1bGVDb250YWluZXIuZ2V0T3B0aW9ucyhydWxlKTsKCiAgICB2YXIgcmVzdWx0ID0gdGhpcyQxLl90ZXN0KGZpZWxkLCB2YWx1ZSwgewogICAgICBuYW1lOiBydWxlLAogICAgICBwYXJhbXM6IGZpZWxkLnJ1bGVzW3J1bGVdLAogICAgICBvcHRpb25zOiBydWxlT3B0aW9ucwogICAgfSk7CgogICAgaWYgKGlzQ2FsbGFibGUocmVzdWx0LnRoZW4pKSB7CiAgICAgIHByb21pc2VzLnB1c2gocmVzdWx0KTsKICAgIH0gZWxzZSBpZiAoIXJlc3VsdC52YWxpZCAmJiB0aGlzJDEuX3Nob3VsZEJhaWwoZmllbGQpKSB7CiAgICAgIGVycm9ycy5wdXNoLmFwcGx5KGVycm9ycywgcmVzdWx0LmVycm9ycyk7CiAgICAgIGlzRXhpdEVhcmx5ID0gdHJ1ZTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIHByb21pc2lmeSB0aGUgcmVzdWx0LgogICAgICBwcm9taXNlcy5wdXNoKG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgcmV0dXJuIHJlc29sdmUocmVzdWx0KTsKICAgICAgfSkpOwogICAgfQoKICAgIHJldHVybiBpc0V4aXRFYXJseTsKICB9KTsKCiAgaWYgKGlzRXhpdEVhcmx5KSB7CiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHsKICAgICAgdmFsaWQ6IGZhbHNlLAogICAgICBlcnJvcnM6IGVycm9ycywKICAgICAgaWQ6IGZpZWxkLmlkLAogICAgICBmaWVsZDogZmllbGQubmFtZSwKICAgICAgc2NvcGU6IGZpZWxkLnNjb3BlCiAgICB9KTsKICB9CgogIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbiAocmVzdWx0cykgewogICAgcmV0dXJuIHJlc3VsdHMucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCB2KSB7CiAgICAgIHZhciByZWY7CgogICAgICBpZiAoIXYudmFsaWQpIHsKICAgICAgICAocmVmID0gcHJldi5lcnJvcnMpLnB1c2guYXBwbHkocmVmLCB2LmVycm9ycyk7CiAgICAgIH0KCiAgICAgIHByZXYudmFsaWQgPSBwcmV2LnZhbGlkICYmIHYudmFsaWQ7CiAgICAgIHJldHVybiBwcmV2OwogICAgfSwgewogICAgICB2YWxpZDogdHJ1ZSwKICAgICAgZXJyb3JzOiBlcnJvcnMsCiAgICAgIGlkOiBmaWVsZC5pZCwKICAgICAgZmllbGQ6IGZpZWxkLm5hbWUsCiAgICAgIHNjb3BlOiBmaWVsZC5zY29wZQogICAgfSk7CiAgfSk7Cn07CgpPYmplY3QuZGVmaW5lUHJvcGVydGllcyhWYWxpZGF0b3IucHJvdG90eXBlLCBwcm90b3R5cGVBY2Nlc3NvcnMkNCk7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFZhbGlkYXRvciwgc3RhdGljQWNjZXNzb3JzJDEpOyAvLyAKCnZhciBub3JtYWxpemVWYWx1ZSA9IGZ1bmN0aW9uIG5vcm1hbGl6ZVZhbHVlKHZhbHVlKSB7CiAgaWYgKGlzT2JqZWN0KHZhbHVlKSkgewogICAgcmV0dXJuIE9iamVjdC5rZXlzKHZhbHVlKS5yZWR1Y2UoZnVuY3Rpb24gKHByZXYsIGtleSkgewogICAgICBwcmV2W2tleV0gPSBub3JtYWxpemVWYWx1ZSh2YWx1ZVtrZXldKTsKICAgICAgcmV0dXJuIHByZXY7CiAgICB9LCB7fSk7CiAgfQoKICBpZiAoaXNDYWxsYWJsZSh2YWx1ZSkpIHsKICAgIHJldHVybiB2YWx1ZSgnezB9JywgWyd7MX0nLCAnezJ9JywgJ3szfSddKTsKICB9CgogIHJldHVybiB2YWx1ZTsKfTsKCnZhciBub3JtYWxpemVGb3JtYXQgPSBmdW5jdGlvbiBub3JtYWxpemVGb3JtYXQobG9jYWxlKSB7CiAgLy8gbm9ybWFsaXplIG1lc3NhZ2VzCiAgdmFyIGRpY3Rpb25hcnkgPSB7fTsKCiAgaWYgKGxvY2FsZS5tZXNzYWdlcykgewogICAgZGljdGlvbmFyeS5tZXNzYWdlcyA9IG5vcm1hbGl6ZVZhbHVlKGxvY2FsZS5tZXNzYWdlcyk7CiAgfQoKICBpZiAobG9jYWxlLmN1c3RvbSkgewogICAgZGljdGlvbmFyeS5jdXN0b20gPSBub3JtYWxpemVWYWx1ZShsb2NhbGUuY3VzdG9tKTsKICB9CgogIGlmIChsb2NhbGUuYXR0cmlidXRlcykgewogICAgZGljdGlvbmFyeS5hdHRyaWJ1dGVzID0gbG9jYWxlLmF0dHJpYnV0ZXM7CiAgfQoKICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKGxvY2FsZS5kYXRlRm9ybWF0KSkgewogICAgZGljdGlvbmFyeS5kYXRlRm9ybWF0ID0gbG9jYWxlLmRhdGVGb3JtYXQ7CiAgfQoKICByZXR1cm4gZGljdGlvbmFyeTsKfTsKCnZhciBJMThuRGljdGlvbmFyeSA9IGZ1bmN0aW9uIEkxOG5EaWN0aW9uYXJ5KGkxOG4sIHJvb3RLZXkpIHsKICB0aGlzLmkxOG4gPSBpMThuOwogIHRoaXMucm9vdEtleSA9IHJvb3RLZXk7Cn07Cgp2YXIgcHJvdG90eXBlQWNjZXNzb3JzJDUgPSB7CiAgbG9jYWxlOiB7CiAgICBjb25maWd1cmFibGU6IHRydWUKICB9Cn07Cgpwcm90b3R5cGVBY2Nlc3NvcnMkNS5sb2NhbGUuZ2V0ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiB0aGlzLmkxOG4ubG9jYWxlOwp9OwoKcHJvdG90eXBlQWNjZXNzb3JzJDUubG9jYWxlLnNldCA9IGZ1bmN0aW9uICh2YWx1ZSkgewogIHdhcm4oJ0Nhbm5vdCBzZXQgbG9jYWxlIGZyb20gdGhlIHZhbGlkYXRvciB3aGVuIHVzaW5nIHZ1ZS1pMThuLCB1c2UgaTE4bi5sb2NhbGUgc2V0dGVyIGluc3RlYWQnKTsKfTsKCkkxOG5EaWN0aW9uYXJ5LnByb3RvdHlwZS5nZXREYXRlRm9ybWF0ID0gZnVuY3Rpb24gZ2V0RGF0ZUZvcm1hdChsb2NhbGUpIHsKICByZXR1cm4gdGhpcy5pMThuLmdldERhdGVUaW1lRm9ybWF0KGxvY2FsZSB8fCB0aGlzLmxvY2FsZSk7Cn07CgpJMThuRGljdGlvbmFyeS5wcm90b3R5cGUuc2V0RGF0ZUZvcm1hdCA9IGZ1bmN0aW9uIHNldERhdGVGb3JtYXQobG9jYWxlLCB2YWx1ZSkgewogIHRoaXMuaTE4bi5zZXREYXRlVGltZUZvcm1hdChsb2NhbGUgfHwgdGhpcy5sb2NhbGUsIHZhbHVlKTsKfTsKCkkxOG5EaWN0aW9uYXJ5LnByb3RvdHlwZS5nZXRNZXNzYWdlID0gZnVuY3Rpb24gZ2V0TWVzc2FnZShfLCBrZXksIGRhdGEpIHsKICB2YXIgcGF0aCA9IHRoaXMucm9vdEtleSArICIubWVzc2FnZXMuIiArIGtleTsKICB2YXIgZGF0YU9wdGlvbnMgPSBkYXRhOwoKICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkgewogICAgZGF0YU9wdGlvbnMgPSBbXS5jb25jYXQuYXBwbHkoW10sIGRhdGEpOwogIH0KCiAgaWYgKHRoaXMuaTE4bi50ZShwYXRoKSkgewogICAgcmV0dXJuIHRoaXMuaTE4bi50KHBhdGgsIGRhdGFPcHRpb25zKTsKICB9IC8vIGZhbGxiYWNrIHRvIHRoZSBmYWxsYmFjayBtZXNzYWdlCgoKICBpZiAodGhpcy5pMThuLnRlKHBhdGgsIHRoaXMuaTE4bi5mYWxsYmFja0xvY2FsZSkpIHsKICAgIHJldHVybiB0aGlzLmkxOG4udChwYXRoLCB0aGlzLmkxOG4uZmFsbGJhY2tMb2NhbGUsIGRhdGFPcHRpb25zKTsKICB9IC8vIGZhbGxiYWNrIHRvIHRoZSByb290IG1lc3NhZ2UKCgogIHJldHVybiB0aGlzLmkxOG4udCh0aGlzLnJvb3RLZXkgKyAiLm1lc3NhZ2VzLl9kZWZhdWx0IiwgZGF0YU9wdGlvbnMpOwp9OwoKSTE4bkRpY3Rpb25hcnkucHJvdG90eXBlLmdldEF0dHJpYnV0ZSA9IGZ1bmN0aW9uIGdldEF0dHJpYnV0ZShfLCBrZXksIGZhbGxiYWNrKSB7CiAgaWYgKGZhbGxiYWNrID09PSB2b2lkIDApIGZhbGxiYWNrID0gJyc7CiAgdmFyIHBhdGggPSB0aGlzLnJvb3RLZXkgKyAiLmF0dHJpYnV0ZXMuIiArIGtleTsKCiAgaWYgKHRoaXMuaTE4bi50ZShwYXRoKSkgewogICAgcmV0dXJuIHRoaXMuaTE4bi50KHBhdGgpOwogIH0KCiAgcmV0dXJuIGZhbGxiYWNrOwp9OwoKSTE4bkRpY3Rpb25hcnkucHJvdG90eXBlLmdldEZpZWxkTWVzc2FnZSA9IGZ1bmN0aW9uIGdldEZpZWxkTWVzc2FnZShfLCBmaWVsZCwga2V5LCBkYXRhKSB7CiAgdmFyIHBhdGggPSB0aGlzLnJvb3RLZXkgKyAiLmN1c3RvbS4iICsgZmllbGQgKyAiLiIgKyBrZXk7CgogIGlmICh0aGlzLmkxOG4udGUocGF0aCkpIHsKICAgIHJldHVybiB0aGlzLmkxOG4udChwYXRoLCBkYXRhKTsKICB9CgogIHJldHVybiB0aGlzLmdldE1lc3NhZ2UoXywga2V5LCBkYXRhKTsKfTsKCkkxOG5EaWN0aW9uYXJ5LnByb3RvdHlwZS5tZXJnZSA9IGZ1bmN0aW9uIG1lcmdlJDEoZGljdGlvbmFyeSkgewogIHZhciB0aGlzJDEgPSB0aGlzOwogIE9iamVjdC5rZXlzKGRpY3Rpb25hcnkpLmZvckVhY2goZnVuY3Rpb24gKGxvY2FsZUtleSkgewogICAgdmFyIG9iajsgLy8gaTE4biBkb2Vzbid0IGRlZXAgbWVyZ2UKICAgIC8vIGZpcnN0IGNsb25lIHRoZSBleGlzdGluZyBsb2NhbGUgKGF2b2lkIG11dGF0aW9ucyB0byBsb2NhbGUpCgogICAgdmFyIGNsb25lID0gbWVyZ2Uoe30sIGdldFBhdGgobG9jYWxlS2V5ICsgIi4iICsgdGhpcyQxLnJvb3RLZXksIHRoaXMkMS5pMThuLm1lc3NhZ2VzLCB7fSkpOyAvLyBNZXJnZSBjbG9uZWQgbG9jYWxlIHdpdGggbmV3IG9uZQoKICAgIHZhciBsb2NhbGUgPSBtZXJnZShjbG9uZSwgbm9ybWFsaXplRm9ybWF0KGRpY3Rpb25hcnlbbG9jYWxlS2V5XSkpOwogICAgdGhpcyQxLmkxOG4ubWVyZ2VMb2NhbGVNZXNzYWdlKGxvY2FsZUtleSwgKG9iaiA9IHt9LCBvYmpbdGhpcyQxLnJvb3RLZXldID0gbG9jYWxlLCBvYmopKTsKCiAgICBpZiAobG9jYWxlLmRhdGVGb3JtYXQpIHsKICAgICAgdGhpcyQxLmkxOG4uc2V0RGF0ZVRpbWVGb3JtYXQobG9jYWxlS2V5LCBsb2NhbGUuZGF0ZUZvcm1hdCk7CiAgICB9CiAgfSk7Cn07CgpJMThuRGljdGlvbmFyeS5wcm90b3R5cGUuc2V0TWVzc2FnZSA9IGZ1bmN0aW9uIHNldE1lc3NhZ2UobG9jYWxlLCBrZXksIHZhbHVlKSB7CiAgdmFyIG9iaiwgb2JqJDE7CiAgdGhpcy5tZXJnZSgob2JqJDEgPSB7fSwgb2JqJDFbbG9jYWxlXSA9IHsKICAgIG1lc3NhZ2VzOiAob2JqID0ge30sIG9ialtrZXldID0gdmFsdWUsIG9iaikKICB9LCBvYmokMSkpOwp9OwoKSTE4bkRpY3Rpb25hcnkucHJvdG90eXBlLnNldEF0dHJpYnV0ZSA9IGZ1bmN0aW9uIHNldEF0dHJpYnV0ZShsb2NhbGUsIGtleSwgdmFsdWUpIHsKICB2YXIgb2JqLCBvYmokMTsKICB0aGlzLm1lcmdlKChvYmokMSA9IHt9LCBvYmokMVtsb2NhbGVdID0gewogICAgYXR0cmlidXRlczogKG9iaiA9IHt9LCBvYmpba2V5XSA9IHZhbHVlLCBvYmopCiAgfSwgb2JqJDEpKTsKfTsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEkxOG5EaWN0aW9uYXJ5LnByb3RvdHlwZSwgcHJvdG90eXBlQWNjZXNzb3JzJDUpOwoKdmFyIGFnZ3Jlc3NpdmUgPSBmdW5jdGlvbiBhZ2dyZXNzaXZlKCkgewogIHJldHVybiB7CiAgICBvbjogWydpbnB1dCddCiAgfTsKfTsKCnZhciBsYXp5ID0gZnVuY3Rpb24gbGF6eSgpIHsKICByZXR1cm4gewogICAgb246IFsnY2hhbmdlJ10KICB9Owp9OwoKdmFyIGVhZ2VyID0gZnVuY3Rpb24gZWFnZXIocmVmKSB7CiAgdmFyIGVycm9ycyA9IHJlZi5lcnJvcnM7CgogIGlmIChlcnJvcnMubGVuZ3RoKSB7CiAgICByZXR1cm4gewogICAgICBvbjogWydpbnB1dCddCiAgICB9OwogIH0KCiAgcmV0dXJuIHsKICAgIG9uOiBbJ2NoYW5nZScsICdibHVyJ10KICB9Owp9OwoKdmFyIHBhc3NpdmUgPSBmdW5jdGlvbiBwYXNzaXZlKCkgewogIHJldHVybiB7CiAgICBvbjogW10KICB9Owp9OwoKdmFyIG1vZGVzID0gewogIGFnZ3Jlc3NpdmU6IGFnZ3Jlc3NpdmUsCiAgZWFnZXI6IGVhZ2VyLAogIHBhc3NpdmU6IHBhc3NpdmUsCiAgbGF6eTogbGF6eQp9OyAvLyAKCnZhciBWdWU7CnZhciBwZW5kaW5nUGx1Z2luczsKdmFyIHBsdWdpbkluc3RhbmNlOwoKdmFyIFZlZVZhbGlkYXRlJDEgPSBmdW5jdGlvbiBWZWVWYWxpZGF0ZShjb25maWcsIF9WdWUpIHsKICB0aGlzLmNvbmZpZ3VyZShjb25maWcpOwogIHBsdWdpbkluc3RhbmNlID0gdGhpczsKCiAgaWYgKF9WdWUpIHsKICAgIFZ1ZSA9IF9WdWU7CiAgfQoKICB0aGlzLl92YWxpZGF0b3IgPSBzZXRWYWxpZGF0b3IobmV3IFZhbGlkYXRvcihudWxsLCB7CiAgICBmYXN0RXhpdDogY29uZmlnICYmIGNvbmZpZy5mYXN0RXhpdAogIH0sIHRoaXMpKTsKCiAgdGhpcy5faW5pdFZNKHRoaXMuY29uZmlnKTsKCiAgdGhpcy5faW5pdEkxOG4odGhpcy5jb25maWcpOwp9OwoKdmFyIHByb3RvdHlwZUFjY2Vzc29ycyQ2ID0gewogIGkxOG5Ecml2ZXI6IHsKICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZQogIH0sCiAgY29uZmlnOiB7CiAgICBjb25maWd1cmFibGU6IHRydWUKICB9Cn07CnZhciBzdGF0aWNBY2Nlc3NvcnMkMiA9IHsKICBpMThuRHJpdmVyOiB7CiAgICBjb25maWd1cmFibGU6IHRydWUKICB9LAogIGNvbmZpZzogewogICAgY29uZmlndXJhYmxlOiB0cnVlCiAgfQp9OwoKVmVlVmFsaWRhdGUkMS5zZXRJMThuRHJpdmVyID0gZnVuY3Rpb24gc2V0STE4bkRyaXZlcihkcml2ZXIsIGluc3RhbmNlKSB7CiAgRGljdGlvbmFyeVJlc29sdmVyLnNldERyaXZlcihkcml2ZXIsIGluc3RhbmNlKTsKfTsKClZlZVZhbGlkYXRlJDEuY29uZmlndXJlID0gZnVuY3Rpb24gY29uZmlndXJlKGNmZykgewogIHNldENvbmZpZyhjZmcpOwp9OwoKVmVlVmFsaWRhdGUkMS5zZXRNb2RlID0gZnVuY3Rpb24gc2V0TW9kZShtb2RlLCBpbXBsZW1lbnRhdGlvbikgewogIHNldENvbmZpZyh7CiAgICBtb2RlOiBtb2RlCiAgfSk7CgogIGlmICghaW1wbGVtZW50YXRpb24pIHsKICAgIHJldHVybjsKICB9CgogIGlmICghaXNDYWxsYWJsZShpbXBsZW1lbnRhdGlvbikpIHsKICAgIHRocm93IG5ldyBFcnJvcignQSBtb2RlIGltcGxlbWVudGF0aW9uIG11c3QgYmUgYSBmdW5jdGlvbicpOwogIH0KCiAgbW9kZXNbbW9kZV0gPSBpbXBsZW1lbnRhdGlvbjsKfTsKClZlZVZhbGlkYXRlJDEudXNlID0gZnVuY3Rpb24gdXNlKHBsdWdpbiwgb3B0aW9ucykgewogIGlmIChvcHRpb25zID09PSB2b2lkIDApIG9wdGlvbnMgPSB7fTsKCiAgaWYgKCFpc0NhbGxhYmxlKHBsdWdpbikpIHsKICAgIHJldHVybiB3YXJuKCdUaGUgcGx1Z2luIG11c3QgYmUgYSBjYWxsYWJsZSBmdW5jdGlvbicpOwogIH0gLy8gRG9uJ3QgaW5zdGFsbCBwbHVnaW5zIHVudGlsIHZlZS12YWxpZGF0ZSBpcyBpbnN0YWxsZWQuCgoKICBpZiAoIXBsdWdpbkluc3RhbmNlKSB7CiAgICBpZiAoIXBlbmRpbmdQbHVnaW5zKSB7CiAgICAgIHBlbmRpbmdQbHVnaW5zID0gW107CiAgICB9CgogICAgcGVuZGluZ1BsdWdpbnMucHVzaCh7CiAgICAgIHBsdWdpbjogcGx1Z2luLAogICAgICBvcHRpb25zOiBvcHRpb25zCiAgICB9KTsKICAgIHJldHVybjsKICB9CgogIHBsdWdpbih7CiAgICBWYWxpZGF0b3I6IFZhbGlkYXRvciwKICAgIEVycm9yQmFnOiBFcnJvckJhZywKICAgIFJ1bGVzOiBWYWxpZGF0b3IucnVsZXMKICB9LCBvcHRpb25zKTsKfTsKClZlZVZhbGlkYXRlJDEuaW5zdGFsbCA9IGZ1bmN0aW9uIGluc3RhbGwoX1Z1ZSwgb3B0cykgewogIGlmIChWdWUgJiYgX1Z1ZSA9PT0gVnVlKSB7CiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgewogICAgICB3YXJuKCdhbHJlYWR5IGluc3RhbGxlZCwgVnVlLnVzZShWZWVWYWxpZGF0ZSkgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIG9uY2UuJyk7CiAgICB9CgogICAgcmV0dXJuOwogIH0KCiAgVnVlID0gX1Z1ZTsKICBwbHVnaW5JbnN0YW5jZSA9IG5ldyBWZWVWYWxpZGF0ZSQxKG9wdHMpOyAvLyBpbmplY3QgdGhlIHBsdWdpbiBjb250YWluZXIgc3RhdGljYWxseSBpbnRvIHRoZSB2YWxpZGF0b3IgY2xhc3MKCiAgVmFsaWRhdG9yLiR2ZWUgPSBwbHVnaW5JbnN0YW5jZTsKICBkZXRlY3RQYXNzaXZlU3VwcG9ydCgpOwogIFZ1ZS5taXhpbihtaXhpbik7CiAgVnVlLmRpcmVjdGl2ZSgndmFsaWRhdGUnLCBkaXJlY3RpdmUpOwoKICBpZiAocGVuZGluZ1BsdWdpbnMpIHsKICAgIHBlbmRpbmdQbHVnaW5zLmZvckVhY2goZnVuY3Rpb24gKHJlZikgewogICAgICB2YXIgcGx1Z2luID0gcmVmLnBsdWdpbjsKICAgICAgdmFyIG9wdGlvbnMgPSByZWYub3B0aW9uczsKICAgICAgVmVlVmFsaWRhdGUkMS51c2UocGx1Z2luLCBvcHRpb25zKTsKICAgIH0pOwogICAgcGVuZGluZ1BsdWdpbnMgPSBudWxsOwogIH0KfTsKCnByb3RvdHlwZUFjY2Vzc29ycyQ2LmkxOG5Ecml2ZXIuZ2V0ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBEaWN0aW9uYXJ5UmVzb2x2ZXIuZ2V0RHJpdmVyKCk7Cn07CgpzdGF0aWNBY2Nlc3NvcnMkMi5pMThuRHJpdmVyLmdldCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gRGljdGlvbmFyeVJlc29sdmVyLmdldERyaXZlcigpOwp9OwoKcHJvdG90eXBlQWNjZXNzb3JzJDYuY29uZmlnLmdldCA9IGZ1bmN0aW9uICgpIHsKICByZXR1cm4gZ2V0Q29uZmlnKCk7Cn07CgpzdGF0aWNBY2Nlc3NvcnMkMi5jb25maWcuZ2V0ID0gZnVuY3Rpb24gKCkgewogIHJldHVybiBnZXRDb25maWcoKTsKfTsKClZlZVZhbGlkYXRlJDEucHJvdG90eXBlLl9pbml0Vk0gPSBmdW5jdGlvbiBfaW5pdFZNKGNvbmZpZykgewogIHZhciB0aGlzJDEgPSB0aGlzOwogIHRoaXMuX3ZtID0gbmV3IFZ1ZSh7CiAgICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgICByZXR1cm4gewogICAgICAgIGVycm9yczogdGhpcyQxLl92YWxpZGF0b3IuZXJyb3JzLAogICAgICAgIGZpZWxkczogdGhpcyQxLl92YWxpZGF0b3IuZmllbGRzCiAgICAgIH07CiAgICB9CiAgfSk7Cn07CgpWZWVWYWxpZGF0ZSQxLnByb3RvdHlwZS5faW5pdEkxOG4gPSBmdW5jdGlvbiBfaW5pdEkxOG4oY29uZmlnKSB7CiAgdmFyIHRoaXMkMSA9IHRoaXM7CiAgdmFyIGRpY3Rpb25hcnkgPSBjb25maWcuZGljdGlvbmFyeTsKICB2YXIgaTE4biA9IGNvbmZpZy5pMThuOwogIHZhciBpMThuUm9vdEtleSA9IGNvbmZpZy5pMThuUm9vdEtleTsKICB2YXIgbG9jYWxlID0gY29uZmlnLmxvY2FsZTsKCiAgdmFyIG9uTG9jYWxlQ2hhbmdlZCA9IGZ1bmN0aW9uIG9uTG9jYWxlQ2hhbmdlZCgpIHsKICAgIGlmIChkaWN0aW9uYXJ5KSB7CiAgICAgIHRoaXMkMS5pMThuRHJpdmVyLm1lcmdlKGRpY3Rpb25hcnkpOwogICAgfQoKICAgIHRoaXMkMS5fdmFsaWRhdG9yLmVycm9ycy5yZWdlbmVyYXRlKCk7CiAgfTsgLy8gaTE4IGlzIGJlaW5nIHVzZWQgZm9yIGxvY2FsaXphdGlvbi4KCgogIGlmIChpMThuKSB7CiAgICBWZWVWYWxpZGF0ZSQxLnNldEkxOG5Ecml2ZXIoJ2kxOG4nLCBuZXcgSTE4bkRpY3Rpb25hcnkoaTE4biwgaTE4blJvb3RLZXkpKTsKCiAgICBpMThuLl92bS4kd2F0Y2goJ2xvY2FsZScsIG9uTG9jYWxlQ2hhbmdlZCk7CiAgfSBlbHNlIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgewogICAgdGhpcy5fdm0uJG9uKCdsb2NhbGVDaGFuZ2VkJywgb25Mb2NhbGVDaGFuZ2VkKTsKICB9CgogIGlmIChkaWN0aW9uYXJ5KSB7CiAgICB0aGlzLmkxOG5Ecml2ZXIubWVyZ2UoZGljdGlvbmFyeSk7CiAgfQoKICBpZiAobG9jYWxlICYmICFpMThuKSB7CiAgICB0aGlzLl92YWxpZGF0b3IubG9jYWxpemUobG9jYWxlKTsKICB9Cn07CgpWZWVWYWxpZGF0ZSQxLnByb3RvdHlwZS5jb25maWd1cmUgPSBmdW5jdGlvbiBjb25maWd1cmUoY2ZnKSB7CiAgc2V0Q29uZmlnKGNmZyk7Cn07CgpPYmplY3QuZGVmaW5lUHJvcGVydGllcyhWZWVWYWxpZGF0ZSQxLnByb3RvdHlwZSwgcHJvdG90eXBlQWNjZXNzb3JzJDYpOwpPYmplY3QuZGVmaW5lUHJvcGVydGllcyhWZWVWYWxpZGF0ZSQxLCBzdGF0aWNBY2Nlc3NvcnMkMik7ClZlZVZhbGlkYXRlJDEubWl4aW4gPSBtaXhpbjsKVmVlVmFsaWRhdGUkMS5kaXJlY3RpdmUgPSBkaXJlY3RpdmU7ClZlZVZhbGlkYXRlJDEuVmFsaWRhdG9yID0gVmFsaWRhdG9yOwpWZWVWYWxpZGF0ZSQxLkVycm9yQmFnID0gRXJyb3JCYWc7Ci8qKgogKiBGb3JtYXRlcyBmaWxlIHNpemUuCiAqCiAqIEBwYXJhbSB7TnVtYmVyfFN0cmluZ30gc2l6ZQogKi8KCnZhciBmb3JtYXRGaWxlU2l6ZSA9IGZ1bmN0aW9uIGZvcm1hdEZpbGVTaXplKHNpemUpIHsKICB2YXIgdW5pdHMgPSBbJ0J5dGUnLCAnS0InLCAnTUInLCAnR0InLCAnVEInLCAnUEInLCAnRUInLCAnWkInLCAnWUInXTsKICB2YXIgdGhyZXNob2xkID0gMTAyNDsKICBzaXplID0gTnVtYmVyKHNpemUpICogdGhyZXNob2xkOwogIHZhciBpID0gc2l6ZSA9PT0gMCA/IDAgOiBNYXRoLmZsb29yKE1hdGgubG9nKHNpemUpIC8gTWF0aC5sb2codGhyZXNob2xkKSk7CiAgcmV0dXJuIChzaXplIC8gTWF0aC5wb3codGhyZXNob2xkLCBpKSkudG9GaXhlZCgyKSAqIDEgKyAiICIgKyB1bml0c1tpXTsKfTsKLyoqCiAqIENoZWNrcyBpZiB2ZWUtdmFsaWRhdGUgaXMgZGVmaW5lZCBnbG9iYWxseS4KICovCgoKdmFyIGlzRGVmaW5lZEdsb2JhbGx5ID0gZnVuY3Rpb24gaXNEZWZpbmVkR2xvYmFsbHkoKSB7CiAgcmV0dXJuIHR5cGVvZiBWZWVWYWxpZGF0ZSAhPT0gJ3VuZGVmaW5lZCc7Cn07Cgp2YXIgb2JqOwp2YXIgbWVzc2FnZXMgPSB7CiAgX2RlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KGZpZWxkKSB7CiAgICByZXR1cm4gIlRoZSAiICsgZmllbGQgKyAiIHZhbHVlIGlzIG5vdCB2YWxpZC4iOwogIH0sCiAgYWZ0ZXI6IGZ1bmN0aW9uIGFmdGVyKGZpZWxkLCByZWYpIHsKICAgIHZhciB0YXJnZXQgPSByZWZbMF07CiAgICB2YXIgaW5jbHVzaW9uID0gcmVmWzFdOwogICAgcmV0dXJuICJUaGUgIiArIGZpZWxkICsgIiBtdXN0IGJlIGFmdGVyICIgKyAoaW5jbHVzaW9uID8gJ29yIGVxdWFsIHRvICcgOiAnJykgKyB0YXJnZXQgKyAiLiI7CiAgfSwKICBhbHBoYTogZnVuY3Rpb24gYWxwaGEoZmllbGQpIHsKICAgIHJldHVybiAiVGhlICIgKyBmaWVsZCArICIgZmllbGQgbWF5IG9ubHkgY29udGFpbiBhbHBoYWJldGljIGNoYXJhY3RlcnMuIjsKICB9LAogIGFscGhhX2Rhc2g6IGZ1bmN0aW9uIGFscGhhX2Rhc2goZmllbGQpIHsKICAgIHJldHVybiAiVGhlICIgKyBmaWVsZCArICIgZmllbGQgbWF5IGNvbnRhaW4gYWxwaGEtbnVtZXJpYyBjaGFyYWN0ZXJzIGFzIHdlbGwgYXMgZGFzaGVzIGFuZCB1bmRlcnNjb3Jlcy4iOwogIH0sCiAgYWxwaGFfbnVtOiBmdW5jdGlvbiBhbHBoYV9udW0oZmllbGQpIHsKICAgIHJldHVybiAiVGhlICIgKyBmaWVsZCArICIgZmllbGQgbWF5IG9ubHkgY29udGFpbiBhbHBoYS1udW1lcmljIGNoYXJhY3RlcnMuIjsKICB9LAogIGFscGhhX3NwYWNlczogZnVuY3Rpb24gYWxwaGFfc3BhY2VzKGZpZWxkKSB7CiAgICByZXR1cm4gIlRoZSAiICsgZmllbGQgKyAiIGZpZWxkIG1heSBvbmx5IGNvbnRhaW4gYWxwaGFiZXRpYyBjaGFyYWN0ZXJzIGFzIHdlbGwgYXMgc3BhY2VzLiI7CiAgfSwKICBiZWZvcmU6IGZ1bmN0aW9uIGJlZm9yZShmaWVsZCwgcmVmKSB7CiAgICB2YXIgdGFyZ2V0ID0gcmVmWzBdOwogICAgdmFyIGluY2x1c2lvbiA9IHJlZlsxXTsKICAgIHJldHVybiAiVGhlICIgKyBmaWVsZCArICIgbXVzdCBiZSBiZWZvcmUgIiArIChpbmNsdXNpb24gPyAnb3IgZXF1YWwgdG8gJyA6ICcnKSArIHRhcmdldCArICIuIjsKICB9LAogIGJldHdlZW46IGZ1bmN0aW9uIGJldHdlZW4oZmllbGQsIHJlZikgewogICAgdmFyIG1pbiA9IHJlZlswXTsKICAgIHZhciBtYXggPSByZWZbMV07CiAgICByZXR1cm4gIlRoZSAiICsgZmllbGQgKyAiIGZpZWxkIG11c3QgYmUgYmV0d2VlbiAiICsgbWluICsgIiBhbmQgIiArIG1heCArICIuIjsKICB9LAogIGNvbmZpcm1lZDogZnVuY3Rpb24gY29uZmlybWVkKGZpZWxkKSB7CiAgICByZXR1cm4gIlRoZSAiICsgZmllbGQgKyAiIGNvbmZpcm1hdGlvbiBkb2VzIG5vdCBtYXRjaC4iOwogIH0sCiAgY3JlZGl0X2NhcmQ6IGZ1bmN0aW9uIGNyZWRpdF9jYXJkKGZpZWxkKSB7CiAgICByZXR1cm4gIlRoZSAiICsgZmllbGQgKyAiIGZpZWxkIGlzIGludmFsaWQuIjsKICB9LAogIGRhdGVfYmV0d2VlbjogZnVuY3Rpb24gZGF0ZV9iZXR3ZWVuKGZpZWxkLCByZWYpIHsKICAgIHZhciBtaW4gPSByZWZbMF07CiAgICB2YXIgbWF4ID0gcmVmWzFdOwogICAgcmV0dXJuICJUaGUgIiArIGZpZWxkICsgIiBtdXN0IGJlIGJldHdlZW4gIiArIG1pbiArICIgYW5kICIgKyBtYXggKyAiLiI7CiAgfSwKICBkYXRlX2Zvcm1hdDogZnVuY3Rpb24gZGF0ZV9mb3JtYXQoZmllbGQsIHJlZikgewogICAgdmFyIGZvcm1hdCA9IHJlZlswXTsKICAgIHJldHVybiAiVGhlICIgKyBmaWVsZCArICIgbXVzdCBiZSBpbiB0aGUgZm9ybWF0ICIgKyBmb3JtYXQgKyAiLiI7CiAgfSwKICBkZWNpbWFsOiBmdW5jdGlvbiBkZWNpbWFsKGZpZWxkLCByZWYpIHsKICAgIGlmIChyZWYgPT09IHZvaWQgMCkgcmVmID0gW107CiAgICB2YXIgZGVjaW1hbHMgPSByZWZbMF07CiAgICBpZiAoZGVjaW1hbHMgPT09IHZvaWQgMCkgZGVjaW1hbHMgPSAnKic7CiAgICByZXR1cm4gIlRoZSAiICsgZmllbGQgKyAiIGZpZWxkIG11c3QgYmUgbnVtZXJpYyBhbmQgbWF5IGNvbnRhaW4gIiArICghZGVjaW1hbHMgfHwgZGVjaW1hbHMgPT09ICcqJyA/ICcnIDogZGVjaW1hbHMpICsgIiBkZWNpbWFsIHBvaW50cy4iOwogIH0sCiAgZGlnaXRzOiBmdW5jdGlvbiBkaWdpdHMoZmllbGQsIHJlZikgewogICAgdmFyIGxlbmd0aCA9IHJlZlswXTsKICAgIHJldHVybiAiVGhlICIgKyBmaWVsZCArICIgZmllbGQgbXVzdCBiZSBudW1lcmljIGFuZCBleGFjdGx5IGNvbnRhaW4gIiArIGxlbmd0aCArICIgZGlnaXRzLiI7CiAgfSwKICBkaW1lbnNpb25zOiBmdW5jdGlvbiBkaW1lbnNpb25zKGZpZWxkLCByZWYpIHsKICAgIHZhciB3aWR0aCA9IHJlZlswXTsKICAgIHZhciBoZWlnaHQgPSByZWZbMV07CiAgICByZXR1cm4gIlRoZSAiICsgZmllbGQgKyAiIGZpZWxkIG11c3QgYmUgIiArIHdpZHRoICsgIiBwaXhlbHMgYnkgIiArIGhlaWdodCArICIgcGl4ZWxzLiI7CiAgfSwKICBlbWFpbDogZnVuY3Rpb24gZW1haWwoZmllbGQpIHsKICAgIHJldHVybiAiVGhlICIgKyBmaWVsZCArICIgZmllbGQgbXVzdCBiZSBhIHZhbGlkIGVtYWlsLiI7CiAgfSwKICBleGNsdWRlZDogZnVuY3Rpb24gZXhjbHVkZWQoZmllbGQpIHsKICAgIHJldHVybiAiVGhlICIgKyBmaWVsZCArICIgZmllbGQgbXVzdCBiZSBhIHZhbGlkIHZhbHVlLiI7CiAgfSwKICBleHQ6IGZ1bmN0aW9uIGV4dChmaWVsZCkgewogICAgcmV0dXJuICJUaGUgIiArIGZpZWxkICsgIiBmaWVsZCBtdXN0IGJlIGEgdmFsaWQgZmlsZS4iOwogIH0sCiAgaW1hZ2U6IGZ1bmN0aW9uIGltYWdlKGZpZWxkKSB7CiAgICByZXR1cm4gIlRoZSAiICsgZmllbGQgKyAiIGZpZWxkIG11c3QgYmUgYW4gaW1hZ2UuIjsKICB9LAogIGluY2x1ZGVkOiBmdW5jdGlvbiBpbmNsdWRlZChmaWVsZCkgewogICAgcmV0dXJuICJUaGUgIiArIGZpZWxkICsgIiBmaWVsZCBtdXN0IGJlIGEgdmFsaWQgdmFsdWUuIjsKICB9LAogIGludGVnZXI6IGZ1bmN0aW9uIGludGVnZXIoZmllbGQpIHsKICAgIHJldHVybiAiVGhlICIgKyBmaWVsZCArICIgZmllbGQgbXVzdCBiZSBhbiBpbnRlZ2VyLiI7CiAgfSwKICBpcDogZnVuY3Rpb24gaXAoZmllbGQpIHsKICAgIHJldHVybiAiVGhlICIgKyBmaWVsZCArICIgZmllbGQgbXVzdCBiZSBhIHZhbGlkIGlwIGFkZHJlc3MuIjsKICB9LAogIGlwX29yX2ZxZG46IGZ1bmN0aW9uIGlwX29yX2ZxZG4oZmllbGQpIHsKICAgIHJldHVybiAiVGhlICIgKyBmaWVsZCArICIgZmllbGQgbXVzdCBiZSBhIHZhbGlkIGlwIGFkZHJlc3Mgb3IgRlFETi4iOwogIH0sCiAgbGVuZ3RoOiBmdW5jdGlvbiBsZW5ndGgoZmllbGQsIHJlZikgewogICAgdmFyIGxlbmd0aCA9IHJlZlswXTsKICAgIHZhciBtYXggPSByZWZbMV07CgogICAgaWYgKG1heCkgewogICAgICByZXR1cm4gIlRoZSAiICsgZmllbGQgKyAiIGxlbmd0aCBtdXN0IGJlIGJldHdlZW4gIiArIGxlbmd0aCArICIgYW5kICIgKyBtYXggKyAiLiI7CiAgICB9CgogICAgcmV0dXJuICJUaGUgIiArIGZpZWxkICsgIiBsZW5ndGggbXVzdCBiZSAiICsgbGVuZ3RoICsgIi4iOwogIH0sCiAgbWF4OiBmdW5jdGlvbiBtYXgoZmllbGQsIHJlZikgewogICAgdmFyIGxlbmd0aCA9IHJlZlswXTsKICAgIHJldHVybiAiVGhlICIgKyBmaWVsZCArICIgZmllbGQgbWF5IG5vdCBiZSBncmVhdGVyIHRoYW4gIiArIGxlbmd0aCArICIgY2hhcmFjdGVycy4iOwogIH0sCiAgbWF4X3ZhbHVlOiBmdW5jdGlvbiBtYXhfdmFsdWUoZmllbGQsIHJlZikgewogICAgdmFyIG1heCA9IHJlZlswXTsKICAgIHJldHVybiAiVGhlICIgKyBmaWVsZCArICIgZmllbGQgbXVzdCBiZSAiICsgbWF4ICsgIiBvciBsZXNzLiI7CiAgfSwKICBtaW1lczogZnVuY3Rpb24gbWltZXMoZmllbGQpIHsKICAgIHJldHVybiAiVGhlICIgKyBmaWVsZCArICIgZmllbGQgbXVzdCBoYXZlIGEgdmFsaWQgZmlsZSB0eXBlLiI7CiAgfSwKICBtaW46IGZ1bmN0aW9uIG1pbihmaWVsZCwgcmVmKSB7CiAgICB2YXIgbGVuZ3RoID0gcmVmWzBdOwogICAgcmV0dXJuICJUaGUgIiArIGZpZWxkICsgIiBmaWVsZCBtdXN0IGJlIGF0IGxlYXN0ICIgKyBsZW5ndGggKyAiIGNoYXJhY3RlcnMuIjsKICB9LAogIG1pbl92YWx1ZTogZnVuY3Rpb24gbWluX3ZhbHVlKGZpZWxkLCByZWYpIHsKICAgIHZhciBtaW4gPSByZWZbMF07CiAgICByZXR1cm4gIlRoZSAiICsgZmllbGQgKyAiIGZpZWxkIG11c3QgYmUgIiArIG1pbiArICIgb3IgbW9yZS4iOwogIH0sCiAgbnVtZXJpYzogZnVuY3Rpb24gbnVtZXJpYyhmaWVsZCkgewogICAgcmV0dXJuICJUaGUgIiArIGZpZWxkICsgIiBmaWVsZCBtYXkgb25seSBjb250YWluIG51bWVyaWMgY2hhcmFjdGVycy4iOwogIH0sCiAgcmVnZXg6IGZ1bmN0aW9uIHJlZ2V4KGZpZWxkKSB7CiAgICByZXR1cm4gIlRoZSAiICsgZmllbGQgKyAiIGZpZWxkIGZvcm1hdCBpcyBpbnZhbGlkLiI7CiAgfSwKICByZXF1aXJlZDogZnVuY3Rpb24gcmVxdWlyZWQoZmllbGQpIHsKICAgIHJldHVybiAiVGhlICIgKyBmaWVsZCArICIgZmllbGQgaXMgcmVxdWlyZWQuIjsKICB9LAogIHJlcXVpcmVkX2lmOiBmdW5jdGlvbiByZXF1aXJlZF9pZihmaWVsZCwgcmVmKSB7CiAgICB2YXIgdGFyZ2V0ID0gcmVmWzBdOwogICAgcmV0dXJuICJUaGUgIiArIGZpZWxkICsgIiBmaWVsZCBpcyByZXF1aXJlZCB3aGVuIHRoZSAiICsgdGFyZ2V0ICsgIiBmaWVsZCBoYXMgdGhpcyB2YWx1ZS4iOwogIH0sCiAgc2l6ZTogZnVuY3Rpb24gc2l6ZShmaWVsZCwgcmVmKSB7CiAgICB2YXIgc2l6ZSA9IHJlZlswXTsKICAgIHJldHVybiAiVGhlICIgKyBmaWVsZCArICIgc2l6ZSBtdXN0IGJlIGxlc3MgdGhhbiAiICsgZm9ybWF0RmlsZVNpemUoc2l6ZSkgKyAiLiI7CiAgfSwKICB1cmw6IGZ1bmN0aW9uIHVybChmaWVsZCkgewogICAgcmV0dXJuICJUaGUgIiArIGZpZWxkICsgIiBmaWVsZCBpcyBub3QgYSB2YWxpZCBVUkwuIjsKICB9Cn07CnZhciBsb2NhbGUgPSB7CiAgbmFtZTogJ2VuJywKICBtZXNzYWdlczogbWVzc2FnZXMsCiAgYXR0cmlidXRlczoge30KfTsKCmlmIChpc0RlZmluZWRHbG9iYWxseSgpKSB7CiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lCiAgVmVlVmFsaWRhdGUuVmFsaWRhdG9yLmxvY2FsaXplKChvYmogPSB7fSwgb2JqW2xvY2FsZS5uYW1lXSA9IGxvY2FsZSwgb2JqKSk7Cn0KCmZ1bmN0aW9uIHRvSW50ZWdlcihkaXJ0eU51bWJlcikgewogIGlmIChkaXJ0eU51bWJlciA9PT0gbnVsbCB8fCBkaXJ0eU51bWJlciA9PT0gdHJ1ZSB8fCBkaXJ0eU51bWJlciA9PT0gZmFsc2UpIHsKICAgIHJldHVybiBOYU47CiAgfQoKICB2YXIgbnVtYmVyID0gTnVtYmVyKGRpcnR5TnVtYmVyKTsKCiAgaWYgKGlzTmFOKG51bWJlcikpIHsKICAgIHJldHVybiBudW1iZXI7CiAgfQoKICByZXR1cm4gbnVtYmVyIDwgMCA/IE1hdGguY2VpbChudW1iZXIpIDogTWF0aC5mbG9vcihudW1iZXIpOwp9Cgp2YXIgTUlMTElTRUNPTkRTX0lOX01JTlVURSA9IDYwMDAwOwovKioKICogR29vZ2xlIENocm9tZSBhcyBvZiA2Ny4wLjMzOTYuODcgaW50cm9kdWNlZCB0aW1lem9uZXMgd2l0aCBvZmZzZXQgdGhhdCBpbmNsdWRlcyBzZWNvbmRzLgogKiBUaGV5IHVzdWFsbHkgYXBwZWFyIGZvciBkYXRlcyB0aGF0IGRlbm90ZSB0aW1lIGJlZm9yZSB0aGUgdGltZXpvbmVzIHdlcmUgaW50cm9kdWNlZAogKiAoZS5nLiBmb3IgJ0V1cm9wZS9QcmFndWUnIHRpbWV6b25lIHRoZSBvZmZzZXQgaXMgR01UKzAwOjU3OjQ0IGJlZm9yZSAxIE9jdG9iZXIgMTg5MQogKiBhbmQgR01UKzAxOjAwOjAwIGFmdGVyIHRoYXQgZGF0ZSkKICoKICogRGF0ZSNnZXRUaW1lem9uZU9mZnNldCByZXR1cm5zIHRoZSBvZmZzZXQgaW4gbWludXRlcyBhbmQgd291bGQgcmV0dXJuIDU3IGZvciB0aGUgZXhhbXBsZSBhYm92ZSwKICogd2hpY2ggd291bGQgbGVhZCB0byBpbmNvcnJlY3QgY2FsY3VsYXRpb25zLgogKgogKiBUaGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIHRpbWV6b25lIG9mZnNldCBpbiBtaWxsaXNlY29uZHMgdGhhdCB0YWtlcyBzZWNvbmRzIGluIGFjY291bnQuCiAqLwoKZnVuY3Rpb24gZ2V0VGltZXpvbmVPZmZzZXRJbk1pbGxpc2Vjb25kcyhkaXJ0eURhdGUpIHsKICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGRpcnR5RGF0ZS5nZXRUaW1lKCkpOwogIHZhciBiYXNlVGltZXpvbmVPZmZzZXQgPSBkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCk7CiAgZGF0ZS5zZXRTZWNvbmRzKDAsIDApOwogIHZhciBtaWxsaXNlY29uZHNQYXJ0T2ZUaW1lem9uZU9mZnNldCA9IGRhdGUuZ2V0VGltZSgpICUgTUlMTElTRUNPTkRTX0lOX01JTlVURTsKICByZXR1cm4gYmFzZVRpbWV6b25lT2Zmc2V0ICogTUlMTElTRUNPTkRTX0lOX01JTlVURSArIG1pbGxpc2Vjb25kc1BhcnRPZlRpbWV6b25lT2Zmc2V0Owp9Cgp2YXIgTUlMTElTRUNPTkRTX0lOX0hPVVIgPSAzNjAwMDAwOwp2YXIgTUlMTElTRUNPTkRTX0lOX01JTlVURSQxID0gNjAwMDA7CnZhciBERUZBVUxUX0FERElUSU9OQUxfRElHSVRTID0gMjsKdmFyIHBhdHRlcm5zID0gewogIGRhdGVUaW1lRGVsaW1ldGVyOiAvW1QgXS8sCiAgcGxhaW5UaW1lOiAvOi8sCiAgdGltZVpvbmVEZWxpbWV0ZXI6IC9bWiBdL2ksCiAgLy8geWVhciB0b2tlbnMKICBZWTogL14oXGR7Mn0pJC8sCiAgWVlZOiBbL14oWystXVxkezJ9KSQvLCAvLyAwIGFkZGl0aW9uYWwgZGlnaXRzCiAgL14oWystXVxkezN9KSQvLCAvLyAxIGFkZGl0aW9uYWwgZGlnaXQKICAvXihbKy1dXGR7NH0pJC8gLy8gMiBhZGRpdGlvbmFsIGRpZ2l0cwogIF0sCiAgWVlZWTogL14oXGR7NH0pLywKICBZWVlZWTogWy9eKFsrLV1cZHs0fSkvLCAvLyAwIGFkZGl0aW9uYWwgZGlnaXRzCiAgL14oWystXVxkezV9KS8sIC8vIDEgYWRkaXRpb25hbCBkaWdpdAogIC9eKFsrLV1cZHs2fSkvIC8vIDIgYWRkaXRpb25hbCBkaWdpdHMKICBdLAogIC8vIGRhdGUgdG9rZW5zCiAgTU06IC9eLShcZHsyfSkkLywKICBEREQ6IC9eLT8oXGR7M30pJC8sCiAgTU1ERDogL14tPyhcZHsyfSktPyhcZHsyfSkkLywKICBXd3c6IC9eLT9XKFxkezJ9KSQvLAogIFd3d0Q6IC9eLT9XKFxkezJ9KS0/KFxkezF9KSQvLAogIEhIOiAvXihcZHsyfShbLixdXGQqKT8pJC8sCiAgSEhNTTogL14oXGR7Mn0pOj8oXGR7Mn0oWy4sXVxkKik/KSQvLAogIEhITU1TUzogL14oXGR7Mn0pOj8oXGR7Mn0pOj8oXGR7Mn0oWy4sXVxkKik/KSQvLAogIC8vIHRpbWV6b25lIHRva2VucwogIHRpbWV6b25lOiAvKFtaKy1dLiopJC8sCiAgdGltZXpvbmVaOiAvXihaKSQvLAogIHRpbWV6b25lSEg6IC9eKFsrLV0pKFxkezJ9KSQvLAogIHRpbWV6b25lSEhNTTogL14oWystXSkoXGR7Mn0pOj8oXGR7Mn0pJC8KfTsKLyoqCiAqIEBuYW1lIHRvRGF0ZQogKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnMKICogQHN1bW1hcnkgQ29udmVydCB0aGUgZ2l2ZW4gYXJndW1lbnQgdG8gYW4gaW5zdGFuY2Ugb2YgRGF0ZS4KICoKICogQGRlc2NyaXB0aW9uCiAqIENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuCiAqCiAqIElmIHRoZSBhcmd1bWVudCBpcyBhbiBpbnN0YW5jZSBvZiBEYXRlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBpdHMgY2xvbmUuCiAqCiAqIElmIHRoZSBhcmd1bWVudCBpcyBhIG51bWJlciwgaXQgaXMgdHJlYXRlZCBhcyBhIHRpbWVzdGFtcC4KICoKICogSWYgYW4gYXJndW1lbnQgaXMgYSBzdHJpbmcsIHRoZSBmdW5jdGlvbiB0cmllcyB0byBwYXJzZSBpdC4KICogRnVuY3Rpb24gYWNjZXB0cyBjb21wbGV0ZSBJU08gODYwMSBmb3JtYXRzIGFzIHdlbGwgYXMgcGFydGlhbCBpbXBsZW1lbnRhdGlvbnMuCiAqIElTTyA4NjAxOiBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lTT184NjAxCiAqIElmIHRoZSBmdW5jdGlvbiBjYW5ub3QgcGFyc2UgdGhlIHN0cmluZyBvciB0aGUgdmFsdWVzIGFyZSBpbnZhbGlkLCBpdCByZXR1cm5zIEludmFsaWQgRGF0ZS4KICoKICogSWYgdGhlIGFyZ3VtZW50IGlzIG5vbmUgb2YgdGhlIGFib3ZlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBJbnZhbGlkIERhdGUuCiAqCiAqICoqTm90ZSoqOiAqYWxsKiBEYXRlIGFyZ3VtZW50cyBwYXNzZWQgdG8gYW55ICpkYXRlLWZucyogZnVuY3Rpb24gaXMgcHJvY2Vzc2VkIGJ5IGB0b0RhdGVgLgogKiBBbGwgKmRhdGUtZm5zKiBmdW5jdGlvbnMgd2lsbCB0aHJvdyBgUmFuZ2VFcnJvcmAgaWYgYG9wdGlvbnMuYWRkaXRpb25hbERpZ2l0c2AgaXMgbm90IDAsIDEsIDIgb3IgdW5kZWZpbmVkLgogKgogKiBAcGFyYW0ge0RhdGV8U3RyaW5nfE51bWJlcn0gYXJndW1lbnQgLSB0aGUgdmFsdWUgdG8gY29udmVydAogKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRpb25zXSAtIHRoZSBvYmplY3Qgd2l0aCBvcHRpb25zLiBTZWUgW09wdGlvbnNde0BsaW5rIGh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3MvT3B0aW9uc30KICogQHBhcmFtIHswfDF8Mn0gW29wdGlvbnMuYWRkaXRpb25hbERpZ2l0cz0yXSAtIHRoZSBhZGRpdGlvbmFsIG51bWJlciBvZiBkaWdpdHMgaW4gdGhlIGV4dGVuZGVkIHllYXIgZm9ybWF0CiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgcGFyc2VkIGRhdGUgaW4gdGhlIGxvY2FsIHRpbWUgem9uZQogKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWQKICogQHRocm93cyB7UmFuZ2VFcnJvcn0gYG9wdGlvbnMuYWRkaXRpb25hbERpZ2l0c2AgbXVzdCBiZSAwLCAxIG9yIDIKICoKICogQGV4YW1wbGUKICogLy8gQ29udmVydCBzdHJpbmcgJzIwMTQtMDItMTFUMTE6MzA6MzAnIHRvIGRhdGU6CiAqIHZhciByZXN1bHQgPSB0b0RhdGUoJzIwMTQtMDItMTFUMTE6MzA6MzAnKQogKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMAogKgogKiBAZXhhbXBsZQogKiAvLyBDb252ZXJ0IHN0cmluZyAnKzAyMDE0MTAxJyB0byBkYXRlLAogKiAvLyBpZiB0aGUgYWRkaXRpb25hbCBudW1iZXIgb2YgZGlnaXRzIGluIHRoZSBleHRlbmRlZCB5ZWFyIGZvcm1hdCBpcyAxOgogKiB2YXIgcmVzdWx0ID0gdG9EYXRlKCcrMDIwMTQxMDEnLCB7YWRkaXRpb25hbERpZ2l0czogMX0pCiAqIC8vPT4gRnJpIEFwciAxMSAyMDE0IDAwOjAwOjAwCiAqLwoKZnVuY3Rpb24gdG9EYXRlKGFyZ3VtZW50LCBkaXJ0eU9wdGlvbnMpIHsKICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDEpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJzEgYXJndW1lbnQgcmVxdWlyZWQsIGJ1dCBvbmx5ICcgKyBhcmd1bWVudHMubGVuZ3RoICsgJyBwcmVzZW50Jyk7CiAgfQoKICBpZiAoYXJndW1lbnQgPT09IG51bGwpIHsKICAgIHJldHVybiBuZXcgRGF0ZShOYU4pOwogIH0KCiAgdmFyIG9wdGlvbnMgPSBkaXJ0eU9wdGlvbnMgfHwge307CiAgdmFyIGFkZGl0aW9uYWxEaWdpdHMgPSBvcHRpb25zLmFkZGl0aW9uYWxEaWdpdHMgPT0gbnVsbCA/IERFRkFVTFRfQURESVRJT05BTF9ESUdJVFMgOiB0b0ludGVnZXIob3B0aW9ucy5hZGRpdGlvbmFsRGlnaXRzKTsKCiAgaWYgKGFkZGl0aW9uYWxEaWdpdHMgIT09IDIgJiYgYWRkaXRpb25hbERpZ2l0cyAhPT0gMSAmJiBhZGRpdGlvbmFsRGlnaXRzICE9PSAwKSB7CiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignYWRkaXRpb25hbERpZ2l0cyBtdXN0IGJlIDAsIDEgb3IgMicpOwogIH0gLy8gQ2xvbmUgdGhlIGRhdGUKCgogIGlmIChhcmd1bWVudCBpbnN0YW5jZW9mIERhdGUgfHwgX3R5cGVvZjIoYXJndW1lbnQpID09PSAnb2JqZWN0JyAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJndW1lbnQpID09PSAnW29iamVjdCBEYXRlXScpIHsKICAgIC8vIFByZXZlbnQgdGhlIGRhdGUgdG8gbG9zZSB0aGUgbWlsbGlzZWNvbmRzIHdoZW4gcGFzc2VkIHRvIG5ldyBEYXRlKCkgaW4gSUUxMAogICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50LmdldFRpbWUoKSk7CiAgfSBlbHNlIGlmICh0eXBlb2YgYXJndW1lbnQgPT09ICdudW1iZXInIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmd1bWVudCkgPT09ICdbb2JqZWN0IE51bWJlcl0nKSB7CiAgICByZXR1cm4gbmV3IERhdGUoYXJndW1lbnQpOwogIH0gZWxzZSBpZiAoISh0eXBlb2YgYXJndW1lbnQgPT09ICdzdHJpbmcnIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmd1bWVudCkgPT09ICdbb2JqZWN0IFN0cmluZ10nKSkgewogICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7CiAgfQoKICB2YXIgZGF0ZVN0cmluZ3MgPSBzcGxpdERhdGVTdHJpbmcoYXJndW1lbnQpOwogIHZhciBwYXJzZVllYXJSZXN1bHQgPSBwYXJzZVllYXIoZGF0ZVN0cmluZ3MuZGF0ZSwgYWRkaXRpb25hbERpZ2l0cyk7CiAgdmFyIHllYXIgPSBwYXJzZVllYXJSZXN1bHQueWVhcjsKICB2YXIgcmVzdERhdGVTdHJpbmcgPSBwYXJzZVllYXJSZXN1bHQucmVzdERhdGVTdHJpbmc7CiAgdmFyIGRhdGUgPSBwYXJzZURhdGUocmVzdERhdGVTdHJpbmcsIHllYXIpOwoKICBpZiAoaXNOYU4oZGF0ZSkpIHsKICAgIHJldHVybiBuZXcgRGF0ZShOYU4pOwogIH0KCiAgaWYgKGRhdGUpIHsKICAgIHZhciB0aW1lc3RhbXAgPSBkYXRlLmdldFRpbWUoKTsKICAgIHZhciB0aW1lID0gMDsKICAgIHZhciBvZmZzZXQ7CgogICAgaWYgKGRhdGVTdHJpbmdzLnRpbWUpIHsKICAgICAgdGltZSA9IHBhcnNlVGltZShkYXRlU3RyaW5ncy50aW1lKTsKCiAgICAgIGlmIChpc05hTih0aW1lKSkgewogICAgICAgIHJldHVybiBuZXcgRGF0ZShOYU4pOwogICAgICB9CiAgICB9CgogICAgaWYgKGRhdGVTdHJpbmdzLnRpbWV6b25lKSB7CiAgICAgIG9mZnNldCA9IHBhcnNlVGltZXpvbmUoZGF0ZVN0cmluZ3MudGltZXpvbmUpOwoKICAgICAgaWYgKGlzTmFOKG9mZnNldCkpIHsKICAgICAgICByZXR1cm4gbmV3IERhdGUoTmFOKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgLy8gZ2V0IG9mZnNldCBhY2N1cmF0ZSB0byBob3VyIGluIHRpbWV6b25lcyB0aGF0IGNoYW5nZSBvZmZzZXQKICAgICAgb2Zmc2V0ID0gZ2V0VGltZXpvbmVPZmZzZXRJbk1pbGxpc2Vjb25kcyhuZXcgRGF0ZSh0aW1lc3RhbXAgKyB0aW1lKSk7CiAgICAgIG9mZnNldCA9IGdldFRpbWV6b25lT2Zmc2V0SW5NaWxsaXNlY29uZHMobmV3IERhdGUodGltZXN0YW1wICsgdGltZSArIG9mZnNldCkpOwogICAgfQoKICAgIHJldHVybiBuZXcgRGF0ZSh0aW1lc3RhbXAgKyB0aW1lICsgb2Zmc2V0KTsKICB9IGVsc2UgewogICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7CiAgfQp9CgpmdW5jdGlvbiBzcGxpdERhdGVTdHJpbmcoZGF0ZVN0cmluZykgewogIHZhciBkYXRlU3RyaW5ncyA9IHt9OwogIHZhciBhcnJheSA9IGRhdGVTdHJpbmcuc3BsaXQocGF0dGVybnMuZGF0ZVRpbWVEZWxpbWV0ZXIpOwogIHZhciB0aW1lU3RyaW5nOwoKICBpZiAocGF0dGVybnMucGxhaW5UaW1lLnRlc3QoYXJyYXlbMF0pKSB7CiAgICBkYXRlU3RyaW5ncy5kYXRlID0gbnVsbDsKICAgIHRpbWVTdHJpbmcgPSBhcnJheVswXTsKICB9IGVsc2UgewogICAgZGF0ZVN0cmluZ3MuZGF0ZSA9IGFycmF5WzBdOwogICAgdGltZVN0cmluZyA9IGFycmF5WzFdOwoKICAgIGlmIChwYXR0ZXJucy50aW1lWm9uZURlbGltZXRlci50ZXN0KGRhdGVTdHJpbmdzLmRhdGUpKSB7CiAgICAgIGRhdGVTdHJpbmdzLmRhdGUgPSBkYXRlU3RyaW5nLnNwbGl0KHBhdHRlcm5zLnRpbWVab25lRGVsaW1ldGVyKVswXTsKICAgICAgdGltZVN0cmluZyA9IGRhdGVTdHJpbmcuc3Vic3RyKGRhdGVTdHJpbmdzLmRhdGUubGVuZ3RoLCBkYXRlU3RyaW5nLmxlbmd0aCk7CiAgICB9CiAgfQoKICBpZiAodGltZVN0cmluZykgewogICAgdmFyIHRva2VuID0gcGF0dGVybnMudGltZXpvbmUuZXhlYyh0aW1lU3RyaW5nKTsKCiAgICBpZiAodG9rZW4pIHsKICAgICAgZGF0ZVN0cmluZ3MudGltZSA9IHRpbWVTdHJpbmcucmVwbGFjZSh0b2tlblsxXSwgJycpOwogICAgICBkYXRlU3RyaW5ncy50aW1lem9uZSA9IHRva2VuWzFdOwogICAgfSBlbHNlIHsKICAgICAgZGF0ZVN0cmluZ3MudGltZSA9IHRpbWVTdHJpbmc7CiAgICB9CiAgfQoKICByZXR1cm4gZGF0ZVN0cmluZ3M7Cn0KCmZ1bmN0aW9uIHBhcnNlWWVhcihkYXRlU3RyaW5nLCBhZGRpdGlvbmFsRGlnaXRzKSB7CiAgdmFyIHBhdHRlcm5ZWVkgPSBwYXR0ZXJucy5ZWVlbYWRkaXRpb25hbERpZ2l0c107CiAgdmFyIHBhdHRlcm5ZWVlZWSA9IHBhdHRlcm5zLllZWVlZW2FkZGl0aW9uYWxEaWdpdHNdOwogIHZhciB0b2tlbjsgLy8gWVlZWSBvciDCsVlZWVlZCgogIHRva2VuID0gcGF0dGVybnMuWVlZWS5leGVjKGRhdGVTdHJpbmcpIHx8IHBhdHRlcm5ZWVlZWS5leGVjKGRhdGVTdHJpbmcpOwoKICBpZiAodG9rZW4pIHsKICAgIHZhciB5ZWFyU3RyaW5nID0gdG9rZW5bMV07CiAgICByZXR1cm4gewogICAgICB5ZWFyOiBwYXJzZUludCh5ZWFyU3RyaW5nLCAxMCksCiAgICAgIHJlc3REYXRlU3RyaW5nOiBkYXRlU3RyaW5nLnNsaWNlKHllYXJTdHJpbmcubGVuZ3RoKQogICAgfTsKICB9IC8vIFlZIG9yIMKxWVlZCgoKICB0b2tlbiA9IHBhdHRlcm5zLllZLmV4ZWMoZGF0ZVN0cmluZykgfHwgcGF0dGVybllZWS5leGVjKGRhdGVTdHJpbmcpOwoKICBpZiAodG9rZW4pIHsKICAgIHZhciBjZW50dXJ5U3RyaW5nID0gdG9rZW5bMV07CiAgICByZXR1cm4gewogICAgICB5ZWFyOiBwYXJzZUludChjZW50dXJ5U3RyaW5nLCAxMCkgKiAxMDAsCiAgICAgIHJlc3REYXRlU3RyaW5nOiBkYXRlU3RyaW5nLnNsaWNlKGNlbnR1cnlTdHJpbmcubGVuZ3RoKQogICAgfTsKICB9IC8vIEludmFsaWQgSVNPLWZvcm1hdHRlZCB5ZWFyCgoKICByZXR1cm4gewogICAgeWVhcjogbnVsbAogIH07Cn0KCmZ1bmN0aW9uIHBhcnNlRGF0ZShkYXRlU3RyaW5nLCB5ZWFyKSB7CiAgLy8gSW52YWxpZCBJU08tZm9ybWF0dGVkIHllYXIKICBpZiAoeWVhciA9PT0gbnVsbCkgewogICAgcmV0dXJuIG51bGw7CiAgfQoKICB2YXIgdG9rZW47CiAgdmFyIGRhdGU7CiAgdmFyIG1vbnRoOwogIHZhciB3ZWVrOyAvLyBZWVlZCgogIGlmIChkYXRlU3RyaW5nLmxlbmd0aCA9PT0gMCkgewogICAgZGF0ZSA9IG5ldyBEYXRlKDApOwogICAgZGF0ZS5zZXRVVENGdWxsWWVhcih5ZWFyKTsKICAgIHJldHVybiBkYXRlOwogIH0gLy8gWVlZWS1NTQoKCiAgdG9rZW4gPSBwYXR0ZXJucy5NTS5leGVjKGRhdGVTdHJpbmcpOwoKICBpZiAodG9rZW4pIHsKICAgIGRhdGUgPSBuZXcgRGF0ZSgwKTsKICAgIG1vbnRoID0gcGFyc2VJbnQodG9rZW5bMV0sIDEwKSAtIDE7CgogICAgaWYgKCF2YWxpZGF0ZURhdGUoeWVhciwgbW9udGgpKSB7CiAgICAgIHJldHVybiBuZXcgRGF0ZShOYU4pOwogICAgfQoKICAgIGRhdGUuc2V0VVRDRnVsbFllYXIoeWVhciwgbW9udGgpOwogICAgcmV0dXJuIGRhdGU7CiAgfSAvLyBZWVlZLURERCBvciBZWVlZRERECgoKICB0b2tlbiA9IHBhdHRlcm5zLkRERC5leGVjKGRhdGVTdHJpbmcpOwoKICBpZiAodG9rZW4pIHsKICAgIGRhdGUgPSBuZXcgRGF0ZSgwKTsKICAgIHZhciBkYXlPZlllYXIgPSBwYXJzZUludCh0b2tlblsxXSwgMTApOwoKICAgIGlmICghdmFsaWRhdGVEYXlPZlllYXJEYXRlKHllYXIsIGRheU9mWWVhcikpIHsKICAgICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7CiAgICB9CgogICAgZGF0ZS5zZXRVVENGdWxsWWVhcih5ZWFyLCAwLCBkYXlPZlllYXIpOwogICAgcmV0dXJuIGRhdGU7CiAgfSAvLyBZWVlZLU1NLUREIG9yIFlZWVlNTURECgoKICB0b2tlbiA9IHBhdHRlcm5zLk1NREQuZXhlYyhkYXRlU3RyaW5nKTsKCiAgaWYgKHRva2VuKSB7CiAgICBkYXRlID0gbmV3IERhdGUoMCk7CiAgICBtb250aCA9IHBhcnNlSW50KHRva2VuWzFdLCAxMCkgLSAxOwogICAgdmFyIGRheSA9IHBhcnNlSW50KHRva2VuWzJdLCAxMCk7CgogICAgaWYgKCF2YWxpZGF0ZURhdGUoeWVhciwgbW9udGgsIGRheSkpIHsKICAgICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7CiAgICB9CgogICAgZGF0ZS5zZXRVVENGdWxsWWVhcih5ZWFyLCBtb250aCwgZGF5KTsKICAgIHJldHVybiBkYXRlOwogIH0gLy8gWVlZWS1Xd3cgb3IgWVlZWVd3dwoKCiAgdG9rZW4gPSBwYXR0ZXJucy5Xd3cuZXhlYyhkYXRlU3RyaW5nKTsKCiAgaWYgKHRva2VuKSB7CiAgICB3ZWVrID0gcGFyc2VJbnQodG9rZW5bMV0sIDEwKSAtIDE7CgogICAgaWYgKCF2YWxpZGF0ZVdlZWtEYXRlKHllYXIsIHdlZWspKSB7CiAgICAgIHJldHVybiBuZXcgRGF0ZShOYU4pOwogICAgfQoKICAgIHJldHVybiBkYXlPZklTT1dlZWtZZWFyKHllYXIsIHdlZWspOwogIH0gLy8gWVlZWS1Xd3ctRCBvciBZWVlZV3d3RAoKCiAgdG9rZW4gPSBwYXR0ZXJucy5Xd3dELmV4ZWMoZGF0ZVN0cmluZyk7CgogIGlmICh0b2tlbikgewogICAgd2VlayA9IHBhcnNlSW50KHRva2VuWzFdLCAxMCkgLSAxOwogICAgdmFyIGRheU9mV2VlayA9IHBhcnNlSW50KHRva2VuWzJdLCAxMCkgLSAxOwoKICAgIGlmICghdmFsaWRhdGVXZWVrRGF0ZSh5ZWFyLCB3ZWVrLCBkYXlPZldlZWspKSB7CiAgICAgIHJldHVybiBuZXcgRGF0ZShOYU4pOwogICAgfQoKICAgIHJldHVybiBkYXlPZklTT1dlZWtZZWFyKHllYXIsIHdlZWssIGRheU9mV2Vlayk7CiAgfSAvLyBJbnZhbGlkIElTTy1mb3JtYXR0ZWQgZGF0ZQoKCiAgcmV0dXJuIG51bGw7Cn0KCmZ1bmN0aW9uIHBhcnNlVGltZSh0aW1lU3RyaW5nKSB7CiAgdmFyIHRva2VuOwogIHZhciBob3VyczsKICB2YXIgbWludXRlczsgLy8gaGgKCiAgdG9rZW4gPSBwYXR0ZXJucy5ISC5leGVjKHRpbWVTdHJpbmcpOwoKICBpZiAodG9rZW4pIHsKICAgIGhvdXJzID0gcGFyc2VGbG9hdCh0b2tlblsxXS5yZXBsYWNlKCcsJywgJy4nKSk7CgogICAgaWYgKCF2YWxpZGF0ZVRpbWUoaG91cnMpKSB7CiAgICAgIHJldHVybiBOYU47CiAgICB9CgogICAgcmV0dXJuIGhvdXJzICUgMjQgKiBNSUxMSVNFQ09ORFNfSU5fSE9VUjsKICB9IC8vIGhoOm1tIG9yIGhobW0KCgogIHRva2VuID0gcGF0dGVybnMuSEhNTS5leGVjKHRpbWVTdHJpbmcpOwoKICBpZiAodG9rZW4pIHsKICAgIGhvdXJzID0gcGFyc2VJbnQodG9rZW5bMV0sIDEwKTsKICAgIG1pbnV0ZXMgPSBwYXJzZUZsb2F0KHRva2VuWzJdLnJlcGxhY2UoJywnLCAnLicpKTsKCiAgICBpZiAoIXZhbGlkYXRlVGltZShob3VycywgbWludXRlcykpIHsKICAgICAgcmV0dXJuIE5hTjsKICAgIH0KCiAgICByZXR1cm4gaG91cnMgJSAyNCAqIE1JTExJU0VDT05EU19JTl9IT1VSICsgbWludXRlcyAqIE1JTExJU0VDT05EU19JTl9NSU5VVEUkMTsKICB9IC8vIGhoOm1tOnNzIG9yIGhobW1zcwoKCiAgdG9rZW4gPSBwYXR0ZXJucy5ISE1NU1MuZXhlYyh0aW1lU3RyaW5nKTsKCiAgaWYgKHRva2VuKSB7CiAgICBob3VycyA9IHBhcnNlSW50KHRva2VuWzFdLCAxMCk7CiAgICBtaW51dGVzID0gcGFyc2VJbnQodG9rZW5bMl0sIDEwKTsKICAgIHZhciBzZWNvbmRzID0gcGFyc2VGbG9hdCh0b2tlblszXS5yZXBsYWNlKCcsJywgJy4nKSk7CgogICAgaWYgKCF2YWxpZGF0ZVRpbWUoaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMpKSB7CiAgICAgIHJldHVybiBOYU47CiAgICB9CgogICAgcmV0dXJuIGhvdXJzICUgMjQgKiBNSUxMSVNFQ09ORFNfSU5fSE9VUiArIG1pbnV0ZXMgKiBNSUxMSVNFQ09ORFNfSU5fTUlOVVRFJDEgKyBzZWNvbmRzICogMTAwMDsKICB9IC8vIEludmFsaWQgSVNPLWZvcm1hdHRlZCB0aW1lCgoKICByZXR1cm4gbnVsbDsKfQoKZnVuY3Rpb24gcGFyc2VUaW1lem9uZSh0aW1lem9uZVN0cmluZykgewogIHZhciB0b2tlbjsKICB2YXIgYWJzb2x1dGVPZmZzZXQ7IC8vIFoKCiAgdG9rZW4gPSBwYXR0ZXJucy50aW1lem9uZVouZXhlYyh0aW1lem9uZVN0cmluZyk7CgogIGlmICh0b2tlbikgewogICAgcmV0dXJuIDA7CiAgfQoKICB2YXIgaG91cnM7IC8vIMKxaGgKCiAgdG9rZW4gPSBwYXR0ZXJucy50aW1lem9uZUhILmV4ZWModGltZXpvbmVTdHJpbmcpOwoKICBpZiAodG9rZW4pIHsKICAgIGhvdXJzID0gcGFyc2VJbnQodG9rZW5bMl0sIDEwKTsKCiAgICBpZiAoIXZhbGlkYXRlVGltZXpvbmUoaG91cnMpKSB7CiAgICAgIHJldHVybiBOYU47CiAgICB9CgogICAgYWJzb2x1dGVPZmZzZXQgPSBob3VycyAqIE1JTExJU0VDT05EU19JTl9IT1VSOwogICAgcmV0dXJuIHRva2VuWzFdID09PSAnKycgPyAtYWJzb2x1dGVPZmZzZXQgOiBhYnNvbHV0ZU9mZnNldDsKICB9IC8vIMKxaGg6bW0gb3IgwrFoaG1tCgoKICB0b2tlbiA9IHBhdHRlcm5zLnRpbWV6b25lSEhNTS5leGVjKHRpbWV6b25lU3RyaW5nKTsKCiAgaWYgKHRva2VuKSB7CiAgICBob3VycyA9IHBhcnNlSW50KHRva2VuWzJdLCAxMCk7CiAgICB2YXIgbWludXRlcyA9IHBhcnNlSW50KHRva2VuWzNdLCAxMCk7CgogICAgaWYgKCF2YWxpZGF0ZVRpbWV6b25lKGhvdXJzLCBtaW51dGVzKSkgewogICAgICByZXR1cm4gTmFOOwogICAgfQoKICAgIGFic29sdXRlT2Zmc2V0ID0gaG91cnMgKiBNSUxMSVNFQ09ORFNfSU5fSE9VUiArIG1pbnV0ZXMgKiBNSUxMSVNFQ09ORFNfSU5fTUlOVVRFJDE7CiAgICByZXR1cm4gdG9rZW5bMV0gPT09ICcrJyA/IC1hYnNvbHV0ZU9mZnNldCA6IGFic29sdXRlT2Zmc2V0OwogIH0KCiAgcmV0dXJuIDA7Cn0KCmZ1bmN0aW9uIGRheU9mSVNPV2Vla1llYXIoaXNvV2Vla1llYXIsIHdlZWssIGRheSkgewogIHdlZWsgPSB3ZWVrIHx8IDA7CiAgZGF5ID0gZGF5IHx8IDA7CiAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgwKTsKICBkYXRlLnNldFVUQ0Z1bGxZZWFyKGlzb1dlZWtZZWFyLCAwLCA0KTsKICB2YXIgZm91cnRoT2ZKYW51YXJ5RGF5ID0gZGF0ZS5nZXRVVENEYXkoKSB8fCA3OwogIHZhciBkaWZmID0gd2VlayAqIDcgKyBkYXkgKyAxIC0gZm91cnRoT2ZKYW51YXJ5RGF5OwogIGRhdGUuc2V0VVRDRGF0ZShkYXRlLmdldFVUQ0RhdGUoKSArIGRpZmYpOwogIHJldHVybiBkYXRlOwp9IC8vIFZhbGlkYXRpb24gZnVuY3Rpb25zCgoKdmFyIERBWVNfSU5fTU9OVEggPSBbMzEsIDI4LCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV07CnZhciBEQVlTX0lOX01PTlRIX0xFQVBfWUVBUiA9IFszMSwgMjksIDMxLCAzMCwgMzEsIDMwLCAzMSwgMzEsIDMwLCAzMSwgMzAsIDMxXTsKCmZ1bmN0aW9uIGlzTGVhcFllYXJJbmRleCh5ZWFyKSB7CiAgcmV0dXJuIHllYXIgJSA0MDAgPT09IDAgfHwgeWVhciAlIDQgPT09IDAgJiYgeWVhciAlIDEwMCAhPT0gMDsKfQoKZnVuY3Rpb24gdmFsaWRhdGVEYXRlKHllYXIsIG1vbnRoLCBkYXRlKSB7CiAgaWYgKG1vbnRoIDwgMCB8fCBtb250aCA+IDExKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBpZiAoZGF0ZSAhPSBudWxsKSB7CiAgICBpZiAoZGF0ZSA8IDEpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHZhciBpc0xlYXBZZWFyID0gaXNMZWFwWWVhckluZGV4KHllYXIpOwoKICAgIGlmIChpc0xlYXBZZWFyICYmIGRhdGUgPiBEQVlTX0lOX01PTlRIX0xFQVBfWUVBUlttb250aF0pIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIGlmICghaXNMZWFwWWVhciAmJiBkYXRlID4gREFZU19JTl9NT05USFttb250aF0pIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0KCiAgcmV0dXJuIHRydWU7Cn0KCmZ1bmN0aW9uIHZhbGlkYXRlRGF5T2ZZZWFyRGF0ZSh5ZWFyLCBkYXlPZlllYXIpIHsKICBpZiAoZGF5T2ZZZWFyIDwgMSkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgdmFyIGlzTGVhcFllYXIgPSBpc0xlYXBZZWFySW5kZXgoeWVhcik7CgogIGlmIChpc0xlYXBZZWFyICYmIGRheU9mWWVhciA+IDM2NikgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgaWYgKCFpc0xlYXBZZWFyICYmIGRheU9mWWVhciA+IDM2NSkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgcmV0dXJuIHRydWU7Cn0KCmZ1bmN0aW9uIHZhbGlkYXRlV2Vla0RhdGUoeWVhciwgd2VlaywgZGF5KSB7CiAgaWYgKHdlZWsgPCAwIHx8IHdlZWsgPiA1MikgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgaWYgKGRheSAhPSBudWxsICYmIChkYXkgPCAwIHx8IGRheSA+IDYpKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICByZXR1cm4gdHJ1ZTsKfQoKZnVuY3Rpb24gdmFsaWRhdGVUaW1lKGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKSB7CiAgaWYgKGhvdXJzICE9IG51bGwgJiYgKGhvdXJzIDwgMCB8fCBob3VycyA+PSAyNSkpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIGlmIChtaW51dGVzICE9IG51bGwgJiYgKG1pbnV0ZXMgPCAwIHx8IG1pbnV0ZXMgPj0gNjApKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBpZiAoc2Vjb25kcyAhPSBudWxsICYmIChzZWNvbmRzIDwgMCB8fCBzZWNvbmRzID49IDYwKSkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgcmV0dXJuIHRydWU7Cn0KCmZ1bmN0aW9uIHZhbGlkYXRlVGltZXpvbmUoaG91cnMsIG1pbnV0ZXMpIHsKICBpZiAobWludXRlcyAhPSBudWxsICYmIChtaW51dGVzIDwgMCB8fCBtaW51dGVzID4gNTkpKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICByZXR1cm4gdHJ1ZTsKfQovKioKICogQG5hbWUgYWRkTWlsbGlzZWNvbmRzCiAqIEBjYXRlZ29yeSBNaWxsaXNlY29uZCBIZWxwZXJzCiAqIEBzdW1tYXJ5IEFkZCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gdGhlIGdpdmVuIGRhdGUuCiAqCiAqIEBkZXNjcmlwdGlvbgogKiBBZGQgdGhlIHNwZWNpZmllZCBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIHRoZSBnaXZlbiBkYXRlLgogKgogKiBAcGFyYW0ge0RhdGV8U3RyaW5nfE51bWJlcn0gZGF0ZSAtIHRoZSBkYXRlIHRvIGJlIGNoYW5nZWQKICogQHBhcmFtIHtOdW1iZXJ9IGFtb3VudCAtIHRoZSBhbW91bnQgb2YgbWlsbGlzZWNvbmRzIHRvIGJlIGFkZGVkCiAqIEBwYXJhbSB7T3B0aW9uc30gW29wdGlvbnNdIC0gdGhlIG9iamVjdCB3aXRoIG9wdGlvbnMuIFNlZSBbT3B0aW9uc117QGxpbmsgaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy9PcHRpb25zfQogKiBAcGFyYW0gezB8MXwyfSBbb3B0aW9ucy5hZGRpdGlvbmFsRGlnaXRzPTJdIC0gcGFzc2VkIHRvIGB0b0RhdGVgLiBTZWUgW3RvRGF0ZV17QGxpbmsgaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy90b0RhdGV9CiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgbmV3IGRhdGUgd2l0aCB0aGUgbWlsbGlzZWNvbmRzIGFkZGVkCiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMiBhcmd1bWVudHMgcmVxdWlyZWQKICogQHRocm93cyB7UmFuZ2VFcnJvcn0gYG9wdGlvbnMuYWRkaXRpb25hbERpZ2l0c2AgbXVzdCBiZSAwLCAxIG9yIDIKICoKICogQGV4YW1wbGUKICogLy8gQWRkIDc1MCBtaWxsaXNlY29uZHMgdG8gMTAgSnVseSAyMDE0IDEyOjQ1OjMwLjAwMDoKICogdmFyIHJlc3VsdCA9IGFkZE1pbGxpc2Vjb25kcyhuZXcgRGF0ZSgyMDE0LCA2LCAxMCwgMTIsIDQ1LCAzMCwgMCksIDc1MCkKICogLy89PiBUaHUgSnVsIDEwIDIwMTQgMTI6NDU6MzAuNzUwCiAqLwoKCmZ1bmN0aW9uIGFkZE1pbGxpc2Vjb25kcyhkaXJ0eURhdGUsIGRpcnR5QW1vdW50LCBkaXJ0eU9wdGlvbnMpIHsKICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJzIgYXJndW1lbnRzIHJlcXVpcmVkLCBidXQgb25seSAnICsgYXJndW1lbnRzLmxlbmd0aCArICcgcHJlc2VudCcpOwogIH0KCiAgdmFyIHRpbWVzdGFtcCA9IHRvRGF0ZShkaXJ0eURhdGUsIGRpcnR5T3B0aW9ucykuZ2V0VGltZSgpOwogIHZhciBhbW91bnQgPSB0b0ludGVnZXIoZGlydHlBbW91bnQpOwogIHJldHVybiBuZXcgRGF0ZSh0aW1lc3RhbXAgKyBhbW91bnQpOwp9Ci8qKgogKiBAbmFtZSBpc1ZhbGlkCiAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVycwogKiBAc3VtbWFyeSBJcyB0aGUgZ2l2ZW4gZGF0ZSB2YWxpZD8KICoKICogQGRlc2NyaXB0aW9uCiAqIFJldHVybnMgZmFsc2UgaWYgYXJndW1lbnQgaXMgSW52YWxpZCBEYXRlIGFuZCB0cnVlIG90aGVyd2lzZS4KICogQXJndW1lbnQgaXMgY29udmVydGVkIHRvIERhdGUgdXNpbmcgYHRvRGF0ZWAuIFNlZSBbdG9EYXRlXXtAbGluayBodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL3RvRGF0ZX0KICogSW52YWxpZCBEYXRlIGlzIGEgRGF0ZSwgd2hvc2UgdGltZSB2YWx1ZSBpcyBOYU4uCiAqCiAqIFRpbWUgdmFsdWUgb2YgRGF0ZTogaHR0cDovL2VzNS5naXRodWIuaW8vI3gxNS45LjEuMQogKgogKiBAcGFyYW0geyp9IGRhdGUgLSB0aGUgZGF0ZSB0byBjaGVjawogKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRpb25zXSAtIHRoZSBvYmplY3Qgd2l0aCBvcHRpb25zLiBTZWUgW09wdGlvbnNde0BsaW5rIGh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3MvT3B0aW9uc30KICogQHBhcmFtIHswfDF8Mn0gW29wdGlvbnMuYWRkaXRpb25hbERpZ2l0cz0yXSAtIHBhc3NlZCB0byBgdG9EYXRlYC4gU2VlIFt0b0RhdGVde0BsaW5rIGh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3MvdG9EYXRlfQogKiBAcmV0dXJucyB7Qm9vbGVhbn0gdGhlIGRhdGUgaXMgdmFsaWQKICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkCiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IGBvcHRpb25zLmFkZGl0aW9uYWxEaWdpdHNgIG11c3QgYmUgMCwgMSBvciAyCiAqCiAqIEBleGFtcGxlCiAqIC8vIEZvciB0aGUgdmFsaWQgZGF0ZToKICogdmFyIHJlc3VsdCA9IGlzVmFsaWQobmV3IERhdGUoMjAxNCwgMSwgMzEpKQogKiAvLz0+IHRydWUKICoKICogQGV4YW1wbGUKICogLy8gRm9yIHRoZSB2YWx1ZSwgY29udmVydGFibGUgaW50byBhIGRhdGU6CiAqIHZhciByZXN1bHQgPSBpc1ZhbGlkKCcyMDE0LTAyLTMxJykKICogLy89PiB0cnVlCiAqCiAqIEBleGFtcGxlCiAqIC8vIEZvciB0aGUgaW52YWxpZCBkYXRlOgogKiB2YXIgcmVzdWx0ID0gaXNWYWxpZChuZXcgRGF0ZSgnJykpCiAqIC8vPT4gZmFsc2UKICovCgoKZnVuY3Rpb24gaXNWYWxpZChkaXJ0eURhdGUsIGRpcnR5T3B0aW9ucykgewogIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignMSBhcmd1bWVudCByZXF1aXJlZCwgYnV0IG9ubHkgJyArIGFyZ3VtZW50cy5sZW5ndGggKyAnIHByZXNlbnQnKTsKICB9CgogIHZhciBkYXRlID0gdG9EYXRlKGRpcnR5RGF0ZSwgZGlydHlPcHRpb25zKTsKICByZXR1cm4gIWlzTmFOKGRhdGUpOwp9Cgp2YXIgZm9ybWF0RGlzdGFuY2VMb2NhbGUgPSB7CiAgbGVzc1RoYW5YU2Vjb25kczogewogICAgb25lOiAnbGVzcyB0aGFuIGEgc2Vjb25kJywKICAgIG90aGVyOiAnbGVzcyB0aGFuIHt7Y291bnR9fSBzZWNvbmRzJwogIH0sCiAgeFNlY29uZHM6IHsKICAgIG9uZTogJzEgc2Vjb25kJywKICAgIG90aGVyOiAne3tjb3VudH19IHNlY29uZHMnCiAgfSwKICBoYWxmQU1pbnV0ZTogJ2hhbGYgYSBtaW51dGUnLAogIGxlc3NUaGFuWE1pbnV0ZXM6IHsKICAgIG9uZTogJ2xlc3MgdGhhbiBhIG1pbnV0ZScsCiAgICBvdGhlcjogJ2xlc3MgdGhhbiB7e2NvdW50fX0gbWludXRlcycKICB9LAogIHhNaW51dGVzOiB7CiAgICBvbmU6ICcxIG1pbnV0ZScsCiAgICBvdGhlcjogJ3t7Y291bnR9fSBtaW51dGVzJwogIH0sCiAgYWJvdXRYSG91cnM6IHsKICAgIG9uZTogJ2Fib3V0IDEgaG91cicsCiAgICBvdGhlcjogJ2Fib3V0IHt7Y291bnR9fSBob3VycycKICB9LAogIHhIb3VyczogewogICAgb25lOiAnMSBob3VyJywKICAgIG90aGVyOiAne3tjb3VudH19IGhvdXJzJwogIH0sCiAgeERheXM6IHsKICAgIG9uZTogJzEgZGF5JywKICAgIG90aGVyOiAne3tjb3VudH19IGRheXMnCiAgfSwKICBhYm91dFhNb250aHM6IHsKICAgIG9uZTogJ2Fib3V0IDEgbW9udGgnLAogICAgb3RoZXI6ICdhYm91dCB7e2NvdW50fX0gbW9udGhzJwogIH0sCiAgeE1vbnRoczogewogICAgb25lOiAnMSBtb250aCcsCiAgICBvdGhlcjogJ3t7Y291bnR9fSBtb250aHMnCiAgfSwKICBhYm91dFhZZWFyczogewogICAgb25lOiAnYWJvdXQgMSB5ZWFyJywKICAgIG90aGVyOiAnYWJvdXQge3tjb3VudH19IHllYXJzJwogIH0sCiAgeFllYXJzOiB7CiAgICBvbmU6ICcxIHllYXInLAogICAgb3RoZXI6ICd7e2NvdW50fX0geWVhcnMnCiAgfSwKICBvdmVyWFllYXJzOiB7CiAgICBvbmU6ICdvdmVyIDEgeWVhcicsCiAgICBvdGhlcjogJ292ZXIge3tjb3VudH19IHllYXJzJwogIH0sCiAgYWxtb3N0WFllYXJzOiB7CiAgICBvbmU6ICdhbG1vc3QgMSB5ZWFyJywKICAgIG90aGVyOiAnYWxtb3N0IHt7Y291bnR9fSB5ZWFycycKICB9Cn07CgpmdW5jdGlvbiBmb3JtYXREaXN0YW5jZSh0b2tlbiwgY291bnQsIG9wdGlvbnMpIHsKICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsKICB2YXIgcmVzdWx0OwoKICBpZiAodHlwZW9mIGZvcm1hdERpc3RhbmNlTG9jYWxlW3Rva2VuXSA9PT0gJ3N0cmluZycpIHsKICAgIHJlc3VsdCA9IGZvcm1hdERpc3RhbmNlTG9jYWxlW3Rva2VuXTsKICB9IGVsc2UgaWYgKGNvdW50ID09PSAxKSB7CiAgICByZXN1bHQgPSBmb3JtYXREaXN0YW5jZUxvY2FsZVt0b2tlbl0ub25lOwogIH0gZWxzZSB7CiAgICByZXN1bHQgPSBmb3JtYXREaXN0YW5jZUxvY2FsZVt0b2tlbl0ub3RoZXIucmVwbGFjZSgne3tjb3VudH19JywgY291bnQpOwogIH0KCiAgaWYgKG9wdGlvbnMuYWRkU3VmZml4KSB7CiAgICBpZiAob3B0aW9ucy5jb21wYXJpc29uID4gMCkgewogICAgICByZXR1cm4gJ2luICcgKyByZXN1bHQ7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gcmVzdWx0ICsgJyBhZ28nOwogICAgfQogIH0KCiAgcmV0dXJuIHJlc3VsdDsKfQoKZnVuY3Rpb24gYnVpbGRGb3JtYXRMb25nRm4oYXJncykgewogIHJldHVybiBmdW5jdGlvbiAoZGlydHlPcHRpb25zKSB7CiAgICB2YXIgb3B0aW9ucyA9IGRpcnR5T3B0aW9ucyB8fCB7fTsKICAgIHZhciB3aWR0aCA9IG9wdGlvbnMud2lkdGggPyBTdHJpbmcob3B0aW9ucy53aWR0aCkgOiBhcmdzLmRlZmF1bHRXaWR0aDsKICAgIHZhciBmb3JtYXQgPSBhcmdzLmZvcm1hdHNbd2lkdGhdIHx8IGFyZ3MuZm9ybWF0c1thcmdzLmRlZmF1bHRXaWR0aF07CiAgICByZXR1cm4gZm9ybWF0OwogIH07Cn0KCnZhciBkYXRlRm9ybWF0cyA9IHsKICBmdWxsOiAnRUVFRSwgTU1NTSBkbywgeScsCiAgImxvbmciOiAnTU1NTSBkbywgeScsCiAgbWVkaXVtOiAnTU1NIGQsIHknLAogICJzaG9ydCI6ICdNTS9kZC95eXl5Jwp9Owp2YXIgdGltZUZvcm1hdHMgPSB7CiAgZnVsbDogJ2g6bW06c3MgYSB6enp6JywKICAibG9uZyI6ICdoOm1tOnNzIGEgeicsCiAgbWVkaXVtOiAnaDptbTpzcyBhJywKICAic2hvcnQiOiAnaDptbSBhJwp9Owp2YXIgZGF0ZVRpbWVGb3JtYXRzID0gewogIGZ1bGw6ICJ7e2RhdGV9fSAnYXQnIHt7dGltZX19IiwKICAibG9uZyI6ICJ7e2RhdGV9fSAnYXQnIHt7dGltZX19IiwKICBtZWRpdW06ICd7e2RhdGV9fSwge3t0aW1lfX0nLAogICJzaG9ydCI6ICd7e2RhdGV9fSwge3t0aW1lfX0nCn07CnZhciBmb3JtYXRMb25nID0gewogIGRhdGU6IGJ1aWxkRm9ybWF0TG9uZ0ZuKHsKICAgIGZvcm1hdHM6IGRhdGVGb3JtYXRzLAogICAgZGVmYXVsdFdpZHRoOiAnZnVsbCcKICB9KSwKICB0aW1lOiBidWlsZEZvcm1hdExvbmdGbih7CiAgICBmb3JtYXRzOiB0aW1lRm9ybWF0cywKICAgIGRlZmF1bHRXaWR0aDogJ2Z1bGwnCiAgfSksCiAgZGF0ZVRpbWU6IGJ1aWxkRm9ybWF0TG9uZ0ZuKHsKICAgIGZvcm1hdHM6IGRhdGVUaW1lRm9ybWF0cywKICAgIGRlZmF1bHRXaWR0aDogJ2Z1bGwnCiAgfSkKfTsKdmFyIGZvcm1hdFJlbGF0aXZlTG9jYWxlID0gewogIGxhc3RXZWVrOiAiJ2xhc3QnIGVlZWUgJ2F0JyBwIiwKICB5ZXN0ZXJkYXk6ICIneWVzdGVyZGF5IGF0JyBwIiwKICB0b2RheTogIid0b2RheSBhdCcgcCIsCiAgdG9tb3Jyb3c6ICIndG9tb3Jyb3cgYXQnIHAiLAogIG5leHRXZWVrOiAiZWVlZSAnYXQnIHAiLAogIG90aGVyOiAnUCcKfTsKCmZ1bmN0aW9uIGZvcm1hdFJlbGF0aXZlKHRva2VuLCBkYXRlLCBiYXNlRGF0ZSwgb3B0aW9ucykgewogIHJldHVybiBmb3JtYXRSZWxhdGl2ZUxvY2FsZVt0b2tlbl07Cn0KCmZ1bmN0aW9uIGJ1aWxkTG9jYWxpemVGbihhcmdzKSB7CiAgcmV0dXJuIGZ1bmN0aW9uIChkaXJ0eUluZGV4LCBkaXJ0eU9wdGlvbnMpIHsKICAgIHZhciBvcHRpb25zID0gZGlydHlPcHRpb25zIHx8IHt9OwogICAgdmFyIHdpZHRoID0gb3B0aW9ucy53aWR0aCA/IFN0cmluZyhvcHRpb25zLndpZHRoKSA6IGFyZ3MuZGVmYXVsdFdpZHRoOwogICAgdmFyIGNvbnRleHQgPSBvcHRpb25zLmNvbnRleHQgPyBTdHJpbmcob3B0aW9ucy5jb250ZXh0KSA6ICdzdGFuZGFsb25lJzsKICAgIHZhciB2YWx1ZXNBcnJheTsKCiAgICBpZiAoY29udGV4dCA9PT0gJ2Zvcm1hdHRpbmcnICYmIGFyZ3MuZm9ybWF0dGluZ1ZhbHVlcykgewogICAgICB2YWx1ZXNBcnJheSA9IGFyZ3MuZm9ybWF0dGluZ1ZhbHVlc1t3aWR0aF0gfHwgYXJncy5mb3JtYXR0aW5nVmFsdWVzW2FyZ3MuZGVmYXVsdEZvcm1hdHRpbmdXaWR0aF07CiAgICB9IGVsc2UgewogICAgICB2YWx1ZXNBcnJheSA9IGFyZ3MudmFsdWVzW3dpZHRoXSB8fCBhcmdzLnZhbHVlc1thcmdzLmRlZmF1bHRXaWR0aF07CiAgICB9CgogICAgdmFyIGluZGV4ID0gYXJncy5hcmd1bWVudENhbGxiYWNrID8gYXJncy5hcmd1bWVudENhbGxiYWNrKGRpcnR5SW5kZXgpIDogZGlydHlJbmRleDsKICAgIHJldHVybiB2YWx1ZXNBcnJheVtpbmRleF07CiAgfTsKfQoKdmFyIGVyYVZhbHVlcyA9IHsKICBuYXJyb3c6IFsnQicsICdBJ10sCiAgYWJicmV2aWF0ZWQ6IFsnQkMnLCAnQUQnXSwKICB3aWRlOiBbJ0JlZm9yZSBDaHJpc3QnLCAnQW5ubyBEb21pbmknXQp9Owp2YXIgcXVhcnRlclZhbHVlcyA9IHsKICBuYXJyb3c6IFsnMScsICcyJywgJzMnLCAnNCddLAogIGFiYnJldmlhdGVkOiBbJ1ExJywgJ1EyJywgJ1EzJywgJ1E0J10sCiAgd2lkZTogWycxc3QgcXVhcnRlcicsICcybmQgcXVhcnRlcicsICczcmQgcXVhcnRlcicsICc0dGggcXVhcnRlciddCn07IC8vIE5vdGU6IGluIEVuZ2xpc2gsIHRoZSBuYW1lcyBvZiBkYXlzIG9mIHRoZSB3ZWVrIGFuZCBtb250aHMgYXJlIGNhcGl0YWxpemVkLgovLyBJZiB5b3UgYXJlIG1ha2luZyBhIG5ldyBsb2NhbGUgYmFzZWQgb24gdGhpcyBvbmUsIGNoZWNrIGlmIHRoZSBzYW1lIGlzIHRydWUgZm9yIHRoZSBsYW5ndWFnZSB5b3UncmUgd29ya2luZyBvbi4KLy8gR2VuZXJhbGx5LCBmb3JtYXR0ZWQgZGF0ZXMgc2hvdWxkIGxvb2sgbGlrZSB0aGV5IGFyZSBpbiB0aGUgbWlkZGxlIG9mIGEgc2VudGVuY2UsCi8vIGUuZy4gaW4gU3BhbmlzaCBsYW5ndWFnZSB0aGUgd2Vla2RheXMgYW5kIG1vbnRocyBzaG91bGQgYmUgaW4gdGhlIGxvd2VyY2FzZS4KCnZhciBtb250aFZhbHVlcyA9IHsKICBuYXJyb3c6IFsnSicsICdGJywgJ00nLCAnQScsICdNJywgJ0onLCAnSicsICdBJywgJ1MnLCAnTycsICdOJywgJ0QnXSwKICBhYmJyZXZpYXRlZDogWydKYW4nLCAnRmViJywgJ01hcicsICdBcHInLCAnTWF5JywgJ0p1bicsICdKdWwnLCAnQXVnJywgJ1NlcCcsICdPY3QnLCAnTm92JywgJ0RlYyddLAogIHdpZGU6IFsnSmFudWFyeScsICdGZWJydWFyeScsICdNYXJjaCcsICdBcHJpbCcsICdNYXknLCAnSnVuZScsICdKdWx5JywgJ0F1Z3VzdCcsICdTZXB0ZW1iZXInLCAnT2N0b2JlcicsICdOb3ZlbWJlcicsICdEZWNlbWJlciddCn07CnZhciBkYXlWYWx1ZXMgPSB7CiAgbmFycm93OiBbJ1MnLCAnTScsICdUJywgJ1cnLCAnVCcsICdGJywgJ1MnXSwKICAic2hvcnQiOiBbJ1N1JywgJ01vJywgJ1R1JywgJ1dlJywgJ1RoJywgJ0ZyJywgJ1NhJ10sCiAgYWJicmV2aWF0ZWQ6IFsnU3VuJywgJ01vbicsICdUdWUnLCAnV2VkJywgJ1RodScsICdGcmknLCAnU2F0J10sCiAgd2lkZTogWydTdW5kYXknLCAnTW9uZGF5JywgJ1R1ZXNkYXknLCAnV2VkbmVzZGF5JywgJ1RodXJzZGF5JywgJ0ZyaWRheScsICdTYXR1cmRheSddCn07CnZhciBkYXlQZXJpb2RWYWx1ZXMgPSB7CiAgbmFycm93OiB7CiAgICBhbTogJ2EnLAogICAgcG06ICdwJywKICAgIG1pZG5pZ2h0OiAnbWknLAogICAgbm9vbjogJ24nLAogICAgbW9ybmluZzogJ21vcm5pbmcnLAogICAgYWZ0ZXJub29uOiAnYWZ0ZXJub29uJywKICAgIGV2ZW5pbmc6ICdldmVuaW5nJywKICAgIG5pZ2h0OiAnbmlnaHQnCiAgfSwKICBhYmJyZXZpYXRlZDogewogICAgYW06ICdBTScsCiAgICBwbTogJ1BNJywKICAgIG1pZG5pZ2h0OiAnbWlkbmlnaHQnLAogICAgbm9vbjogJ25vb24nLAogICAgbW9ybmluZzogJ21vcm5pbmcnLAogICAgYWZ0ZXJub29uOiAnYWZ0ZXJub29uJywKICAgIGV2ZW5pbmc6ICdldmVuaW5nJywKICAgIG5pZ2h0OiAnbmlnaHQnCiAgfSwKICB3aWRlOiB7CiAgICBhbTogJ2EubS4nLAogICAgcG06ICdwLm0uJywKICAgIG1pZG5pZ2h0OiAnbWlkbmlnaHQnLAogICAgbm9vbjogJ25vb24nLAogICAgbW9ybmluZzogJ21vcm5pbmcnLAogICAgYWZ0ZXJub29uOiAnYWZ0ZXJub29uJywKICAgIGV2ZW5pbmc6ICdldmVuaW5nJywKICAgIG5pZ2h0OiAnbmlnaHQnCiAgfQp9Owp2YXIgZm9ybWF0dGluZ0RheVBlcmlvZFZhbHVlcyA9IHsKICBuYXJyb3c6IHsKICAgIGFtOiAnYScsCiAgICBwbTogJ3AnLAogICAgbWlkbmlnaHQ6ICdtaScsCiAgICBub29uOiAnbicsCiAgICBtb3JuaW5nOiAnaW4gdGhlIG1vcm5pbmcnLAogICAgYWZ0ZXJub29uOiAnaW4gdGhlIGFmdGVybm9vbicsCiAgICBldmVuaW5nOiAnaW4gdGhlIGV2ZW5pbmcnLAogICAgbmlnaHQ6ICdhdCBuaWdodCcKICB9LAogIGFiYnJldmlhdGVkOiB7CiAgICBhbTogJ0FNJywKICAgIHBtOiAnUE0nLAogICAgbWlkbmlnaHQ6ICdtaWRuaWdodCcsCiAgICBub29uOiAnbm9vbicsCiAgICBtb3JuaW5nOiAnaW4gdGhlIG1vcm5pbmcnLAogICAgYWZ0ZXJub29uOiAnaW4gdGhlIGFmdGVybm9vbicsCiAgICBldmVuaW5nOiAnaW4gdGhlIGV2ZW5pbmcnLAogICAgbmlnaHQ6ICdhdCBuaWdodCcKICB9LAogIHdpZGU6IHsKICAgIGFtOiAnYS5tLicsCiAgICBwbTogJ3AubS4nLAogICAgbWlkbmlnaHQ6ICdtaWRuaWdodCcsCiAgICBub29uOiAnbm9vbicsCiAgICBtb3JuaW5nOiAnaW4gdGhlIG1vcm5pbmcnLAogICAgYWZ0ZXJub29uOiAnaW4gdGhlIGFmdGVybm9vbicsCiAgICBldmVuaW5nOiAnaW4gdGhlIGV2ZW5pbmcnLAogICAgbmlnaHQ6ICdhdCBuaWdodCcKICB9Cn07CgpmdW5jdGlvbiBvcmRpbmFsTnVtYmVyKGRpcnR5TnVtYmVyLCBkaXJ0eU9wdGlvbnMpIHsKICB2YXIgbnVtYmVyID0gTnVtYmVyKGRpcnR5TnVtYmVyKTsgLy8gSWYgb3JkaW5hbCBudW1iZXJzIGRlcGVuZCBvbiBjb250ZXh0LCBmb3IgZXhhbXBsZSwKICAvLyBpZiB0aGV5IGFyZSBkaWZmZXJlbnQgZm9yIGRpZmZlcmVudCBncmFtbWF0aWNhbCBnZW5kZXJzLAogIC8vIHVzZSBgb3B0aW9ucy51bml0YDoKICAvLwogIC8vICAgdmFyIG9wdGlvbnMgPSBkaXJ0eU9wdGlvbnMgfHwge30KICAvLyAgIHZhciB1bml0ID0gU3RyaW5nKG9wdGlvbnMudW5pdCkKICAvLwogIC8vIHdoZXJlIGB1bml0YCBjYW4gYmUgJ3llYXInLCAncXVhcnRlcicsICdtb250aCcsICd3ZWVrJywgJ2RhdGUnLCAnZGF5T2ZZZWFyJywKICAvLyAnZGF5JywgJ2hvdXInLCAnbWludXRlJywgJ3NlY29uZCcKCiAgdmFyIHJlbTEwMCA9IG51bWJlciAlIDEwMDsKCiAgaWYgKHJlbTEwMCA+IDIwIHx8IHJlbTEwMCA8IDEwKSB7CiAgICBzd2l0Y2ggKHJlbTEwMCAlIDEwKSB7CiAgICAgIGNhc2UgMToKICAgICAgICByZXR1cm4gbnVtYmVyICsgJ3N0JzsKCiAgICAgIGNhc2UgMjoKICAgICAgICByZXR1cm4gbnVtYmVyICsgJ25kJzsKCiAgICAgIGNhc2UgMzoKICAgICAgICByZXR1cm4gbnVtYmVyICsgJ3JkJzsKICAgIH0KICB9CgogIHJldHVybiBudW1iZXIgKyAndGgnOwp9Cgp2YXIgbG9jYWxpemUgPSB7CiAgb3JkaW5hbE51bWJlcjogb3JkaW5hbE51bWJlciwKICBlcmE6IGJ1aWxkTG9jYWxpemVGbih7CiAgICB2YWx1ZXM6IGVyYVZhbHVlcywKICAgIGRlZmF1bHRXaWR0aDogJ3dpZGUnCiAgfSksCiAgcXVhcnRlcjogYnVpbGRMb2NhbGl6ZUZuKHsKICAgIHZhbHVlczogcXVhcnRlclZhbHVlcywKICAgIGRlZmF1bHRXaWR0aDogJ3dpZGUnLAogICAgYXJndW1lbnRDYWxsYmFjazogZnVuY3Rpb24gYXJndW1lbnRDYWxsYmFjayhxdWFydGVyKSB7CiAgICAgIHJldHVybiBOdW1iZXIocXVhcnRlcikgLSAxOwogICAgfQogIH0pLAogIG1vbnRoOiBidWlsZExvY2FsaXplRm4oewogICAgdmFsdWVzOiBtb250aFZhbHVlcywKICAgIGRlZmF1bHRXaWR0aDogJ3dpZGUnCiAgfSksCiAgZGF5OiBidWlsZExvY2FsaXplRm4oewogICAgdmFsdWVzOiBkYXlWYWx1ZXMsCiAgICBkZWZhdWx0V2lkdGg6ICd3aWRlJwogIH0pLAogIGRheVBlcmlvZDogYnVpbGRMb2NhbGl6ZUZuKHsKICAgIHZhbHVlczogZGF5UGVyaW9kVmFsdWVzLAogICAgZGVmYXVsdFdpZHRoOiAnd2lkZScsCiAgICBmb3JtYXR0aW5nVmFsdWVzOiBmb3JtYXR0aW5nRGF5UGVyaW9kVmFsdWVzLAogICAgZGVmYXVsRm9ybWF0dGluZ1dpZHRoOiAnd2lkZScKICB9KQp9OwoKZnVuY3Rpb24gYnVpbGRNYXRjaFBhdHRlcm5GbihhcmdzKSB7CiAgcmV0dXJuIGZ1bmN0aW9uIChkaXJ0eVN0cmluZywgZGlydHlPcHRpb25zKSB7CiAgICB2YXIgc3RyaW5nID0gU3RyaW5nKGRpcnR5U3RyaW5nKTsKICAgIHZhciBvcHRpb25zID0gZGlydHlPcHRpb25zIHx8IHt9OwogICAgdmFyIG1hdGNoUmVzdWx0ID0gc3RyaW5nLm1hdGNoKGFyZ3MubWF0Y2hQYXR0ZXJuKTsKCiAgICBpZiAoIW1hdGNoUmVzdWx0KSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIHZhciBtYXRjaGVkU3RyaW5nID0gbWF0Y2hSZXN1bHRbMF07CiAgICB2YXIgcGFyc2VSZXN1bHQgPSBzdHJpbmcubWF0Y2goYXJncy5wYXJzZVBhdHRlcm4pOwoKICAgIGlmICghcGFyc2VSZXN1bHQpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgdmFyIHZhbHVlID0gYXJncy52YWx1ZUNhbGxiYWNrID8gYXJncy52YWx1ZUNhbGxiYWNrKHBhcnNlUmVzdWx0WzBdKSA6IHBhcnNlUmVzdWx0WzBdOwogICAgdmFsdWUgPSBvcHRpb25zLnZhbHVlQ2FsbGJhY2sgPyBvcHRpb25zLnZhbHVlQ2FsbGJhY2sodmFsdWUpIDogdmFsdWU7CiAgICByZXR1cm4gewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIHJlc3Q6IHN0cmluZy5zbGljZShtYXRjaGVkU3RyaW5nLmxlbmd0aCkKICAgIH07CiAgfTsKfQoKZnVuY3Rpb24gYnVpbGRNYXRjaEZuKGFyZ3MpIHsKICByZXR1cm4gZnVuY3Rpb24gKGRpcnR5U3RyaW5nLCBkaXJ0eU9wdGlvbnMpIHsKICAgIHZhciBzdHJpbmcgPSBTdHJpbmcoZGlydHlTdHJpbmcpOwogICAgdmFyIG9wdGlvbnMgPSBkaXJ0eU9wdGlvbnMgfHwge307CiAgICB2YXIgd2lkdGggPSBvcHRpb25zLndpZHRoOwogICAgdmFyIG1hdGNoUGF0dGVybiA9IHdpZHRoICYmIGFyZ3MubWF0Y2hQYXR0ZXJuc1t3aWR0aF0gfHwgYXJncy5tYXRjaFBhdHRlcm5zW2FyZ3MuZGVmYXVsdE1hdGNoV2lkdGhdOwogICAgdmFyIG1hdGNoUmVzdWx0ID0gc3RyaW5nLm1hdGNoKG1hdGNoUGF0dGVybik7CgogICAgaWYgKCFtYXRjaFJlc3VsdCkgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICB2YXIgbWF0Y2hlZFN0cmluZyA9IG1hdGNoUmVzdWx0WzBdOwogICAgdmFyIHBhcnNlUGF0dGVybnMgPSB3aWR0aCAmJiBhcmdzLnBhcnNlUGF0dGVybnNbd2lkdGhdIHx8IGFyZ3MucGFyc2VQYXR0ZXJuc1thcmdzLmRlZmF1bHRQYXJzZVdpZHRoXTsKICAgIHZhciB2YWx1ZTsKCiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHBhcnNlUGF0dGVybnMpID09PSAnW29iamVjdCBBcnJheV0nKSB7CiAgICAgIHZhbHVlID0gcGFyc2VQYXR0ZXJucy5maW5kSW5kZXgoZnVuY3Rpb24gKHBhdHRlcm4pIHsKICAgICAgICByZXR1cm4gcGF0dGVybi50ZXN0KHN0cmluZyk7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgdmFsdWUgPSBmaW5kS2V5KHBhcnNlUGF0dGVybnMsIGZ1bmN0aW9uIChwYXR0ZXJuKSB7CiAgICAgICAgcmV0dXJuIHBhdHRlcm4udGVzdChzdHJpbmcpOwogICAgICB9KTsKICAgIH0KCiAgICB2YWx1ZSA9IGFyZ3MudmFsdWVDYWxsYmFjayA/IGFyZ3MudmFsdWVDYWxsYmFjayh2YWx1ZSkgOiB2YWx1ZTsKICAgIHZhbHVlID0gb3B0aW9ucy52YWx1ZUNhbGxiYWNrID8gb3B0aW9ucy52YWx1ZUNhbGxiYWNrKHZhbHVlKSA6IHZhbHVlOwogICAgcmV0dXJuIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICByZXN0OiBzdHJpbmcuc2xpY2UobWF0Y2hlZFN0cmluZy5sZW5ndGgpCiAgICB9OwogIH07Cn0KCmZ1bmN0aW9uIGZpbmRLZXkob2JqZWN0LCBwcmVkaWNhdGUpIHsKICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7CiAgICBpZiAob2JqZWN0Lmhhc093blByb3BlcnR5KGtleSkgJiYgcHJlZGljYXRlKG9iamVjdFtrZXldKSkgewogICAgICByZXR1cm4ga2V5OwogICAgfQogIH0KfQoKdmFyIG1hdGNoT3JkaW5hbE51bWJlclBhdHRlcm4gPSAvXihcZCspKHRofHN0fG5kfHJkKT8vaTsKdmFyIHBhcnNlT3JkaW5hbE51bWJlclBhdHRlcm4gPSAvXGQrL2k7CnZhciBtYXRjaEVyYVBhdHRlcm5zID0gewogIG5hcnJvdzogL14oYnxhKS9pLAogIGFiYnJldmlhdGVkOiAvXihiXC4/XHM/Y1wuP3xiXC4/XHM/Y1wuP1xzP2VcLj98YVwuP1xzP2RcLj98Y1wuP1xzP2VcLj8pL2ksCiAgd2lkZTogL14oYmVmb3JlIGNocmlzdHxiZWZvcmUgY29tbW9uIGVyYXxhbm5vIGRvbWluaXxjb21tb24gZXJhKS9pCn07CnZhciBwYXJzZUVyYVBhdHRlcm5zID0gewogIGFueTogWy9eYi9pLCAvXihhfGMpL2ldCn07CnZhciBtYXRjaFF1YXJ0ZXJQYXR0ZXJucyA9IHsKICBuYXJyb3c6IC9eWzEyMzRdL2ksCiAgYWJicmV2aWF0ZWQ6IC9ecVsxMjM0XS9pLAogIHdpZGU6IC9eWzEyMzRdKHRofHN0fG5kfHJkKT8gcXVhcnRlci9pCn07CnZhciBwYXJzZVF1YXJ0ZXJQYXR0ZXJucyA9IHsKICBhbnk6IFsvMS9pLCAvMi9pLCAvMy9pLCAvNC9pXQp9Owp2YXIgbWF0Y2hNb250aFBhdHRlcm5zID0gewogIG5hcnJvdzogL15bamZtYXNvbmRdL2ksCiAgYWJicmV2aWF0ZWQ6IC9eKGphbnxmZWJ8bWFyfGFwcnxtYXl8anVufGp1bHxhdWd8c2VwfG9jdHxub3Z8ZGVjKS9pLAogIHdpZGU6IC9eKGphbnVhcnl8ZmVicnVhcnl8bWFyY2h8YXByaWx8bWF5fGp1bmV8anVseXxhdWd1c3R8c2VwdGVtYmVyfG9jdG9iZXJ8bm92ZW1iZXJ8ZGVjZW1iZXIpL2kKfTsKdmFyIHBhcnNlTW9udGhQYXR0ZXJucyA9IHsKICBuYXJyb3c6IFsvXmovaSwgL15mL2ksIC9ebS9pLCAvXmEvaSwgL15tL2ksIC9eai9pLCAvXmovaSwgL15hL2ksIC9ecy9pLCAvXm8vaSwgL15uL2ksIC9eZC9pXSwKICBhbnk6IFsvXmphL2ksIC9eZi9pLCAvXm1hci9pLCAvXmFwL2ksIC9ebWF5L2ksIC9eanVuL2ksIC9eanVsL2ksIC9eYXUvaSwgL15zL2ksIC9eby9pLCAvXm4vaSwgL15kL2ldCn07CnZhciBtYXRjaERheVBhdHRlcm5zID0gewogIG5hcnJvdzogL15bc210d2ZdL2ksCiAgInNob3J0IjogL14oc3V8bW98dHV8d2V8dGh8ZnJ8c2EpL2ksCiAgYWJicmV2aWF0ZWQ6IC9eKHN1bnxtb258dHVlfHdlZHx0aHV8ZnJpfHNhdCkvaSwKICB3aWRlOiAvXihzdW5kYXl8bW9uZGF5fHR1ZXNkYXl8d2VkbmVzZGF5fHRodXJzZGF5fGZyaWRheXxzYXR1cmRheSkvaQp9Owp2YXIgcGFyc2VEYXlQYXR0ZXJucyA9IHsKICBuYXJyb3c6IFsvXnMvaSwgL15tL2ksIC9edC9pLCAvXncvaSwgL150L2ksIC9eZi9pLCAvXnMvaV0sCiAgYW55OiBbL15zdS9pLCAvXm0vaSwgL150dS9pLCAvXncvaSwgL150aC9pLCAvXmYvaSwgL15zYS9pXQp9Owp2YXIgbWF0Y2hEYXlQZXJpb2RQYXR0ZXJucyA9IHsKICBuYXJyb3c6IC9eKGF8cHxtaXxufChpbiB0aGV8YXQpIChtb3JuaW5nfGFmdGVybm9vbnxldmVuaW5nfG5pZ2h0KSkvaSwKICBhbnk6IC9eKFthcF1cLj9ccz9tXC4/fG1pZG5pZ2h0fG5vb258KGluIHRoZXxhdCkgKG1vcm5pbmd8YWZ0ZXJub29ufGV2ZW5pbmd8bmlnaHQpKS9pCn07CnZhciBwYXJzZURheVBlcmlvZFBhdHRlcm5zID0gewogIGFueTogewogICAgYW06IC9eYS9pLAogICAgcG06IC9ecC9pLAogICAgbWlkbmlnaHQ6IC9ebWkvaSwKICAgIG5vb246IC9ebm8vaSwKICAgIG1vcm5pbmc6IC9tb3JuaW5nL2ksCiAgICBhZnRlcm5vb246IC9hZnRlcm5vb24vaSwKICAgIGV2ZW5pbmc6IC9ldmVuaW5nL2ksCiAgICBuaWdodDogL25pZ2h0L2kKICB9Cn07CnZhciBtYXRjaCA9IHsKICBvcmRpbmFsTnVtYmVyOiBidWlsZE1hdGNoUGF0dGVybkZuKHsKICAgIG1hdGNoUGF0dGVybjogbWF0Y2hPcmRpbmFsTnVtYmVyUGF0dGVybiwKICAgIHBhcnNlUGF0dGVybjogcGFyc2VPcmRpbmFsTnVtYmVyUGF0dGVybiwKICAgIHZhbHVlQ2FsbGJhY2s6IGZ1bmN0aW9uIHZhbHVlQ2FsbGJhY2sodmFsdWUpIHsKICAgICAgcmV0dXJuIHBhcnNlSW50KHZhbHVlLCAxMCk7CiAgICB9CiAgfSksCiAgZXJhOiBidWlsZE1hdGNoRm4oewogICAgbWF0Y2hQYXR0ZXJuczogbWF0Y2hFcmFQYXR0ZXJucywKICAgIGRlZmF1bHRNYXRjaFdpZHRoOiAnd2lkZScsCiAgICBwYXJzZVBhdHRlcm5zOiBwYXJzZUVyYVBhdHRlcm5zLAogICAgZGVmYXVsdFBhcnNlV2lkdGg6ICdhbnknCiAgfSksCiAgcXVhcnRlcjogYnVpbGRNYXRjaEZuKHsKICAgIG1hdGNoUGF0dGVybnM6IG1hdGNoUXVhcnRlclBhdHRlcm5zLAogICAgZGVmYXVsdE1hdGNoV2lkdGg6ICd3aWRlJywKICAgIHBhcnNlUGF0dGVybnM6IHBhcnNlUXVhcnRlclBhdHRlcm5zLAogICAgZGVmYXVsdFBhcnNlV2lkdGg6ICdhbnknLAogICAgdmFsdWVDYWxsYmFjazogZnVuY3Rpb24gdmFsdWVDYWxsYmFjayhpbmRleCkgewogICAgICByZXR1cm4gaW5kZXggKyAxOwogICAgfQogIH0pLAogIG1vbnRoOiBidWlsZE1hdGNoRm4oewogICAgbWF0Y2hQYXR0ZXJuczogbWF0Y2hNb250aFBhdHRlcm5zLAogICAgZGVmYXVsdE1hdGNoV2lkdGg6ICd3aWRlJywKICAgIHBhcnNlUGF0dGVybnM6IHBhcnNlTW9udGhQYXR0ZXJucywKICAgIGRlZmF1bHRQYXJzZVdpZHRoOiAnYW55JwogIH0pLAogIGRheTogYnVpbGRNYXRjaEZuKHsKICAgIG1hdGNoUGF0dGVybnM6IG1hdGNoRGF5UGF0dGVybnMsCiAgICBkZWZhdWx0TWF0Y2hXaWR0aDogJ3dpZGUnLAogICAgcGFyc2VQYXR0ZXJuczogcGFyc2VEYXlQYXR0ZXJucywKICAgIGRlZmF1bHRQYXJzZVdpZHRoOiAnYW55JwogIH0pLAogIGRheVBlcmlvZDogYnVpbGRNYXRjaEZuKHsKICAgIG1hdGNoUGF0dGVybnM6IG1hdGNoRGF5UGVyaW9kUGF0dGVybnMsCiAgICBkZWZhdWx0TWF0Y2hXaWR0aDogJ2FueScsCiAgICBwYXJzZVBhdHRlcm5zOiBwYXJzZURheVBlcmlvZFBhdHRlcm5zLAogICAgZGVmYXVsdFBhcnNlV2lkdGg6ICdhbnknCiAgfSkKfTsKLyoqCiAqIEB0eXBlIHtMb2NhbGV9CiAqIEBjYXRlZ29yeSBMb2NhbGVzCiAqIEBzdW1tYXJ5IEVuZ2xpc2ggbG9jYWxlIChVbml0ZWQgU3RhdGVzKS4KICogQGxhbmd1YWdlIEVuZ2xpc2gKICogQGlzby02MzktMiBlbmcKICogQGF1dGhvciBTYXNoYSBLb3NzIFtAa29zc25vY29ycF17QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2tvc3Nub2NvcnB9CiAqIEBhdXRob3IgTGVzaGEgS29zcyBbQGxlc2hha29zc117QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2xlc2hha29zc30KICovCgp2YXIgbG9jYWxlJDEgPSB7CiAgZm9ybWF0RGlzdGFuY2U6IGZvcm1hdERpc3RhbmNlLAogIGZvcm1hdExvbmc6IGZvcm1hdExvbmcsCiAgZm9ybWF0UmVsYXRpdmU6IGZvcm1hdFJlbGF0aXZlLAogIGxvY2FsaXplOiBsb2NhbGl6ZSwKICBtYXRjaDogbWF0Y2gsCiAgb3B0aW9uczogewogICAgd2Vla1N0YXJ0c09uOiAwCiAgICAvKiBTdW5kYXkgKi8KICAgICwKICAgIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZTogMQogIH0KfTsKdmFyIE1JTExJU0VDT05EU19JTl9EQVkgPSA4NjQwMDAwMDsgLy8gVGhpcyBmdW5jdGlvbiB3aWxsIGJlIGEgcGFydCBvZiBwdWJsaWMgQVBJIHdoZW4gVVRDIGZ1bmN0aW9uIHdpbGwgYmUgaW1wbGVtZW50ZWQuCi8vIFNlZSBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2lzc3Vlcy8zNzYKCmZ1bmN0aW9uIGdldFVUQ0RheU9mWWVhcihkaXJ0eURhdGUsIGRpcnR5T3B0aW9ucykgewogIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignMSBhcmd1bWVudCByZXF1aXJlZCwgYnV0IG9ubHkgJyArIGFyZ3VtZW50cy5sZW5ndGggKyAnIHByZXNlbnQnKTsKICB9CgogIHZhciBkYXRlID0gdG9EYXRlKGRpcnR5RGF0ZSwgZGlydHlPcHRpb25zKTsKICB2YXIgdGltZXN0YW1wID0gZGF0ZS5nZXRUaW1lKCk7CiAgZGF0ZS5zZXRVVENNb250aCgwLCAxKTsKICBkYXRlLnNldFVUQ0hvdXJzKDAsIDAsIDAsIDApOwogIHZhciBzdGFydE9mWWVhclRpbWVzdGFtcCA9IGRhdGUuZ2V0VGltZSgpOwogIHZhciBkaWZmZXJlbmNlID0gdGltZXN0YW1wIC0gc3RhcnRPZlllYXJUaW1lc3RhbXA7CiAgcmV0dXJuIE1hdGguZmxvb3IoZGlmZmVyZW5jZSAvIE1JTExJU0VDT05EU19JTl9EQVkpICsgMTsKfSAvLyBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgYSBwYXJ0IG9mIHB1YmxpYyBBUEkgd2hlbiBVVEMgZnVuY3Rpb24gd2lsbCBiZSBpbXBsZW1lbnRlZC4KLy8gU2VlIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvaXNzdWVzLzM3NgoKCmZ1bmN0aW9uIHN0YXJ0T2ZVVENJU09XZWVrKGRpcnR5RGF0ZSwgZGlydHlPcHRpb25zKSB7CiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAxKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCcxIGFyZ3VtZW50IHJlcXVpcmVkLCBidXQgb25seSAnICsgYXJndW1lbnRzLmxlbmd0aCArICcgcHJlc2VudCcpOwogIH0KCiAgdmFyIHdlZWtTdGFydHNPbiA9IDE7CiAgdmFyIGRhdGUgPSB0b0RhdGUoZGlydHlEYXRlLCBkaXJ0eU9wdGlvbnMpOwogIHZhciBkYXkgPSBkYXRlLmdldFVUQ0RheSgpOwogIHZhciBkaWZmID0gKGRheSA8IHdlZWtTdGFydHNPbiA/IDcgOiAwKSArIGRheSAtIHdlZWtTdGFydHNPbjsKICBkYXRlLnNldFVUQ0RhdGUoZGF0ZS5nZXRVVENEYXRlKCkgLSBkaWZmKTsKICBkYXRlLnNldFVUQ0hvdXJzKDAsIDAsIDAsIDApOwogIHJldHVybiBkYXRlOwp9IC8vIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSBhIHBhcnQgb2YgcHVibGljIEFQSSB3aGVuIFVUQyBmdW5jdGlvbiB3aWxsIGJlIGltcGxlbWVudGVkLgovLyBTZWUgaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9pc3N1ZXMvMzc2CgoKZnVuY3Rpb24gZ2V0VVRDSVNPV2Vla1llYXIoZGlydHlEYXRlLCBkaXJ0eU9wdGlvbnMpIHsKICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDEpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJzEgYXJndW1lbnQgcmVxdWlyZWQsIGJ1dCBvbmx5ICcgKyBhcmd1bWVudHMubGVuZ3RoICsgJyBwcmVzZW50Jyk7CiAgfQoKICB2YXIgZGF0ZSA9IHRvRGF0ZShkaXJ0eURhdGUsIGRpcnR5T3B0aW9ucyk7CiAgdmFyIHllYXIgPSBkYXRlLmdldFVUQ0Z1bGxZZWFyKCk7CiAgdmFyIGZvdXJ0aE9mSmFudWFyeU9mTmV4dFllYXIgPSBuZXcgRGF0ZSgwKTsKICBmb3VydGhPZkphbnVhcnlPZk5leHRZZWFyLnNldFVUQ0Z1bGxZZWFyKHllYXIgKyAxLCAwLCA0KTsKICBmb3VydGhPZkphbnVhcnlPZk5leHRZZWFyLnNldFVUQ0hvdXJzKDAsIDAsIDAsIDApOwogIHZhciBzdGFydE9mTmV4dFllYXIgPSBzdGFydE9mVVRDSVNPV2Vlayhmb3VydGhPZkphbnVhcnlPZk5leHRZZWFyLCBkaXJ0eU9wdGlvbnMpOwogIHZhciBmb3VydGhPZkphbnVhcnlPZlRoaXNZZWFyID0gbmV3IERhdGUoMCk7CiAgZm91cnRoT2ZKYW51YXJ5T2ZUaGlzWWVhci5zZXRVVENGdWxsWWVhcih5ZWFyLCAwLCA0KTsKICBmb3VydGhPZkphbnVhcnlPZlRoaXNZZWFyLnNldFVUQ0hvdXJzKDAsIDAsIDAsIDApOwogIHZhciBzdGFydE9mVGhpc1llYXIgPSBzdGFydE9mVVRDSVNPV2Vlayhmb3VydGhPZkphbnVhcnlPZlRoaXNZZWFyLCBkaXJ0eU9wdGlvbnMpOwoKICBpZiAoZGF0ZS5nZXRUaW1lKCkgPj0gc3RhcnRPZk5leHRZZWFyLmdldFRpbWUoKSkgewogICAgcmV0dXJuIHllYXIgKyAxOwogIH0gZWxzZSBpZiAoZGF0ZS5nZXRUaW1lKCkgPj0gc3RhcnRPZlRoaXNZZWFyLmdldFRpbWUoKSkgewogICAgcmV0dXJuIHllYXI7CiAgfSBlbHNlIHsKICAgIHJldHVybiB5ZWFyIC0gMTsKICB9Cn0gLy8gVGhpcyBmdW5jdGlvbiB3aWxsIGJlIGEgcGFydCBvZiBwdWJsaWMgQVBJIHdoZW4gVVRDIGZ1bmN0aW9uIHdpbGwgYmUgaW1wbGVtZW50ZWQuCi8vIFNlZSBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2lzc3Vlcy8zNzYKCgpmdW5jdGlvbiBzdGFydE9mVVRDSVNPV2Vla1llYXIoZGlydHlEYXRlLCBkaXJ0eU9wdGlvbnMpIHsKICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDEpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJzEgYXJndW1lbnQgcmVxdWlyZWQsIGJ1dCBvbmx5ICcgKyBhcmd1bWVudHMubGVuZ3RoICsgJyBwcmVzZW50Jyk7CiAgfQoKICB2YXIgeWVhciA9IGdldFVUQ0lTT1dlZWtZZWFyKGRpcnR5RGF0ZSwgZGlydHlPcHRpb25zKTsKICB2YXIgZm91cnRoT2ZKYW51YXJ5ID0gbmV3IERhdGUoMCk7CiAgZm91cnRoT2ZKYW51YXJ5LnNldFVUQ0Z1bGxZZWFyKHllYXIsIDAsIDQpOwogIGZvdXJ0aE9mSmFudWFyeS5zZXRVVENIb3VycygwLCAwLCAwLCAwKTsKICB2YXIgZGF0ZSA9IHN0YXJ0T2ZVVENJU09XZWVrKGZvdXJ0aE9mSmFudWFyeSwgZGlydHlPcHRpb25zKTsKICByZXR1cm4gZGF0ZTsKfQoKdmFyIE1JTExJU0VDT05EU19JTl9XRUVLID0gNjA0ODAwMDAwOyAvLyBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgYSBwYXJ0IG9mIHB1YmxpYyBBUEkgd2hlbiBVVEMgZnVuY3Rpb24gd2lsbCBiZSBpbXBsZW1lbnRlZC4KLy8gU2VlIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvaXNzdWVzLzM3NgoKZnVuY3Rpb24gZ2V0VVRDSVNPV2VlayhkaXJ0eURhdGUsIGRpcnR5T3B0aW9ucykgewogIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignMSBhcmd1bWVudCByZXF1aXJlZCwgYnV0IG9ubHkgJyArIGFyZ3VtZW50cy5sZW5ndGggKyAnIHByZXNlbnQnKTsKICB9CgogIHZhciBkYXRlID0gdG9EYXRlKGRpcnR5RGF0ZSwgZGlydHlPcHRpb25zKTsKICB2YXIgZGlmZiA9IHN0YXJ0T2ZVVENJU09XZWVrKGRhdGUsIGRpcnR5T3B0aW9ucykuZ2V0VGltZSgpIC0gc3RhcnRPZlVUQ0lTT1dlZWtZZWFyKGRhdGUsIGRpcnR5T3B0aW9ucykuZ2V0VGltZSgpOyAvLyBSb3VuZCB0aGUgbnVtYmVyIG9mIGRheXMgdG8gdGhlIG5lYXJlc3QgaW50ZWdlcgogIC8vIGJlY2F1c2UgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgaW4gYSB3ZWVrIGlzIG5vdCBjb25zdGFudAogIC8vIChlLmcuIGl0J3MgZGlmZmVyZW50IGluIHRoZSB3ZWVrIG9mIHRoZSBkYXlsaWdodCBzYXZpbmcgdGltZSBjbG9jayBzaGlmdCkKCiAgcmV0dXJuIE1hdGgucm91bmQoZGlmZiAvIE1JTExJU0VDT05EU19JTl9XRUVLKSArIDE7Cn0gLy8gVGhpcyBmdW5jdGlvbiB3aWxsIGJlIGEgcGFydCBvZiBwdWJsaWMgQVBJIHdoZW4gVVRDIGZ1bmN0aW9uIHdpbGwgYmUgaW1wbGVtZW50ZWQuCi8vIFNlZSBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2lzc3Vlcy8zNzYKCgpmdW5jdGlvbiBzdGFydE9mVVRDV2VlayhkaXJ0eURhdGUsIGRpcnR5T3B0aW9ucykgewogIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignMSBhcmd1bWVudCByZXF1aXJlZCwgYnV0IG9ubHkgJyArIGFyZ3VtZW50cy5sZW5ndGggKyAnIHByZXNlbnQnKTsKICB9CgogIHZhciBvcHRpb25zID0gZGlydHlPcHRpb25zIHx8IHt9OwogIHZhciBsb2NhbGUgPSBvcHRpb25zLmxvY2FsZTsKICB2YXIgbG9jYWxlV2Vla1N0YXJ0c09uID0gbG9jYWxlICYmIGxvY2FsZS5vcHRpb25zICYmIGxvY2FsZS5vcHRpb25zLndlZWtTdGFydHNPbjsKICB2YXIgZGVmYXVsdFdlZWtTdGFydHNPbiA9IGxvY2FsZVdlZWtTdGFydHNPbiA9PSBudWxsID8gMCA6IHRvSW50ZWdlcihsb2NhbGVXZWVrU3RhcnRzT24pOwogIHZhciB3ZWVrU3RhcnRzT24gPSBvcHRpb25zLndlZWtTdGFydHNPbiA9PSBudWxsID8gZGVmYXVsdFdlZWtTdGFydHNPbiA6IHRvSW50ZWdlcihvcHRpb25zLndlZWtTdGFydHNPbik7IC8vIFRlc3QgaWYgd2Vla1N0YXJ0c09uIGlzIGJldHdlZW4gMCBhbmQgNiBfYW5kXyBpcyBub3QgTmFOCgogIGlmICghKHdlZWtTdGFydHNPbiA+PSAwICYmIHdlZWtTdGFydHNPbiA8PSA2KSkgewogICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3dlZWtTdGFydHNPbiBtdXN0IGJlIGJldHdlZW4gMCBhbmQgNiBpbmNsdXNpdmVseScpOwogIH0KCiAgdmFyIGRhdGUgPSB0b0RhdGUoZGlydHlEYXRlLCBvcHRpb25zKTsKICB2YXIgZGF5ID0gZGF0ZS5nZXRVVENEYXkoKTsKICB2YXIgZGlmZiA9IChkYXkgPCB3ZWVrU3RhcnRzT24gPyA3IDogMCkgKyBkYXkgLSB3ZWVrU3RhcnRzT247CiAgZGF0ZS5zZXRVVENEYXRlKGRhdGUuZ2V0VVRDRGF0ZSgpIC0gZGlmZik7CiAgZGF0ZS5zZXRVVENIb3VycygwLCAwLCAwLCAwKTsKICByZXR1cm4gZGF0ZTsKfSAvLyBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgYSBwYXJ0IG9mIHB1YmxpYyBBUEkgd2hlbiBVVEMgZnVuY3Rpb24gd2lsbCBiZSBpbXBsZW1lbnRlZC4KLy8gU2VlIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvaXNzdWVzLzM3NgoKCmZ1bmN0aW9uIGdldFVUQ1dlZWtZZWFyKGRpcnR5RGF0ZSwgZGlydHlPcHRpb25zKSB7CiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAxKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCcxIGFyZ3VtZW50IHJlcXVpcmVkLCBidXQgb25seSAnICsgYXJndW1lbnRzLmxlbmd0aCArICcgcHJlc2VudCcpOwogIH0KCiAgdmFyIGRhdGUgPSB0b0RhdGUoZGlydHlEYXRlLCBkaXJ0eU9wdGlvbnMpOwogIHZhciB5ZWFyID0gZGF0ZS5nZXRVVENGdWxsWWVhcigpOwogIHZhciBvcHRpb25zID0gZGlydHlPcHRpb25zIHx8IHt9OwogIHZhciBsb2NhbGUgPSBvcHRpb25zLmxvY2FsZTsKICB2YXIgbG9jYWxlRmlyc3RXZWVrQ29udGFpbnNEYXRlID0gbG9jYWxlICYmIGxvY2FsZS5vcHRpb25zICYmIGxvY2FsZS5vcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZTsKICB2YXIgZGVmYXVsdEZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA9IGxvY2FsZUZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA9PSBudWxsID8gMSA6IHRvSW50ZWdlcihsb2NhbGVGaXJzdFdlZWtDb250YWluc0RhdGUpOwogIHZhciBmaXJzdFdlZWtDb250YWluc0RhdGUgPSBvcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA9PSBudWxsID8gZGVmYXVsdEZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA6IHRvSW50ZWdlcihvcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSk7IC8vIFRlc3QgaWYgd2Vla1N0YXJ0c09uIGlzIGJldHdlZW4gMSBhbmQgNyBfYW5kXyBpcyBub3QgTmFOCgogIGlmICghKGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA+PSAxICYmIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA8PSA3KSkgewogICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2ZpcnN0V2Vla0NvbnRhaW5zRGF0ZSBtdXN0IGJlIGJldHdlZW4gMSBhbmQgNyBpbmNsdXNpdmVseScpOwogIH0KCiAgdmFyIGZpcnN0V2Vla09mTmV4dFllYXIgPSBuZXcgRGF0ZSgwKTsKICBmaXJzdFdlZWtPZk5leHRZZWFyLnNldFVUQ0Z1bGxZZWFyKHllYXIgKyAxLCAwLCBmaXJzdFdlZWtDb250YWluc0RhdGUpOwogIGZpcnN0V2Vla09mTmV4dFllYXIuc2V0VVRDSG91cnMoMCwgMCwgMCwgMCk7CiAgdmFyIHN0YXJ0T2ZOZXh0WWVhciA9IHN0YXJ0T2ZVVENXZWVrKGZpcnN0V2Vla09mTmV4dFllYXIsIGRpcnR5T3B0aW9ucyk7CiAgdmFyIGZpcnN0V2Vla09mVGhpc1llYXIgPSBuZXcgRGF0ZSgwKTsKICBmaXJzdFdlZWtPZlRoaXNZZWFyLnNldFVUQ0Z1bGxZZWFyKHllYXIsIDAsIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSk7CiAgZmlyc3RXZWVrT2ZUaGlzWWVhci5zZXRVVENIb3VycygwLCAwLCAwLCAwKTsKICB2YXIgc3RhcnRPZlRoaXNZZWFyID0gc3RhcnRPZlVUQ1dlZWsoZmlyc3RXZWVrT2ZUaGlzWWVhciwgZGlydHlPcHRpb25zKTsKCiAgaWYgKGRhdGUuZ2V0VGltZSgpID49IHN0YXJ0T2ZOZXh0WWVhci5nZXRUaW1lKCkpIHsKICAgIHJldHVybiB5ZWFyICsgMTsKICB9IGVsc2UgaWYgKGRhdGUuZ2V0VGltZSgpID49IHN0YXJ0T2ZUaGlzWWVhci5nZXRUaW1lKCkpIHsKICAgIHJldHVybiB5ZWFyOwogIH0gZWxzZSB7CiAgICByZXR1cm4geWVhciAtIDE7CiAgfQp9IC8vIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSBhIHBhcnQgb2YgcHVibGljIEFQSSB3aGVuIFVUQyBmdW5jdGlvbiB3aWxsIGJlIGltcGxlbWVudGVkLgovLyBTZWUgaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9pc3N1ZXMvMzc2CgoKZnVuY3Rpb24gc3RhcnRPZlVUQ1dlZWtZZWFyKGRpcnR5RGF0ZSwgZGlydHlPcHRpb25zKSB7CiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAxKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCcxIGFyZ3VtZW50IHJlcXVpcmVkLCBidXQgb25seSAnICsgYXJndW1lbnRzLmxlbmd0aCArICcgcHJlc2VudCcpOwogIH0KCiAgdmFyIG9wdGlvbnMgPSBkaXJ0eU9wdGlvbnMgfHwge307CiAgdmFyIGxvY2FsZSA9IG9wdGlvbnMubG9jYWxlOwogIHZhciBsb2NhbGVGaXJzdFdlZWtDb250YWluc0RhdGUgPSBsb2NhbGUgJiYgbG9jYWxlLm9wdGlvbnMgJiYgbG9jYWxlLm9wdGlvbnMuZmlyc3RXZWVrQ29udGFpbnNEYXRlOwogIHZhciBkZWZhdWx0Rmlyc3RXZWVrQ29udGFpbnNEYXRlID0gbG9jYWxlRmlyc3RXZWVrQ29udGFpbnNEYXRlID09IG51bGwgPyAxIDogdG9JbnRlZ2VyKGxvY2FsZUZpcnN0V2Vla0NvbnRhaW5zRGF0ZSk7CiAgdmFyIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA9IG9wdGlvbnMuZmlyc3RXZWVrQ29udGFpbnNEYXRlID09IG51bGwgPyBkZWZhdWx0Rmlyc3RXZWVrQ29udGFpbnNEYXRlIDogdG9JbnRlZ2VyKG9wdGlvbnMuZmlyc3RXZWVrQ29udGFpbnNEYXRlKTsKICB2YXIgeWVhciA9IGdldFVUQ1dlZWtZZWFyKGRpcnR5RGF0ZSwgZGlydHlPcHRpb25zKTsKICB2YXIgZmlyc3RXZWVrID0gbmV3IERhdGUoMCk7CiAgZmlyc3RXZWVrLnNldFVUQ0Z1bGxZZWFyKHllYXIsIDAsIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSk7CiAgZmlyc3RXZWVrLnNldFVUQ0hvdXJzKDAsIDAsIDAsIDApOwogIHZhciBkYXRlID0gc3RhcnRPZlVUQ1dlZWsoZmlyc3RXZWVrLCBkaXJ0eU9wdGlvbnMpOwogIHJldHVybiBkYXRlOwp9Cgp2YXIgTUlMTElTRUNPTkRTX0lOX1dFRUskMSA9IDYwNDgwMDAwMDsgLy8gVGhpcyBmdW5jdGlvbiB3aWxsIGJlIGEgcGFydCBvZiBwdWJsaWMgQVBJIHdoZW4gVVRDIGZ1bmN0aW9uIHdpbGwgYmUgaW1wbGVtZW50ZWQuCi8vIFNlZSBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2lzc3Vlcy8zNzYKCmZ1bmN0aW9uIGdldFVUQ1dlZWsoZGlydHlEYXRlLCBkaXJ0eU9wdGlvbnMpIHsKICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDEpIHsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJzEgYXJndW1lbnQgcmVxdWlyZWQsIGJ1dCBvbmx5ICcgKyBhcmd1bWVudHMubGVuZ3RoICsgJyBwcmVzZW50Jyk7CiAgfQoKICB2YXIgZGF0ZSA9IHRvRGF0ZShkaXJ0eURhdGUsIGRpcnR5T3B0aW9ucyk7CiAgdmFyIGRpZmYgPSBzdGFydE9mVVRDV2VlayhkYXRlLCBkaXJ0eU9wdGlvbnMpLmdldFRpbWUoKSAtIHN0YXJ0T2ZVVENXZWVrWWVhcihkYXRlLCBkaXJ0eU9wdGlvbnMpLmdldFRpbWUoKTsgLy8gUm91bmQgdGhlIG51bWJlciBvZiBkYXlzIHRvIHRoZSBuZWFyZXN0IGludGVnZXIKICAvLyBiZWNhdXNlIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGluIGEgd2VlayBpcyBub3QgY29uc3RhbnQKICAvLyAoZS5nLiBpdCdzIGRpZmZlcmVudCBpbiB0aGUgd2VlayBvZiB0aGUgZGF5bGlnaHQgc2F2aW5nIHRpbWUgY2xvY2sgc2hpZnQpCgogIHJldHVybiBNYXRoLnJvdW5kKGRpZmYgLyBNSUxMSVNFQ09ORFNfSU5fV0VFSyQxKSArIDE7Cn0KCnZhciBkYXlQZXJpb2RFbnVtID0gewogIGFtOiAnYW0nLAogIHBtOiAncG0nLAogIG1pZG5pZ2h0OiAnbWlkbmlnaHQnLAogIG5vb246ICdub29uJywKICBtb3JuaW5nOiAnbW9ybmluZycsCiAgYWZ0ZXJub29uOiAnYWZ0ZXJub29uJywKICBldmVuaW5nOiAnZXZlbmluZycsCiAgbmlnaHQ6ICduaWdodCcKfTsKLyoKICogfCAgICAgfCBVbml0ICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgfCBVbml0ICAgICAgICAgICAgICAgICAgICAgICAgICAgfAogKiB8LS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18CiAqIHwgIGEgIHwgQU0sIFBNICAgICAgICAgICAgICAgICAgICAgICAgIHwgIEEqIHwgTWlsbGlzZWNvbmRzIGluIGRheSAgICAgICAgICAgIHwKICogfCAgYiAgfCBBTSwgUE0sIG5vb24sIG1pZG5pZ2h0ICAgICAgICAgfCAgQiAgfCBGbGV4aWJsZSBkYXkgcGVyaW9kICAgICAgICAgICAgfAogKiB8ICBjICB8IFN0YW5kLWFsb25lIGxvY2FsIGRheSBvZiB3ZWVrICB8ICBDKiB8IExvY2FsaXplZCBob3VyIHcvIGRheSBwZXJpb2QgICB8CiAqIHwgIGQgIHwgRGF5IG9mIG1vbnRoICAgICAgICAgICAgICAgICAgIHwgIEQgIHwgRGF5IG9mIHllYXIgICAgICAgICAgICAgICAgICAgIHwKICogfCAgZSAgfCBMb2NhbCBkYXkgb2Ygd2VlayAgICAgICAgICAgICAgfCAgRSAgfCBEYXkgb2Ygd2VlayAgICAgICAgICAgICAgICAgICAgfAogKiB8ICBmICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICBGKiB8IERheSBvZiB3ZWVrIGluIG1vbnRoICAgICAgICAgICB8CiAqIHwgIGcqIHwgTW9kaWZpZWQgSnVsaWFuIGRheSAgICAgICAgICAgIHwgIEcgIHwgRXJhICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwKICogfCAgaCAgfCBIb3VyIFsxLTEyXSAgICAgICAgICAgICAgICAgICAgfCAgSCAgfCBIb3VyIFswLTIzXSAgICAgICAgICAgICAgICAgICAgfAogKiB8ICBpISB8IElTTyBkYXkgb2Ygd2VlayAgICAgICAgICAgICAgICB8ICBJISB8IElTTyB3ZWVrIG9mIHllYXIgICAgICAgICAgICAgICB8CiAqIHwgIGoqIHwgTG9jYWxpemVkIGhvdXIgdy8gZGF5IHBlcmlvZCAgIHwgIEoqIHwgTG9jYWxpemVkIGhvdXIgdy9vIGRheSBwZXJpb2QgIHwKICogfCAgayAgfCBIb3VyIFsxLTI0XSAgICAgICAgICAgICAgICAgICAgfCAgSyAgfCBIb3VyIFswLTExXSAgICAgICAgICAgICAgICAgICAgfAogKiB8ICBsKiB8IChkZXByZWNhdGVkKSAgICAgICAgICAgICAgICAgICB8ICBMICB8IFN0YW5kLWFsb25lIG1vbnRoICAgICAgICAgICAgICB8CiAqIHwgIG0gIHwgTWludXRlICAgICAgICAgICAgICAgICAgICAgICAgIHwgIE0gIHwgTW9udGggICAgICAgICAgICAgICAgICAgICAgICAgIHwKICogfCAgbiAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgTiAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfAogKiB8ICBvISB8IE9yZGluYWwgbnVtYmVyIG1vZGlmaWVyICAgICAgICB8ICBPICB8IFRpbWV6b25lIChHTVQpICAgICAgICAgICAgICAgICB8CiAqIHwgIHAhIHwgTG9uZyBsb2NhbGl6ZWQgdGltZSAgICAgICAgICAgIHwgIFAhIHwgTG9uZyBsb2NhbGl6ZWQgZGF0ZSAgICAgICAgICAgIHwKICogfCAgcSAgfCBTdGFuZC1hbG9uZSBxdWFydGVyICAgICAgICAgICAgfCAgUSAgfCBRdWFydGVyICAgICAgICAgICAgICAgICAgICAgICAgfAogKiB8ICByKiB8IFJlbGF0ZWQgR3JlZ29yaWFuIHllYXIgICAgICAgICB8ICBSISB8IElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyICAgICAgICB8CiAqIHwgIHMgIHwgU2Vjb25kICAgICAgICAgICAgICAgICAgICAgICAgIHwgIFMgIHwgRnJhY3Rpb24gb2Ygc2Vjb25kICAgICAgICAgICAgIHwKICogfCAgdCEgfCBTZWNvbmRzIHRpbWVzdGFtcCAgICAgICAgICAgICAgfCAgVCEgfCBNaWxsaXNlY29uZHMgdGltZXN0YW1wICAgICAgICAgfAogKiB8ICB1ICB8IEV4dGVuZGVkIHllYXIgICAgICAgICAgICAgICAgICB8ICBVKiB8IEN5Y2xpYyB5ZWFyICAgICAgICAgICAgICAgICAgICB8CiAqIHwgIHYqIHwgVGltZXpvbmUgKGdlbmVyaWMgbm9uLWxvY2F0LikgIHwgIFYqIHwgVGltZXpvbmUgKGxvY2F0aW9uKSAgICAgICAgICAgIHwKICogfCAgdyAgfCBMb2NhbCB3ZWVrIG9mIHllYXIgICAgICAgICAgICAgfCAgVyogfCBXZWVrIG9mIG1vbnRoICAgICAgICAgICAgICAgICAgfAogKiB8ICB4ICB8IFRpbWV6b25lIChJU08tODYwMSB3L28gWikgICAgICB8ICBYICB8IFRpbWV6b25lIChJU08tODYwMSkgICAgICAgICAgICB8CiAqIHwgIHkgIHwgWWVhciAoYWJzKSAgICAgICAgICAgICAgICAgICAgIHwgIFkgIHwgTG9jYWwgd2Vlay1udW1iZXJpbmcgeWVhciAgICAgIHwKICogfCAgeiAgfCBUaW1lem9uZSAoc3BlY2lmaWMgbm9uLWxvY2F0LikgfCAgWiogfCBUaW1lem9uZSAoYWxpYXNlcykgICAgICAgICAgICAgfAogKgogKiBMZXR0ZXJzIG1hcmtlZCBieSAqIGFyZSBub3QgaW1wbGVtZW50ZWQgYnV0IHJlc2VydmVkIGJ5IFVuaWNvZGUgc3RhbmRhcmQuCiAqCiAqIExldHRlcnMgbWFya2VkIGJ5ICEgYXJlIG5vbi1zdGFuZGFyZCwgYnV0IGltcGxlbWVudGVkIGJ5IGRhdGUtZm5zOgogKiAtIGBvYCBtb2RpZmllcyB0aGUgcHJldmlvdXMgdG9rZW4gdG8gdHVybiBpdCBpbnRvIGFuIG9yZGluYWwgKHNlZSBgZm9ybWF0YCBkb2NzKQogKiAtIGBpYCBpcyBJU08gZGF5IG9mIHdlZWsuIEZvciBgaWAgYW5kIGBpaWAgaXMgcmV0dXJucyBudW1lcmljIElTTyB3ZWVrIGRheXMsCiAqICAgaS5lLiA3IGZvciBTdW5kYXksIDEgZm9yIE1vbmRheSwgZXRjLgogKiAtIGBJYCBpcyBJU08gd2VlayBvZiB5ZWFyLCBhcyBvcHBvc2VkIHRvIGB3YCB3aGljaCBpcyBsb2NhbCB3ZWVrIG9mIHllYXIuCiAqIC0gYFJgIGlzIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyLCBhcyBvcHBvc2VkIHRvIGBZYCB3aGljaCBpcyBsb2NhbCB3ZWVrLW51bWJlcmluZyB5ZWFyLgogKiAgIGBSYCBpcyBzdXBwb3NlZCB0byBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggYElgIGFuZCBgaWAKICogICBmb3IgdW5pdmVyc2FsIElTTyB3ZWVrLW51bWJlcmluZyBkYXRlLCB3aGVyZWFzCiAqICAgYFlgIGlzIHN1cHBvc2VkIHRvIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBgd2AgYW5kIGBlYAogKiAgIGZvciB3ZWVrLW51bWJlcmluZyBkYXRlIHNwZWNpZmljIHRvIHRoZSBsb2NhbGUuCiAqIC0gYFBgIGlzIGxvbmcgbG9jYWxpemVkIGRhdGUgZm9ybWF0CiAqIC0gYHBgIGlzIGxvbmcgbG9jYWxpemVkIHRpbWUgZm9ybWF0CiAqLwoKdmFyIGZvcm1hdHRlcnMgPSB7CiAgLy8gRXJhCiAgRzogZnVuY3Rpb24gRyhkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHsKICAgIHZhciBlcmEgPSBkYXRlLmdldFVUQ0Z1bGxZZWFyKCkgPiAwID8gMSA6IDA7CgogICAgc3dpdGNoICh0b2tlbikgewogICAgICAvLyBBRCwgQkMKICAgICAgY2FzZSAnRyc6CiAgICAgIGNhc2UgJ0dHJzoKICAgICAgY2FzZSAnR0dHJzoKICAgICAgICByZXR1cm4gbG9jYWxpemUuZXJhKGVyYSwgewogICAgICAgICAgd2lkdGg6ICdhYmJyZXZpYXRlZCcKICAgICAgICB9KTsKICAgICAgLy8gQSwgQgoKICAgICAgY2FzZSAnR0dHR0cnOgogICAgICAgIHJldHVybiBsb2NhbGl6ZS5lcmEoZXJhLCB7CiAgICAgICAgICB3aWR0aDogJ25hcnJvdycKICAgICAgICB9KTsKICAgICAgLy8gQW5ubyBEb21pbmksIEJlZm9yZSBDaHJpc3QKCiAgICAgIGNhc2UgJ0dHR0cnOgogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiBsb2NhbGl6ZS5lcmEoZXJhLCB7CiAgICAgICAgICB3aWR0aDogJ3dpZGUnCiAgICAgICAgfSk7CiAgICB9CiAgfSwKICAvLyBZZWFyCiAgeTogZnVuY3Rpb24geShkYXRlLCB0b2tlbiwgbG9jYWxpemUsIG9wdGlvbnMpIHsKICAgIC8vIEZyb20gaHR0cDovL3d3dy51bmljb2RlLm9yZy9yZXBvcnRzL3RyMzUvdHIzNS0zMS90cjM1LWRhdGVzLmh0bWwjRGF0ZV9Gb3JtYXRfdG9rZW5zCiAgICAvLyB8IFllYXIgICAgIHwgICAgIHkgfCB5eSB8ICAgeXl5IHwgIHl5eXkgfCB5eXl5eSB8CiAgICAvLyB8LS0tLS0tLS0tLXwtLS0tLS0tfC0tLS18LS0tLS0tLXwtLS0tLS0tfC0tLS0tLS18CiAgICAvLyB8IEFEIDEgICAgIHwgICAgIDEgfCAwMSB8ICAgMDAxIHwgIDAwMDEgfCAwMDAwMSB8CiAgICAvLyB8IEFEIDEyICAgIHwgICAgMTIgfCAxMiB8ICAgMDEyIHwgIDAwMTIgfCAwMDAxMiB8CiAgICAvLyB8IEFEIDEyMyAgIHwgICAxMjMgfCAyMyB8ICAgMTIzIHwgIDAxMjMgfCAwMDEyMyB8CiAgICAvLyB8IEFEIDEyMzQgIHwgIDEyMzQgfCAzNCB8ICAxMjM0IHwgIDEyMzQgfCAwMTIzNCB8CiAgICAvLyB8IEFEIDEyMzQ1IHwgMTIzNDUgfCA0NSB8IDEyMzQ1IHwgMTIzNDUgfCAxMjM0NSB8CiAgICB2YXIgc2lnbmVkWWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKTsgLy8gUmV0dXJucyAxIGZvciAxIEJDICh3aGljaCBpcyB5ZWFyIDAgaW4gSmF2YVNjcmlwdCkKCiAgICB2YXIgeWVhciA9IHNpZ25lZFllYXIgPiAwID8gc2lnbmVkWWVhciA6IDEgLSBzaWduZWRZZWFyOyAvLyBUd28gZGlnaXQgeWVhcgoKICAgIGlmICh0b2tlbiA9PT0gJ3l5JykgewogICAgICB2YXIgdHdvRGlnaXRZZWFyID0geWVhciAlIDEwMDsKICAgICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyh0d29EaWdpdFllYXIsIDIpOwogICAgfSAvLyBPcmRpbmFsIG51bWJlcgoKCiAgICBpZiAodG9rZW4gPT09ICd5bycpIHsKICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoeWVhciwgewogICAgICAgIHVuaXQ6ICd5ZWFyJwogICAgICB9KTsKICAgIH0gLy8gUGFkZGluZwoKCiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKHllYXIsIHRva2VuLmxlbmd0aCk7CiAgfSwKICAvLyBMb2NhbCB3ZWVrLW51bWJlcmluZyB5ZWFyCiAgWTogZnVuY3Rpb24gWShkYXRlLCB0b2tlbiwgbG9jYWxpemUsIG9wdGlvbnMpIHsKICAgIHZhciBzaWduZWRXZWVrWWVhciA9IGdldFVUQ1dlZWtZZWFyKGRhdGUsIG9wdGlvbnMpOwogICAgdmFyIHdlZWtZZWFyID0gc2lnbmVkV2Vla1llYXIgPiAwID8gc2lnbmVkV2Vla1llYXIgOiAxIC0gc2lnbmVkV2Vla1llYXI7IC8vIFR3byBkaWdpdCB5ZWFyCgogICAgaWYgKHRva2VuID09PSAnWVknKSB7CiAgICAgIHZhciB0d29EaWdpdFllYXIgPSB3ZWVrWWVhciAlIDEwMDsKICAgICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyh0d29EaWdpdFllYXIsIDIpOwogICAgfSAvLyBPcmRpbmFsIG51bWJlcgoKCiAgICBpZiAodG9rZW4gPT09ICdZbycpIHsKICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIod2Vla1llYXIsIHsKICAgICAgICB1bml0OiAneWVhcicKICAgICAgfSk7CiAgICB9IC8vIFBhZGRpbmcKCgogICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyh3ZWVrWWVhciwgdG9rZW4ubGVuZ3RoKTsKICB9LAogIC8vIElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyCiAgUjogZnVuY3Rpb24gUihkYXRlLCB0b2tlbiwgbG9jYWxpemUsIG9wdGlvbnMpIHsKICAgIHZhciBpc29XZWVrWWVhciA9IGdldFVUQ0lTT1dlZWtZZWFyKGRhdGUsIG9wdGlvbnMpOyAvLyBQYWRkaW5nCgogICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhpc29XZWVrWWVhciwgdG9rZW4ubGVuZ3RoKTsKICB9LAogIC8vIEV4dGVuZGVkIHllYXIuIFRoaXMgaXMgYSBzaW5nbGUgbnVtYmVyIGRlc2lnbmF0aW5nIHRoZSB5ZWFyIG9mIHRoaXMgY2FsZW5kYXIgc3lzdGVtLgogIC8vIFRoZSBtYWluIGRpZmZlcmVuY2UgYmV0d2VlbiBgeWAgYW5kIGB1YCBsb2NhbGl6ZXJzIGFyZSBCLkMuIHllYXJzOgogIC8vIHwgWWVhciB8IGB5YCB8IGB1YCB8CiAgLy8gfC0tLS0tLXwtLS0tLXwtLS0tLXwKICAvLyB8IEFDIDEgfCAgIDEgfCAgIDEgfAogIC8vIHwgQkMgMSB8ICAgMSB8ICAgMCB8CiAgLy8gfCBCQyAyIHwgICAyIHwgIC0xIHwKICAvLyBBbHNvIGB5eWAgYWx3YXlzIHJldHVybnMgdGhlIGxhc3QgdHdvIGRpZ2l0cyBvZiBhIHllYXIsCiAgLy8gd2hpbGUgYHV1YCBwYWRzIHNpbmdsZSBkaWdpdCB5ZWFycyB0byAyIGNoYXJhY3RlcnMgYW5kIHJldHVybnMgb3RoZXIgeWVhcnMgdW5jaGFuZ2VkLgogIHU6IGZ1bmN0aW9uIHUoZGF0ZSwgdG9rZW4sIGxvY2FsaXplLCBvcHRpb25zKSB7CiAgICB2YXIgeWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKTsKICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoeWVhciwgdG9rZW4ubGVuZ3RoKTsKICB9LAogIC8vIFF1YXJ0ZXIKICBROiBmdW5jdGlvbiBRKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSwgb3B0aW9ucykgewogICAgdmFyIHF1YXJ0ZXIgPSBNYXRoLmNlaWwoKGRhdGUuZ2V0VVRDTW9udGgoKSArIDEpIC8gMyk7CgogICAgc3dpdGNoICh0b2tlbikgewogICAgICAvLyAxLCAyLCAzLCA0CiAgICAgIGNhc2UgJ1EnOgogICAgICAgIHJldHVybiBTdHJpbmcocXVhcnRlcik7CiAgICAgIC8vIDAxLCAwMiwgMDMsIDA0CgogICAgICBjYXNlICdRUSc6CiAgICAgICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhxdWFydGVyLCAyKTsKICAgICAgLy8gMXN0LCAybmQsIDNyZCwgNHRoCgogICAgICBjYXNlICdRbyc6CiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIocXVhcnRlciwgewogICAgICAgICAgdW5pdDogJ3F1YXJ0ZXInCiAgICAgICAgfSk7CiAgICAgIC8vIFExLCBRMiwgUTMsIFE0CgogICAgICBjYXNlICdRUVEnOgogICAgICAgIHJldHVybiBsb2NhbGl6ZS5xdWFydGVyKHF1YXJ0ZXIsIHsKICAgICAgICAgIHdpZHRoOiAnYWJicmV2aWF0ZWQnLAogICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnCiAgICAgICAgfSk7CiAgICAgIC8vIDEsIDIsIDMsIDQgKG5hcnJvdyBxdWFydGVyOyBjb3VsZCBiZSBub3QgbnVtZXJpY2FsKQoKICAgICAgY2FzZSAnUVFRUVEnOgogICAgICAgIHJldHVybiBsb2NhbGl6ZS5xdWFydGVyKHF1YXJ0ZXIsIHsKICAgICAgICAgIHdpZHRoOiAnbmFycm93JywKICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJwogICAgICAgIH0pOwogICAgICAvLyAxc3QgcXVhcnRlciwgMm5kIHF1YXJ0ZXIsIC4uLgoKICAgICAgY2FzZSAnUVFRUSc6CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIGxvY2FsaXplLnF1YXJ0ZXIocXVhcnRlciwgewogICAgICAgICAgd2lkdGg6ICd3aWRlJywKICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJwogICAgICAgIH0pOwogICAgfQogIH0sCiAgLy8gU3RhbmQtYWxvbmUgcXVhcnRlcgogIHE6IGZ1bmN0aW9uIHEoZGF0ZSwgdG9rZW4sIGxvY2FsaXplLCBvcHRpb25zKSB7CiAgICB2YXIgcXVhcnRlciA9IE1hdGguY2VpbCgoZGF0ZS5nZXRVVENNb250aCgpICsgMSkgLyAzKTsKCiAgICBzd2l0Y2ggKHRva2VuKSB7CiAgICAgIC8vIDEsIDIsIDMsIDQKICAgICAgY2FzZSAncSc6CiAgICAgICAgcmV0dXJuIFN0cmluZyhxdWFydGVyKTsKICAgICAgLy8gMDEsIDAyLCAwMywgMDQKCiAgICAgIGNhc2UgJ3FxJzoKICAgICAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKHF1YXJ0ZXIsIDIpOwogICAgICAvLyAxc3QsIDJuZCwgM3JkLCA0dGgKCiAgICAgIGNhc2UgJ3FvJzoKICAgICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihxdWFydGVyLCB7CiAgICAgICAgICB1bml0OiAncXVhcnRlcicKICAgICAgICB9KTsKICAgICAgLy8gUTEsIFEyLCBRMywgUTQKCiAgICAgIGNhc2UgJ3FxcSc6CiAgICAgICAgcmV0dXJuIGxvY2FsaXplLnF1YXJ0ZXIocXVhcnRlciwgewogICAgICAgICAgd2lkdGg6ICdhYmJyZXZpYXRlZCcsCiAgICAgICAgICBjb250ZXh0OiAnc3RhbmRhbG9uZScKICAgICAgICB9KTsKICAgICAgLy8gMSwgMiwgMywgNCAobmFycm93IHF1YXJ0ZXI7IGNvdWxkIGJlIG5vdCBudW1lcmljYWwpCgogICAgICBjYXNlICdxcXFxcSc6CiAgICAgICAgcmV0dXJuIGxvY2FsaXplLnF1YXJ0ZXIocXVhcnRlciwgewogICAgICAgICAgd2lkdGg6ICduYXJyb3cnLAogICAgICAgICAgY29udGV4dDogJ3N0YW5kYWxvbmUnCiAgICAgICAgfSk7CiAgICAgIC8vIDFzdCBxdWFydGVyLCAybmQgcXVhcnRlciwgLi4uCgogICAgICBjYXNlICdxcXFxJzoKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gbG9jYWxpemUucXVhcnRlcihxdWFydGVyLCB7CiAgICAgICAgICB3aWR0aDogJ3dpZGUnLAogICAgICAgICAgY29udGV4dDogJ3N0YW5kYWxvbmUnCiAgICAgICAgfSk7CiAgICB9CiAgfSwKICAvLyBNb250aAogIE06IGZ1bmN0aW9uIE0oZGF0ZSwgdG9rZW4sIGxvY2FsaXplLCBvcHRpb25zKSB7CiAgICB2YXIgbW9udGggPSBkYXRlLmdldFVUQ01vbnRoKCk7CgogICAgc3dpdGNoICh0b2tlbikgewogICAgICAvLyAxLCAyLCAuLi4sIDEyCiAgICAgIGNhc2UgJ00nOgogICAgICAgIHJldHVybiBTdHJpbmcobW9udGggKyAxKTsKICAgICAgLy8gMDEsIDAyLCAuLi4sIDEyCgogICAgICBjYXNlICdNTSc6CiAgICAgICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhtb250aCArIDEsIDIpOwogICAgICAvLyAxc3QsIDJuZCwgLi4uLCAxMnRoCgogICAgICBjYXNlICdNbyc6CiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIobW9udGggKyAxLCB7CiAgICAgICAgICB1bml0OiAnbW9udGgnCiAgICAgICAgfSk7CiAgICAgIC8vIEphbiwgRmViLCAuLi4sIERlYwoKICAgICAgY2FzZSAnTU1NJzoKICAgICAgICByZXR1cm4gbG9jYWxpemUubW9udGgobW9udGgsIHsKICAgICAgICAgIHdpZHRoOiAnYWJicmV2aWF0ZWQnLAogICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnCiAgICAgICAgfSk7CiAgICAgIC8vIEosIEYsIC4uLiwgRAoKICAgICAgY2FzZSAnTU1NTU0nOgogICAgICAgIHJldHVybiBsb2NhbGl6ZS5tb250aChtb250aCwgewogICAgICAgICAgd2lkdGg6ICduYXJyb3cnLAogICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnCiAgICAgICAgfSk7CiAgICAgIC8vIEphbnVhcnksIEZlYnJ1YXJ5LCAuLi4sIERlY2VtYmVyCgogICAgICBjYXNlICdNTU1NJzoKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gbG9jYWxpemUubW9udGgobW9udGgsIHsKICAgICAgICAgIHdpZHRoOiAnd2lkZScsCiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycKICAgICAgICB9KTsKICAgIH0KICB9LAogIC8vIFN0YW5kLWFsb25lIG1vbnRoCiAgTDogZnVuY3Rpb24gTChkYXRlLCB0b2tlbiwgbG9jYWxpemUsIG9wdGlvbnMpIHsKICAgIHZhciBtb250aCA9IGRhdGUuZ2V0VVRDTW9udGgoKTsKCiAgICBzd2l0Y2ggKHRva2VuKSB7CiAgICAgIC8vIDEsIDIsIC4uLiwgMTIKICAgICAgY2FzZSAnTCc6CiAgICAgICAgcmV0dXJuIFN0cmluZyhtb250aCArIDEpOwogICAgICAvLyAwMSwgMDIsIC4uLiwgMTIKCiAgICAgIGNhc2UgJ0xMJzoKICAgICAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKG1vbnRoICsgMSwgMik7CiAgICAgIC8vIDFzdCwgMm5kLCAuLi4sIDEydGgKCiAgICAgIGNhc2UgJ0xvJzoKICAgICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihtb250aCArIDEsIHsKICAgICAgICAgIHVuaXQ6ICdtb250aCcKICAgICAgICB9KTsKICAgICAgLy8gSmFuLCBGZWIsIC4uLiwgRGVjCgogICAgICBjYXNlICdMTEwnOgogICAgICAgIHJldHVybiBsb2NhbGl6ZS5tb250aChtb250aCwgewogICAgICAgICAgd2lkdGg6ICdhYmJyZXZpYXRlZCcsCiAgICAgICAgICBjb250ZXh0OiAnc3RhbmRhbG9uZScKICAgICAgICB9KTsKICAgICAgLy8gSiwgRiwgLi4uLCBECgogICAgICBjYXNlICdMTExMTCc6CiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm1vbnRoKG1vbnRoLCB7CiAgICAgICAgICB3aWR0aDogJ25hcnJvdycsCiAgICAgICAgICBjb250ZXh0OiAnc3RhbmRhbG9uZScKICAgICAgICB9KTsKICAgICAgLy8gSmFudWFyeSwgRmVicnVhcnksIC4uLiwgRGVjZW1iZXIKCiAgICAgIGNhc2UgJ0xMTEwnOgogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiBsb2NhbGl6ZS5tb250aChtb250aCwgewogICAgICAgICAgd2lkdGg6ICd3aWRlJywKICAgICAgICAgIGNvbnRleHQ6ICdzdGFuZGFsb25lJwogICAgICAgIH0pOwogICAgfQogIH0sCiAgLy8gTG9jYWwgd2VlayBvZiB5ZWFyCiAgdzogZnVuY3Rpb24gdyhkYXRlLCB0b2tlbiwgbG9jYWxpemUsIG9wdGlvbnMpIHsKICAgIHZhciB3ZWVrID0gZ2V0VVRDV2VlayhkYXRlLCBvcHRpb25zKTsKCiAgICBpZiAodG9rZW4gPT09ICd3bycpIHsKICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIod2VlaywgewogICAgICAgIHVuaXQ6ICd3ZWVrJwogICAgICB9KTsKICAgIH0KCiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKHdlZWssIHRva2VuLmxlbmd0aCk7CiAgfSwKICAvLyBJU08gd2VlayBvZiB5ZWFyCiAgSTogZnVuY3Rpb24gSShkYXRlLCB0b2tlbiwgbG9jYWxpemUsIG9wdGlvbnMpIHsKICAgIHZhciBpc29XZWVrID0gZ2V0VVRDSVNPV2VlayhkYXRlLCBvcHRpb25zKTsKCiAgICBpZiAodG9rZW4gPT09ICdJbycpIHsKICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoaXNvV2VlaywgewogICAgICAgIHVuaXQ6ICd3ZWVrJwogICAgICB9KTsKICAgIH0KCiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGlzb1dlZWssIHRva2VuLmxlbmd0aCk7CiAgfSwKICAvLyBEYXkgb2YgdGhlIG1vbnRoCiAgZDogZnVuY3Rpb24gZChkYXRlLCB0b2tlbiwgbG9jYWxpemUsIG9wdGlvbnMpIHsKICAgIHZhciBkYXlPZk1vbnRoID0gZGF0ZS5nZXRVVENEYXRlKCk7CgogICAgaWYgKHRva2VuID09PSAnZG8nKSB7CiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGRheU9mTW9udGgsIHsKICAgICAgICB1bml0OiAnZGF0ZScKICAgICAgfSk7CiAgICB9CgogICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhkYXlPZk1vbnRoLCB0b2tlbi5sZW5ndGgpOwogIH0sCiAgLy8gRGF5IG9mIHllYXIKICBEOiBmdW5jdGlvbiBEKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSwgb3B0aW9ucykgewogICAgdmFyIGRheU9mWWVhciA9IGdldFVUQ0RheU9mWWVhcihkYXRlLCBvcHRpb25zKTsKCiAgICBpZiAodG9rZW4gPT09ICdEbycpIHsKICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoZGF5T2ZZZWFyLCB7CiAgICAgICAgdW5pdDogJ2RheU9mWWVhcicKICAgICAgfSk7CiAgICB9CgogICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhkYXlPZlllYXIsIHRva2VuLmxlbmd0aCk7CiAgfSwKICAvLyBEYXkgb2Ygd2VlawogIEU6IGZ1bmN0aW9uIEUoZGF0ZSwgdG9rZW4sIGxvY2FsaXplLCBvcHRpb25zKSB7CiAgICB2YXIgZGF5T2ZXZWVrID0gZGF0ZS5nZXRVVENEYXkoKTsKCiAgICBzd2l0Y2ggKHRva2VuKSB7CiAgICAgIC8vIFR1ZQogICAgICBjYXNlICdFJzoKICAgICAgY2FzZSAnRUUnOgogICAgICBjYXNlICdFRUUnOgogICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7CiAgICAgICAgICB3aWR0aDogJ2FiYnJldmlhdGVkJywKICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJwogICAgICAgIH0pOwogICAgICAvLyBUCgogICAgICBjYXNlICdFRUVFRSc6CiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHsKICAgICAgICAgIHdpZHRoOiAnbmFycm93JywKICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJwogICAgICAgIH0pOwogICAgICAvLyBUdQoKICAgICAgY2FzZSAnRUVFRUVFJzoKICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2VlaywgewogICAgICAgICAgd2lkdGg6ICdzaG9ydCcsCiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycKICAgICAgICB9KTsKICAgICAgLy8gVHVlc2RheQoKICAgICAgY2FzZSAnRUVFRSc6CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHsKICAgICAgICAgIHdpZHRoOiAnd2lkZScsCiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycKICAgICAgICB9KTsKICAgIH0KICB9LAogIC8vIExvY2FsIGRheSBvZiB3ZWVrCiAgZTogZnVuY3Rpb24gZShkYXRlLCB0b2tlbiwgbG9jYWxpemUsIG9wdGlvbnMpIHsKICAgIHZhciBkYXlPZldlZWsgPSBkYXRlLmdldFVUQ0RheSgpOwogICAgdmFyIGxvY2FsRGF5T2ZXZWVrID0gKGRheU9mV2VlayAtIG9wdGlvbnMud2Vla1N0YXJ0c09uICsgOCkgJSA3IHx8IDc7CgogICAgc3dpdGNoICh0b2tlbikgewogICAgICAvLyBOdW1lcmljYWwgdmFsdWUgKE50aCBkYXkgb2Ygd2VlayB3aXRoIGN1cnJlbnQgbG9jYWxlIG9yIHdlZWtTdGFydHNPbikKICAgICAgY2FzZSAnZSc6CiAgICAgICAgcmV0dXJuIFN0cmluZyhsb2NhbERheU9mV2Vlayk7CiAgICAgIC8vIFBhZGRlZCBudW1lcmljYWwgdmFsdWUKCiAgICAgIGNhc2UgJ2VlJzoKICAgICAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGxvY2FsRGF5T2ZXZWVrLCAyKTsKICAgICAgLy8gMXN0LCAybmQsIC4uLiwgN3RoCgogICAgICBjYXNlICdlbyc6CiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIobG9jYWxEYXlPZldlZWssIHsKICAgICAgICAgIHVuaXQ6ICdkYXknCiAgICAgICAgfSk7CgogICAgICBjYXNlICdlZWUnOgogICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7CiAgICAgICAgICB3aWR0aDogJ2FiYnJldmlhdGVkJywKICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJwogICAgICAgIH0pOwogICAgICAvLyBUCgogICAgICBjYXNlICdlZWVlZSc6CiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHsKICAgICAgICAgIHdpZHRoOiAnbmFycm93JywKICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJwogICAgICAgIH0pOwogICAgICAvLyBUdQoKICAgICAgY2FzZSAnZWVlZWVlJzoKICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2VlaywgewogICAgICAgICAgd2lkdGg6ICdzaG9ydCcsCiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycKICAgICAgICB9KTsKICAgICAgLy8gVHVlc2RheQoKICAgICAgY2FzZSAnZWVlZSc6CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHsKICAgICAgICAgIHdpZHRoOiAnd2lkZScsCiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycKICAgICAgICB9KTsKICAgIH0KICB9LAogIC8vIFN0YW5kLWFsb25lIGxvY2FsIGRheSBvZiB3ZWVrCiAgYzogZnVuY3Rpb24gYyhkYXRlLCB0b2tlbiwgbG9jYWxpemUsIG9wdGlvbnMpIHsKICAgIHZhciBkYXlPZldlZWsgPSBkYXRlLmdldFVUQ0RheSgpOwogICAgdmFyIGxvY2FsRGF5T2ZXZWVrID0gKGRheU9mV2VlayAtIG9wdGlvbnMud2Vla1N0YXJ0c09uICsgOCkgJSA3IHx8IDc7CgogICAgc3dpdGNoICh0b2tlbikgewogICAgICAvLyBOdW1lcmljYWwgdmFsdWUgKHNhbWUgYXMgaW4gYGVgKQogICAgICBjYXNlICdjJzoKICAgICAgICByZXR1cm4gU3RyaW5nKGxvY2FsRGF5T2ZXZWVrKTsKICAgICAgLy8gUGFkZGVkIG51bWJlcmljYWwgdmFsdWUKCiAgICAgIGNhc2UgJ2NjJzoKICAgICAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGxvY2FsRGF5T2ZXZWVrLCB0b2tlbi5sZW5ndGgpOwogICAgICAvLyAxc3QsIDJuZCwgLi4uLCA3dGgKCiAgICAgIGNhc2UgJ2NvJzoKICAgICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihsb2NhbERheU9mV2VlaywgewogICAgICAgICAgdW5pdDogJ2RheScKICAgICAgICB9KTsKCiAgICAgIGNhc2UgJ2NjYyc6CiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHsKICAgICAgICAgIHdpZHRoOiAnYWJicmV2aWF0ZWQnLAogICAgICAgICAgY29udGV4dDogJ3N0YW5kYWxvbmUnCiAgICAgICAgfSk7CiAgICAgIC8vIFQKCiAgICAgIGNhc2UgJ2NjY2NjJzoKICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2VlaywgewogICAgICAgICAgd2lkdGg6ICduYXJyb3cnLAogICAgICAgICAgY29udGV4dDogJ3N0YW5kYWxvbmUnCiAgICAgICAgfSk7CiAgICAgIC8vIFR1CgogICAgICBjYXNlICdjY2NjY2MnOgogICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7CiAgICAgICAgICB3aWR0aDogJ3Nob3J0JywKICAgICAgICAgIGNvbnRleHQ6ICdzdGFuZGFsb25lJwogICAgICAgIH0pOwogICAgICAvLyBUdWVzZGF5CgogICAgICBjYXNlICdjY2NjJzoKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2VlaywgewogICAgICAgICAgd2lkdGg6ICd3aWRlJywKICAgICAgICAgIGNvbnRleHQ6ICdzdGFuZGFsb25lJwogICAgICAgIH0pOwogICAgfQogIH0sCiAgLy8gSVNPIGRheSBvZiB3ZWVrCiAgaTogZnVuY3Rpb24gaShkYXRlLCB0b2tlbiwgbG9jYWxpemUsIG9wdGlvbnMpIHsKICAgIHZhciBkYXlPZldlZWsgPSBkYXRlLmdldFVUQ0RheSgpOwogICAgdmFyIGlzb0RheU9mV2VlayA9IGRheU9mV2VlayA9PT0gMCA/IDcgOiBkYXlPZldlZWs7CgogICAgc3dpdGNoICh0b2tlbikgewogICAgICAvLyAyCiAgICAgIGNhc2UgJ2knOgogICAgICAgIHJldHVybiBTdHJpbmcoaXNvRGF5T2ZXZWVrKTsKICAgICAgLy8gMDIKCiAgICAgIGNhc2UgJ2lpJzoKICAgICAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGlzb0RheU9mV2VlaywgdG9rZW4ubGVuZ3RoKTsKICAgICAgLy8gMm5kCgogICAgICBjYXNlICdpbyc6CiAgICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIoaXNvRGF5T2ZXZWVrLCB7CiAgICAgICAgICB1bml0OiAnZGF5JwogICAgICAgIH0pOwogICAgICAvLyBUdWUKCiAgICAgIGNhc2UgJ2lpaSc6CiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheShkYXlPZldlZWssIHsKICAgICAgICAgIHdpZHRoOiAnYWJicmV2aWF0ZWQnLAogICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnCiAgICAgICAgfSk7CiAgICAgIC8vIFQKCiAgICAgIGNhc2UgJ2lpaWlpJzoKICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2VlaywgewogICAgICAgICAgd2lkdGg6ICduYXJyb3cnLAogICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnCiAgICAgICAgfSk7CiAgICAgIC8vIFR1CgogICAgICBjYXNlICdpaWlpaWknOgogICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXkoZGF5T2ZXZWVrLCB7CiAgICAgICAgICB3aWR0aDogJ3Nob3J0JywKICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJwogICAgICAgIH0pOwogICAgICAvLyBUdWVzZGF5CgogICAgICBjYXNlICdpaWlpJzoKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5KGRheU9mV2VlaywgewogICAgICAgICAgd2lkdGg6ICd3aWRlJywKICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJwogICAgICAgIH0pOwogICAgfQogIH0sCiAgLy8gQU0gb3IgUE0KICBhOiBmdW5jdGlvbiBhKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSkgewogICAgdmFyIGhvdXJzID0gZGF0ZS5nZXRVVENIb3VycygpOwogICAgdmFyIGRheVBlcmlvZEVudW1WYWx1ZSA9IGhvdXJzIC8gMTIgPj0gMSA/ICdwbScgOiAnYW0nOwoKICAgIHN3aXRjaCAodG9rZW4pIHsKICAgICAgY2FzZSAnYSc6CiAgICAgIGNhc2UgJ2FhJzoKICAgICAgY2FzZSAnYWFhJzoKICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5UGVyaW9kKGRheVBlcmlvZEVudW1WYWx1ZSwgewogICAgICAgICAgd2lkdGg6ICdhYmJyZXZpYXRlZCcsCiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycKICAgICAgICB9KTsKCiAgICAgIGNhc2UgJ2FhYWFhJzoKICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5UGVyaW9kKGRheVBlcmlvZEVudW1WYWx1ZSwgewogICAgICAgICAgd2lkdGg6ICduYXJyb3cnLAogICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnCiAgICAgICAgfSk7CgogICAgICBjYXNlICdhYWFhJzoKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gbG9jYWxpemUuZGF5UGVyaW9kKGRheVBlcmlvZEVudW1WYWx1ZSwgewogICAgICAgICAgd2lkdGg6ICd3aWRlJywKICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJwogICAgICAgIH0pOwogICAgfQogIH0sCiAgLy8gQU0sIFBNLCBtaWRuaWdodCwgbm9vbgogIGI6IGZ1bmN0aW9uIGIoZGF0ZSwgdG9rZW4sIGxvY2FsaXplKSB7CiAgICB2YXIgaG91cnMgPSBkYXRlLmdldFVUQ0hvdXJzKCk7CiAgICB2YXIgZGF5UGVyaW9kRW51bVZhbHVlOwoKICAgIGlmIChob3VycyA9PT0gMTIpIHsKICAgICAgZGF5UGVyaW9kRW51bVZhbHVlID0gZGF5UGVyaW9kRW51bS5ub29uOwogICAgfSBlbHNlIGlmIChob3VycyA9PT0gMCkgewogICAgICBkYXlQZXJpb2RFbnVtVmFsdWUgPSBkYXlQZXJpb2RFbnVtLm1pZG5pZ2h0OwogICAgfSBlbHNlIHsKICAgICAgZGF5UGVyaW9kRW51bVZhbHVlID0gaG91cnMgLyAxMiA+PSAxID8gJ3BtJyA6ICdhbSc7CiAgICB9CgogICAgc3dpdGNoICh0b2tlbikgewogICAgICBjYXNlICdiJzoKICAgICAgY2FzZSAnYmInOgogICAgICBjYXNlICdiYmInOgogICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXlQZXJpb2QoZGF5UGVyaW9kRW51bVZhbHVlLCB7CiAgICAgICAgICB3aWR0aDogJ2FiYnJldmlhdGVkJywKICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJwogICAgICAgIH0pOwoKICAgICAgY2FzZSAnYmJiYmInOgogICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXlQZXJpb2QoZGF5UGVyaW9kRW51bVZhbHVlLCB7CiAgICAgICAgICB3aWR0aDogJ25hcnJvdycsCiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycKICAgICAgICB9KTsKCiAgICAgIGNhc2UgJ2JiYmInOgogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiBsb2NhbGl6ZS5kYXlQZXJpb2QoZGF5UGVyaW9kRW51bVZhbHVlLCB7CiAgICAgICAgICB3aWR0aDogJ3dpZGUnLAogICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnCiAgICAgICAgfSk7CiAgICB9CiAgfSwKICAvLyBpbiB0aGUgbW9ybmluZywgaW4gdGhlIGFmdGVybm9vbiwgaW4gdGhlIGV2ZW5pbmcsIGF0IG5pZ2h0CiAgQjogZnVuY3Rpb24gQihkYXRlLCB0b2tlbiwgbG9jYWxpemUpIHsKICAgIHZhciBob3VycyA9IGRhdGUuZ2V0VVRDSG91cnMoKTsKICAgIHZhciBkYXlQZXJpb2RFbnVtVmFsdWU7CgogICAgaWYgKGhvdXJzID49IDE3KSB7CiAgICAgIGRheVBlcmlvZEVudW1WYWx1ZSA9IGRheVBlcmlvZEVudW0uZXZlbmluZzsKICAgIH0gZWxzZSBpZiAoaG91cnMgPj0gMTIpIHsKICAgICAgZGF5UGVyaW9kRW51bVZhbHVlID0gZGF5UGVyaW9kRW51bS5hZnRlcm5vb247CiAgICB9IGVsc2UgaWYgKGhvdXJzID49IDQpIHsKICAgICAgZGF5UGVyaW9kRW51bVZhbHVlID0gZGF5UGVyaW9kRW51bS5tb3JuaW5nOwogICAgfSBlbHNlIHsKICAgICAgZGF5UGVyaW9kRW51bVZhbHVlID0gZGF5UGVyaW9kRW51bS5uaWdodDsKICAgIH0KCiAgICBzd2l0Y2ggKHRva2VuKSB7CiAgICAgIGNhc2UgJ0InOgogICAgICBjYXNlICdCQic6CiAgICAgIGNhc2UgJ0JCQic6CiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHsKICAgICAgICAgIHdpZHRoOiAnYWJicmV2aWF0ZWQnLAogICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnCiAgICAgICAgfSk7CgogICAgICBjYXNlICdCQkJCQic6CiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHsKICAgICAgICAgIHdpZHRoOiAnbmFycm93JywKICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJwogICAgICAgIH0pOwoKICAgICAgY2FzZSAnQkJCQic6CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIGxvY2FsaXplLmRheVBlcmlvZChkYXlQZXJpb2RFbnVtVmFsdWUsIHsKICAgICAgICAgIHdpZHRoOiAnd2lkZScsCiAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycKICAgICAgICB9KTsKICAgIH0KICB9LAogIC8vIEhvdXIgWzEtMTJdCiAgaDogZnVuY3Rpb24gaChkYXRlLCB0b2tlbiwgbG9jYWxpemUsIG9wdGlvbnMpIHsKICAgIHZhciBob3VycyA9IGRhdGUuZ2V0VVRDSG91cnMoKSAlIDEyOwoKICAgIGlmIChob3VycyA9PT0gMCkgewogICAgICBob3VycyA9IDEyOwogICAgfQoKICAgIGlmICh0b2tlbiA9PT0gJ2hvJykgewogICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihob3VycywgewogICAgICAgIHVuaXQ6ICdob3VyJwogICAgICB9KTsKICAgIH0KCiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGhvdXJzLCB0b2tlbi5sZW5ndGgpOwogIH0sCiAgLy8gSG91ciBbMC0yM10KICBIOiBmdW5jdGlvbiBIKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSwgb3B0aW9ucykgewogICAgdmFyIGhvdXJzID0gZGF0ZS5nZXRVVENIb3VycygpOwoKICAgIGlmICh0b2tlbiA9PT0gJ0hvJykgewogICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihob3VycywgewogICAgICAgIHVuaXQ6ICdob3VyJwogICAgICB9KTsKICAgIH0KCiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGhvdXJzLCB0b2tlbi5sZW5ndGgpOwogIH0sCiAgLy8gSG91ciBbMC0xMV0KICBLOiBmdW5jdGlvbiBLKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSwgb3B0aW9ucykgewogICAgdmFyIGhvdXJzID0gZGF0ZS5nZXRVVENIb3VycygpICUgMTI7CgogICAgaWYgKHRva2VuID09PSAnS28nKSB7CiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGhvdXJzLCB7CiAgICAgICAgdW5pdDogJ2hvdXInCiAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoaG91cnMsIHRva2VuLmxlbmd0aCk7CiAgfSwKICAvLyBIb3VyIFsxLTI0XQogIGs6IGZ1bmN0aW9uIGsoZGF0ZSwgdG9rZW4sIGxvY2FsaXplLCBvcHRpb25zKSB7CiAgICB2YXIgaG91cnMgPSBkYXRlLmdldFVUQ0hvdXJzKCk7CgogICAgaWYgKGhvdXJzID09PSAwKSB7CiAgICAgIGhvdXJzID0gMjQ7CiAgICB9CgogICAgaWYgKHRva2VuID09PSAna28nKSB7CiAgICAgIHJldHVybiBsb2NhbGl6ZS5vcmRpbmFsTnVtYmVyKGhvdXJzLCB7CiAgICAgICAgdW5pdDogJ2hvdXInCiAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MoaG91cnMsIHRva2VuLmxlbmd0aCk7CiAgfSwKICAvLyBNaW51dGUKICBtOiBmdW5jdGlvbiBtKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSwgb3B0aW9ucykgewogICAgdmFyIG1pbnV0ZXMgPSBkYXRlLmdldFVUQ01pbnV0ZXMoKTsKCiAgICBpZiAodG9rZW4gPT09ICdtbycpIHsKICAgICAgcmV0dXJuIGxvY2FsaXplLm9yZGluYWxOdW1iZXIobWludXRlcywgewogICAgICAgIHVuaXQ6ICdtaW51dGUnCiAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiBhZGRMZWFkaW5nWmVyb3MobWludXRlcywgdG9rZW4ubGVuZ3RoKTsKICB9LAogIC8vIFNlY29uZAogIHM6IGZ1bmN0aW9uIHMoZGF0ZSwgdG9rZW4sIGxvY2FsaXplLCBvcHRpb25zKSB7CiAgICB2YXIgc2Vjb25kcyA9IGRhdGUuZ2V0VVRDU2Vjb25kcygpOwoKICAgIGlmICh0b2tlbiA9PT0gJ3NvJykgewogICAgICByZXR1cm4gbG9jYWxpemUub3JkaW5hbE51bWJlcihzZWNvbmRzLCB7CiAgICAgICAgdW5pdDogJ3NlY29uZCcKICAgICAgfSk7CiAgICB9CgogICAgcmV0dXJuIGFkZExlYWRpbmdaZXJvcyhzZWNvbmRzLCB0b2tlbi5sZW5ndGgpOwogIH0sCiAgLy8gRnJhY3Rpb24gb2Ygc2Vjb25kCiAgUzogZnVuY3Rpb24gUyhkYXRlLCB0b2tlbiwgbG9jYWxpemUsIG9wdGlvbnMpIHsKICAgIHZhciBudW1iZXJPZkRpZ2l0cyA9IHRva2VuLmxlbmd0aDsKICAgIHZhciBtaWxsaXNlY29uZHMgPSBkYXRlLmdldFVUQ01pbGxpc2Vjb25kcygpOwogICAgdmFyIGZyYWN0aW9uYWxTZWNvbmRzID0gTWF0aC5mbG9vcihtaWxsaXNlY29uZHMgKiBNYXRoLnBvdygxMCwgbnVtYmVyT2ZEaWdpdHMgLSAzKSk7CiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKGZyYWN0aW9uYWxTZWNvbmRzLCBudW1iZXJPZkRpZ2l0cyk7CiAgfSwKICAvLyBUaW1lem9uZSAoSVNPLTg2MDEuIElmIG9mZnNldCBpcyAwLCBvdXRwdXQgaXMgYWx3YXlzIGAnWidgKQogIFg6IGZ1bmN0aW9uIFgoZGF0ZSwgdG9rZW4sIGxvY2FsaXplLCBvcHRpb25zKSB7CiAgICB2YXIgb3JpZ2luYWxEYXRlID0gb3B0aW9ucy5fb3JpZ2luYWxEYXRlIHx8IGRhdGU7CiAgICB2YXIgdGltZXpvbmVPZmZzZXQgPSBvcmlnaW5hbERhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTsKCiAgICBpZiAodGltZXpvbmVPZmZzZXQgPT09IDApIHsKICAgICAgcmV0dXJuICdaJzsKICAgIH0KCiAgICBzd2l0Y2ggKHRva2VuKSB7CiAgICAgIC8vIEhvdXJzIGFuZCBvcHRpb25hbCBtaW51dGVzCiAgICAgIGNhc2UgJ1gnOgogICAgICAgIHJldHVybiBmb3JtYXRUaW1lem9uZVdpdGhPcHRpb25hbE1pbnV0ZXModGltZXpvbmVPZmZzZXQpOwogICAgICAvLyBIb3VycywgbWludXRlcyBhbmQgb3B0aW9uYWwgc2Vjb25kcyB3aXRob3V0IGA6YCBkZWxpbWV0ZXIKICAgICAgLy8gTm90ZTogbmVpdGhlciBJU08tODYwMSBub3IgSmF2YVNjcmlwdCBzdXBwb3J0cyBzZWNvbmRzIGluIHRpbWV6b25lIG9mZnNldHMKICAgICAgLy8gc28gdGhpcyB0b2tlbiBhbHdheXMgaGFzIHRoZSBzYW1lIG91dHB1dCBhcyBgWFhgCgogICAgICBjYXNlICdYWFhYJzoKICAgICAgY2FzZSAnWFgnOgogICAgICAgIC8vIEhvdXJzIGFuZCBtaW51dGVzIHdpdGhvdXQgYDpgIGRlbGltZXRlcgogICAgICAgIHJldHVybiBmb3JtYXRUaW1lem9uZSh0aW1lem9uZU9mZnNldCk7CiAgICAgIC8vIEhvdXJzLCBtaW51dGVzIGFuZCBvcHRpb25hbCBzZWNvbmRzIHdpdGggYDpgIGRlbGltZXRlcgogICAgICAvLyBOb3RlOiBuZWl0aGVyIElTTy04NjAxIG5vciBKYXZhU2NyaXB0IHN1cHBvcnRzIHNlY29uZHMgaW4gdGltZXpvbmUgb2Zmc2V0cwogICAgICAvLyBzbyB0aGlzIHRva2VuIGFsd2F5cyBoYXMgdGhlIHNhbWUgb3V0cHV0IGFzIGBYWFhgCgogICAgICBjYXNlICdYWFhYWCc6CiAgICAgIGNhc2UgJ1hYWCc6IC8vIEhvdXJzIGFuZCBtaW51dGVzIHdpdGggYDpgIGRlbGltZXRlcgoKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gZm9ybWF0VGltZXpvbmUodGltZXpvbmVPZmZzZXQsICc6Jyk7CiAgICB9CiAgfSwKICAvLyBUaW1lem9uZSAoSVNPLTg2MDEuIElmIG9mZnNldCBpcyAwLCBvdXRwdXQgaXMgYCcrMDA6MDAnYCBvciBlcXVpdmFsZW50KQogIHg6IGZ1bmN0aW9uIHgoZGF0ZSwgdG9rZW4sIGxvY2FsaXplLCBvcHRpb25zKSB7CiAgICB2YXIgb3JpZ2luYWxEYXRlID0gb3B0aW9ucy5fb3JpZ2luYWxEYXRlIHx8IGRhdGU7CiAgICB2YXIgdGltZXpvbmVPZmZzZXQgPSBvcmlnaW5hbERhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTsKCiAgICBzd2l0Y2ggKHRva2VuKSB7CiAgICAgIC8vIEhvdXJzIGFuZCBvcHRpb25hbCBtaW51dGVzCiAgICAgIGNhc2UgJ3gnOgogICAgICAgIHJldHVybiBmb3JtYXRUaW1lem9uZVdpdGhPcHRpb25hbE1pbnV0ZXModGltZXpvbmVPZmZzZXQpOwogICAgICAvLyBIb3VycywgbWludXRlcyBhbmQgb3B0aW9uYWwgc2Vjb25kcyB3aXRob3V0IGA6YCBkZWxpbWV0ZXIKICAgICAgLy8gTm90ZTogbmVpdGhlciBJU08tODYwMSBub3IgSmF2YVNjcmlwdCBzdXBwb3J0cyBzZWNvbmRzIGluIHRpbWV6b25lIG9mZnNldHMKICAgICAgLy8gc28gdGhpcyB0b2tlbiBhbHdheXMgaGFzIHRoZSBzYW1lIG91dHB1dCBhcyBgeHhgCgogICAgICBjYXNlICd4eHh4JzoKICAgICAgY2FzZSAneHgnOgogICAgICAgIC8vIEhvdXJzIGFuZCBtaW51dGVzIHdpdGhvdXQgYDpgIGRlbGltZXRlcgogICAgICAgIHJldHVybiBmb3JtYXRUaW1lem9uZSh0aW1lem9uZU9mZnNldCk7CiAgICAgIC8vIEhvdXJzLCBtaW51dGVzIGFuZCBvcHRpb25hbCBzZWNvbmRzIHdpdGggYDpgIGRlbGltZXRlcgogICAgICAvLyBOb3RlOiBuZWl0aGVyIElTTy04NjAxIG5vciBKYXZhU2NyaXB0IHN1cHBvcnRzIHNlY29uZHMgaW4gdGltZXpvbmUgb2Zmc2V0cwogICAgICAvLyBzbyB0aGlzIHRva2VuIGFsd2F5cyBoYXMgdGhlIHNhbWUgb3V0cHV0IGFzIGB4eHhgCgogICAgICBjYXNlICd4eHh4eCc6CiAgICAgIGNhc2UgJ3h4eCc6IC8vIEhvdXJzIGFuZCBtaW51dGVzIHdpdGggYDpgIGRlbGltZXRlcgoKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gZm9ybWF0VGltZXpvbmUodGltZXpvbmVPZmZzZXQsICc6Jyk7CiAgICB9CiAgfSwKICAvLyBUaW1lem9uZSAoR01UKQogIE86IGZ1bmN0aW9uIE8oZGF0ZSwgdG9rZW4sIGxvY2FsaXplLCBvcHRpb25zKSB7CiAgICB2YXIgb3JpZ2luYWxEYXRlID0gb3B0aW9ucy5fb3JpZ2luYWxEYXRlIHx8IGRhdGU7CiAgICB2YXIgdGltZXpvbmVPZmZzZXQgPSBvcmlnaW5hbERhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTsKCiAgICBzd2l0Y2ggKHRva2VuKSB7CiAgICAgIC8vIFNob3J0CiAgICAgIGNhc2UgJ08nOgogICAgICBjYXNlICdPTyc6CiAgICAgIGNhc2UgJ09PTyc6CiAgICAgICAgcmV0dXJuICdHTVQnICsgZm9ybWF0VGltZXpvbmVTaG9ydCh0aW1lem9uZU9mZnNldCwgJzonKTsKICAgICAgLy8gTG9uZwoKICAgICAgY2FzZSAnT09PTyc6CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuICdHTVQnICsgZm9ybWF0VGltZXpvbmUodGltZXpvbmVPZmZzZXQsICc6Jyk7CiAgICB9CiAgfSwKICAvLyBUaW1lem9uZSAoc3BlY2lmaWMgbm9uLWxvY2F0aW9uKQogIHo6IGZ1bmN0aW9uIHooZGF0ZSwgdG9rZW4sIGxvY2FsaXplLCBvcHRpb25zKSB7CiAgICB2YXIgb3JpZ2luYWxEYXRlID0gb3B0aW9ucy5fb3JpZ2luYWxEYXRlIHx8IGRhdGU7CiAgICB2YXIgdGltZXpvbmVPZmZzZXQgPSBvcmlnaW5hbERhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKTsKCiAgICBzd2l0Y2ggKHRva2VuKSB7CiAgICAgIC8vIFNob3J0CiAgICAgIGNhc2UgJ3onOgogICAgICBjYXNlICd6eic6CiAgICAgIGNhc2UgJ3p6eic6CiAgICAgICAgcmV0dXJuICdHTVQnICsgZm9ybWF0VGltZXpvbmVTaG9ydCh0aW1lem9uZU9mZnNldCwgJzonKTsKICAgICAgLy8gTG9uZwoKICAgICAgY2FzZSAnenp6eic6CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuICdHTVQnICsgZm9ybWF0VGltZXpvbmUodGltZXpvbmVPZmZzZXQsICc6Jyk7CiAgICB9CiAgfSwKICAvLyBTZWNvbmRzIHRpbWVzdGFtcAogIHQ6IGZ1bmN0aW9uIHQoZGF0ZSwgdG9rZW4sIGxvY2FsaXplLCBvcHRpb25zKSB7CiAgICB2YXIgb3JpZ2luYWxEYXRlID0gb3B0aW9ucy5fb3JpZ2luYWxEYXRlIHx8IGRhdGU7CiAgICB2YXIgdGltZXN0YW1wID0gTWF0aC5mbG9vcihvcmlnaW5hbERhdGUuZ2V0VGltZSgpIC8gMTAwMCk7CiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKHRpbWVzdGFtcCwgdG9rZW4ubGVuZ3RoKTsKICB9LAogIC8vIE1pbGxpc2Vjb25kcyB0aW1lc3RhbXAKICBUOiBmdW5jdGlvbiBUKGRhdGUsIHRva2VuLCBsb2NhbGl6ZSwgb3B0aW9ucykgewogICAgdmFyIG9yaWdpbmFsRGF0ZSA9IG9wdGlvbnMuX29yaWdpbmFsRGF0ZSB8fCBkYXRlOwogICAgdmFyIHRpbWVzdGFtcCA9IG9yaWdpbmFsRGF0ZS5nZXRUaW1lKCk7CiAgICByZXR1cm4gYWRkTGVhZGluZ1plcm9zKHRpbWVzdGFtcCwgdG9rZW4ubGVuZ3RoKTsKICB9Cn07CgpmdW5jdGlvbiBhZGRMZWFkaW5nWmVyb3MobnVtYmVyLCB0YXJnZXRMZW5ndGgpIHsKICB2YXIgc2lnbiA9IG51bWJlciA8IDAgPyAnLScgOiAnJzsKICB2YXIgb3V0cHV0ID0gTWF0aC5hYnMobnVtYmVyKS50b1N0cmluZygpOwoKICB3aGlsZSAob3V0cHV0Lmxlbmd0aCA8IHRhcmdldExlbmd0aCkgewogICAgb3V0cHV0ID0gJzAnICsgb3V0cHV0OwogIH0KCiAgcmV0dXJuIHNpZ24gKyBvdXRwdXQ7Cn0KCmZ1bmN0aW9uIGZvcm1hdFRpbWV6b25lKG9mZnNldCwgZGlydHlEZWxpbWV0ZXIpIHsKICB2YXIgZGVsaW1ldGVyID0gZGlydHlEZWxpbWV0ZXIgfHwgJyc7CiAgdmFyIHNpZ24gPSBvZmZzZXQgPiAwID8gJy0nIDogJysnOwogIHZhciBhYnNPZmZzZXQgPSBNYXRoLmFicyhvZmZzZXQpOwogIHZhciBob3VycyA9IGFkZExlYWRpbmdaZXJvcyhNYXRoLmZsb29yKGFic09mZnNldCAvIDYwKSwgMik7CiAgdmFyIG1pbnV0ZXMgPSBhZGRMZWFkaW5nWmVyb3MoYWJzT2Zmc2V0ICUgNjAsIDIpOwogIHJldHVybiBzaWduICsgaG91cnMgKyBkZWxpbWV0ZXIgKyBtaW51dGVzOwp9CgpmdW5jdGlvbiBmb3JtYXRUaW1lem9uZVdpdGhPcHRpb25hbE1pbnV0ZXMob2Zmc2V0LCBkaXJ0eURlbGltZXRlcikgewogIGlmIChvZmZzZXQgJSA2MCA9PT0gMCkgewogICAgdmFyIHNpZ24gPSBvZmZzZXQgPiAwID8gJy0nIDogJysnOwogICAgcmV0dXJuIHNpZ24gKyBhZGRMZWFkaW5nWmVyb3MoTWF0aC5hYnMob2Zmc2V0KSAvIDYwLCAyKTsKICB9CgogIHJldHVybiBmb3JtYXRUaW1lem9uZShvZmZzZXQsIGRpcnR5RGVsaW1ldGVyKTsKfQoKZnVuY3Rpb24gZm9ybWF0VGltZXpvbmVTaG9ydChvZmZzZXQsIGRpcnR5RGVsaW1ldGVyKSB7CiAgdmFyIHNpZ24gPSBvZmZzZXQgPiAwID8gJy0nIDogJysnOwogIHZhciBhYnNPZmZzZXQgPSBNYXRoLmFicyhvZmZzZXQpOwogIHZhciBob3VycyA9IE1hdGguZmxvb3IoYWJzT2Zmc2V0IC8gNjApOwogIHZhciBtaW51dGVzID0gYWJzT2Zmc2V0ICUgNjA7CgogIGlmIChtaW51dGVzID09PSAwKSB7CiAgICByZXR1cm4gc2lnbiArIFN0cmluZyhob3Vycyk7CiAgfQoKICB2YXIgZGVsaW1ldGVyID0gZGlydHlEZWxpbWV0ZXIgfHwgJyc7CiAgcmV0dXJuIHNpZ24gKyBTdHJpbmcoaG91cnMpICsgZGVsaW1ldGVyICsgYWRkTGVhZGluZ1plcm9zKG1pbnV0ZXMsIDIpOwp9CgpmdW5jdGlvbiBkYXRlTG9uZ0Zvcm1hdHRlcihwYXR0ZXJuLCBmb3JtYXRMb25nLCBvcHRpb25zKSB7CiAgc3dpdGNoIChwYXR0ZXJuKSB7CiAgICBjYXNlICdQJzoKICAgICAgcmV0dXJuIGZvcm1hdExvbmcuZGF0ZSh7CiAgICAgICAgd2lkdGg6ICdzaG9ydCcKICAgICAgfSk7CgogICAgY2FzZSAnUFAnOgogICAgICByZXR1cm4gZm9ybWF0TG9uZy5kYXRlKHsKICAgICAgICB3aWR0aDogJ21lZGl1bScKICAgICAgfSk7CgogICAgY2FzZSAnUFBQJzoKICAgICAgcmV0dXJuIGZvcm1hdExvbmcuZGF0ZSh7CiAgICAgICAgd2lkdGg6ICdsb25nJwogICAgICB9KTsKCiAgICBjYXNlICdQUFBQJzoKICAgIGRlZmF1bHQ6CiAgICAgIHJldHVybiBmb3JtYXRMb25nLmRhdGUoewogICAgICAgIHdpZHRoOiAnZnVsbCcKICAgICAgfSk7CiAgfQp9CgpmdW5jdGlvbiB0aW1lTG9uZ0Zvcm1hdHRlcihwYXR0ZXJuLCBmb3JtYXRMb25nLCBvcHRpb25zKSB7CiAgc3dpdGNoIChwYXR0ZXJuKSB7CiAgICBjYXNlICdwJzoKICAgICAgcmV0dXJuIGZvcm1hdExvbmcudGltZSh7CiAgICAgICAgd2lkdGg6ICdzaG9ydCcKICAgICAgfSk7CgogICAgY2FzZSAncHAnOgogICAgICByZXR1cm4gZm9ybWF0TG9uZy50aW1lKHsKICAgICAgICB3aWR0aDogJ21lZGl1bScKICAgICAgfSk7CgogICAgY2FzZSAncHBwJzoKICAgICAgcmV0dXJuIGZvcm1hdExvbmcudGltZSh7CiAgICAgICAgd2lkdGg6ICdsb25nJwogICAgICB9KTsKCiAgICBjYXNlICdwcHBwJzoKICAgIGRlZmF1bHQ6CiAgICAgIHJldHVybiBmb3JtYXRMb25nLnRpbWUoewogICAgICAgIHdpZHRoOiAnZnVsbCcKICAgICAgfSk7CiAgfQp9CgpmdW5jdGlvbiBkYXRlVGltZUxvbmdGb3JtYXR0ZXIocGF0dGVybiwgZm9ybWF0TG9uZywgb3B0aW9ucykgewogIHZhciBtYXRjaFJlc3VsdCA9IHBhdHRlcm4ubWF0Y2goLyhQKykocCspPy8pOwogIHZhciBkYXRlUGF0dGVybiA9IG1hdGNoUmVzdWx0WzFdOwogIHZhciB0aW1lUGF0dGVybiA9IG1hdGNoUmVzdWx0WzJdOwoKICBpZiAoIXRpbWVQYXR0ZXJuKSB7CiAgICByZXR1cm4gZGF0ZUxvbmdGb3JtYXR0ZXIocGF0dGVybiwgZm9ybWF0TG9uZywgb3B0aW9ucyk7CiAgfQoKICB2YXIgZGF0ZVRpbWVGb3JtYXQ7CgogIHN3aXRjaCAoZGF0ZVBhdHRlcm4pIHsKICAgIGNhc2UgJ1AnOgogICAgICBkYXRlVGltZUZvcm1hdCA9IGZvcm1hdExvbmcuZGF0ZVRpbWUoewogICAgICAgIHdpZHRoOiAnc2hvcnQnCiAgICAgIH0pOwogICAgICBicmVhazsKCiAgICBjYXNlICdQUCc6CiAgICAgIGRhdGVUaW1lRm9ybWF0ID0gZm9ybWF0TG9uZy5kYXRlVGltZSh7CiAgICAgICAgd2lkdGg6ICdtZWRpdW0nCiAgICAgIH0pOwogICAgICBicmVhazsKCiAgICBjYXNlICdQUFAnOgogICAgICBkYXRlVGltZUZvcm1hdCA9IGZvcm1hdExvbmcuZGF0ZVRpbWUoewogICAgICAgIHdpZHRoOiAnbG9uZycKICAgICAgfSk7CiAgICAgIGJyZWFrOwoKICAgIGNhc2UgJ1BQUFAnOgogICAgZGVmYXVsdDoKICAgICAgZGF0ZVRpbWVGb3JtYXQgPSBmb3JtYXRMb25nLmRhdGVUaW1lKHsKICAgICAgICB3aWR0aDogJ2Z1bGwnCiAgICAgIH0pOwogICAgICBicmVhazsKICB9CgogIHJldHVybiBkYXRlVGltZUZvcm1hdC5yZXBsYWNlKCd7e2RhdGV9fScsIGRhdGVMb25nRm9ybWF0dGVyKGRhdGVQYXR0ZXJuLCBmb3JtYXRMb25nLCBvcHRpb25zKSkucmVwbGFjZSgne3t0aW1lfX0nLCB0aW1lTG9uZ0Zvcm1hdHRlcih0aW1lUGF0dGVybiwgZm9ybWF0TG9uZywgb3B0aW9ucykpOwp9Cgp2YXIgbG9uZ0Zvcm1hdHRlcnMgPSB7CiAgcDogdGltZUxvbmdGb3JtYXR0ZXIsCiAgUDogZGF0ZVRpbWVMb25nRm9ybWF0dGVyCn07Ci8qKgogKiBAbmFtZSBzdWJNaWxsaXNlY29uZHMKICogQGNhdGVnb3J5IE1pbGxpc2Vjb25kIEhlbHBlcnMKICogQHN1bW1hcnkgU3VidHJhY3QgdGhlIHNwZWNpZmllZCBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGZyb20gdGhlIGdpdmVuIGRhdGUuCiAqCiAqIEBkZXNjcmlwdGlvbgogKiBTdWJ0cmFjdCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiBtaWxsaXNlY29uZHMgZnJvbSB0aGUgZ2l2ZW4gZGF0ZS4KICoKICogQHBhcmFtIHtEYXRlfFN0cmluZ3xOdW1iZXJ9IGRhdGUgLSB0aGUgZGF0ZSB0byBiZSBjaGFuZ2VkCiAqIEBwYXJhbSB7TnVtYmVyfSBhbW91bnQgLSB0aGUgYW1vdW50IG9mIG1pbGxpc2Vjb25kcyB0byBiZSBzdWJ0cmFjdGVkCiAqIEBwYXJhbSB7T3B0aW9uc30gW29wdGlvbnNdIC0gdGhlIG9iamVjdCB3aXRoIG9wdGlvbnMuIFNlZSBbT3B0aW9uc117QGxpbmsgaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy9PcHRpb25zfQogKiBAcGFyYW0gezB8MXwyfSBbb3B0aW9ucy5hZGRpdGlvbmFsRGlnaXRzPTJdIC0gcGFzc2VkIHRvIGB0b0RhdGVgLiBTZWUgW3RvRGF0ZV17QGxpbmsgaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy90b0RhdGV9CiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgbmV3IGRhdGUgd2l0aCB0aGUgbWlsbGlzZWNvbmRzIHN1YnRyYWN0ZWQKICogQHRocm93cyB7VHlwZUVycm9yfSAyIGFyZ3VtZW50cyByZXF1aXJlZAogKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy5hZGRpdGlvbmFsRGlnaXRzYCBtdXN0IGJlIDAsIDEgb3IgMgogKgogKiBAZXhhbXBsZQogKiAvLyBTdWJ0cmFjdCA3NTAgbWlsbGlzZWNvbmRzIGZyb20gMTAgSnVseSAyMDE0IDEyOjQ1OjMwLjAwMDoKICogdmFyIHJlc3VsdCA9IHN1Yk1pbGxpc2Vjb25kcyhuZXcgRGF0ZSgyMDE0LCA2LCAxMCwgMTIsIDQ1LCAzMCwgMCksIDc1MCkKICogLy89PiBUaHUgSnVsIDEwIDIwMTQgMTI6NDU6MjkuMjUwCiAqLwoKZnVuY3Rpb24gc3ViTWlsbGlzZWNvbmRzKGRpcnR5RGF0ZSwgZGlydHlBbW91bnQsIGRpcnR5T3B0aW9ucykgewogIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignMiBhcmd1bWVudHMgcmVxdWlyZWQsIGJ1dCBvbmx5ICcgKyBhcmd1bWVudHMubGVuZ3RoICsgJyBwcmVzZW50Jyk7CiAgfQoKICB2YXIgYW1vdW50ID0gdG9JbnRlZ2VyKGRpcnR5QW1vdW50KTsKICByZXR1cm4gYWRkTWlsbGlzZWNvbmRzKGRpcnR5RGF0ZSwgLWFtb3VudCwgZGlydHlPcHRpb25zKTsKfQoKdmFyIHByb3RlY3RlZFRva2VucyA9IFsnRCcsICdERCcsICdZWScsICdZWVlZJ107CgpmdW5jdGlvbiBpc1Byb3RlY3RlZFRva2VuKHRva2VuKSB7CiAgcmV0dXJuIHByb3RlY3RlZFRva2Vucy5pbmRleE9mKHRva2VuKSAhPT0gLTE7Cn0KCmZ1bmN0aW9uIHRocm93UHJvdGVjdGVkRXJyb3IodG9rZW4pIHsKICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignYG9wdGlvbnMuYXdhcmVPZlVuaWNvZGVUb2tlbnNgIG11c3QgYmUgc2V0IHRvIGB0cnVlYCB0byB1c2UgYCcgKyB0b2tlbiArICdgIHRva2VuOyBzZWU6IGh0dHBzOi8vZ2l0LmlvL2Z4Q3lyJyk7Cn0gLy8gVGhpcyBSZWdFeHAgY29uc2lzdHMgb2YgdGhyZWUgcGFydHMgc2VwYXJhdGVkIGJ5IGB8YDoKLy8gLSBbeVlRcU1Md0lkRGVjaWhIS2ttc11vIG1hdGNoZXMgYW55IGF2YWlsYWJsZSBvcmRpbmFsIG51bWJlciB0b2tlbgovLyAgIChvbmUgb2YgdGhlIGNlcnRhaW4gbGV0dGVycyBmb2xsb3dlZCBieSBgb2ApCi8vIC0gKFx3KVwxKiBtYXRjaGVzIGFueSBzZXF1ZW5jZXMgb2YgdGhlIHNhbWUgbGV0dGVyCi8vIC0gJycgbWF0Y2hlcyB0d28gcXVvdGUgY2hhcmFjdGVycyBpbiBhIHJvdwovLyAtICcoJyd8W14nXSkrKCd8JCkgbWF0Y2hlcyBhbnl0aGluZyBzdXJyb3VuZGVkIGJ5IHR3byBxdW90ZSBjaGFyYWN0ZXJzICgnKSwKLy8gICBleGNlcHQgYSBzaW5nbGUgcXVvdGUgc3ltYm9sLCB3aGljaCBlbmRzIHRoZSBzZXF1ZW5jZS4KLy8gICBUd28gcXVvdGUgY2hhcmFjdGVycyBkbyBub3QgZW5kIHRoZSBzZXF1ZW5jZS4KLy8gICBJZiB0aGVyZSBpcyBubyBtYXRjaGluZyBzaW5nbGUgcXVvdGUKLy8gICB0aGVuIHRoZSBzZXF1ZW5jZSB3aWxsIGNvbnRpbnVlIHVudGlsIHRoZSBlbmQgb2YgdGhlIHN0cmluZy4KLy8gLSAuIG1hdGNoZXMgYW55IHNpbmdsZSBjaGFyYWN0ZXIgdW5tYXRjaGVkIGJ5IHByZXZpb3VzIHBhcnRzIG9mIHRoZSBSZWdFeHBzCgoKdmFyIGZvcm1hdHRpbmdUb2tlbnNSZWdFeHAgPSAvW3lZUXFNTHdJZERlY2loSEtrbXNdb3woXHcpXDEqfCcnfCcoJyd8W14nXSkrKCd8JCl8Li9nOyAvLyBUaGlzIFJlZ0V4cCBjYXRjaGVzIHN5bWJvbHMgZXNjYXBlZCBieSBxdW90ZXMsIGFuZCBhbHNvCi8vIHNlcXVlbmNlcyBvZiBzeW1ib2xzIFAsIHAsIGFuZCB0aGUgY29tYmluYXRpb25zIGxpa2UgYFBQUFBQUFBwcHBwcGAKCnZhciBsb25nRm9ybWF0dGluZ1Rva2Vuc1JlZ0V4cCA9IC9QK3ArfFArfHArfCcnfCcoJyd8W14nXSkrKCd8JCl8Li9nOwp2YXIgZXNjYXBlZFN0cmluZ1JlZ0V4cCA9IC9eJyguKj8pJz8kLzsKdmFyIGRvdWJsZVF1b3RlUmVnRXhwID0gLycnL2c7Ci8qKgogKiBAbmFtZSBmb3JtYXQKICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzCiAqIEBzdW1tYXJ5IEZvcm1hdCB0aGUgZGF0ZS4KICoKICogQGRlc2NyaXB0aW9uCiAqIFJldHVybiB0aGUgZm9ybWF0dGVkIGRhdGUgc3RyaW5nIGluIHRoZSBnaXZlbiBmb3JtYXQuIFRoZSByZXN1bHQgbWF5IHZhcnkgYnkgbG9jYWxlLgogKgogKiA+IOKaoO+4jyBQbGVhc2Ugbm90ZSB0aGF0IHRoZSBgZm9ybWF0YCB0b2tlbnMgZGlmZmVyIGZyb20gTW9tZW50LmpzIGFuZCBvdGhlciBsaWJyYXJpZXMuCiAqID4gU2VlOiBodHRwczovL2dpdC5pby9meEN5cgogKgogKiBUaGUgY2hhcmFjdGVycyB3cmFwcGVkIGJldHdlZW4gdHdvIHNpbmdsZSBxdW90ZXMgY2hhcmFjdGVycyAoJykgYXJlIGVzY2FwZWQuCiAqIFR3byBzaW5nbGUgcXVvdGVzIGluIGEgcm93LCB3aGV0aGVyIGluc2lkZSBvciBvdXRzaWRlIGEgcXVvdGVkIHNlcXVlbmNlLCByZXByZXNlbnQgYSAncmVhbCcgc2luZ2xlIHF1b3RlLgogKiAoc2VlIHRoZSBsYXN0IGV4YW1wbGUpCiAqCiAqIEZvcm1hdCBvZiB0aGUgc3RyaW5nIGlzIGJhc2VkIG9uIFVuaWNvZGUgVGVjaG5pY2FsIFN0YW5kYXJkICMzNToKICogaHR0cHM6Ly93d3cudW5pY29kZS5vcmcvcmVwb3J0cy90cjM1L3RyMzUtZGF0ZXMuaHRtbCNEYXRlX0ZpZWxkX1N5bWJvbF9UYWJsZQogKiB3aXRoIGEgZmV3IGFkZGl0aW9ucyAoc2VlIG5vdGUgNyBiZWxvdyB0aGUgdGFibGUpLgogKgogKiBBY2NlcHRlZCBwYXR0ZXJuczoKICogfCBVbml0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUGF0dGVybiB8IFJlc3VsdCBleGFtcGxlcyAgICAgICAgICAgICAgICAgICB8IE5vdGVzIHwKICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLXwKICogfCBFcmEgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgRy4uR0dHICB8IEFELCBCQyAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgR0dHRyAgICB8IEFubm8gRG9taW5pLCBCZWZvcmUgQ2hyaXN0ICAgICAgICB8IDIgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgR0dHR0cgICB8IEEsIEIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCBDYWxlbmRhciB5ZWFyICAgICAgICAgICAgICAgICAgIHwgeSAgICAgICB8IDQ0LCAxLCAxOTAwLCAyMDE3ICAgICAgICAgICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeW8gICAgICB8IDQ0dGgsIDFzdCwgMHRoLCAxN3RoICAgICAgICAgICAgICB8IDUsNyAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeXkgICAgICB8IDQ0LCAwMSwgMDAsIDE3ICAgICAgICAgICAgICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeXl5ICAgICB8IDA0NCwgMDAxLCAxOTAwLCAyMDE3ICAgICAgICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeXl5eSAgICB8IDAwNDQsIDAwMDEsIDE5MDAsIDIwMTcgICAgICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeXl5eXkgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDMsNSAgIHwKICogfCBMb2NhbCB3ZWVrLW51bWJlcmluZyB5ZWFyICAgICAgIHwgWSAgICAgICB8IDQ0LCAxLCAxOTAwLCAyMDE3ICAgICAgICAgICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWW8gICAgICB8IDQ0dGgsIDFzdCwgMTkwMHRoLCAyMDE3dGggICAgICAgICB8IDUsNyAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWVkgICAgICB8IDQ0LCAwMSwgMDAsIDE3ICAgICAgICAgICAgICAgICAgICB8IDUsOCAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWVlZICAgICB8IDA0NCwgMDAxLCAxOTAwLCAyMDE3ICAgICAgICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWVlZWSAgICB8IDAwNDQsIDAwMDEsIDE5MDAsIDIwMTcgICAgICAgICAgICB8IDUsOCAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWVlZWVkgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDMsNSAgIHwKICogfCBJU08gd2Vlay1udW1iZXJpbmcgeWVhciAgICAgICAgIHwgUiAgICAgICB8IC00MywgMCwgMSwgMTkwMCwgMjAxNyAgICAgICAgICAgICB8IDUsNyAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUlIgICAgICB8IC00MywgMDAsIDAxLCAxOTAwLCAyMDE3ICAgICAgICAgICB8IDUsNyAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUlJSICAgICB8IC0wNDMsIDAwMCwgMDAxLCAxOTAwLCAyMDE3ICAgICAgICB8IDUsNyAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUlJSUiAgICB8IC0wMDQzLCAwMDAwLCAwMDAxLCAxOTAwLCAyMDE3ICAgICB8IDUsNyAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUlJSUlIgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDMsNSw3IHwKICogfCBFeHRlbmRlZCB5ZWFyICAgICAgICAgICAgICAgICAgIHwgdSAgICAgICB8IC00MywgMCwgMSwgMTkwMCwgMjAxNyAgICAgICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgdXUgICAgICB8IC00MywgMDEsIDE5MDAsIDIwMTcgICAgICAgICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgdXV1ICAgICB8IC0wNDMsIDAwMSwgMTkwMCwgMjAxNyAgICAgICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgdXV1dSAgICB8IC0wMDQzLCAwMDAxLCAxOTAwLCAyMDE3ICAgICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgdXV1dXUgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDMsNSAgIHwKICogfCBRdWFydGVyIChmb3JtYXR0aW5nKSAgICAgICAgICAgIHwgUSAgICAgICB8IDEsIDIsIDMsIDQgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUW8gICAgICB8IDFzdCwgMm5kLCAzcmQsIDR0aCAgICAgICAgICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUVEgICAgICB8IDAxLCAwMiwgMDMsIDA0ICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUVFRICAgICB8IFExLCBRMiwgUTMsIFE0ICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUVFRUSAgICB8IDFzdCBxdWFydGVyLCAybmQgcXVhcnRlciwgLi4uICAgICB8IDIgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUVFRUVEgICB8IDEsIDIsIDMsIDQgICAgICAgICAgICAgICAgICAgICAgICB8IDQgICAgIHwKICogfCBRdWFydGVyIChzdGFuZC1hbG9uZSkgICAgICAgICAgIHwgcSAgICAgICB8IDEsIDIsIDMsIDQgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgcW8gICAgICB8IDFzdCwgMm5kLCAzcmQsIDR0aCAgICAgICAgICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgcXEgICAgICB8IDAxLCAwMiwgMDMsIDA0ICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgcXFxICAgICB8IFExLCBRMiwgUTMsIFE0ICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgcXFxcSAgICB8IDFzdCBxdWFydGVyLCAybmQgcXVhcnRlciwgLi4uICAgICB8IDIgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgcXFxcXEgICB8IDEsIDIsIDMsIDQgICAgICAgICAgICAgICAgICAgICAgICB8IDQgICAgIHwKICogfCBNb250aCAoZm9ybWF0dGluZykgICAgICAgICAgICAgIHwgTSAgICAgICB8IDEsIDIsIC4uLiwgMTIgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTW8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDEydGggICAgICAgICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTU0gICAgICB8IDAxLCAwMiwgLi4uLCAxMiAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTU1NICAgICB8IEphbiwgRmViLCAuLi4sIERlYyAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTU1NTSAgICB8IEphbnVhcnksIEZlYnJ1YXJ5LCAuLi4sIERlY2VtYmVyICB8IDIgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTU1NTU0gICB8IEosIEYsIC4uLiwgRCAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCBNb250aCAoc3RhbmQtYWxvbmUpICAgICAgICAgICAgIHwgTCAgICAgICB8IDEsIDIsIC4uLiwgMTIgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTG8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDEydGggICAgICAgICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTEwgICAgICB8IDAxLCAwMiwgLi4uLCAxMiAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTExMICAgICB8IEphbiwgRmViLCAuLi4sIERlYyAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTExMTCAgICB8IEphbnVhcnksIEZlYnJ1YXJ5LCAuLi4sIERlY2VtYmVyICB8IDIgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgTExMTEwgICB8IEosIEYsIC4uLiwgRCAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCBMb2NhbCB3ZWVrIG9mIHllYXIgICAgICAgICAgICAgIHwgdyAgICAgICB8IDEsIDIsIC4uLiwgNTMgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgd28gICAgICB8IDFzdCwgMm5kLCAuLi4sIDUzdGggICAgICAgICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgd3cgICAgICB8IDAxLCAwMiwgLi4uLCA1MyAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCBJU08gd2VlayBvZiB5ZWFyICAgICAgICAgICAgICAgIHwgSSAgICAgICB8IDEsIDIsIC4uLiwgNTMgICAgICAgICAgICAgICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgSW8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDUzdGggICAgICAgICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgSUkgICAgICB8IDAxLCAwMiwgLi4uLCA1MyAgICAgICAgICAgICAgICAgICB8IDcgICAgIHwKICogfCBEYXkgb2YgbW9udGggICAgICAgICAgICAgICAgICAgIHwgZCAgICAgICB8IDEsIDIsIC4uLiwgMzEgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZG8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDMxc3QgICAgICAgICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZGQgICAgICB8IDAxLCAwMiwgLi4uLCAzMSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCBEYXkgb2YgeWVhciAgICAgICAgICAgICAgICAgICAgIHwgRCAgICAgICB8IDEsIDIsIC4uLiwgMzY1LCAzNjYgICAgICAgICAgICAgICB8IDggICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgRG8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDM2NXRoLCAzNjZ0aCAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgREQgICAgICB8IDAxLCAwMiwgLi4uLCAzNjUsIDM2NiAgICAgICAgICAgICB8IDggICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgREREICAgICB8IDAwMSwgMDAyLCAuLi4sIDM2NSwgMzY2ICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgRERERCAgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDMgICAgIHwKICogfCBEYXkgb2Ygd2VlayAoZm9ybWF0dGluZykgICAgICAgIHwgRS4uRUVFICB8IE1vbiwgVHVlLCBXZWQsIC4uLiwgU3UgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgRUVFRSAgICB8IE1vbmRheSwgVHVlc2RheSwgLi4uLCBTdW5kYXkgICAgICB8IDIgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgRUVFRUUgICB8IE0sIFQsIFcsIFQsIEYsIFMsIFMgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgRUVFRUVFICB8IE1vLCBUdSwgV2UsIFRoLCBGciwgU3UsIFNhICAgICAgICB8ICAgICAgIHwKICogfCBJU08gZGF5IG9mIHdlZWsgKGZvcm1hdHRpbmcpICAgIHwgaSAgICAgICB8IDEsIDIsIDMsIC4uLiwgNyAgICAgICAgICAgICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgaW8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDd0aCAgICAgICAgICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgaWkgICAgICB8IDAxLCAwMiwgLi4uLCAwNyAgICAgICAgICAgICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgaWlpICAgICB8IE1vbiwgVHVlLCBXZWQsIC4uLiwgU3UgICAgICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgaWlpaSAgICB8IE1vbmRheSwgVHVlc2RheSwgLi4uLCBTdW5kYXkgICAgICB8IDIsNyAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgaWlpaWkgICB8IE0sIFQsIFcsIFQsIEYsIFMsIFMgICAgICAgICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgaWlpaWlpICB8IE1vLCBUdSwgV2UsIFRoLCBGciwgU3UsIFNhICAgICAgICB8IDcgICAgIHwKICogfCBMb2NhbCBkYXkgb2Ygd2VlayAoZm9ybWF0dGluZykgIHwgZSAgICAgICB8IDIsIDMsIDQsIC4uLiwgMSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZW8gICAgICB8IDJuZCwgM3JkLCAuLi4sIDFzdCAgICAgICAgICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZWUgICAgICB8IDAyLCAwMywgLi4uLCAwMSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZWVlICAgICB8IE1vbiwgVHVlLCBXZWQsIC4uLiwgU3UgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZWVlZSAgICB8IE1vbmRheSwgVHVlc2RheSwgLi4uLCBTdW5kYXkgICAgICB8IDIgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZWVlZWUgICB8IE0sIFQsIFcsIFQsIEYsIFMsIFMgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgZWVlZWVlICB8IE1vLCBUdSwgV2UsIFRoLCBGciwgU3UsIFNhICAgICAgICB8ICAgICAgIHwKICogfCBMb2NhbCBkYXkgb2Ygd2VlayAoc3RhbmQtYWxvbmUpIHwgYyAgICAgICB8IDIsIDMsIDQsIC4uLiwgMSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY28gICAgICB8IDJuZCwgM3JkLCAuLi4sIDFzdCAgICAgICAgICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2MgICAgICB8IDAyLCAwMywgLi4uLCAwMSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2NjICAgICB8IE1vbiwgVHVlLCBXZWQsIC4uLiwgU3UgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2NjYyAgICB8IE1vbmRheSwgVHVlc2RheSwgLi4uLCBTdW5kYXkgICAgICB8IDIgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2NjY2MgICB8IE0sIFQsIFcsIFQsIEYsIFMsIFMgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgY2NjY2NjICB8IE1vLCBUdSwgV2UsIFRoLCBGciwgU3UsIFNhICAgICAgICB8ICAgICAgIHwKICogfCBBTSwgUE0gICAgICAgICAgICAgICAgICAgICAgICAgIHwgYS4uYWFhICB8IEFNLCBQTSAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYWFhYSAgICB8IGEubS4sIHAubS4gICAgICAgICAgICAgICAgICAgICAgICB8IDIgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYWFhYWEgICB8IGEsIHAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCBBTSwgUE0sIG5vb24sIG1pZG5pZ2h0ICAgICAgICAgIHwgYi4uYmJiICB8IEFNLCBQTSwgbm9vbiwgbWlkbmlnaHQgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYmJiYiAgICB8IGEubS4sIHAubS4sIG5vb24sIG1pZG5pZ2h0ICAgICAgICB8IDIgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgYmJiYmIgICB8IGEsIHAsIG4sIG1pICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCBGbGV4aWJsZSBkYXkgcGVyaW9kICAgICAgICAgICAgIHwgQi4uQkJCICB8IGF0IG5pZ2h0LCBpbiB0aGUgbW9ybmluZywgLi4uICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgQkJCQiAgICB8IGF0IG5pZ2h0LCBpbiB0aGUgbW9ybmluZywgLi4uICAgICB8IDIgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgQkJCQkIgICB8IGF0IG5pZ2h0LCBpbiB0aGUgbW9ybmluZywgLi4uICAgICB8ICAgICAgIHwKICogfCBIb3VyIFsxLTEyXSAgICAgICAgICAgICAgICAgICAgIHwgaCAgICAgICB8IDEsIDIsIC4uLiwgMTEsIDEyICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgaG8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDExdGgsIDEydGggICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgaGggICAgICB8IDAxLCAwMiwgLi4uLCAxMSwgMTIgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCBIb3VyIFswLTIzXSAgICAgICAgICAgICAgICAgICAgIHwgSCAgICAgICB8IDAsIDEsIDIsIC4uLiwgMjMgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgSG8gICAgICB8IDB0aCwgMXN0LCAybmQsIC4uLiwgMjNyZCAgICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgSEggICAgICB8IDAwLCAwMSwgMDIsIC4uLiwgMjMgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCBIb3VyIFswLTExXSAgICAgICAgICAgICAgICAgICAgIHwgSyAgICAgICB8IDEsIDIsIC4uLiwgMTEsIDAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgS28gICAgICB8IDFzdCwgMm5kLCAuLi4sIDExdGgsIDB0aCAgICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgS0sgICAgICB8IDEsIDIsIC4uLiwgMTEsIDAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCBIb3VyIFsxLTI0XSAgICAgICAgICAgICAgICAgICAgIHwgayAgICAgICB8IDI0LCAxLCAyLCAuLi4sIDIzICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwga28gICAgICB8IDI0dGgsIDFzdCwgMm5kLCAuLi4sIDIzcmQgICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwga2sgICAgICB8IDI0LCAwMSwgMDIsIC4uLiwgMjMgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCBNaW51dGUgICAgICAgICAgICAgICAgICAgICAgICAgIHwgbSAgICAgICB8IDAsIDEsIC4uLiwgNTkgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgbW8gICAgICB8IDB0aCwgMXN0LCAuLi4sIDU5dGggICAgICAgICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgbW0gICAgICB8IDAwLCAwMSwgLi4uLCA1OSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCBTZWNvbmQgICAgICAgICAgICAgICAgICAgICAgICAgIHwgcyAgICAgICB8IDAsIDEsIC4uLiwgNTkgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgc28gICAgICB8IDB0aCwgMXN0LCAuLi4sIDU5dGggICAgICAgICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgc3MgICAgICB8IDAwLCAwMSwgLi4uLCA1OSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCBGcmFjdGlvbiBvZiBzZWNvbmQgICAgICAgICAgICAgIHwgUyAgICAgICB8IDAsIDEsIC4uLiwgOSAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgU1MgICAgICB8IDAwLCAwMSwgLi4uLCA5OSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgU1NTICAgICB8IDAwMCwgMDAwMSwgLi4uLCA5OTkgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgU1NTUyAgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDMgICAgIHwKICogfCBUaW1lem9uZSAoSVNPLTg2MDEgdy8gWikgICAgICAgIHwgWCAgICAgICB8IC0wOCwgKzA1MzAsIFogICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWFggICAgICB8IC0wODAwLCArMDUzMCwgWiAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWFhYICAgICB8IC0wODowMCwgKzA1OjMwLCBaICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWFhYWCAgICB8IC0wODAwLCArMDUzMCwgWiwgKzEyMzQ1NiAgICAgICAgICB8IDIgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgWFhYWFggICB8IC0wODowMCwgKzA1OjMwLCBaLCArMTI6MzQ6NTYgICAgICB8ICAgICAgIHwKICogfCBUaW1lem9uZSAoSVNPLTg2MDEgdy9vIFopICAgICAgIHwgeCAgICAgICB8IC0wOCwgKzA1MzAsICswMCAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeHggICAgICB8IC0wODAwLCArMDUzMCwgKzAwMDAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeHh4ICAgICB8IC0wODowMCwgKzA1OjMwLCArMDA6MDAgICAgICAgICAgICB8IDIgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeHh4eCAgICB8IC0wODAwLCArMDUzMCwgKzAwMDAsICsxMjM0NTYgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgeHh4eHggICB8IC0wODowMCwgKzA1OjMwLCArMDA6MDAsICsxMjozNDo1NiB8ICAgICAgIHwKICogfCBUaW1lem9uZSAoR01UKSAgICAgICAgICAgICAgICAgIHwgTy4uLk9PTyB8IEdNVC04LCBHTVQrNTozMCwgR01UKzAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgT09PTyAgICB8IEdNVC0wODowMCwgR01UKzA1OjMwLCBHTVQrMDA6MDAgICB8IDIgICAgIHwKICogfCBUaW1lem9uZSAoc3BlY2lmaWMgbm9uLWxvY2F0LikgIHwgei4uLnp6eiB8IEdNVC04LCBHTVQrNTozMCwgR01UKzAgICAgICAgICAgICB8IDYgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgenp6eiAgICB8IEdNVC0wODowMCwgR01UKzA1OjMwLCBHTVQrMDA6MDAgICB8IDIsNiAgIHwKICogfCBTZWNvbmRzIHRpbWVzdGFtcCAgICAgICAgICAgICAgIHwgdCAgICAgICB8IDUxMjk2OTUyMCAgICAgICAgICAgICAgICAgICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgdHQgICAgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDMsNyAgIHwKICogfCBNaWxsaXNlY29uZHMgdGltZXN0YW1wICAgICAgICAgIHwgVCAgICAgICB8IDUxMjk2OTUyMDkwMCAgICAgICAgICAgICAgICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgVFQgICAgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDMsNyAgIHwKICogfCBMb25nIGxvY2FsaXplZCBkYXRlICAgICAgICAgICAgIHwgUCAgICAgICB8IDA1LzI5LzE0NTMgICAgICAgICAgICAgICAgICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUFAgICAgICB8IE1heSAyOSwgMTQ1MyAgICAgICAgICAgICAgICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUFBQICAgICB8IE1heSAyOXRoLCAxNDUzICAgICAgICAgICAgICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUFBQUCAgICB8IFN1bmRheSwgTWF5IDI5dGgsIDE0NTMgICAgICAgICAgICB8IDIsNyAgIHwKICogfCBMb25nIGxvY2FsaXplZCB0aW1lICAgICAgICAgICAgIHwgcCAgICAgICB8IDEyOjAwIEFNICAgICAgICAgICAgICAgICAgICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgcHAgICAgICB8IDEyOjAwOjAwIEFNICAgICAgICAgICAgICAgICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgcHBwICAgICB8IDEyOjAwOjAwIEFNIEdNVCsyICAgICAgICAgICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgcHBwcCAgICB8IDEyOjAwOjAwIEFNIEdNVCswMjowMCAgICAgICAgICAgICB8IDIsNyAgIHwKICogfCBDb21iaW5hdGlvbiBvZiBkYXRlIGFuZCB0aW1lICAgIHwgUHAgICAgICB8IDA1LzI5LzE0NTMsIDEyOjAwIEFNICAgICAgICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUFBwcCAgICB8IE1heSAyOSwgMTQ1MywgMTI6MDA6MDAgQU0gICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUFBQcHBwICB8IE1heSAyOXRoLCAxNDUzIGF0IC4uLiAgICAgICAgICAgICB8IDcgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgUFBQUHBwcHB8IFN1bmRheSwgTWF5IDI5dGgsIDE0NTMgYXQgLi4uICAgICB8IDIsNyAgIHwKICogTm90ZXM6CiAqIDEuICJGb3JtYXR0aW5nIiB1bml0cyAoZS5nLiBmb3JtYXR0aW5nIHF1YXJ0ZXIpIGluIHRoZSBkZWZhdWx0IGVuLVVTIGxvY2FsZQogKiAgICBhcmUgdGhlIHNhbWUgYXMgInN0YW5kLWFsb25lIiB1bml0cywgYnV0IGFyZSBkaWZmZXJlbnQgaW4gc29tZSBsYW5ndWFnZXMuCiAqICAgICJGb3JtYXR0aW5nIiB1bml0cyBhcmUgZGVjbGluZWQgYWNjb3JkaW5nIHRvIHRoZSBydWxlcyBvZiB0aGUgbGFuZ3VhZ2UKICogICAgaW4gdGhlIGNvbnRleHQgb2YgYSBkYXRlLiAiU3RhbmQtYWxvbmUiIHVuaXRzIGFyZSBhbHdheXMgbm9taW5hdGl2ZSBzaW5ndWxhcjoKICoKICogICAgYGZvcm1hdChuZXcgRGF0ZSgyMDE3LCAxMCwgNiksICdkbyBMTExMJywge2xvY2FsZTogY3N9KSAvLz0+ICc2LiBsaXN0b3BhZCdgCiAqCiAqICAgIGBmb3JtYXQobmV3IERhdGUoMjAxNywgMTAsIDYpLCAnZG8gTU1NTScsIHtsb2NhbGU6IGNzfSkgLy89PiAnNi4gbGlzdG9wYWR1J2AKICoKICogMi4gQW55IHNlcXVlbmNlIG9mIHRoZSBpZGVudGljYWwgbGV0dGVycyBpcyBhIHBhdHRlcm4sIHVubGVzcyBpdCBpcyBlc2NhcGVkIGJ5CiAqICAgIHRoZSBzaW5nbGUgcXVvdGUgY2hhcmFjdGVycyAoc2VlIGJlbG93KS4KICogICAgSWYgdGhlIHNlcXVlbmNlIGlzIGxvbmdlciB0aGFuIGxpc3RlZCBpbiB0YWJsZSAoZS5nLiBgRUVFRUVFRUVFRUVgKQogKiAgICB0aGUgb3V0cHV0IHdpbGwgYmUgdGhlIHNhbWUgYXMgZGVmYXVsdCBwYXR0ZXJuIGZvciB0aGlzIHVuaXQsIHVzdWFsbHkKICogICAgdGhlIGxvbmdlc3Qgb25lIChpbiBjYXNlIG9mIElTTyB3ZWVrZGF5cywgYEVFRUVgKS4gRGVmYXVsdCBwYXR0ZXJucyBmb3IgdW5pdHMKICogICAgYXJlIG1hcmtlZCB3aXRoICIyIiBpbiB0aGUgbGFzdCBjb2x1bW4gb2YgdGhlIHRhYmxlLgogKgogKiAgICBgZm9ybWF0KG5ldyBEYXRlKDIwMTcsIDEwLCA2KSwgJ01NTScpIC8vPT4gJ05vdidgCiAqCiAqICAgIGBmb3JtYXQobmV3IERhdGUoMjAxNywgMTAsIDYpLCAnTU1NTScpIC8vPT4gJ05vdmVtYmVyJ2AKICoKICogICAgYGZvcm1hdChuZXcgRGF0ZSgyMDE3LCAxMCwgNiksICdNTU1NTScpIC8vPT4gJ04nYAogKgogKiAgICBgZm9ybWF0KG5ldyBEYXRlKDIwMTcsIDEwLCA2KSwgJ01NTU1NTScpIC8vPT4gJ05vdmVtYmVyJ2AKICoKICogICAgYGZvcm1hdChuZXcgRGF0ZSgyMDE3LCAxMCwgNiksICdNTU1NTU1NJykgLy89PiAnTm92ZW1iZXInYAogKgogKiAzLiBTb21lIHBhdHRlcm5zIGNvdWxkIGJlIHVubGltaXRlZCBsZW5ndGggKHN1Y2ggYXMgYHl5eXl5eXl5YCkuCiAqICAgIFRoZSBvdXRwdXQgd2lsbCBiZSBwYWRkZWQgd2l0aCB6ZXJvcyB0byBtYXRjaCB0aGUgbGVuZ3RoIG9mIHRoZSBwYXR0ZXJuLgogKgogKiAgICBgZm9ybWF0KG5ldyBEYXRlKDIwMTcsIDEwLCA2KSwgJ3l5eXl5eXl5JykgLy89PiAnMDAwMDIwMTcnYAogKgogKiA0LiBgUVFRUVFgIGFuZCBgcXFxcXFgIGNvdWxkIGJlIG5vdCBzdHJpY3RseSBudW1lcmljYWwgaW4gc29tZSBsb2NhbGVzLgogKiAgICBUaGVzZSB0b2tlbnMgcmVwcmVzZW50IHRoZSBzaG9ydGVzdCBmb3JtIG9mIHRoZSBxdWFydGVyLgogKgogKiA1LiBUaGUgbWFpbiBkaWZmZXJlbmNlIGJldHdlZW4gYHlgIGFuZCBgdWAgcGF0dGVybnMgYXJlIEIuQy4geWVhcnM6CiAqCiAqICAgIHwgWWVhciB8IGB5YCB8IGB1YCB8CiAqICAgIHwtLS0tLS18LS0tLS18LS0tLS18CiAqICAgIHwgQUMgMSB8ICAgMSB8ICAgMSB8CiAqICAgIHwgQkMgMSB8ICAgMSB8ICAgMCB8CiAqICAgIHwgQkMgMiB8ICAgMiB8ICAtMSB8CiAqCiAqICAgIEFsc28gYHl5YCBhbHdheXMgcmV0dXJucyB0aGUgbGFzdCB0d28gZGlnaXRzIG9mIGEgeWVhciwKICogICAgd2hpbGUgYHV1YCBwYWRzIHNpbmdsZSBkaWdpdCB5ZWFycyB0byAyIGNoYXJhY3RlcnMgYW5kIHJldHVybnMgb3RoZXIgeWVhcnMgdW5jaGFuZ2VkOgogKgogKiAgICB8IFllYXIgfCBgeXlgIHwgYHV1YCB8CiAqICAgIHwtLS0tLS18LS0tLS0tfC0tLS0tLXwKICogICAgfCAxICAgIHwgICAwMSB8ICAgMDEgfAogKiAgICB8IDE0ICAgfCAgIDE0IHwgICAxNCB8CiAqICAgIHwgMzc2ICB8ICAgNzYgfCAgMzc2IHwKICogICAgfCAxNDUzIHwgICA1MyB8IDE0NTMgfAogKgogKiAgICBUaGUgc2FtZSBkaWZmZXJlbmNlIGlzIHRydWUgZm9yIGxvY2FsIGFuZCBJU08gd2Vlay1udW1iZXJpbmcgeWVhcnMgKGBZYCBhbmQgYFJgKSwKICogICAgZXhjZXB0IGxvY2FsIHdlZWstbnVtYmVyaW5nIHllYXJzIGFyZSBkZXBlbmRlbnQgb24gYG9wdGlvbnMud2Vla1N0YXJ0c09uYAogKiAgICBhbmQgYG9wdGlvbnMuZmlyc3RXZWVrQ29udGFpbnNEYXRlYCAoY29tcGFyZSBbZ2V0SVNPV2Vla1llYXJde0BsaW5rIGh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3MvZ2V0SVNPV2Vla1llYXJ9CiAqICAgIGFuZCBbZ2V0V2Vla1llYXJde0BsaW5rIGh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3MvZ2V0V2Vla1llYXJ9KS4KICoKICogNi4gU3BlY2lmaWMgbm9uLWxvY2F0aW9uIHRpbWV6b25lcyBhcmUgY3VycmVudGx5IHVuYXZhaWxhYmxlIGluIGBkYXRlLWZuc2AsCiAqICAgIHNvIHJpZ2h0IG5vdyB0aGVzZSB0b2tlbnMgZmFsbCBiYWNrIHRvIEdNVCB0aW1lem9uZXMuCiAqCiAqIDcuIFRoZXNlIHBhdHRlcm5zIGFyZSBub3QgaW4gdGhlIFVuaWNvZGUgVGVjaG5pY2FsIFN0YW5kYXJkICMzNToKICogICAgLSBgaWA6IElTTyBkYXkgb2Ygd2VlawogKiAgICAtIGBJYDogSVNPIHdlZWsgb2YgeWVhcgogKiAgICAtIGBSYDogSVNPIHdlZWstbnVtYmVyaW5nIHllYXIKICogICAgLSBgdGA6IHNlY29uZHMgdGltZXN0YW1wCiAqICAgIC0gYFRgOiBtaWxsaXNlY29uZHMgdGltZXN0YW1wCiAqICAgIC0gYG9gOiBvcmRpbmFsIG51bWJlciBtb2RpZmllcgogKiAgICAtIGBQYDogbG9uZyBsb2NhbGl6ZWQgZGF0ZQogKiAgICAtIGBwYDogbG9uZyBsb2NhbGl6ZWQgdGltZQogKgogKiA4LiBUaGVzZSB0b2tlbnMgYXJlIG9mdGVuIGNvbmZ1c2VkIHdpdGggb3RoZXJzLiBTZWU6IGh0dHBzOi8vZ2l0LmlvL2Z4Q3lyCiAqCiAqIEBwYXJhbSB7RGF0ZXxTdHJpbmd8TnVtYmVyfSBkYXRlIC0gdGhlIG9yaWdpbmFsIGRhdGUKICogQHBhcmFtIHtTdHJpbmd9IGZvcm1hdCAtIHRoZSBzdHJpbmcgb2YgdG9rZW5zCiAqIEBwYXJhbSB7T3B0aW9uc30gW29wdGlvbnNdIC0gdGhlIG9iamVjdCB3aXRoIG9wdGlvbnMuIFNlZSBbT3B0aW9uc117QGxpbmsgaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy9PcHRpb25zfQogKiBAcGFyYW0gezB8MXwyfSBbb3B0aW9ucy5hZGRpdGlvbmFsRGlnaXRzPTJdIC0gcGFzc2VkIHRvIGB0b0RhdGVgLiBTZWUgW3RvRGF0ZV17QGxpbmsgaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy90b0RhdGV9CiAqIEBwYXJhbSB7MHwxfDJ8M3w0fDV8Nn0gW29wdGlvbnMud2Vla1N0YXJ0c09uPTBdIC0gdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWsgKDAgLSBTdW5kYXkpCiAqIEBwYXJhbSB7TnVtYmVyfSBbb3B0aW9ucy5maXJzdFdlZWtDb250YWluc0RhdGU9MV0gLSB0aGUgZGF5IG9mIEphbnVhcnksIHdoaWNoIGlzCiAqIEBwYXJhbSB7TG9jYWxlfSBbb3B0aW9ucy5sb2NhbGU9ZGVmYXVsdExvY2FsZV0gLSB0aGUgbG9jYWxlIG9iamVjdC4gU2VlIFtMb2NhbGVde0BsaW5rIGh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3MvTG9jYWxlfQogKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmF3YXJlT2ZVbmljb2RlVG9rZW5zPWZhbHNlXSAtIGlmIHRydWUsIGFsbG93cyB1c2FnZSBvZiBVbmljb2RlIHRva2VucyBjYXVzZXMgY29uZnVzaW9uOgogKiAgIC0gU29tZSBvZiB0aGUgZGF5IG9mIHllYXIgdG9rZW5zIChgRGAsIGBERGApIHRoYXQgYXJlIGNvbmZ1c2VkIHdpdGggdGhlIGRheSBvZiBtb250aCB0b2tlbnMgKGBkYCwgYGRkYCkuCiAqICAgLSBTb21lIG9mIHRoZSBsb2NhbCB3ZWVrLW51bWJlcmluZyB5ZWFyIHRva2VucyAoYFlZYCwgYFlZWVlgKSB0aGF0IGFyZSBjb25mdXNlZCB3aXRoIHRoZSBjYWxlbmRhciB5ZWFyIHRva2VucyAoYHl5YCwgYHl5eXlgKS4KICogICBTZWU6IGh0dHBzOi8vZ2l0LmlvL2Z4Q3lyCiAqIEByZXR1cm5zIHtTdHJpbmd9IHRoZSBmb3JtYXR0ZWQgZGF0ZSBzdHJpbmcKICogQHRocm93cyB7VHlwZUVycm9yfSAyIGFyZ3VtZW50cyByZXF1aXJlZAogKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy5hZGRpdGlvbmFsRGlnaXRzYCBtdXN0IGJlIDAsIDEgb3IgMgogKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy5sb2NhbGVgIG11c3QgY29udGFpbiBgbG9jYWxpemVgIHByb3BlcnR5CiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IGBvcHRpb25zLmxvY2FsZWAgbXVzdCBjb250YWluIGBmb3JtYXRMb25nYCBwcm9wZXJ0eQogKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy53ZWVrU3RhcnRzT25gIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2CiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IGBvcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZWAgbXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDcKICogQHRocm93cyB7UmFuZ2VFcnJvcn0gYG9wdGlvbnMuYXdhcmVPZlVuaWNvZGVUb2tlbnNgIG11c3QgYmUgc2V0IHRvIGB0cnVlYCB0byB1c2UgYFhYYCB0b2tlbjsgc2VlOiBodHRwczovL2dpdC5pby9meEN5cgogKgogKiBAZXhhbXBsZQogKiAvLyBSZXByZXNlbnQgMTEgRmVicnVhcnkgMjAxNCBpbiBtaWRkbGUtZW5kaWFuIGZvcm1hdDoKICogdmFyIHJlc3VsdCA9IGZvcm1hdCgKICogICBuZXcgRGF0ZSgyMDE0LCAxLCAxMSksCiAqICAgJ01NL2RkL3l5eXknCiAqICkKICogLy89PiAnMDIvMTEvMjAxNCcKICoKICogQGV4YW1wbGUKICogLy8gUmVwcmVzZW50IDIgSnVseSAyMDE0IGluIEVzcGVyYW50bzoKICogaW1wb3J0IHsgZW9Mb2NhbGUgfSBmcm9tICdkYXRlLWZucy9sb2NhbGUvZW8nCiAqIHZhciByZXN1bHQgPSBmb3JtYXQoCiAqICAgbmV3IERhdGUoMjAxNCwgNiwgMiksCiAqICAgImRvICdkZScgTU1NTSB5eXl5IiwKICogICB7bG9jYWxlOiBlb0xvY2FsZX0KICogKQogKiAvLz0+ICcyLWEgZGUganVsaW8gMjAxNCcKICoKICogQGV4YW1wbGUKICogLy8gRXNjYXBlIHN0cmluZyBieSBzaW5nbGUgcXVvdGUgY2hhcmFjdGVyczoKICogdmFyIHJlc3VsdCA9IGZvcm1hdCgKICogICBuZXcgRGF0ZSgyMDE0LCA2LCAyLCAxNSksCiAqICAgImggJ28nJ2Nsb2NrJyIKICogKQogKiAvLz0+ICIzIG8nY2xvY2siCiAqLwoKZnVuY3Rpb24gZm9ybWF0KGRpcnR5RGF0ZSwgZGlydHlGb3JtYXRTdHIsIGRpcnR5T3B0aW9ucykgewogIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignMiBhcmd1bWVudHMgcmVxdWlyZWQsIGJ1dCBvbmx5ICcgKyBhcmd1bWVudHMubGVuZ3RoICsgJyBwcmVzZW50Jyk7CiAgfQoKICB2YXIgZm9ybWF0U3RyID0gU3RyaW5nKGRpcnR5Rm9ybWF0U3RyKTsKICB2YXIgb3B0aW9ucyA9IGRpcnR5T3B0aW9ucyB8fCB7fTsKICB2YXIgbG9jYWxlID0gb3B0aW9ucy5sb2NhbGUgfHwgbG9jYWxlJDE7CiAgdmFyIGxvY2FsZUZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA9IGxvY2FsZS5vcHRpb25zICYmIGxvY2FsZS5vcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZTsKICB2YXIgZGVmYXVsdEZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA9IGxvY2FsZUZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA9PSBudWxsID8gMSA6IHRvSW50ZWdlcihsb2NhbGVGaXJzdFdlZWtDb250YWluc0RhdGUpOwogIHZhciBmaXJzdFdlZWtDb250YWluc0RhdGUgPSBvcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA9PSBudWxsID8gZGVmYXVsdEZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA6IHRvSW50ZWdlcihvcHRpb25zLmZpcnN0V2Vla0NvbnRhaW5zRGF0ZSk7IC8vIFRlc3QgaWYgd2Vla1N0YXJ0c09uIGlzIGJldHdlZW4gMSBhbmQgNyBfYW5kXyBpcyBub3QgTmFOCgogIGlmICghKGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA+PSAxICYmIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZSA8PSA3KSkgewogICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2ZpcnN0V2Vla0NvbnRhaW5zRGF0ZSBtdXN0IGJlIGJldHdlZW4gMSBhbmQgNyBpbmNsdXNpdmVseScpOwogIH0KCiAgdmFyIGxvY2FsZVdlZWtTdGFydHNPbiA9IGxvY2FsZS5vcHRpb25zICYmIGxvY2FsZS5vcHRpb25zLndlZWtTdGFydHNPbjsKICB2YXIgZGVmYXVsdFdlZWtTdGFydHNPbiA9IGxvY2FsZVdlZWtTdGFydHNPbiA9PSBudWxsID8gMCA6IHRvSW50ZWdlcihsb2NhbGVXZWVrU3RhcnRzT24pOwogIHZhciB3ZWVrU3RhcnRzT24gPSBvcHRpb25zLndlZWtTdGFydHNPbiA9PSBudWxsID8gZGVmYXVsdFdlZWtTdGFydHNPbiA6IHRvSW50ZWdlcihvcHRpb25zLndlZWtTdGFydHNPbik7IC8vIFRlc3QgaWYgd2Vla1N0YXJ0c09uIGlzIGJldHdlZW4gMCBhbmQgNiBfYW5kXyBpcyBub3QgTmFOCgogIGlmICghKHdlZWtTdGFydHNPbiA+PSAwICYmIHdlZWtTdGFydHNPbiA8PSA2KSkgewogICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3dlZWtTdGFydHNPbiBtdXN0IGJlIGJldHdlZW4gMCBhbmQgNiBpbmNsdXNpdmVseScpOwogIH0KCiAgaWYgKCFsb2NhbGUubG9jYWxpemUpIHsKICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdsb2NhbGUgbXVzdCBjb250YWluIGxvY2FsaXplIHByb3BlcnR5Jyk7CiAgfQoKICBpZiAoIWxvY2FsZS5mb3JtYXRMb25nKSB7CiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignbG9jYWxlIG11c3QgY29udGFpbiBmb3JtYXRMb25nIHByb3BlcnR5Jyk7CiAgfQoKICB2YXIgb3JpZ2luYWxEYXRlID0gdG9EYXRlKGRpcnR5RGF0ZSwgb3B0aW9ucyk7CgogIGlmICghaXNWYWxpZChvcmlnaW5hbERhdGUsIG9wdGlvbnMpKSB7CiAgICByZXR1cm4gJ0ludmFsaWQgRGF0ZSc7CiAgfSAvLyBDb252ZXJ0IHRoZSBkYXRlIGluIHN5c3RlbSB0aW1lem9uZSB0byB0aGUgc2FtZSBkYXRlIGluIFVUQyswMDowMCB0aW1lem9uZS4KICAvLyBUaGlzIGVuc3VyZXMgdGhhdCB3aGVuIFVUQyBmdW5jdGlvbnMgd2lsbCBiZSBpbXBsZW1lbnRlZCwgbG9jYWxlcyB3aWxsIGJlIGNvbXBhdGlibGUgd2l0aCB0aGVtLgogIC8vIFNlZSBhbiBpc3N1ZSBhYm91dCBVVEMgZnVuY3Rpb25zOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvaXNzdWVzLzM3NgoKCiAgdmFyIHRpbWV6b25lT2Zmc2V0ID0gZ2V0VGltZXpvbmVPZmZzZXRJbk1pbGxpc2Vjb25kcyhvcmlnaW5hbERhdGUpOwogIHZhciB1dGNEYXRlID0gc3ViTWlsbGlzZWNvbmRzKG9yaWdpbmFsRGF0ZSwgdGltZXpvbmVPZmZzZXQsIG9wdGlvbnMpOwogIHZhciBmb3JtYXR0ZXJPcHRpb25zID0gewogICAgZmlyc3RXZWVrQ29udGFpbnNEYXRlOiBmaXJzdFdlZWtDb250YWluc0RhdGUsCiAgICB3ZWVrU3RhcnRzT246IHdlZWtTdGFydHNPbiwKICAgIGxvY2FsZTogbG9jYWxlLAogICAgX29yaWdpbmFsRGF0ZTogb3JpZ2luYWxEYXRlCiAgfTsKICB2YXIgcmVzdWx0ID0gZm9ybWF0U3RyLm1hdGNoKGxvbmdGb3JtYXR0aW5nVG9rZW5zUmVnRXhwKS5tYXAoZnVuY3Rpb24gKHN1YnN0cmluZykgewogICAgdmFyIGZpcnN0Q2hhcmFjdGVyID0gc3Vic3RyaW5nWzBdOwoKICAgIGlmIChmaXJzdENoYXJhY3RlciA9PT0gJ3AnIHx8IGZpcnN0Q2hhcmFjdGVyID09PSAnUCcpIHsKICAgICAgdmFyIGxvbmdGb3JtYXR0ZXIgPSBsb25nRm9ybWF0dGVyc1tmaXJzdENoYXJhY3Rlcl07CiAgICAgIHJldHVybiBsb25nRm9ybWF0dGVyKHN1YnN0cmluZywgbG9jYWxlLmZvcm1hdExvbmcsIGZvcm1hdHRlck9wdGlvbnMpOwogICAgfQoKICAgIHJldHVybiBzdWJzdHJpbmc7CiAgfSkuam9pbignJykubWF0Y2goZm9ybWF0dGluZ1Rva2Vuc1JlZ0V4cCkubWFwKGZ1bmN0aW9uIChzdWJzdHJpbmcpIHsKICAgIC8vIFJlcGxhY2UgdHdvIHNpbmdsZSBxdW90ZSBjaGFyYWN0ZXJzIHdpdGggb25lIHNpbmdsZSBxdW90ZSBjaGFyYWN0ZXIKICAgIGlmIChzdWJzdHJpbmcgPT09ICInJyIpIHsKICAgICAgcmV0dXJuICInIjsKICAgIH0KCiAgICB2YXIgZmlyc3RDaGFyYWN0ZXIgPSBzdWJzdHJpbmdbMF07CgogICAgaWYgKGZpcnN0Q2hhcmFjdGVyID09PSAiJyIpIHsKICAgICAgcmV0dXJuIGNsZWFuRXNjYXBlZFN0cmluZyhzdWJzdHJpbmcpOwogICAgfQoKICAgIHZhciBmb3JtYXR0ZXIgPSBmb3JtYXR0ZXJzW2ZpcnN0Q2hhcmFjdGVyXTsKCiAgICBpZiAoZm9ybWF0dGVyKSB7CiAgICAgIGlmICghb3B0aW9ucy5hd2FyZU9mVW5pY29kZVRva2VucyAmJiBpc1Byb3RlY3RlZFRva2VuKHN1YnN0cmluZykpIHsKICAgICAgICB0aHJvd1Byb3RlY3RlZEVycm9yKHN1YnN0cmluZyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBmb3JtYXR0ZXIodXRjRGF0ZSwgc3Vic3RyaW5nLCBsb2NhbGUubG9jYWxpemUsIGZvcm1hdHRlck9wdGlvbnMpOwogICAgfQoKICAgIHJldHVybiBzdWJzdHJpbmc7CiAgfSkuam9pbignJyk7CiAgcmV0dXJuIHJlc3VsdDsKfQoKZnVuY3Rpb24gY2xlYW5Fc2NhcGVkU3RyaW5nKGlucHV0KSB7CiAgcmV0dXJuIGlucHV0Lm1hdGNoKGVzY2FwZWRTdHJpbmdSZWdFeHApWzFdLnJlcGxhY2UoZG91YmxlUXVvdGVSZWdFeHAsICInIik7Cn0KLyoqCiAqIEBuYW1lIGlzQWZ0ZXIKICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzCiAqIEBzdW1tYXJ5IElzIHRoZSBmaXJzdCBkYXRlIGFmdGVyIHRoZSBzZWNvbmQgb25lPwogKgogKiBAZGVzY3JpcHRpb24KICogSXMgdGhlIGZpcnN0IGRhdGUgYWZ0ZXIgdGhlIHNlY29uZCBvbmU/CiAqCiAqIEBwYXJhbSB7RGF0ZXxTdHJpbmd8TnVtYmVyfSBkYXRlIC0gdGhlIGRhdGUgdGhhdCBzaG91bGQgYmUgYWZ0ZXIgdGhlIG90aGVyIG9uZSB0byByZXR1cm4gdHJ1ZQogKiBAcGFyYW0ge0RhdGV8U3RyaW5nfE51bWJlcn0gZGF0ZVRvQ29tcGFyZSAtIHRoZSBkYXRlIHRvIGNvbXBhcmUgd2l0aAogKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRpb25zXSAtIHRoZSBvYmplY3Qgd2l0aCBvcHRpb25zLiBTZWUgW09wdGlvbnNde0BsaW5rIGh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3MvT3B0aW9uc30KICogQHBhcmFtIHswfDF8Mn0gW29wdGlvbnMuYWRkaXRpb25hbERpZ2l0cz0yXSAtIHBhc3NlZCB0byBgdG9EYXRlYC4gU2VlIFt0b0RhdGVde0BsaW5rIGh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3MvdG9EYXRlfQogKiBAcmV0dXJucyB7Qm9vbGVhbn0gdGhlIGZpcnN0IGRhdGUgaXMgYWZ0ZXIgdGhlIHNlY29uZCBkYXRlCiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMiBhcmd1bWVudHMgcmVxdWlyZWQKICogQHRocm93cyB7UmFuZ2VFcnJvcn0gYG9wdGlvbnMuYWRkaXRpb25hbERpZ2l0c2AgbXVzdCBiZSAwLCAxIG9yIDIKICoKICogQGV4YW1wbGUKICogLy8gSXMgMTAgSnVseSAxOTg5IGFmdGVyIDExIEZlYnJ1YXJ5IDE5ODc/CiAqIHZhciByZXN1bHQgPSBpc0FmdGVyKG5ldyBEYXRlKDE5ODksIDYsIDEwKSwgbmV3IERhdGUoMTk4NywgMSwgMTEpKQogKiAvLz0+IHRydWUKICovCgoKZnVuY3Rpb24gaXNBZnRlcihkaXJ0eURhdGUsIGRpcnR5RGF0ZVRvQ29tcGFyZSwgZGlydHlPcHRpb25zKSB7CiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCcyIGFyZ3VtZW50cyByZXF1aXJlZCwgYnV0IG9ubHkgJyArIGFyZ3VtZW50cy5sZW5ndGggKyAnIHByZXNlbnQnKTsKICB9CgogIHZhciBkYXRlID0gdG9EYXRlKGRpcnR5RGF0ZSwgZGlydHlPcHRpb25zKTsKICB2YXIgZGF0ZVRvQ29tcGFyZSA9IHRvRGF0ZShkaXJ0eURhdGVUb0NvbXBhcmUsIGRpcnR5T3B0aW9ucyk7CiAgcmV0dXJuIGRhdGUuZ2V0VGltZSgpID4gZGF0ZVRvQ29tcGFyZS5nZXRUaW1lKCk7Cn0KLyoqCiAqIEBuYW1lIGlzQmVmb3JlCiAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVycwogKiBAc3VtbWFyeSBJcyB0aGUgZmlyc3QgZGF0ZSBiZWZvcmUgdGhlIHNlY29uZCBvbmU/CiAqCiAqIEBkZXNjcmlwdGlvbgogKiBJcyB0aGUgZmlyc3QgZGF0ZSBiZWZvcmUgdGhlIHNlY29uZCBvbmU/CiAqCiAqIEBwYXJhbSB7RGF0ZXxTdHJpbmd8TnVtYmVyfSBkYXRlIC0gdGhlIGRhdGUgdGhhdCBzaG91bGQgYmUgYmVmb3JlIHRoZSBvdGhlciBvbmUgdG8gcmV0dXJuIHRydWUKICogQHBhcmFtIHtEYXRlfFN0cmluZ3xOdW1iZXJ9IGRhdGVUb0NvbXBhcmUgLSB0aGUgZGF0ZSB0byBjb21wYXJlIHdpdGgKICogQHBhcmFtIHtPcHRpb25zfSBbb3B0aW9uc10gLSB0aGUgb2JqZWN0IHdpdGggb3B0aW9ucy4gU2VlIFtPcHRpb25zXXtAbGluayBodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL09wdGlvbnN9CiAqIEBwYXJhbSB7MHwxfDJ9IFtvcHRpb25zLmFkZGl0aW9uYWxEaWdpdHM9Ml0gLSBwYXNzZWQgdG8gYHRvRGF0ZWAuIFNlZSBbdG9EYXRlXXtAbGluayBodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL3RvRGF0ZX0KICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBmaXJzdCBkYXRlIGlzIGJlZm9yZSB0aGUgc2Vjb25kIGRhdGUKICogQHRocm93cyB7VHlwZUVycm9yfSAyIGFyZ3VtZW50cyByZXF1aXJlZAogKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy5hZGRpdGlvbmFsRGlnaXRzYCBtdXN0IGJlIDAsIDEgb3IgMgogKgogKiBAZXhhbXBsZQogKiAvLyBJcyAxMCBKdWx5IDE5ODkgYmVmb3JlIDExIEZlYnJ1YXJ5IDE5ODc/CiAqIHZhciByZXN1bHQgPSBpc0JlZm9yZShuZXcgRGF0ZSgxOTg5LCA2LCAxMCksIG5ldyBEYXRlKDE5ODcsIDEsIDExKSkKICogLy89PiBmYWxzZQogKi8KCgpmdW5jdGlvbiBpc0JlZm9yZShkaXJ0eURhdGUsIGRpcnR5RGF0ZVRvQ29tcGFyZSwgZGlydHlPcHRpb25zKSB7CiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCcyIGFyZ3VtZW50cyByZXF1aXJlZCwgYnV0IG9ubHkgJyArIGFyZ3VtZW50cy5sZW5ndGggKyAnIHByZXNlbnQnKTsKICB9CgogIHZhciBkYXRlID0gdG9EYXRlKGRpcnR5RGF0ZSwgZGlydHlPcHRpb25zKTsKICB2YXIgZGF0ZVRvQ29tcGFyZSA9IHRvRGF0ZShkaXJ0eURhdGVUb0NvbXBhcmUsIGRpcnR5T3B0aW9ucyk7CiAgcmV0dXJuIGRhdGUuZ2V0VGltZSgpIDwgZGF0ZVRvQ29tcGFyZS5nZXRUaW1lKCk7Cn0KLyoqCiAqIEBuYW1lIGlzRGF0ZQogKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnMKICogQHN1bW1hcnkgSXMgdGhlIGdpdmVuIHZhbHVlIGEgZGF0ZT8KICoKICogQGRlc2NyaXB0aW9uCiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gdmFsdWUgaXMgYW4gaW5zdGFuY2Ugb2YgRGF0ZS4gVGhlIGZ1bmN0aW9uIHdvcmtzIGZvciBkYXRlcyB0cmFuc2ZlcnJlZCBhY3Jvc3MgaWZyYW1lcy4KICoKICogQHBhcmFtIHsqfSB2YWx1ZSAtIHRoZSB2YWx1ZSB0byBjaGVjawogKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRpb25zXSAtIHRoZSBvYmplY3Qgd2l0aCBvcHRpb25zLiBVbnVzZWQ7IHByZXNlbnQgZm9yIEZQIHN1Ym1vZHVsZSBjb21wYXRpYmlsaXR5IHNha2UuIFNlZSBbT3B0aW9uc117QGxpbmsgaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy9PcHRpb25zfQogKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgZ2l2ZW4gdmFsdWUgaXMgYSBkYXRlCiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudHMgcmVxdWlyZWQKICoKICogQGV4YW1wbGUKICogLy8gRm9yIGEgdmFsaWQgZGF0ZToKICogdmFyIHJlc3VsdCA9IGlzRGF0ZShuZXcgRGF0ZSgpKQogKiAvLz0+IHRydWUKICoKICogQGV4YW1wbGUKICogLy8gRm9yIGFuIGludmFsaWQgZGF0ZToKICogdmFyIHJlc3VsdCA9IGlzRGF0ZShuZXcgRGF0ZShOYU4pKQogKiAvLz0+IHRydWUKICoKICogQGV4YW1wbGUKICogLy8gRm9yIHNvbWUgdmFsdWU6CiAqIHZhciByZXN1bHQgPSBpc0RhdGUoJzIwMTQtMDItMzEnKQogKiAvLz0+IGZhbHNlCiAqCiAqIEBleGFtcGxlCiAqIC8vIEZvciBhbiBvYmplY3Q6CiAqIHZhciByZXN1bHQgPSBpc0RhdGUoe30pCiAqIC8vPT4gZmFsc2UKICovCgovKioKICogQG5hbWUgaXNFcXVhbAogKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnMKICogQHN1bW1hcnkgQXJlIHRoZSBnaXZlbiBkYXRlcyBlcXVhbD8KICoKICogQGRlc2NyaXB0aW9uCiAqIEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgZXF1YWw/CiAqCiAqIEBwYXJhbSB7RGF0ZXxTdHJpbmd8TnVtYmVyfSBkYXRlTGVmdCAtIHRoZSBmaXJzdCBkYXRlIHRvIGNvbXBhcmUKICogQHBhcmFtIHtEYXRlfFN0cmluZ3xOdW1iZXJ9IGRhdGVSaWdodCAtIHRoZSBzZWNvbmQgZGF0ZSB0byBjb21wYXJlCiAqIEBwYXJhbSB7T3B0aW9uc30gW29wdGlvbnNdIC0gdGhlIG9iamVjdCB3aXRoIG9wdGlvbnMuIFNlZSBbT3B0aW9uc117QGxpbmsgaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy9PcHRpb25zfQogKiBAcGFyYW0gezB8MXwyfSBbb3B0aW9ucy5hZGRpdGlvbmFsRGlnaXRzPTJdIC0gcGFzc2VkIHRvIGB0b0RhdGVgLiBTZWUgW3RvRGF0ZV17QGxpbmsgaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy90b0RhdGV9CiAqIEByZXR1cm5zIHtCb29sZWFufSB0aGUgZGF0ZXMgYXJlIGVxdWFsCiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMiBhcmd1bWVudHMgcmVxdWlyZWQKICogQHRocm93cyB7UmFuZ2VFcnJvcn0gYG9wdGlvbnMuYWRkaXRpb25hbERpZ2l0c2AgbXVzdCBiZSAwLCAxIG9yIDIKICoKICogQGV4YW1wbGUKICogLy8gQXJlIDIgSnVseSAyMDE0IDA2OjMwOjQ1LjAwMCBhbmQgMiBKdWx5IDIwMTQgMDY6MzA6NDUuNTAwIGVxdWFsPwogKiB2YXIgcmVzdWx0ID0gaXNFcXVhbCgKICogICBuZXcgRGF0ZSgyMDE0LCA2LCAyLCA2LCAzMCwgNDUsIDApCiAqICAgbmV3IERhdGUoMjAxNCwgNiwgMiwgNiwgMzAsIDQ1LCA1MDApCiAqICkKICogLy89PiBmYWxzZQogKi8KCgpmdW5jdGlvbiBpc0VxdWFsJDEoZGlydHlMZWZ0RGF0ZSwgZGlydHlSaWdodERhdGUsIGRpcnR5T3B0aW9ucykgewogIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignMiBhcmd1bWVudHMgcmVxdWlyZWQsIGJ1dCBvbmx5ICcgKyBhcmd1bWVudHMubGVuZ3RoICsgJyBwcmVzZW50Jyk7CiAgfQoKICB2YXIgZGF0ZUxlZnQgPSB0b0RhdGUoZGlydHlMZWZ0RGF0ZSwgZGlydHlPcHRpb25zKTsKICB2YXIgZGF0ZVJpZ2h0ID0gdG9EYXRlKGRpcnR5UmlnaHREYXRlLCBkaXJ0eU9wdGlvbnMpOwogIHJldHVybiBkYXRlTGVmdC5nZXRUaW1lKCkgPT09IGRhdGVSaWdodC5nZXRUaW1lKCk7Cn0gLy8gVGhpcyBmdW5jdGlvbiB3aWxsIGJlIGEgcGFydCBvZiBwdWJsaWMgQVBJIHdoZW4gVVRDIGZ1bmN0aW9uIHdpbGwgYmUgaW1wbGVtZW50ZWQuCi8vIFNlZSBpc3N1ZTogaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2lzc3Vlcy8zNzYKCgpmdW5jdGlvbiBzZXRVVENEYXkoZGlydHlEYXRlLCBkaXJ0eURheSwgZGlydHlPcHRpb25zKSB7CiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCcyIGFyZ3VtZW50cyByZXF1aXJlZCwgYnV0IG9ubHkgJyArIGFyZ3VtZW50cy5sZW5ndGggKyAnIHByZXNlbnQnKTsKICB9CgogIHZhciBvcHRpb25zID0gZGlydHlPcHRpb25zIHx8IHt9OwogIHZhciBsb2NhbGUgPSBvcHRpb25zLmxvY2FsZTsKICB2YXIgbG9jYWxlV2Vla1N0YXJ0c09uID0gbG9jYWxlICYmIGxvY2FsZS5vcHRpb25zICYmIGxvY2FsZS5vcHRpb25zLndlZWtTdGFydHNPbjsKICB2YXIgZGVmYXVsdFdlZWtTdGFydHNPbiA9IGxvY2FsZVdlZWtTdGFydHNPbiA9PSBudWxsID8gMCA6IHRvSW50ZWdlcihsb2NhbGVXZWVrU3RhcnRzT24pOwogIHZhciB3ZWVrU3RhcnRzT24gPSBvcHRpb25zLndlZWtTdGFydHNPbiA9PSBudWxsID8gZGVmYXVsdFdlZWtTdGFydHNPbiA6IHRvSW50ZWdlcihvcHRpb25zLndlZWtTdGFydHNPbik7IC8vIFRlc3QgaWYgd2Vla1N0YXJ0c09uIGlzIGJldHdlZW4gMCBhbmQgNiBfYW5kXyBpcyBub3QgTmFOCgogIGlmICghKHdlZWtTdGFydHNPbiA+PSAwICYmIHdlZWtTdGFydHNPbiA8PSA2KSkgewogICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3dlZWtTdGFydHNPbiBtdXN0IGJlIGJldHdlZW4gMCBhbmQgNiBpbmNsdXNpdmVseScpOwogIH0KCiAgdmFyIGRhdGUgPSB0b0RhdGUoZGlydHlEYXRlLCBkaXJ0eU9wdGlvbnMpOwogIHZhciBkYXkgPSB0b0ludGVnZXIoZGlydHlEYXkpOwogIHZhciBjdXJyZW50RGF5ID0gZGF0ZS5nZXRVVENEYXkoKTsKICB2YXIgcmVtYWluZGVyID0gZGF5ICUgNzsKICB2YXIgZGF5SW5kZXggPSAocmVtYWluZGVyICsgNykgJSA3OwogIHZhciBkaWZmID0gKGRheUluZGV4IDwgd2Vla1N0YXJ0c09uID8gNyA6IDApICsgZGF5IC0gY3VycmVudERheTsKICBkYXRlLnNldFVUQ0RhdGUoZGF0ZS5nZXRVVENEYXRlKCkgKyBkaWZmKTsKICByZXR1cm4gZGF0ZTsKfSAvLyBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgYSBwYXJ0IG9mIHB1YmxpYyBBUEkgd2hlbiBVVEMgZnVuY3Rpb24gd2lsbCBiZSBpbXBsZW1lbnRlZC4KLy8gU2VlIGlzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvaXNzdWVzLzM3NgoKCmZ1bmN0aW9uIHNldFVUQ1dlZWsoZGlydHlEYXRlLCBkaXJ0eVdlZWssIGRpcnR5T3B0aW9ucykgewogIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignMiBhcmd1bWVudHMgcmVxdWlyZWQsIGJ1dCBvbmx5ICcgKyBhcmd1bWVudHMubGVuZ3RoICsgJyBwcmVzZW50Jyk7CiAgfQoKICB2YXIgZGF0ZSA9IHRvRGF0ZShkaXJ0eURhdGUsIGRpcnR5T3B0aW9ucyk7CiAgdmFyIHdlZWsgPSB0b0ludGVnZXIoZGlydHlXZWVrKTsKICB2YXIgZGlmZiA9IGdldFVUQ1dlZWsoZGF0ZSwgZGlydHlPcHRpb25zKSAtIHdlZWs7CiAgZGF0ZS5zZXRVVENEYXRlKGRhdGUuZ2V0VVRDRGF0ZSgpIC0gZGlmZiAqIDcpOwogIHJldHVybiBkYXRlOwp9IC8vIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSBhIHBhcnQgb2YgcHVibGljIEFQSSB3aGVuIFVUQyBmdW5jdGlvbiB3aWxsIGJlIGltcGxlbWVudGVkLgovLyBTZWUgaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9pc3N1ZXMvMzc2CgoKZnVuY3Rpb24gc2V0VVRDSVNPRGF5KGRpcnR5RGF0ZSwgZGlydHlEYXksIGRpcnR5T3B0aW9ucykgewogIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMikgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcignMiBhcmd1bWVudHMgcmVxdWlyZWQsIGJ1dCBvbmx5ICcgKyBhcmd1bWVudHMubGVuZ3RoICsgJyBwcmVzZW50Jyk7CiAgfQoKICB2YXIgZGF5ID0gdG9JbnRlZ2VyKGRpcnR5RGF5KTsKCiAgaWYgKGRheSAlIDcgPT09IDApIHsKICAgIGRheSA9IGRheSAtIDc7CiAgfQoKICB2YXIgd2Vla1N0YXJ0c09uID0gMTsKICB2YXIgZGF0ZSA9IHRvRGF0ZShkaXJ0eURhdGUsIGRpcnR5T3B0aW9ucyk7CiAgdmFyIGN1cnJlbnREYXkgPSBkYXRlLmdldFVUQ0RheSgpOwogIHZhciByZW1haW5kZXIgPSBkYXkgJSA3OwogIHZhciBkYXlJbmRleCA9IChyZW1haW5kZXIgKyA3KSAlIDc7CiAgdmFyIGRpZmYgPSAoZGF5SW5kZXggPCB3ZWVrU3RhcnRzT24gPyA3IDogMCkgKyBkYXkgLSBjdXJyZW50RGF5OwogIGRhdGUuc2V0VVRDRGF0ZShkYXRlLmdldFVUQ0RhdGUoKSArIGRpZmYpOwogIHJldHVybiBkYXRlOwp9IC8vIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSBhIHBhcnQgb2YgcHVibGljIEFQSSB3aGVuIFVUQyBmdW5jdGlvbiB3aWxsIGJlIGltcGxlbWVudGVkLgovLyBTZWUgaXNzdWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9pc3N1ZXMvMzc2CgoKZnVuY3Rpb24gc2V0VVRDSVNPV2VlayhkaXJ0eURhdGUsIGRpcnR5SVNPV2VlaywgZGlydHlPcHRpb25zKSB7CiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCcyIGFyZ3VtZW50cyByZXF1aXJlZCwgYnV0IG9ubHkgJyArIGFyZ3VtZW50cy5sZW5ndGggKyAnIHByZXNlbnQnKTsKICB9CgogIHZhciBkYXRlID0gdG9EYXRlKGRpcnR5RGF0ZSwgZGlydHlPcHRpb25zKTsKICB2YXIgaXNvV2VlayA9IHRvSW50ZWdlcihkaXJ0eUlTT1dlZWspOwogIHZhciBkaWZmID0gZ2V0VVRDSVNPV2VlayhkYXRlLCBkaXJ0eU9wdGlvbnMpIC0gaXNvV2VlazsKICBkYXRlLnNldFVUQ0RhdGUoZGF0ZS5nZXRVVENEYXRlKCkgLSBkaWZmICogNyk7CiAgcmV0dXJuIGRhdGU7Cn0KCnZhciBNSUxMSVNFQ09ORFNfSU5fSE9VUiQxID0gMzYwMDAwMDsKdmFyIE1JTExJU0VDT05EU19JTl9NSU5VVEUkMiA9IDYwMDAwOwp2YXIgTUlMTElTRUNPTkRTX0lOX1NFQ09ORCA9IDEwMDA7CnZhciBudW1lcmljUGF0dGVybnMgPSB7CiAgbW9udGg6IC9eKDFbMC0yXXwwP1xkKS8sCiAgLy8gMCB0byAxMgogIGRhdGU6IC9eKDNbMC0xXXxbMC0yXT9cZCkvLAogIC8vIDAgdG8gMzEKICBkYXlPZlllYXI6IC9eKDM2WzAtNl18M1swLTVdXGR8WzAtMl0/XGQ/XGQpLywKICAvLyAwIHRvIDM2NgogIHdlZWs6IC9eKDVbMC0zXXxbMC00XT9cZCkvLAogIC8vIDAgdG8gNTMKICBob3VyMjNoOiAvXigyWzAtM118WzAtMV0/XGQpLywKICAvLyAwIHRvIDIzCiAgaG91cjI0aDogL14oMlswLTRdfFswLTFdP1xkKS8sCiAgLy8gMCB0byAyNAogIGhvdXIxMWg6IC9eKDFbMC0xXXwwP1xkKS8sCiAgLy8gMCB0byAxMQogIGhvdXIxMmg6IC9eKDFbMC0yXXwwP1xkKS8sCiAgLy8gMCB0byAxMgogIG1pbnV0ZTogL15bMC01XT9cZC8sCiAgLy8gMCB0byA1OQogIHNlY29uZDogL15bMC01XT9cZC8sCiAgLy8gMCB0byA1OQogIHNpbmdsZURpZ2l0OiAvXlxkLywKICAvLyAwIHRvIDkKICB0d29EaWdpdHM6IC9eXGR7MSwyfS8sCiAgLy8gMCB0byA5OQogIHRocmVlRGlnaXRzOiAvXlxkezEsM30vLAogIC8vIDAgdG8gOTk5CiAgZm91ckRpZ2l0czogL15cZHsxLDR9LywKICAvLyAwIHRvIDk5OTkKICBhbnlEaWdpdHNTaWduZWQ6IC9eLT9cZCsvLAogIHNpbmdsZURpZ2l0U2lnbmVkOiAvXi0/XGQvLAogIC8vIDAgdG8gOSwgLTAgdG8gLTkKICB0d29EaWdpdHNTaWduZWQ6IC9eLT9cZHsxLDJ9LywKICAvLyAwIHRvIDk5LCAtMCB0byAtOTkKICB0aHJlZURpZ2l0c1NpZ25lZDogL14tP1xkezEsM30vLAogIC8vIDAgdG8gOTk5LCAtMCB0byAtOTk5CiAgZm91ckRpZ2l0c1NpZ25lZDogL14tP1xkezEsNH0vIC8vIDAgdG8gOTk5OSwgLTAgdG8gLTk5OTkKCn07CnZhciB0aW1lem9uZVBhdHRlcm5zID0gewogIGJhc2ljT3B0aW9uYWxNaW51dGVzOiAvXihbKy1dKShcZHsyfSkoXGR7Mn0pP3xaLywKICBiYXNpYzogL14oWystXSkoXGR7Mn0pKFxkezJ9KXxaLywKICBiYXNpY09wdGlvbmFsU2Vjb25kczogL14oWystXSkoXGR7Mn0pKFxkezJ9KSgoXGR7Mn0pKT98Wi8sCiAgZXh0ZW5kZWQ6IC9eKFsrLV0pKFxkezJ9KTooXGR7Mn0pfFovLAogIGV4dGVuZGVkT3B0aW9uYWxTZWNvbmRzOiAvXihbKy1dKShcZHsyfSk6KFxkezJ9KSg6KFxkezJ9KSk/fFovCn07CgpmdW5jdGlvbiBwYXJzZU51bWVyaWNQYXR0ZXJuKHBhdHRlcm4sIHN0cmluZywgdmFsdWVDYWxsYmFjaykgewogIHZhciBtYXRjaFJlc3VsdCA9IHN0cmluZy5tYXRjaChwYXR0ZXJuKTsKCiAgaWYgKCFtYXRjaFJlc3VsdCkgewogICAgcmV0dXJuIG51bGw7CiAgfQoKICB2YXIgdmFsdWUgPSBwYXJzZUludChtYXRjaFJlc3VsdFswXSwgMTApOwogIHJldHVybiB7CiAgICB2YWx1ZTogdmFsdWVDYWxsYmFjayA/IHZhbHVlQ2FsbGJhY2sodmFsdWUpIDogdmFsdWUsCiAgICByZXN0OiBzdHJpbmcuc2xpY2UobWF0Y2hSZXN1bHRbMF0ubGVuZ3RoKQogIH07Cn0KCmZ1bmN0aW9uIHBhcnNlVGltZXpvbmVQYXR0ZXJuKHBhdHRlcm4sIHN0cmluZykgewogIHZhciBtYXRjaFJlc3VsdCA9IHN0cmluZy5tYXRjaChwYXR0ZXJuKTsKCiAgaWYgKCFtYXRjaFJlc3VsdCkgewogICAgcmV0dXJuIG51bGw7CiAgfSAvLyBJbnB1dCBpcyAnWicKCgogIGlmIChtYXRjaFJlc3VsdFswXSA9PT0gJ1onKSB7CiAgICByZXR1cm4gewogICAgICB2YWx1ZTogMCwKICAgICAgcmVzdDogc3RyaW5nLnNsaWNlKDEpCiAgICB9OwogIH0KCiAgdmFyIHNpZ24gPSBtYXRjaFJlc3VsdFsxXSA9PT0gJysnID8gMSA6IC0xOwogIHZhciBob3VycyA9IG1hdGNoUmVzdWx0WzJdID8gcGFyc2VJbnQobWF0Y2hSZXN1bHRbMl0sIDEwKSA6IDA7CiAgdmFyIG1pbnV0ZXMgPSBtYXRjaFJlc3VsdFszXSA/IHBhcnNlSW50KG1hdGNoUmVzdWx0WzNdLCAxMCkgOiAwOwogIHZhciBzZWNvbmRzID0gbWF0Y2hSZXN1bHRbNV0gPyBwYXJzZUludChtYXRjaFJlc3VsdFs1XSwgMTApIDogMDsKICByZXR1cm4gewogICAgdmFsdWU6IHNpZ24gKiAoaG91cnMgKiBNSUxMSVNFQ09ORFNfSU5fSE9VUiQxICsgbWludXRlcyAqIE1JTExJU0VDT05EU19JTl9NSU5VVEUkMiArIHNlY29uZHMgKiBNSUxMSVNFQ09ORFNfSU5fU0VDT05EKSwKICAgIHJlc3Q6IHN0cmluZy5zbGljZShtYXRjaFJlc3VsdFswXS5sZW5ndGgpCiAgfTsKfQoKZnVuY3Rpb24gcGFyc2VBbnlEaWdpdHNTaWduZWQoc3RyaW5nLCB2YWx1ZUNhbGxiYWNrKSB7CiAgcmV0dXJuIHBhcnNlTnVtZXJpY1BhdHRlcm4obnVtZXJpY1BhdHRlcm5zLmFueURpZ2l0c1NpZ25lZCwgc3RyaW5nLCB2YWx1ZUNhbGxiYWNrKTsKfQoKZnVuY3Rpb24gcGFyc2VORGlnaXRzKG4sIHN0cmluZywgdmFsdWVDYWxsYmFjaykgewogIHN3aXRjaCAobikgewogICAgY2FzZSAxOgogICAgICByZXR1cm4gcGFyc2VOdW1lcmljUGF0dGVybihudW1lcmljUGF0dGVybnMuc2luZ2xlRGlnaXQsIHN0cmluZywgdmFsdWVDYWxsYmFjayk7CgogICAgY2FzZSAyOgogICAgICByZXR1cm4gcGFyc2VOdW1lcmljUGF0dGVybihudW1lcmljUGF0dGVybnMudHdvRGlnaXRzLCBzdHJpbmcsIHZhbHVlQ2FsbGJhY2spOwoKICAgIGNhc2UgMzoKICAgICAgcmV0dXJuIHBhcnNlTnVtZXJpY1BhdHRlcm4obnVtZXJpY1BhdHRlcm5zLnRocmVlRGlnaXRzLCBzdHJpbmcsIHZhbHVlQ2FsbGJhY2spOwoKICAgIGNhc2UgNDoKICAgICAgcmV0dXJuIHBhcnNlTnVtZXJpY1BhdHRlcm4obnVtZXJpY1BhdHRlcm5zLmZvdXJEaWdpdHMsIHN0cmluZywgdmFsdWVDYWxsYmFjayk7CgogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuIHBhcnNlTnVtZXJpY1BhdHRlcm4obmV3IFJlZ0V4cCgnXlxcZHsxLCcgKyBuICsgJ30nKSwgc3RyaW5nLCB2YWx1ZUNhbGxiYWNrKTsKICB9Cn0KCmZ1bmN0aW9uIHBhcnNlTkRpZ2l0c1NpZ25lZChuLCBzdHJpbmcsIHZhbHVlQ2FsbGJhY2spIHsKICBzd2l0Y2ggKG4pIHsKICAgIGNhc2UgMToKICAgICAgcmV0dXJuIHBhcnNlTnVtZXJpY1BhdHRlcm4obnVtZXJpY1BhdHRlcm5zLnNpbmdsZURpZ2l0U2lnbmVkLCBzdHJpbmcsIHZhbHVlQ2FsbGJhY2spOwoKICAgIGNhc2UgMjoKICAgICAgcmV0dXJuIHBhcnNlTnVtZXJpY1BhdHRlcm4obnVtZXJpY1BhdHRlcm5zLnR3b0RpZ2l0c1NpZ25lZCwgc3RyaW5nLCB2YWx1ZUNhbGxiYWNrKTsKCiAgICBjYXNlIDM6CiAgICAgIHJldHVybiBwYXJzZU51bWVyaWNQYXR0ZXJuKG51bWVyaWNQYXR0ZXJucy50aHJlZURpZ2l0c1NpZ25lZCwgc3RyaW5nLCB2YWx1ZUNhbGxiYWNrKTsKCiAgICBjYXNlIDQ6CiAgICAgIHJldHVybiBwYXJzZU51bWVyaWNQYXR0ZXJuKG51bWVyaWNQYXR0ZXJucy5mb3VyRGlnaXRzU2lnbmVkLCBzdHJpbmcsIHZhbHVlQ2FsbGJhY2spOwoKICAgIGRlZmF1bHQ6CiAgICAgIHJldHVybiBwYXJzZU51bWVyaWNQYXR0ZXJuKG5ldyBSZWdFeHAoJ14tP1xcZHsxLCcgKyBuICsgJ30nKSwgc3RyaW5nLCB2YWx1ZUNhbGxiYWNrKTsKICB9Cn0KCmZ1bmN0aW9uIGRheVBlcmlvZEVudW1Ub0hvdXJzKGVudW1WYWx1ZSkgewogIHN3aXRjaCAoZW51bVZhbHVlKSB7CiAgICBjYXNlICdtb3JuaW5nJzoKICAgICAgcmV0dXJuIDQ7CgogICAgY2FzZSAnZXZlbmluZyc6CiAgICAgIHJldHVybiAxNzsKCiAgICBjYXNlICdwbSc6CiAgICBjYXNlICdub29uJzoKICAgIGNhc2UgJ2FmdGVybm9vbic6CiAgICAgIHJldHVybiAxMjsKCiAgICBjYXNlICdhbSc6CiAgICBjYXNlICdtaWRuaWdodCc6CiAgICBjYXNlICduaWdodCc6CiAgICBkZWZhdWx0OgogICAgICByZXR1cm4gMDsKICB9Cn0KCmZ1bmN0aW9uIG5vcm1hbGl6ZVR3b0RpZ2l0WWVhcih0d29EaWdpdFllYXIsIGN1cnJlbnRZZWFyKSB7CiAgdmFyIGlzQ29tbW9uRXJhID0gY3VycmVudFllYXIgPiAwOyAvLyBBYnNvbHV0ZSBudW1iZXIgb2YgdGhlIGN1cnJlbnQgeWVhcjoKICAvLyAxIC0+IDEgQUMKICAvLyAwIC0+IDEgQkMKICAvLyAtMSAtPiAyIEJDCgogIHZhciBhYnNDdXJyZW50WWVhciA9IGlzQ29tbW9uRXJhID8gY3VycmVudFllYXIgOiAxIC0gY3VycmVudFllYXI7CiAgdmFyIHJlc3VsdDsKCiAgaWYgKGFic0N1cnJlbnRZZWFyIDw9IDUwKSB7CiAgICByZXN1bHQgPSB0d29EaWdpdFllYXIgfHwgMTAwOwogIH0gZWxzZSB7CiAgICB2YXIgcmFuZ2VFbmQgPSBhYnNDdXJyZW50WWVhciArIDUwOwogICAgdmFyIHJhbmdlRW5kQ2VudHVyeSA9IE1hdGguZmxvb3IocmFuZ2VFbmQgLyAxMDApICogMTAwOwogICAgdmFyIGlzUHJldmlvdXNDZW50dXJ5ID0gdHdvRGlnaXRZZWFyID49IHJhbmdlRW5kICUgMTAwOwogICAgcmVzdWx0ID0gdHdvRGlnaXRZZWFyICsgcmFuZ2VFbmRDZW50dXJ5IC0gKGlzUHJldmlvdXNDZW50dXJ5ID8gMTAwIDogMCk7CiAgfQoKICByZXR1cm4gaXNDb21tb25FcmEgPyByZXN1bHQgOiAxIC0gcmVzdWx0Owp9Cgp2YXIgREFZU19JTl9NT05USCQxID0gWzMxLCAyOCwgMzEsIDMwLCAzMSwgMzAsIDMxLCAzMSwgMzAsIDMxLCAzMCwgMzFdOwp2YXIgREFZU19JTl9NT05USF9MRUFQX1lFQVIkMSA9IFszMSwgMjksIDMxLCAzMCwgMzEsIDMwLCAzMSwgMzEsIDMwLCAzMSwgMzAsIDMxXTsgLy8gVXNlciBmb3IgdmFsaWRhdGlvbgoKZnVuY3Rpb24gaXNMZWFwWWVhckluZGV4JDEoeWVhcikgewogIHJldHVybiB5ZWFyICUgNDAwID09PSAwIHx8IHllYXIgJSA0ID09PSAwICYmIHllYXIgJSAxMDAgIT09IDA7Cn0KLyoKICogfCAgICAgfCBVbml0ICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgfCBVbml0ICAgICAgICAgICAgICAgICAgICAgICAgICAgfAogKiB8LS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18CiAqIHwgIGEgIHwgQU0sIFBNICAgICAgICAgICAgICAgICAgICAgICAgIHwgIEEqIHwgTWlsbGlzZWNvbmRzIGluIGRheSAgICAgICAgICAgIHwKICogfCAgYiAgfCBBTSwgUE0sIG5vb24sIG1pZG5pZ2h0ICAgICAgICAgfCAgQiAgfCBGbGV4aWJsZSBkYXkgcGVyaW9kICAgICAgICAgICAgfAogKiB8ICBjICB8IFN0YW5kLWFsb25lIGxvY2FsIGRheSBvZiB3ZWVrICB8ICBDKiB8IExvY2FsaXplZCBob3VyIHcvIGRheSBwZXJpb2QgICB8CiAqIHwgIGQgIHwgRGF5IG9mIG1vbnRoICAgICAgICAgICAgICAgICAgIHwgIEQgIHwgRGF5IG9mIHllYXIgICAgICAgICAgICAgICAgICAgIHwKICogfCAgZSAgfCBMb2NhbCBkYXkgb2Ygd2VlayAgICAgICAgICAgICAgfCAgRSAgfCBEYXkgb2Ygd2VlayAgICAgICAgICAgICAgICAgICAgfAogKiB8ICBmICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICBGKiB8IERheSBvZiB3ZWVrIGluIG1vbnRoICAgICAgICAgICB8CiAqIHwgIGcqIHwgTW9kaWZpZWQgSnVsaWFuIGRheSAgICAgICAgICAgIHwgIEcgIHwgRXJhICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwKICogfCAgaCAgfCBIb3VyIFsxLTEyXSAgICAgICAgICAgICAgICAgICAgfCAgSCAgfCBIb3VyIFswLTIzXSAgICAgICAgICAgICAgICAgICAgfAogKiB8ICBpISB8IElTTyBkYXkgb2Ygd2VlayAgICAgICAgICAgICAgICB8ICBJISB8IElTTyB3ZWVrIG9mIHllYXIgICAgICAgICAgICAgICB8CiAqIHwgIGoqIHwgTG9jYWxpemVkIGhvdXIgdy8gZGF5IHBlcmlvZCAgIHwgIEoqIHwgTG9jYWxpemVkIGhvdXIgdy9vIGRheSBwZXJpb2QgIHwKICogfCAgayAgfCBIb3VyIFsxLTI0XSAgICAgICAgICAgICAgICAgICAgfCAgSyAgfCBIb3VyIFswLTExXSAgICAgICAgICAgICAgICAgICAgfAogKiB8ICBsKiB8IChkZXByZWNhdGVkKSAgICAgICAgICAgICAgICAgICB8ICBMICB8IFN0YW5kLWFsb25lIG1vbnRoICAgICAgICAgICAgICB8CiAqIHwgIG0gIHwgTWludXRlICAgICAgICAgICAgICAgICAgICAgICAgIHwgIE0gIHwgTW9udGggICAgICAgICAgICAgICAgICAgICAgICAgIHwKICogfCAgbiAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgTiAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfAogKiB8ICBvISB8IE9yZGluYWwgbnVtYmVyIG1vZGlmaWVyICAgICAgICB8ICBPKiB8IFRpbWV6b25lIChHTVQpICAgICAgICAgICAgICAgICB8CiAqIHwgIHAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgIFAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwKICogfCAgcSAgfCBTdGFuZC1hbG9uZSBxdWFydGVyICAgICAgICAgICAgfCAgUSAgfCBRdWFydGVyICAgICAgICAgICAgICAgICAgICAgICAgfAogKiB8ICByKiB8IFJlbGF0ZWQgR3JlZ29yaWFuIHllYXIgICAgICAgICB8ICBSISB8IElTTyB3ZWVrLW51bWJlcmluZyB5ZWFyICAgICAgICB8CiAqIHwgIHMgIHwgU2Vjb25kICAgICAgICAgICAgICAgICAgICAgICAgIHwgIFMgIHwgRnJhY3Rpb24gb2Ygc2Vjb25kICAgICAgICAgICAgIHwKICogfCAgdCEgfCBTZWNvbmRzIHRpbWVzdGFtcCAgICAgICAgICAgICAgfCAgVCEgfCBNaWxsaXNlY29uZHMgdGltZXN0YW1wICAgICAgICAgfAogKiB8ICB1ICB8IEV4dGVuZGVkIHllYXIgICAgICAgICAgICAgICAgICB8ICBVKiB8IEN5Y2xpYyB5ZWFyICAgICAgICAgICAgICAgICAgICB8CiAqIHwgIHYqIHwgVGltZXpvbmUgKGdlbmVyaWMgbm9uLWxvY2F0LikgIHwgIFYqIHwgVGltZXpvbmUgKGxvY2F0aW9uKSAgICAgICAgICAgIHwKICogfCAgdyAgfCBMb2NhbCB3ZWVrIG9mIHllYXIgICAgICAgICAgICAgfCAgVyogfCBXZWVrIG9mIG1vbnRoICAgICAgICAgICAgICAgICAgfAogKiB8ICB4ICB8IFRpbWV6b25lIChJU08tODYwMSB3L28gWikgICAgICB8ICBYICB8IFRpbWV6b25lIChJU08tODYwMSkgICAgICAgICAgICB8CiAqIHwgIHkgIHwgWWVhciAoYWJzKSAgICAgICAgICAgICAgICAgICAgIHwgIFkgIHwgTG9jYWwgd2Vlay1udW1iZXJpbmcgeWVhciAgICAgIHwKICogfCAgeiogfCBUaW1lem9uZSAoc3BlY2lmaWMgbm9uLWxvY2F0LikgfCAgWiogfCBUaW1lem9uZSAoYWxpYXNlcykgICAgICAgICAgICAgfAogKgogKiBMZXR0ZXJzIG1hcmtlZCBieSAqIGFyZSBub3QgaW1wbGVtZW50ZWQgYnV0IHJlc2VydmVkIGJ5IFVuaWNvZGUgc3RhbmRhcmQuCiAqCiAqIExldHRlcnMgbWFya2VkIGJ5ICEgYXJlIG5vbi1zdGFuZGFyZCwgYnV0IGltcGxlbWVudGVkIGJ5IGRhdGUtZm5zOgogKiAtIGBvYCBtb2RpZmllcyB0aGUgcHJldmlvdXMgdG9rZW4gdG8gdHVybiBpdCBpbnRvIGFuIG9yZGluYWwgKHNlZSBgcGFyc2VgIGRvY3MpCiAqIC0gYGlgIGlzIElTTyBkYXkgb2Ygd2Vlay4gRm9yIGBpYCBhbmQgYGlpYCBpcyByZXR1cm5zIG51bWVyaWMgSVNPIHdlZWsgZGF5cywKICogICBpLmUuIDcgZm9yIFN1bmRheSwgMSBmb3IgTW9uZGF5LCBldGMuCiAqIC0gYElgIGlzIElTTyB3ZWVrIG9mIHllYXIsIGFzIG9wcG9zZWQgdG8gYHdgIHdoaWNoIGlzIGxvY2FsIHdlZWsgb2YgeWVhci4KICogLSBgUmAgaXMgSVNPIHdlZWstbnVtYmVyaW5nIHllYXIsIGFzIG9wcG9zZWQgdG8gYFlgIHdoaWNoIGlzIGxvY2FsIHdlZWstbnVtYmVyaW5nIHllYXIuCiAqICAgYFJgIGlzIHN1cHBvc2VkIHRvIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBgSWAgYW5kIGBpYAogKiAgIGZvciB1bml2ZXJzYWwgSVNPIHdlZWstbnVtYmVyaW5nIGRhdGUsIHdoZXJlYXMKICogICBgWWAgaXMgc3VwcG9zZWQgdG8gYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIGB3YCBhbmQgYGVgCiAqICAgZm9yIHdlZWstbnVtYmVyaW5nIGRhdGUgc3BlY2lmaWMgdG8gdGhlIGxvY2FsZS4KICovCgoKdmFyIHBhcnNlcnMgPSB7CiAgLy8gRXJhCiAgRzogewogICAgcHJpb3JpdHk6IDE0MCwKICAgIHBhcnNlOiBmdW5jdGlvbiBwYXJzZShzdHJpbmcsIHRva2VuLCBtYXRjaCwgb3B0aW9ucykgewogICAgICBzd2l0Y2ggKHRva2VuKSB7CiAgICAgICAgLy8gQUQsIEJDCiAgICAgICAgY2FzZSAnRyc6CiAgICAgICAgY2FzZSAnR0cnOgogICAgICAgIGNhc2UgJ0dHRyc6CiAgICAgICAgICByZXR1cm4gbWF0Y2guZXJhKHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ2FiYnJldmlhdGVkJwogICAgICAgICAgfSkgfHwgbWF0Y2guZXJhKHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ25hcnJvdycKICAgICAgICAgIH0pOwogICAgICAgIC8vIEEsIEIKCiAgICAgICAgY2FzZSAnR0dHR0cnOgogICAgICAgICAgcmV0dXJuIG1hdGNoLmVyYShzdHJpbmcsIHsKICAgICAgICAgICAgd2lkdGg6ICduYXJyb3cnCiAgICAgICAgICB9KTsKICAgICAgICAvLyBBbm5vIERvbWluaSwgQmVmb3JlIENocmlzdAoKICAgICAgICBjYXNlICdHR0dHJzoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuIG1hdGNoLmVyYShzdHJpbmcsIHsKICAgICAgICAgICAgd2lkdGg6ICd3aWRlJwogICAgICAgICAgfSkgfHwgbWF0Y2guZXJhKHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ2FiYnJldmlhdGVkJwogICAgICAgICAgfSkgfHwgbWF0Y2guZXJhKHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ25hcnJvdycKICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQoZGF0ZSwgdmFsdWUsIG9wdGlvbnMpIHsKICAgICAgLy8gU2V0cyB5ZWFyIDEwIEJDIGlmIEJDLCBvciAxMCBBQyBpZiBBQwogICAgICBkYXRlLnNldFVUQ0Z1bGxZZWFyKHZhbHVlID09PSAxID8gMTAgOiAtOSwgMCwgMSk7CiAgICAgIGRhdGUuc2V0VVRDSG91cnMoMCwgMCwgMCwgMCk7CiAgICAgIHJldHVybiBkYXRlOwogICAgfQogIH0sCiAgLy8gWWVhcgogIHk6IHsKICAgIC8vIEZyb20gaHR0cDovL3d3dy51bmljb2RlLm9yZy9yZXBvcnRzL3RyMzUvdHIzNS0zMS90cjM1LWRhdGVzLmh0bWwjRGF0ZV9Gb3JtYXRfUGF0dGVybnMKICAgIC8vIHwgWWVhciAgICAgfCAgICAgeSB8IHl5IHwgICB5eXkgfCAgeXl5eSB8IHl5eXl5IHwKICAgIC8vIHwtLS0tLS0tLS0tfC0tLS0tLS18LS0tLXwtLS0tLS0tfC0tLS0tLS18LS0tLS0tLXwKICAgIC8vIHwgQUQgMSAgICAgfCAgICAgMSB8IDAxIHwgICAwMDEgfCAgMDAwMSB8IDAwMDAxIHwKICAgIC8vIHwgQUQgMTIgICAgfCAgICAxMiB8IDEyIHwgICAwMTIgfCAgMDAxMiB8IDAwMDEyIHwKICAgIC8vIHwgQUQgMTIzICAgfCAgIDEyMyB8IDIzIHwgICAxMjMgfCAgMDEyMyB8IDAwMTIzIHwKICAgIC8vIHwgQUQgMTIzNCAgfCAgMTIzNCB8IDM0IHwgIDEyMzQgfCAgMTIzNCB8IDAxMjM0IHwKICAgIC8vIHwgQUQgMTIzNDUgfCAxMjM0NSB8IDQ1IHwgMTIzNDUgfCAxMjM0NSB8IDEyMzQ1IHwKICAgIHByaW9yaXR5OiAxMzAsCiAgICBwYXJzZTogZnVuY3Rpb24gcGFyc2Uoc3RyaW5nLCB0b2tlbiwgbWF0Y2gsIG9wdGlvbnMpIHsKICAgICAgdmFyIHZhbHVlQ2FsbGJhY2sgPSBmdW5jdGlvbiB2YWx1ZUNhbGxiYWNrKHllYXIpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgeWVhcjogeWVhciwKICAgICAgICAgIGlzVHdvRGlnaXRZZWFyOiB0b2tlbiA9PT0gJ3l5JwogICAgICAgIH07CiAgICAgIH07CgogICAgICBzd2l0Y2ggKHRva2VuKSB7CiAgICAgICAgY2FzZSAneSc6CiAgICAgICAgICByZXR1cm4gcGFyc2VORGlnaXRzKDQsIHN0cmluZywgdmFsdWVDYWxsYmFjayk7CgogICAgICAgIGNhc2UgJ3lvJzoKICAgICAgICAgIHJldHVybiBtYXRjaC5vcmRpbmFsTnVtYmVyKHN0cmluZywgewogICAgICAgICAgICB1bml0OiAneWVhcicsCiAgICAgICAgICAgIHZhbHVlQ2FsbGJhY2s6IHZhbHVlQ2FsbGJhY2sKICAgICAgICAgIH0pOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuIHBhcnNlTkRpZ2l0cyh0b2tlbi5sZW5ndGgsIHN0cmluZywgdmFsdWVDYWxsYmFjayk7CiAgICAgIH0KICAgIH0sCiAgICB2YWxpZGF0ZTogZnVuY3Rpb24gdmFsaWRhdGUoZGF0ZSwgdmFsdWUsIG9wdGlvbnMpIHsKICAgICAgcmV0dXJuIHZhbHVlLmlzVHdvRGlnaXRZZWFyIHx8IHZhbHVlLnllYXIgPiAwOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KGRhdGUsIHZhbHVlLCBvcHRpb25zKSB7CiAgICAgIHZhciBjdXJyZW50WWVhciA9IGdldFVUQ1dlZWtZZWFyKGRhdGUsIG9wdGlvbnMpOwoKICAgICAgaWYgKHZhbHVlLmlzVHdvRGlnaXRZZWFyKSB7CiAgICAgICAgdmFyIG5vcm1hbGl6ZWRUd29EaWdpdFllYXIgPSBub3JtYWxpemVUd29EaWdpdFllYXIodmFsdWUueWVhciwgY3VycmVudFllYXIpOwogICAgICAgIGRhdGUuc2V0VVRDRnVsbFllYXIobm9ybWFsaXplZFR3b0RpZ2l0WWVhciwgMCwgMSk7CiAgICAgICAgZGF0ZS5zZXRVVENIb3VycygwLCAwLCAwLCAwKTsKICAgICAgICByZXR1cm4gZGF0ZTsKICAgICAgfQoKICAgICAgdmFyIHllYXIgPSBjdXJyZW50WWVhciA+IDAgPyB2YWx1ZS55ZWFyIDogMSAtIHZhbHVlLnllYXI7CiAgICAgIGRhdGUuc2V0VVRDRnVsbFllYXIoeWVhciwgMCwgMSk7CiAgICAgIGRhdGUuc2V0VVRDSG91cnMoMCwgMCwgMCwgMCk7CiAgICAgIHJldHVybiBkYXRlOwogICAgfQogIH0sCiAgLy8gTG9jYWwgd2Vlay1udW1iZXJpbmcgeWVhcgogIFk6IHsKICAgIHByaW9yaXR5OiAxMzAsCiAgICBwYXJzZTogZnVuY3Rpb24gcGFyc2Uoc3RyaW5nLCB0b2tlbiwgbWF0Y2gsIG9wdGlvbnMpIHsKICAgICAgdmFyIHZhbHVlQ2FsbGJhY2sgPSBmdW5jdGlvbiB2YWx1ZUNhbGxiYWNrKHllYXIpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgeWVhcjogeWVhciwKICAgICAgICAgIGlzVHdvRGlnaXRZZWFyOiB0b2tlbiA9PT0gJ1lZJwogICAgICAgIH07CiAgICAgIH07CgogICAgICBzd2l0Y2ggKHRva2VuKSB7CiAgICAgICAgY2FzZSAnWSc6CiAgICAgICAgICByZXR1cm4gcGFyc2VORGlnaXRzKDQsIHN0cmluZywgdmFsdWVDYWxsYmFjayk7CgogICAgICAgIGNhc2UgJ1lvJzoKICAgICAgICAgIHJldHVybiBtYXRjaC5vcmRpbmFsTnVtYmVyKHN0cmluZywgewogICAgICAgICAgICB1bml0OiAneWVhcicsCiAgICAgICAgICAgIHZhbHVlQ2FsbGJhY2s6IHZhbHVlQ2FsbGJhY2sKICAgICAgICAgIH0pOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuIHBhcnNlTkRpZ2l0cyh0b2tlbi5sZW5ndGgsIHN0cmluZywgdmFsdWVDYWxsYmFjayk7CiAgICAgIH0KICAgIH0sCiAgICB2YWxpZGF0ZTogZnVuY3Rpb24gdmFsaWRhdGUoZGF0ZSwgdmFsdWUsIG9wdGlvbnMpIHsKICAgICAgcmV0dXJuIHZhbHVlLmlzVHdvRGlnaXRZZWFyIHx8IHZhbHVlLnllYXIgPiAwOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KGRhdGUsIHZhbHVlLCBvcHRpb25zKSB7CiAgICAgIHZhciBjdXJyZW50WWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKTsKCiAgICAgIGlmICh2YWx1ZS5pc1R3b0RpZ2l0WWVhcikgewogICAgICAgIHZhciBub3JtYWxpemVkVHdvRGlnaXRZZWFyID0gbm9ybWFsaXplVHdvRGlnaXRZZWFyKHZhbHVlLnllYXIsIGN1cnJlbnRZZWFyKTsKICAgICAgICBkYXRlLnNldFVUQ0Z1bGxZZWFyKG5vcm1hbGl6ZWRUd29EaWdpdFllYXIsIDAsIG9wdGlvbnMuZmlyc3RXZWVrQ29udGFpbnNEYXRlKTsKICAgICAgICBkYXRlLnNldFVUQ0hvdXJzKDAsIDAsIDAsIDApOwogICAgICAgIHJldHVybiBzdGFydE9mVVRDV2VlayhkYXRlLCBvcHRpb25zKTsKICAgICAgfQoKICAgICAgdmFyIHllYXIgPSBjdXJyZW50WWVhciA+IDAgPyB2YWx1ZS55ZWFyIDogMSAtIHZhbHVlLnllYXI7CiAgICAgIGRhdGUuc2V0VVRDRnVsbFllYXIoeWVhciwgMCwgb3B0aW9ucy5maXJzdFdlZWtDb250YWluc0RhdGUpOwogICAgICBkYXRlLnNldFVUQ0hvdXJzKDAsIDAsIDAsIDApOwogICAgICByZXR1cm4gc3RhcnRPZlVUQ1dlZWsoZGF0ZSwgb3B0aW9ucyk7CiAgICB9CiAgfSwKICAvLyBJU08gd2Vlay1udW1iZXJpbmcgeWVhcgogIFI6IHsKICAgIHByaW9yaXR5OiAxMzAsCiAgICBwYXJzZTogZnVuY3Rpb24gcGFyc2Uoc3RyaW5nLCB0b2tlbiwgbWF0Y2gsIG9wdGlvbnMpIHsKICAgICAgaWYgKHRva2VuID09PSAnUicpIHsKICAgICAgICByZXR1cm4gcGFyc2VORGlnaXRzU2lnbmVkKDQsIHN0cmluZyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBwYXJzZU5EaWdpdHNTaWduZWQodG9rZW4ubGVuZ3RoLCBzdHJpbmcpOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KGRhdGUsIHZhbHVlLCBvcHRpb25zKSB7CiAgICAgIHZhciBmaXJzdFdlZWtPZlllYXIgPSBuZXcgRGF0ZSgwKTsKICAgICAgZmlyc3RXZWVrT2ZZZWFyLnNldFVUQ0Z1bGxZZWFyKHZhbHVlLCAwLCA0KTsKICAgICAgZmlyc3RXZWVrT2ZZZWFyLnNldFVUQ0hvdXJzKDAsIDAsIDAsIDApOwogICAgICByZXR1cm4gc3RhcnRPZlVUQ0lTT1dlZWsoZmlyc3RXZWVrT2ZZZWFyKTsKICAgIH0KICB9LAogIC8vIEV4dGVuZGVkIHllYXIKICB1OiB7CiAgICBwcmlvcml0eTogMTMwLAogICAgcGFyc2U6IGZ1bmN0aW9uIHBhcnNlKHN0cmluZywgdG9rZW4sIG1hdGNoLCBvcHRpb25zKSB7CiAgICAgIGlmICh0b2tlbiA9PT0gJ3UnKSB7CiAgICAgICAgcmV0dXJuIHBhcnNlTkRpZ2l0c1NpZ25lZCg0LCBzdHJpbmcpOwogICAgICB9CgogICAgICByZXR1cm4gcGFyc2VORGlnaXRzU2lnbmVkKHRva2VuLmxlbmd0aCwgc3RyaW5nKTsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChkYXRlLCB2YWx1ZSwgb3B0aW9ucykgewogICAgICBkYXRlLnNldFVUQ0Z1bGxZZWFyKHZhbHVlLCAwLCAxKTsKICAgICAgZGF0ZS5zZXRVVENIb3VycygwLCAwLCAwLCAwKTsKICAgICAgcmV0dXJuIGRhdGU7CiAgICB9CiAgfSwKICAvLyBRdWFydGVyCiAgUTogewogICAgcHJpb3JpdHk6IDEyMCwKICAgIHBhcnNlOiBmdW5jdGlvbiBwYXJzZShzdHJpbmcsIHRva2VuLCBtYXRjaCwgb3B0aW9ucykgewogICAgICBzd2l0Y2ggKHRva2VuKSB7CiAgICAgICAgLy8gMSwgMiwgMywgNAogICAgICAgIGNhc2UgJ1EnOgogICAgICAgIGNhc2UgJ1FRJzoKICAgICAgICAgIC8vIDAxLCAwMiwgMDMsIDA0CiAgICAgICAgICByZXR1cm4gcGFyc2VORGlnaXRzKHRva2VuLmxlbmd0aCwgc3RyaW5nKTsKICAgICAgICAvLyAxc3QsIDJuZCwgM3JkLCA0dGgKCiAgICAgICAgY2FzZSAnUW8nOgogICAgICAgICAgcmV0dXJuIG1hdGNoLm9yZGluYWxOdW1iZXIoc3RyaW5nLCB7CiAgICAgICAgICAgIHVuaXQ6ICdxdWFydGVyJwogICAgICAgICAgfSk7CiAgICAgICAgLy8gUTEsIFEyLCBRMywgUTQKCiAgICAgICAgY2FzZSAnUVFRJzoKICAgICAgICAgIHJldHVybiBtYXRjaC5xdWFydGVyKHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ2FiYnJldmlhdGVkJywKICAgICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnCiAgICAgICAgICB9KSB8fCBtYXRjaC5xdWFydGVyKHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ25hcnJvdycsCiAgICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJwogICAgICAgICAgfSk7CiAgICAgICAgLy8gMSwgMiwgMywgNCAobmFycm93IHF1YXJ0ZXI7IGNvdWxkIGJlIG5vdCBudW1lcmljYWwpCgogICAgICAgIGNhc2UgJ1FRUVFRJzoKICAgICAgICAgIHJldHVybiBtYXRjaC5xdWFydGVyKHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ25hcnJvdycsCiAgICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJwogICAgICAgICAgfSk7CiAgICAgICAgLy8gMXN0IHF1YXJ0ZXIsIDJuZCBxdWFydGVyLCAuLi4KCiAgICAgICAgY2FzZSAnUVFRUSc6CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybiBtYXRjaC5xdWFydGVyKHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ3dpZGUnLAogICAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycKICAgICAgICAgIH0pIHx8IG1hdGNoLnF1YXJ0ZXIoc3RyaW5nLCB7CiAgICAgICAgICAgIHdpZHRoOiAnYWJicmV2aWF0ZWQnLAogICAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycKICAgICAgICAgIH0pIHx8IG1hdGNoLnF1YXJ0ZXIoc3RyaW5nLCB7CiAgICAgICAgICAgIHdpZHRoOiAnbmFycm93JywKICAgICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnCiAgICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHZhbGlkYXRlOiBmdW5jdGlvbiB2YWxpZGF0ZShkYXRlLCB2YWx1ZSwgb3B0aW9ucykgewogICAgICByZXR1cm4gdmFsdWUgPj0gMSAmJiB2YWx1ZSA8PSA0OwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KGRhdGUsIHZhbHVlLCBvcHRpb25zKSB7CiAgICAgIGRhdGUuc2V0VVRDTW9udGgoKHZhbHVlIC0gMSkgKiAzLCAxKTsKICAgICAgZGF0ZS5zZXRVVENIb3VycygwLCAwLCAwLCAwKTsKICAgICAgcmV0dXJuIGRhdGU7CiAgICB9CiAgfSwKICAvLyBTdGFuZC1hbG9uZSBxdWFydGVyCiAgcTogewogICAgcHJpb3JpdHk6IDEyMCwKICAgIHBhcnNlOiBmdW5jdGlvbiBwYXJzZShzdHJpbmcsIHRva2VuLCBtYXRjaCwgb3B0aW9ucykgewogICAgICBzd2l0Y2ggKHRva2VuKSB7CiAgICAgICAgLy8gMSwgMiwgMywgNAogICAgICAgIGNhc2UgJ3EnOgogICAgICAgIGNhc2UgJ3FxJzoKICAgICAgICAgIC8vIDAxLCAwMiwgMDMsIDA0CiAgICAgICAgICByZXR1cm4gcGFyc2VORGlnaXRzKHRva2VuLmxlbmd0aCwgc3RyaW5nKTsKICAgICAgICAvLyAxc3QsIDJuZCwgM3JkLCA0dGgKCiAgICAgICAgY2FzZSAncW8nOgogICAgICAgICAgcmV0dXJuIG1hdGNoLm9yZGluYWxOdW1iZXIoc3RyaW5nLCB7CiAgICAgICAgICAgIHVuaXQ6ICdxdWFydGVyJwogICAgICAgICAgfSk7CiAgICAgICAgLy8gUTEsIFEyLCBRMywgUTQKCiAgICAgICAgY2FzZSAncXFxJzoKICAgICAgICAgIHJldHVybiBtYXRjaC5xdWFydGVyKHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ2FiYnJldmlhdGVkJywKICAgICAgICAgICAgY29udGV4dDogJ3N0YW5kYWxvbmUnCiAgICAgICAgICB9KSB8fCBtYXRjaC5xdWFydGVyKHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ25hcnJvdycsCiAgICAgICAgICAgIGNvbnRleHQ6ICdzdGFuZGFsb25lJwogICAgICAgICAgfSk7CiAgICAgICAgLy8gMSwgMiwgMywgNCAobmFycm93IHF1YXJ0ZXI7IGNvdWxkIGJlIG5vdCBudW1lcmljYWwpCgogICAgICAgIGNhc2UgJ3FxcXFxJzoKICAgICAgICAgIHJldHVybiBtYXRjaC5xdWFydGVyKHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ25hcnJvdycsCiAgICAgICAgICAgIGNvbnRleHQ6ICdzdGFuZGFsb25lJwogICAgICAgICAgfSk7CiAgICAgICAgLy8gMXN0IHF1YXJ0ZXIsIDJuZCBxdWFydGVyLCAuLi4KCiAgICAgICAgY2FzZSAncXFxcSc6CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybiBtYXRjaC5xdWFydGVyKHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ3dpZGUnLAogICAgICAgICAgICBjb250ZXh0OiAnc3RhbmRhbG9uZScKICAgICAgICAgIH0pIHx8IG1hdGNoLnF1YXJ0ZXIoc3RyaW5nLCB7CiAgICAgICAgICAgIHdpZHRoOiAnYWJicmV2aWF0ZWQnLAogICAgICAgICAgICBjb250ZXh0OiAnc3RhbmRhbG9uZScKICAgICAgICAgIH0pIHx8IG1hdGNoLnF1YXJ0ZXIoc3RyaW5nLCB7CiAgICAgICAgICAgIHdpZHRoOiAnbmFycm93JywKICAgICAgICAgICAgY29udGV4dDogJ3N0YW5kYWxvbmUnCiAgICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHZhbGlkYXRlOiBmdW5jdGlvbiB2YWxpZGF0ZShkYXRlLCB2YWx1ZSwgb3B0aW9ucykgewogICAgICByZXR1cm4gdmFsdWUgPj0gMSAmJiB2YWx1ZSA8PSA0OwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KGRhdGUsIHZhbHVlLCBvcHRpb25zKSB7CiAgICAgIGRhdGUuc2V0VVRDTW9udGgoKHZhbHVlIC0gMSkgKiAzLCAxKTsKICAgICAgZGF0ZS5zZXRVVENIb3VycygwLCAwLCAwLCAwKTsKICAgICAgcmV0dXJuIGRhdGU7CiAgICB9CiAgfSwKICAvLyBNb250aAogIE06IHsKICAgIHByaW9yaXR5OiAxMTAsCiAgICBwYXJzZTogZnVuY3Rpb24gcGFyc2Uoc3RyaW5nLCB0b2tlbiwgbWF0Y2gsIG9wdGlvbnMpIHsKICAgICAgdmFyIHZhbHVlQ2FsbGJhY2sgPSBmdW5jdGlvbiB2YWx1ZUNhbGxiYWNrKHZhbHVlKSB7CiAgICAgICAgcmV0dXJuIHZhbHVlIC0gMTsKICAgICAgfTsKCiAgICAgIHN3aXRjaCAodG9rZW4pIHsKICAgICAgICAvLyAxLCAyLCAuLi4sIDEyCiAgICAgICAgY2FzZSAnTSc6CiAgICAgICAgICByZXR1cm4gcGFyc2VOdW1lcmljUGF0dGVybihudW1lcmljUGF0dGVybnMubW9udGgsIHN0cmluZywgdmFsdWVDYWxsYmFjayk7CiAgICAgICAgLy8gMDEsIDAyLCAuLi4sIDEyCgogICAgICAgIGNhc2UgJ01NJzoKICAgICAgICAgIHJldHVybiBwYXJzZU5EaWdpdHMoMiwgc3RyaW5nLCB2YWx1ZUNhbGxiYWNrKTsKICAgICAgICAvLyAxc3QsIDJuZCwgLi4uLCAxMnRoCgogICAgICAgIGNhc2UgJ01vJzoKICAgICAgICAgIHJldHVybiBtYXRjaC5vcmRpbmFsTnVtYmVyKHN0cmluZywgewogICAgICAgICAgICB1bml0OiAnbW9udGgnLAogICAgICAgICAgICB2YWx1ZUNhbGxiYWNrOiB2YWx1ZUNhbGxiYWNrCiAgICAgICAgICB9KTsKICAgICAgICAvLyBKYW4sIEZlYiwgLi4uLCBEZWMKCiAgICAgICAgY2FzZSAnTU1NJzoKICAgICAgICAgIHJldHVybiBtYXRjaC5tb250aChzdHJpbmcsIHsKICAgICAgICAgICAgd2lkdGg6ICdhYmJyZXZpYXRlZCcsCiAgICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJwogICAgICAgICAgfSkgfHwgbWF0Y2gubW9udGgoc3RyaW5nLCB7CiAgICAgICAgICAgIHdpZHRoOiAnbmFycm93JywKICAgICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnCiAgICAgICAgICB9KTsKICAgICAgICAvLyBKLCBGLCAuLi4sIEQKCiAgICAgICAgY2FzZSAnTU1NTU0nOgogICAgICAgICAgcmV0dXJuIG1hdGNoLm1vbnRoKHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ25hcnJvdycsCiAgICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJwogICAgICAgICAgfSk7CiAgICAgICAgLy8gSmFudWFyeSwgRmVicnVhcnksIC4uLiwgRGVjZW1iZXIKCiAgICAgICAgY2FzZSAnTU1NTSc6CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybiBtYXRjaC5tb250aChzdHJpbmcsIHsKICAgICAgICAgICAgd2lkdGg6ICd3aWRlJywKICAgICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnCiAgICAgICAgICB9KSB8fCBtYXRjaC5tb250aChzdHJpbmcsIHsKICAgICAgICAgICAgd2lkdGg6ICdhYmJyZXZpYXRlZCcsCiAgICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJwogICAgICAgICAgfSkgfHwgbWF0Y2gubW9udGgoc3RyaW5nLCB7CiAgICAgICAgICAgIHdpZHRoOiAnbmFycm93JywKICAgICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnCiAgICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHZhbGlkYXRlOiBmdW5jdGlvbiB2YWxpZGF0ZShkYXRlLCB2YWx1ZSwgb3B0aW9ucykgewogICAgICByZXR1cm4gdmFsdWUgPj0gMCAmJiB2YWx1ZSA8PSAxMTsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChkYXRlLCB2YWx1ZSwgb3B0aW9ucykgewogICAgICBkYXRlLnNldFVUQ01vbnRoKHZhbHVlLCAxKTsKICAgICAgZGF0ZS5zZXRVVENIb3VycygwLCAwLCAwLCAwKTsKICAgICAgcmV0dXJuIGRhdGU7CiAgICB9CiAgfSwKICAvLyBTdGFuZC1hbG9uZSBtb250aAogIEw6IHsKICAgIHByaW9yaXR5OiAxMTAsCiAgICBwYXJzZTogZnVuY3Rpb24gcGFyc2Uoc3RyaW5nLCB0b2tlbiwgbWF0Y2gsIG9wdGlvbnMpIHsKICAgICAgdmFyIHZhbHVlQ2FsbGJhY2sgPSBmdW5jdGlvbiB2YWx1ZUNhbGxiYWNrKHZhbHVlKSB7CiAgICAgICAgcmV0dXJuIHZhbHVlIC0gMTsKICAgICAgfTsKCiAgICAgIHN3aXRjaCAodG9rZW4pIHsKICAgICAgICAvLyAxLCAyLCAuLi4sIDEyCiAgICAgICAgY2FzZSAnTCc6CiAgICAgICAgICByZXR1cm4gcGFyc2VOdW1lcmljUGF0dGVybihudW1lcmljUGF0dGVybnMubW9udGgsIHN0cmluZywgdmFsdWVDYWxsYmFjayk7CiAgICAgICAgLy8gMDEsIDAyLCAuLi4sIDEyCgogICAgICAgIGNhc2UgJ0xMJzoKICAgICAgICAgIHJldHVybiBwYXJzZU5EaWdpdHMoMiwgc3RyaW5nLCB2YWx1ZUNhbGxiYWNrKTsKICAgICAgICAvLyAxc3QsIDJuZCwgLi4uLCAxMnRoCgogICAgICAgIGNhc2UgJ0xvJzoKICAgICAgICAgIHJldHVybiBtYXRjaC5vcmRpbmFsTnVtYmVyKHN0cmluZywgewogICAgICAgICAgICB1bml0OiAnbW9udGgnLAogICAgICAgICAgICB2YWx1ZUNhbGxiYWNrOiB2YWx1ZUNhbGxiYWNrCiAgICAgICAgICB9KTsKICAgICAgICAvLyBKYW4sIEZlYiwgLi4uLCBEZWMKCiAgICAgICAgY2FzZSAnTExMJzoKICAgICAgICAgIHJldHVybiBtYXRjaC5tb250aChzdHJpbmcsIHsKICAgICAgICAgICAgd2lkdGg6ICdhYmJyZXZpYXRlZCcsCiAgICAgICAgICAgIGNvbnRleHQ6ICdzdGFuZGFsb25lJwogICAgICAgICAgfSkgfHwgbWF0Y2gubW9udGgoc3RyaW5nLCB7CiAgICAgICAgICAgIHdpZHRoOiAnbmFycm93JywKICAgICAgICAgICAgY29udGV4dDogJ3N0YW5kYWxvbmUnCiAgICAgICAgICB9KTsKICAgICAgICAvLyBKLCBGLCAuLi4sIEQKCiAgICAgICAgY2FzZSAnTExMTEwnOgogICAgICAgICAgcmV0dXJuIG1hdGNoLm1vbnRoKHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ25hcnJvdycsCiAgICAgICAgICAgIGNvbnRleHQ6ICdzdGFuZGFsb25lJwogICAgICAgICAgfSk7CiAgICAgICAgLy8gSmFudWFyeSwgRmVicnVhcnksIC4uLiwgRGVjZW1iZXIKCiAgICAgICAgY2FzZSAnTExMTCc6CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybiBtYXRjaC5tb250aChzdHJpbmcsIHsKICAgICAgICAgICAgd2lkdGg6ICd3aWRlJywKICAgICAgICAgICAgY29udGV4dDogJ3N0YW5kYWxvbmUnCiAgICAgICAgICB9KSB8fCBtYXRjaC5tb250aChzdHJpbmcsIHsKICAgICAgICAgICAgd2lkdGg6ICdhYmJyZXZpYXRlZCcsCiAgICAgICAgICAgIGNvbnRleHQ6ICdzdGFuZGFsb25lJwogICAgICAgICAgfSkgfHwgbWF0Y2gubW9udGgoc3RyaW5nLCB7CiAgICAgICAgICAgIHdpZHRoOiAnbmFycm93JywKICAgICAgICAgICAgY29udGV4dDogJ3N0YW5kYWxvbmUnCiAgICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHZhbGlkYXRlOiBmdW5jdGlvbiB2YWxpZGF0ZShkYXRlLCB2YWx1ZSwgb3B0aW9ucykgewogICAgICByZXR1cm4gdmFsdWUgPj0gMCAmJiB2YWx1ZSA8PSAxMTsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChkYXRlLCB2YWx1ZSwgb3B0aW9ucykgewogICAgICBkYXRlLnNldFVUQ01vbnRoKHZhbHVlLCAxKTsKICAgICAgZGF0ZS5zZXRVVENIb3VycygwLCAwLCAwLCAwKTsKICAgICAgcmV0dXJuIGRhdGU7CiAgICB9CiAgfSwKICAvLyBMb2NhbCB3ZWVrIG9mIHllYXIKICB3OiB7CiAgICBwcmlvcml0eTogMTAwLAogICAgcGFyc2U6IGZ1bmN0aW9uIHBhcnNlKHN0cmluZywgdG9rZW4sIG1hdGNoLCBvcHRpb25zKSB7CiAgICAgIHN3aXRjaCAodG9rZW4pIHsKICAgICAgICBjYXNlICd3JzoKICAgICAgICAgIHJldHVybiBwYXJzZU51bWVyaWNQYXR0ZXJuKG51bWVyaWNQYXR0ZXJucy53ZWVrLCBzdHJpbmcpOwoKICAgICAgICBjYXNlICd3byc6CiAgICAgICAgICByZXR1cm4gbWF0Y2gub3JkaW5hbE51bWJlcihzdHJpbmcsIHsKICAgICAgICAgICAgdW5pdDogJ3dlZWsnCiAgICAgICAgICB9KTsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybiBwYXJzZU5EaWdpdHModG9rZW4ubGVuZ3RoLCBzdHJpbmcpOwogICAgICB9CiAgICB9LAogICAgdmFsaWRhdGU6IGZ1bmN0aW9uIHZhbGlkYXRlKGRhdGUsIHZhbHVlLCBvcHRpb25zKSB7CiAgICAgIHJldHVybiB2YWx1ZSA+PSAxICYmIHZhbHVlIDw9IDUzOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KGRhdGUsIHZhbHVlLCBvcHRpb25zKSB7CiAgICAgIHJldHVybiBzdGFydE9mVVRDV2VlayhzZXRVVENXZWVrKGRhdGUsIHZhbHVlLCBvcHRpb25zKSwgb3B0aW9ucyk7CiAgICB9CiAgfSwKICAvLyBJU08gd2VlayBvZiB5ZWFyCiAgSTogewogICAgcHJpb3JpdHk6IDEwMCwKICAgIHBhcnNlOiBmdW5jdGlvbiBwYXJzZShzdHJpbmcsIHRva2VuLCBtYXRjaCwgb3B0aW9ucykgewogICAgICBzd2l0Y2ggKHRva2VuKSB7CiAgICAgICAgY2FzZSAnSSc6CiAgICAgICAgICByZXR1cm4gcGFyc2VOdW1lcmljUGF0dGVybihudW1lcmljUGF0dGVybnMud2Vlaywgc3RyaW5nKTsKCiAgICAgICAgY2FzZSAnSW8nOgogICAgICAgICAgcmV0dXJuIG1hdGNoLm9yZGluYWxOdW1iZXIoc3RyaW5nLCB7CiAgICAgICAgICAgIHVuaXQ6ICd3ZWVrJwogICAgICAgICAgfSk7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gcGFyc2VORGlnaXRzKHRva2VuLmxlbmd0aCwgc3RyaW5nKTsKICAgICAgfQogICAgfSwKICAgIHZhbGlkYXRlOiBmdW5jdGlvbiB2YWxpZGF0ZShkYXRlLCB2YWx1ZSwgb3B0aW9ucykgewogICAgICByZXR1cm4gdmFsdWUgPj0gMSAmJiB2YWx1ZSA8PSA1MzsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChkYXRlLCB2YWx1ZSwgb3B0aW9ucykgewogICAgICByZXR1cm4gc3RhcnRPZlVUQ0lTT1dlZWsoc2V0VVRDSVNPV2VlayhkYXRlLCB2YWx1ZSwgb3B0aW9ucyksIG9wdGlvbnMpOwogICAgfQogIH0sCiAgLy8gRGF5IG9mIHRoZSBtb250aAogIGQ6IHsKICAgIHByaW9yaXR5OiA5MCwKICAgIHBhcnNlOiBmdW5jdGlvbiBwYXJzZShzdHJpbmcsIHRva2VuLCBtYXRjaCwgb3B0aW9ucykgewogICAgICBzd2l0Y2ggKHRva2VuKSB7CiAgICAgICAgY2FzZSAnZCc6CiAgICAgICAgICByZXR1cm4gcGFyc2VOdW1lcmljUGF0dGVybihudW1lcmljUGF0dGVybnMuZGF0ZSwgc3RyaW5nKTsKCiAgICAgICAgY2FzZSAnZG8nOgogICAgICAgICAgcmV0dXJuIG1hdGNoLm9yZGluYWxOdW1iZXIoc3RyaW5nLCB7CiAgICAgICAgICAgIHVuaXQ6ICdkYXRlJwogICAgICAgICAgfSk7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gcGFyc2VORGlnaXRzKHRva2VuLmxlbmd0aCwgc3RyaW5nKTsKICAgICAgfQogICAgfSwKICAgIHZhbGlkYXRlOiBmdW5jdGlvbiB2YWxpZGF0ZShkYXRlLCB2YWx1ZSwgb3B0aW9ucykgewogICAgICB2YXIgeWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKTsKICAgICAgdmFyIGlzTGVhcFllYXIgPSBpc0xlYXBZZWFySW5kZXgkMSh5ZWFyKTsKICAgICAgdmFyIG1vbnRoID0gZGF0ZS5nZXRVVENNb250aCgpOwoKICAgICAgaWYgKGlzTGVhcFllYXIpIHsKICAgICAgICByZXR1cm4gdmFsdWUgPj0gMSAmJiB2YWx1ZSA8PSBEQVlTX0lOX01PTlRIX0xFQVBfWUVBUiQxW21vbnRoXTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdmFsdWUgPj0gMSAmJiB2YWx1ZSA8PSBEQVlTX0lOX01PTlRIJDFbbW9udGhdOwogICAgICB9CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQoZGF0ZSwgdmFsdWUsIG9wdGlvbnMpIHsKICAgICAgZGF0ZS5zZXRVVENEYXRlKHZhbHVlKTsKICAgICAgZGF0ZS5zZXRVVENIb3VycygwLCAwLCAwLCAwKTsKICAgICAgcmV0dXJuIGRhdGU7CiAgICB9CiAgfSwKICAvLyBEYXkgb2YgeWVhcgogIEQ6IHsKICAgIHByaW9yaXR5OiA5MCwKICAgIHBhcnNlOiBmdW5jdGlvbiBwYXJzZShzdHJpbmcsIHRva2VuLCBtYXRjaCwgb3B0aW9ucykgewogICAgICBzd2l0Y2ggKHRva2VuKSB7CiAgICAgICAgY2FzZSAnRCc6CiAgICAgICAgY2FzZSAnREQnOgogICAgICAgICAgcmV0dXJuIHBhcnNlTnVtZXJpY1BhdHRlcm4obnVtZXJpY1BhdHRlcm5zLmRheU9mWWVhciwgc3RyaW5nKTsKCiAgICAgICAgY2FzZSAnRG8nOgogICAgICAgICAgcmV0dXJuIG1hdGNoLm9yZGluYWxOdW1iZXIoc3RyaW5nLCB7CiAgICAgICAgICAgIHVuaXQ6ICdkYXRlJwogICAgICAgICAgfSk7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gcGFyc2VORGlnaXRzKHRva2VuLmxlbmd0aCwgc3RyaW5nKTsKICAgICAgfQogICAgfSwKICAgIHZhbGlkYXRlOiBmdW5jdGlvbiB2YWxpZGF0ZShkYXRlLCB2YWx1ZSwgb3B0aW9ucykgewogICAgICB2YXIgeWVhciA9IGRhdGUuZ2V0VVRDRnVsbFllYXIoKTsKICAgICAgdmFyIGlzTGVhcFllYXIgPSBpc0xlYXBZZWFySW5kZXgkMSh5ZWFyKTsKCiAgICAgIGlmIChpc0xlYXBZZWFyKSB7CiAgICAgICAgcmV0dXJuIHZhbHVlID49IDEgJiYgdmFsdWUgPD0gMzY2OwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB2YWx1ZSA+PSAxICYmIHZhbHVlIDw9IDM2NTsKICAgICAgfQogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KGRhdGUsIHZhbHVlLCBvcHRpb25zKSB7CiAgICAgIGRhdGUuc2V0VVRDTW9udGgoMCwgdmFsdWUpOwogICAgICBkYXRlLnNldFVUQ0hvdXJzKDAsIDAsIDAsIDApOwogICAgICByZXR1cm4gZGF0ZTsKICAgIH0KICB9LAogIC8vIERheSBvZiB3ZWVrCiAgRTogewogICAgcHJpb3JpdHk6IDkwLAogICAgcGFyc2U6IGZ1bmN0aW9uIHBhcnNlKHN0cmluZywgdG9rZW4sIG1hdGNoLCBvcHRpb25zKSB7CiAgICAgIHN3aXRjaCAodG9rZW4pIHsKICAgICAgICAvLyBUdWUKICAgICAgICBjYXNlICdFJzoKICAgICAgICBjYXNlICdFRSc6CiAgICAgICAgY2FzZSAnRUVFJzoKICAgICAgICAgIHJldHVybiBtYXRjaC5kYXkoc3RyaW5nLCB7CiAgICAgICAgICAgIHdpZHRoOiAnYWJicmV2aWF0ZWQnLAogICAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycKICAgICAgICAgIH0pIHx8IG1hdGNoLmRheShzdHJpbmcsIHsKICAgICAgICAgICAgd2lkdGg6ICdzaG9ydCcsCiAgICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJwogICAgICAgICAgfSkgfHwgbWF0Y2guZGF5KHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ25hcnJvdycsCiAgICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJwogICAgICAgICAgfSk7CiAgICAgICAgLy8gVAoKICAgICAgICBjYXNlICdFRUVFRSc6CiAgICAgICAgICByZXR1cm4gbWF0Y2guZGF5KHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ25hcnJvdycsCiAgICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJwogICAgICAgICAgfSk7CiAgICAgICAgLy8gVHUKCiAgICAgICAgY2FzZSAnRUVFRUVFJzoKICAgICAgICAgIHJldHVybiBtYXRjaC5kYXkoc3RyaW5nLCB7CiAgICAgICAgICAgIHdpZHRoOiAnc2hvcnQnLAogICAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycKICAgICAgICAgIH0pIHx8IG1hdGNoLmRheShzdHJpbmcsIHsKICAgICAgICAgICAgd2lkdGg6ICduYXJyb3cnLAogICAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycKICAgICAgICAgIH0pOwogICAgICAgIC8vIFR1ZXNkYXkKCiAgICAgICAgY2FzZSAnRUVFRSc6CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybiBtYXRjaC5kYXkoc3RyaW5nLCB7CiAgICAgICAgICAgIHdpZHRoOiAnd2lkZScsCiAgICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJwogICAgICAgICAgfSkgfHwgbWF0Y2guZGF5KHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ2FiYnJldmlhdGVkJywKICAgICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnCiAgICAgICAgICB9KSB8fCBtYXRjaC5kYXkoc3RyaW5nLCB7CiAgICAgICAgICAgIHdpZHRoOiAnc2hvcnQnLAogICAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycKICAgICAgICAgIH0pIHx8IG1hdGNoLmRheShzdHJpbmcsIHsKICAgICAgICAgICAgd2lkdGg6ICduYXJyb3cnLAogICAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycKICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgdmFsaWRhdGU6IGZ1bmN0aW9uIHZhbGlkYXRlKGRhdGUsIHZhbHVlLCBvcHRpb25zKSB7CiAgICAgIHJldHVybiB2YWx1ZSA+PSAwICYmIHZhbHVlIDw9IDY7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQoZGF0ZSwgdmFsdWUsIG9wdGlvbnMpIHsKICAgICAgZGF0ZSA9IHNldFVUQ0RheShkYXRlLCB2YWx1ZSwgb3B0aW9ucyk7CiAgICAgIGRhdGUuc2V0VVRDSG91cnMoMCwgMCwgMCwgMCk7CiAgICAgIHJldHVybiBkYXRlOwogICAgfQogIH0sCiAgLy8gTG9jYWwgZGF5IG9mIHdlZWsKICBlOiB7CiAgICBwcmlvcml0eTogOTAsCiAgICBwYXJzZTogZnVuY3Rpb24gcGFyc2Uoc3RyaW5nLCB0b2tlbiwgbWF0Y2gsIG9wdGlvbnMpIHsKICAgICAgdmFyIHZhbHVlQ2FsbGJhY2sgPSBmdW5jdGlvbiB2YWx1ZUNhbGxiYWNrKHZhbHVlKSB7CiAgICAgICAgdmFyIHdob2xlV2Vla0RheXMgPSBNYXRoLmZsb29yKCh2YWx1ZSAtIDEpIC8gNykgKiA3OwogICAgICAgIHJldHVybiAodmFsdWUgKyBvcHRpb25zLndlZWtTdGFydHNPbiArIDYpICUgNyArIHdob2xlV2Vla0RheXM7CiAgICAgIH07CgogICAgICBzd2l0Y2ggKHRva2VuKSB7CiAgICAgICAgLy8gMwogICAgICAgIGNhc2UgJ2UnOgogICAgICAgIGNhc2UgJ2VlJzoKICAgICAgICAgIC8vIDAzCiAgICAgICAgICByZXR1cm4gcGFyc2VORGlnaXRzKHRva2VuLmxlbmd0aCwgc3RyaW5nLCB2YWx1ZUNhbGxiYWNrKTsKICAgICAgICAvLyAzcmQKCiAgICAgICAgY2FzZSAnZW8nOgogICAgICAgICAgcmV0dXJuIG1hdGNoLm9yZGluYWxOdW1iZXIoc3RyaW5nLCB7CiAgICAgICAgICAgIHVuaXQ6ICdkYXknLAogICAgICAgICAgICB2YWx1ZUNhbGxiYWNrOiB2YWx1ZUNhbGxiYWNrCiAgICAgICAgICB9KTsKICAgICAgICAvLyBUdWUKCiAgICAgICAgY2FzZSAnZWVlJzoKICAgICAgICAgIHJldHVybiBtYXRjaC5kYXkoc3RyaW5nLCB7CiAgICAgICAgICAgIHdpZHRoOiAnYWJicmV2aWF0ZWQnLAogICAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycKICAgICAgICAgIH0pIHx8IG1hdGNoLmRheShzdHJpbmcsIHsKICAgICAgICAgICAgd2lkdGg6ICdzaG9ydCcsCiAgICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJwogICAgICAgICAgfSkgfHwgbWF0Y2guZGF5KHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ25hcnJvdycsCiAgICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJwogICAgICAgICAgfSk7CiAgICAgICAgLy8gVAoKICAgICAgICBjYXNlICdlZWVlZSc6CiAgICAgICAgICByZXR1cm4gbWF0Y2guZGF5KHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ25hcnJvdycsCiAgICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJwogICAgICAgICAgfSk7CiAgICAgICAgLy8gVHUKCiAgICAgICAgY2FzZSAnZWVlZWVlJzoKICAgICAgICAgIHJldHVybiBtYXRjaC5kYXkoc3RyaW5nLCB7CiAgICAgICAgICAgIHdpZHRoOiAnc2hvcnQnLAogICAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycKICAgICAgICAgIH0pIHx8IG1hdGNoLmRheShzdHJpbmcsIHsKICAgICAgICAgICAgd2lkdGg6ICduYXJyb3cnLAogICAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycKICAgICAgICAgIH0pOwogICAgICAgIC8vIFR1ZXNkYXkKCiAgICAgICAgY2FzZSAnZWVlZSc6CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybiBtYXRjaC5kYXkoc3RyaW5nLCB7CiAgICAgICAgICAgIHdpZHRoOiAnd2lkZScsCiAgICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJwogICAgICAgICAgfSkgfHwgbWF0Y2guZGF5KHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ2FiYnJldmlhdGVkJywKICAgICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnCiAgICAgICAgICB9KSB8fCBtYXRjaC5kYXkoc3RyaW5nLCB7CiAgICAgICAgICAgIHdpZHRoOiAnc2hvcnQnLAogICAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycKICAgICAgICAgIH0pIHx8IG1hdGNoLmRheShzdHJpbmcsIHsKICAgICAgICAgICAgd2lkdGg6ICduYXJyb3cnLAogICAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycKICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgdmFsaWRhdGU6IGZ1bmN0aW9uIHZhbGlkYXRlKGRhdGUsIHZhbHVlLCBvcHRpb25zKSB7CiAgICAgIHJldHVybiB2YWx1ZSA+PSAwICYmIHZhbHVlIDw9IDY7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQoZGF0ZSwgdmFsdWUsIG9wdGlvbnMpIHsKICAgICAgZGF0ZSA9IHNldFVUQ0RheShkYXRlLCB2YWx1ZSwgb3B0aW9ucyk7CiAgICAgIGRhdGUuc2V0VVRDSG91cnMoMCwgMCwgMCwgMCk7CiAgICAgIHJldHVybiBkYXRlOwogICAgfQogIH0sCiAgLy8gU3RhbmQtYWxvbmUgbG9jYWwgZGF5IG9mIHdlZWsKICBjOiB7CiAgICBwcmlvcml0eTogOTAsCiAgICBwYXJzZTogZnVuY3Rpb24gcGFyc2Uoc3RyaW5nLCB0b2tlbiwgbWF0Y2gsIG9wdGlvbnMpIHsKICAgICAgdmFyIHZhbHVlQ2FsbGJhY2sgPSBmdW5jdGlvbiB2YWx1ZUNhbGxiYWNrKHZhbHVlKSB7CiAgICAgICAgdmFyIHdob2xlV2Vla0RheXMgPSBNYXRoLmZsb29yKCh2YWx1ZSAtIDEpIC8gNykgKiA3OwogICAgICAgIHJldHVybiAodmFsdWUgKyBvcHRpb25zLndlZWtTdGFydHNPbiArIDYpICUgNyArIHdob2xlV2Vla0RheXM7CiAgICAgIH07CgogICAgICBzd2l0Y2ggKHRva2VuKSB7CiAgICAgICAgLy8gMwogICAgICAgIGNhc2UgJ2MnOgogICAgICAgIGNhc2UgJ2NjJzoKICAgICAgICAgIC8vIDAzCiAgICAgICAgICByZXR1cm4gcGFyc2VORGlnaXRzKHRva2VuLmxlbmd0aCwgc3RyaW5nLCB2YWx1ZUNhbGxiYWNrKTsKICAgICAgICAvLyAzcmQKCiAgICAgICAgY2FzZSAnY28nOgogICAgICAgICAgcmV0dXJuIG1hdGNoLm9yZGluYWxOdW1iZXIoc3RyaW5nLCB7CiAgICAgICAgICAgIHVuaXQ6ICdkYXknLAogICAgICAgICAgICB2YWx1ZUNhbGxiYWNrOiB2YWx1ZUNhbGxiYWNrCiAgICAgICAgICB9KTsKICAgICAgICAvLyBUdWUKCiAgICAgICAgY2FzZSAnY2NjJzoKICAgICAgICAgIHJldHVybiBtYXRjaC5kYXkoc3RyaW5nLCB7CiAgICAgICAgICAgIHdpZHRoOiAnYWJicmV2aWF0ZWQnLAogICAgICAgICAgICBjb250ZXh0OiAnc3RhbmRhbG9uZScKICAgICAgICAgIH0pIHx8IG1hdGNoLmRheShzdHJpbmcsIHsKICAgICAgICAgICAgd2lkdGg6ICdzaG9ydCcsCiAgICAgICAgICAgIGNvbnRleHQ6ICdzdGFuZGFsb25lJwogICAgICAgICAgfSkgfHwgbWF0Y2guZGF5KHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ25hcnJvdycsCiAgICAgICAgICAgIGNvbnRleHQ6ICdzdGFuZGFsb25lJwogICAgICAgICAgfSk7CiAgICAgICAgLy8gVAoKICAgICAgICBjYXNlICdjY2NjYyc6CiAgICAgICAgICByZXR1cm4gbWF0Y2guZGF5KHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ25hcnJvdycsCiAgICAgICAgICAgIGNvbnRleHQ6ICdzdGFuZGFsb25lJwogICAgICAgICAgfSk7CiAgICAgICAgLy8gVHUKCiAgICAgICAgY2FzZSAnY2NjY2NjJzoKICAgICAgICAgIHJldHVybiBtYXRjaC5kYXkoc3RyaW5nLCB7CiAgICAgICAgICAgIHdpZHRoOiAnc2hvcnQnLAogICAgICAgICAgICBjb250ZXh0OiAnc3RhbmRhbG9uZScKICAgICAgICAgIH0pIHx8IG1hdGNoLmRheShzdHJpbmcsIHsKICAgICAgICAgICAgd2lkdGg6ICduYXJyb3cnLAogICAgICAgICAgICBjb250ZXh0OiAnc3RhbmRhbG9uZScKICAgICAgICAgIH0pOwogICAgICAgIC8vIFR1ZXNkYXkKCiAgICAgICAgY2FzZSAnY2NjYyc6CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybiBtYXRjaC5kYXkoc3RyaW5nLCB7CiAgICAgICAgICAgIHdpZHRoOiAnd2lkZScsCiAgICAgICAgICAgIGNvbnRleHQ6ICdzdGFuZGFsb25lJwogICAgICAgICAgfSkgfHwgbWF0Y2guZGF5KHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ2FiYnJldmlhdGVkJywKICAgICAgICAgICAgY29udGV4dDogJ3N0YW5kYWxvbmUnCiAgICAgICAgICB9KSB8fCBtYXRjaC5kYXkoc3RyaW5nLCB7CiAgICAgICAgICAgIHdpZHRoOiAnc2hvcnQnLAogICAgICAgICAgICBjb250ZXh0OiAnc3RhbmRhbG9uZScKICAgICAgICAgIH0pIHx8IG1hdGNoLmRheShzdHJpbmcsIHsKICAgICAgICAgICAgd2lkdGg6ICduYXJyb3cnLAogICAgICAgICAgICBjb250ZXh0OiAnc3RhbmRhbG9uZScKICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgdmFsaWRhdGU6IGZ1bmN0aW9uIHZhbGlkYXRlKGRhdGUsIHZhbHVlLCBvcHRpb25zKSB7CiAgICAgIHJldHVybiB2YWx1ZSA+PSAwICYmIHZhbHVlIDw9IDY7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQoZGF0ZSwgdmFsdWUsIG9wdGlvbnMpIHsKICAgICAgZGF0ZSA9IHNldFVUQ0RheShkYXRlLCB2YWx1ZSwgb3B0aW9ucyk7CiAgICAgIGRhdGUuc2V0VVRDSG91cnMoMCwgMCwgMCwgMCk7CiAgICAgIHJldHVybiBkYXRlOwogICAgfQogIH0sCiAgLy8gSVNPIGRheSBvZiB3ZWVrCiAgaTogewogICAgcHJpb3JpdHk6IDkwLAogICAgcGFyc2U6IGZ1bmN0aW9uIHBhcnNlKHN0cmluZywgdG9rZW4sIG1hdGNoLCBvcHRpb25zKSB7CiAgICAgIHZhciB2YWx1ZUNhbGxiYWNrID0gZnVuY3Rpb24gdmFsdWVDYWxsYmFjayh2YWx1ZSkgewogICAgICAgIGlmICh2YWx1ZSA9PT0gMCkgewogICAgICAgICAgcmV0dXJuIDc7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgIH07CgogICAgICBzd2l0Y2ggKHRva2VuKSB7CiAgICAgICAgLy8gMgogICAgICAgIGNhc2UgJ2knOgogICAgICAgIGNhc2UgJ2lpJzoKICAgICAgICAgIC8vIDAyCiAgICAgICAgICByZXR1cm4gcGFyc2VORGlnaXRzKHRva2VuLmxlbmd0aCwgc3RyaW5nKTsKICAgICAgICAvLyAybmQKCiAgICAgICAgY2FzZSAnaW8nOgogICAgICAgICAgcmV0dXJuIG1hdGNoLm9yZGluYWxOdW1iZXIoc3RyaW5nLCB7CiAgICAgICAgICAgIHVuaXQ6ICdkYXknCiAgICAgICAgICB9KTsKICAgICAgICAvLyBUdWUKCiAgICAgICAgY2FzZSAnaWlpJzoKICAgICAgICAgIHJldHVybiBtYXRjaC5kYXkoc3RyaW5nLCB7CiAgICAgICAgICAgIHdpZHRoOiAnYWJicmV2aWF0ZWQnLAogICAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycsCiAgICAgICAgICAgIHZhbHVlQ2FsbGJhY2s6IHZhbHVlQ2FsbGJhY2sKICAgICAgICAgIH0pIHx8IG1hdGNoLmRheShzdHJpbmcsIHsKICAgICAgICAgICAgd2lkdGg6ICdzaG9ydCcsCiAgICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJywKICAgICAgICAgICAgdmFsdWVDYWxsYmFjazogdmFsdWVDYWxsYmFjawogICAgICAgICAgfSkgfHwgbWF0Y2guZGF5KHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ25hcnJvdycsCiAgICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJywKICAgICAgICAgICAgdmFsdWVDYWxsYmFjazogdmFsdWVDYWxsYmFjawogICAgICAgICAgfSk7CiAgICAgICAgLy8gVAoKICAgICAgICBjYXNlICdpaWlpaSc6CiAgICAgICAgICByZXR1cm4gbWF0Y2guZGF5KHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ25hcnJvdycsCiAgICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJywKICAgICAgICAgICAgdmFsdWVDYWxsYmFjazogdmFsdWVDYWxsYmFjawogICAgICAgICAgfSk7CiAgICAgICAgLy8gVHUKCiAgICAgICAgY2FzZSAnaWlpaWlpJzoKICAgICAgICAgIHJldHVybiBtYXRjaC5kYXkoc3RyaW5nLCB7CiAgICAgICAgICAgIHdpZHRoOiAnc2hvcnQnLAogICAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycsCiAgICAgICAgICAgIHZhbHVlQ2FsbGJhY2s6IHZhbHVlQ2FsbGJhY2sKICAgICAgICAgIH0pIHx8IG1hdGNoLmRheShzdHJpbmcsIHsKICAgICAgICAgICAgd2lkdGg6ICduYXJyb3cnLAogICAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycsCiAgICAgICAgICAgIHZhbHVlQ2FsbGJhY2s6IHZhbHVlQ2FsbGJhY2sKICAgICAgICAgIH0pOwogICAgICAgIC8vIFR1ZXNkYXkKCiAgICAgICAgY2FzZSAnaWlpaSc6CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybiBtYXRjaC5kYXkoc3RyaW5nLCB7CiAgICAgICAgICAgIHdpZHRoOiAnd2lkZScsCiAgICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJywKICAgICAgICAgICAgdmFsdWVDYWxsYmFjazogdmFsdWVDYWxsYmFjawogICAgICAgICAgfSkgfHwgbWF0Y2guZGF5KHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ2FiYnJldmlhdGVkJywKICAgICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnLAogICAgICAgICAgICB2YWx1ZUNhbGxiYWNrOiB2YWx1ZUNhbGxiYWNrCiAgICAgICAgICB9KSB8fCBtYXRjaC5kYXkoc3RyaW5nLCB7CiAgICAgICAgICAgIHdpZHRoOiAnc2hvcnQnLAogICAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycsCiAgICAgICAgICAgIHZhbHVlQ2FsbGJhY2s6IHZhbHVlQ2FsbGJhY2sKICAgICAgICAgIH0pIHx8IG1hdGNoLmRheShzdHJpbmcsIHsKICAgICAgICAgICAgd2lkdGg6ICduYXJyb3cnLAogICAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycsCiAgICAgICAgICAgIHZhbHVlQ2FsbGJhY2s6IHZhbHVlQ2FsbGJhY2sKICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgdmFsaWRhdGU6IGZ1bmN0aW9uIHZhbGlkYXRlKGRhdGUsIHZhbHVlLCBvcHRpb25zKSB7CiAgICAgIHJldHVybiB2YWx1ZSA+PSAxICYmIHZhbHVlIDw9IDc7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQoZGF0ZSwgdmFsdWUsIG9wdGlvbnMpIHsKICAgICAgZGF0ZSA9IHNldFVUQ0lTT0RheShkYXRlLCB2YWx1ZSwgb3B0aW9ucyk7CiAgICAgIGRhdGUuc2V0VVRDSG91cnMoMCwgMCwgMCwgMCk7CiAgICAgIHJldHVybiBkYXRlOwogICAgfQogIH0sCiAgLy8gQU0gb3IgUE0KICBhOiB7CiAgICBwcmlvcml0eTogODAsCiAgICBwYXJzZTogZnVuY3Rpb24gcGFyc2Uoc3RyaW5nLCB0b2tlbiwgbWF0Y2gsIG9wdGlvbnMpIHsKICAgICAgc3dpdGNoICh0b2tlbikgewogICAgICAgIGNhc2UgJ2EnOgogICAgICAgIGNhc2UgJ2FhJzoKICAgICAgICBjYXNlICdhYWEnOgogICAgICAgICAgcmV0dXJuIG1hdGNoLmRheVBlcmlvZChzdHJpbmcsIHsKICAgICAgICAgICAgd2lkdGg6ICdhYmJyZXZpYXRlZCcsCiAgICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJwogICAgICAgICAgfSkgfHwgbWF0Y2guZGF5UGVyaW9kKHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ25hcnJvdycsCiAgICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJwogICAgICAgICAgfSk7CgogICAgICAgIGNhc2UgJ2FhYWFhJzoKICAgICAgICAgIHJldHVybiBtYXRjaC5kYXlQZXJpb2Qoc3RyaW5nLCB7CiAgICAgICAgICAgIHdpZHRoOiAnbmFycm93JywKICAgICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnCiAgICAgICAgICB9KTsKCiAgICAgICAgY2FzZSAnYWFhYSc6CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybiBtYXRjaC5kYXlQZXJpb2Qoc3RyaW5nLCB7CiAgICAgICAgICAgIHdpZHRoOiAnd2lkZScsCiAgICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJwogICAgICAgICAgfSkgfHwgbWF0Y2guZGF5UGVyaW9kKHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ2FiYnJldmlhdGVkJywKICAgICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnCiAgICAgICAgICB9KSB8fCBtYXRjaC5kYXlQZXJpb2Qoc3RyaW5nLCB7CiAgICAgICAgICAgIHdpZHRoOiAnbmFycm93JywKICAgICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnCiAgICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KGRhdGUsIHZhbHVlLCBvcHRpb25zKSB7CiAgICAgIGRhdGUuc2V0VVRDSG91cnMoZGF5UGVyaW9kRW51bVRvSG91cnModmFsdWUpLCAwLCAwLCAwKTsKICAgICAgcmV0dXJuIGRhdGU7CiAgICB9CiAgfSwKICAvLyBBTSwgUE0sIG1pZG5pZ2h0CiAgYjogewogICAgcHJpb3JpdHk6IDgwLAogICAgcGFyc2U6IGZ1bmN0aW9uIHBhcnNlKHN0cmluZywgdG9rZW4sIG1hdGNoLCBvcHRpb25zKSB7CiAgICAgIHN3aXRjaCAodG9rZW4pIHsKICAgICAgICBjYXNlICdiJzoKICAgICAgICBjYXNlICdiYic6CiAgICAgICAgY2FzZSAnYmJiJzoKICAgICAgICAgIHJldHVybiBtYXRjaC5kYXlQZXJpb2Qoc3RyaW5nLCB7CiAgICAgICAgICAgIHdpZHRoOiAnYWJicmV2aWF0ZWQnLAogICAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycKICAgICAgICAgIH0pIHx8IG1hdGNoLmRheVBlcmlvZChzdHJpbmcsIHsKICAgICAgICAgICAgd2lkdGg6ICduYXJyb3cnLAogICAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycKICAgICAgICAgIH0pOwoKICAgICAgICBjYXNlICdiYmJiYic6CiAgICAgICAgICByZXR1cm4gbWF0Y2guZGF5UGVyaW9kKHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ25hcnJvdycsCiAgICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJwogICAgICAgICAgfSk7CgogICAgICAgIGNhc2UgJ2JiYmInOgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gbWF0Y2guZGF5UGVyaW9kKHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ3dpZGUnLAogICAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycKICAgICAgICAgIH0pIHx8IG1hdGNoLmRheVBlcmlvZChzdHJpbmcsIHsKICAgICAgICAgICAgd2lkdGg6ICdhYmJyZXZpYXRlZCcsCiAgICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJwogICAgICAgICAgfSkgfHwgbWF0Y2guZGF5UGVyaW9kKHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ25hcnJvdycsCiAgICAgICAgICAgIGNvbnRleHQ6ICdmb3JtYXR0aW5nJwogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChkYXRlLCB2YWx1ZSwgb3B0aW9ucykgewogICAgICBkYXRlLnNldFVUQ0hvdXJzKGRheVBlcmlvZEVudW1Ub0hvdXJzKHZhbHVlKSwgMCwgMCwgMCk7CiAgICAgIHJldHVybiBkYXRlOwogICAgfQogIH0sCiAgLy8gaW4gdGhlIG1vcm5pbmcsIGluIHRoZSBhZnRlcm5vb24sIGluIHRoZSBldmVuaW5nLCBhdCBuaWdodAogIEI6IHsKICAgIHByaW9yaXR5OiA4MCwKICAgIHBhcnNlOiBmdW5jdGlvbiBwYXJzZShzdHJpbmcsIHRva2VuLCBtYXRjaCwgb3B0aW9ucykgewogICAgICBzd2l0Y2ggKHRva2VuKSB7CiAgICAgICAgY2FzZSAnQic6CiAgICAgICAgY2FzZSAnQkInOgogICAgICAgIGNhc2UgJ0JCQic6CiAgICAgICAgICByZXR1cm4gbWF0Y2guZGF5UGVyaW9kKHN0cmluZywgewogICAgICAgICAgICB3aWR0aDogJ2FiYnJldmlhdGVkJywKICAgICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnCiAgICAgICAgICB9KSB8fCBtYXRjaC5kYXlQZXJpb2Qoc3RyaW5nLCB7CiAgICAgICAgICAgIHdpZHRoOiAnbmFycm93JywKICAgICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnCiAgICAgICAgICB9KTsKCiAgICAgICAgY2FzZSAnQkJCQkInOgogICAgICAgICAgcmV0dXJuIG1hdGNoLmRheVBlcmlvZChzdHJpbmcsIHsKICAgICAgICAgICAgd2lkdGg6ICduYXJyb3cnLAogICAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycKICAgICAgICAgIH0pOwoKICAgICAgICBjYXNlICdCQkJCJzoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuIG1hdGNoLmRheVBlcmlvZChzdHJpbmcsIHsKICAgICAgICAgICAgd2lkdGg6ICd3aWRlJywKICAgICAgICAgICAgY29udGV4dDogJ2Zvcm1hdHRpbmcnCiAgICAgICAgICB9KSB8fCBtYXRjaC5kYXlQZXJpb2Qoc3RyaW5nLCB7CiAgICAgICAgICAgIHdpZHRoOiAnYWJicmV2aWF0ZWQnLAogICAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycKICAgICAgICAgIH0pIHx8IG1hdGNoLmRheVBlcmlvZChzdHJpbmcsIHsKICAgICAgICAgICAgd2lkdGg6ICduYXJyb3cnLAogICAgICAgICAgICBjb250ZXh0OiAnZm9ybWF0dGluZycKICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQoZGF0ZSwgdmFsdWUsIG9wdGlvbnMpIHsKICAgICAgZGF0ZS5zZXRVVENIb3VycyhkYXlQZXJpb2RFbnVtVG9Ib3Vycyh2YWx1ZSksIDAsIDAsIDApOwogICAgICByZXR1cm4gZGF0ZTsKICAgIH0KICB9LAogIC8vIEhvdXIgWzEtMTJdCiAgaDogewogICAgcHJpb3JpdHk6IDcwLAogICAgcGFyc2U6IGZ1bmN0aW9uIHBhcnNlKHN0cmluZywgdG9rZW4sIG1hdGNoLCBvcHRpb25zKSB7CiAgICAgIHN3aXRjaCAodG9rZW4pIHsKICAgICAgICBjYXNlICdoJzoKICAgICAgICAgIHJldHVybiBwYXJzZU51bWVyaWNQYXR0ZXJuKG51bWVyaWNQYXR0ZXJucy5ob3VyMTJoLCBzdHJpbmcpOwoKICAgICAgICBjYXNlICdobyc6CiAgICAgICAgICByZXR1cm4gbWF0Y2gub3JkaW5hbE51bWJlcihzdHJpbmcsIHsKICAgICAgICAgICAgdW5pdDogJ2hvdXInCiAgICAgICAgICB9KTsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybiBwYXJzZU5EaWdpdHModG9rZW4ubGVuZ3RoLCBzdHJpbmcpOwogICAgICB9CiAgICB9LAogICAgdmFsaWRhdGU6IGZ1bmN0aW9uIHZhbGlkYXRlKGRhdGUsIHZhbHVlLCBvcHRpb25zKSB7CiAgICAgIHJldHVybiB2YWx1ZSA+PSAxICYmIHZhbHVlIDw9IDEyOwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KGRhdGUsIHZhbHVlLCBvcHRpb25zKSB7CiAgICAgIHZhciBpc1BNID0gZGF0ZS5nZXRVVENIb3VycygpID49IDEyOwoKICAgICAgaWYgKGlzUE0gJiYgdmFsdWUgPCAxMikgewogICAgICAgIGRhdGUuc2V0VVRDSG91cnModmFsdWUgKyAxMiwgMCwgMCwgMCk7CiAgICAgIH0gZWxzZSBpZiAoIWlzUE0gJiYgdmFsdWUgPT09IDEyKSB7CiAgICAgICAgZGF0ZS5zZXRVVENIb3VycygwLCAwLCAwLCAwKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBkYXRlLnNldFVUQ0hvdXJzKHZhbHVlLCAwLCAwLCAwKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGRhdGU7CiAgICB9CiAgfSwKICAvLyBIb3VyIFswLTIzXQogIEg6IHsKICAgIHByaW9yaXR5OiA3MCwKICAgIHBhcnNlOiBmdW5jdGlvbiBwYXJzZShzdHJpbmcsIHRva2VuLCBtYXRjaCwgb3B0aW9ucykgewogICAgICBzd2l0Y2ggKHRva2VuKSB7CiAgICAgICAgY2FzZSAnSCc6CiAgICAgICAgICByZXR1cm4gcGFyc2VOdW1lcmljUGF0dGVybihudW1lcmljUGF0dGVybnMuaG91cjIzaCwgc3RyaW5nKTsKCiAgICAgICAgY2FzZSAnSG8nOgogICAgICAgICAgcmV0dXJuIG1hdGNoLm9yZGluYWxOdW1iZXIoc3RyaW5nLCB7CiAgICAgICAgICAgIHVuaXQ6ICdob3VyJwogICAgICAgICAgfSk7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gcGFyc2VORGlnaXRzKHRva2VuLmxlbmd0aCwgc3RyaW5nKTsKICAgICAgfQogICAgfSwKICAgIHZhbGlkYXRlOiBmdW5jdGlvbiB2YWxpZGF0ZShkYXRlLCB2YWx1ZSwgb3B0aW9ucykgewogICAgICByZXR1cm4gdmFsdWUgPj0gMCAmJiB2YWx1ZSA8PSAyMzsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChkYXRlLCB2YWx1ZSwgb3B0aW9ucykgewogICAgICBkYXRlLnNldFVUQ0hvdXJzKHZhbHVlLCAwLCAwLCAwKTsKICAgICAgcmV0dXJuIGRhdGU7CiAgICB9CiAgfSwKICAvLyBIb3VyIFswLTExXQogIEs6IHsKICAgIHByaW9yaXR5OiA3MCwKICAgIHBhcnNlOiBmdW5jdGlvbiBwYXJzZShzdHJpbmcsIHRva2VuLCBtYXRjaCwgb3B0aW9ucykgewogICAgICBzd2l0Y2ggKHRva2VuKSB7CiAgICAgICAgY2FzZSAnSyc6CiAgICAgICAgICByZXR1cm4gcGFyc2VOdW1lcmljUGF0dGVybihudW1lcmljUGF0dGVybnMuaG91cjExaCwgc3RyaW5nKTsKCiAgICAgICAgY2FzZSAnS28nOgogICAgICAgICAgcmV0dXJuIG1hdGNoLm9yZGluYWxOdW1iZXIoc3RyaW5nLCB7CiAgICAgICAgICAgIHVuaXQ6ICdob3VyJwogICAgICAgICAgfSk7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gcGFyc2VORGlnaXRzKHRva2VuLmxlbmd0aCwgc3RyaW5nKTsKICAgICAgfQogICAgfSwKICAgIHZhbGlkYXRlOiBmdW5jdGlvbiB2YWxpZGF0ZShkYXRlLCB2YWx1ZSwgb3B0aW9ucykgewogICAgICByZXR1cm4gdmFsdWUgPj0gMCAmJiB2YWx1ZSA8PSAxMTsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChkYXRlLCB2YWx1ZSwgb3B0aW9ucykgewogICAgICB2YXIgaXNQTSA9IGRhdGUuZ2V0VVRDSG91cnMoKSA+PSAxMjsKCiAgICAgIGlmIChpc1BNICYmIHZhbHVlIDwgMTIpIHsKICAgICAgICBkYXRlLnNldFVUQ0hvdXJzKHZhbHVlICsgMTIsIDAsIDAsIDApOwogICAgICB9IGVsc2UgewogICAgICAgIGRhdGUuc2V0VVRDSG91cnModmFsdWUsIDAsIDAsIDApOwogICAgICB9CgogICAgICByZXR1cm4gZGF0ZTsKICAgIH0KICB9LAogIC8vIEhvdXIgWzEtMjRdCiAgazogewogICAgcHJpb3JpdHk6IDcwLAogICAgcGFyc2U6IGZ1bmN0aW9uIHBhcnNlKHN0cmluZywgdG9rZW4sIG1hdGNoLCBvcHRpb25zKSB7CiAgICAgIHN3aXRjaCAodG9rZW4pIHsKICAgICAgICBjYXNlICdrJzoKICAgICAgICAgIHJldHVybiBwYXJzZU51bWVyaWNQYXR0ZXJuKG51bWVyaWNQYXR0ZXJucy5ob3VyMjRoLCBzdHJpbmcpOwoKICAgICAgICBjYXNlICdrbyc6CiAgICAgICAgICByZXR1cm4gbWF0Y2gub3JkaW5hbE51bWJlcihzdHJpbmcsIHsKICAgICAgICAgICAgdW5pdDogJ2hvdXInCiAgICAgICAgICB9KTsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybiBwYXJzZU5EaWdpdHModG9rZW4ubGVuZ3RoLCBzdHJpbmcpOwogICAgICB9CiAgICB9LAogICAgdmFsaWRhdGU6IGZ1bmN0aW9uIHZhbGlkYXRlKGRhdGUsIHZhbHVlLCBvcHRpb25zKSB7CiAgICAgIHJldHVybiB2YWx1ZSA+PSAxICYmIHZhbHVlIDw9IDI0OwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KGRhdGUsIHZhbHVlLCBvcHRpb25zKSB7CiAgICAgIHZhciBob3VycyA9IHZhbHVlIDw9IDI0ID8gdmFsdWUgJSAyNCA6IHZhbHVlOwogICAgICBkYXRlLnNldFVUQ0hvdXJzKGhvdXJzLCAwLCAwLCAwKTsKICAgICAgcmV0dXJuIGRhdGU7CiAgICB9CiAgfSwKICAvLyBNaW51dGUKICBtOiB7CiAgICBwcmlvcml0eTogNjAsCiAgICBwYXJzZTogZnVuY3Rpb24gcGFyc2Uoc3RyaW5nLCB0b2tlbiwgbWF0Y2gsIG9wdGlvbnMpIHsKICAgICAgc3dpdGNoICh0b2tlbikgewogICAgICAgIGNhc2UgJ20nOgogICAgICAgICAgcmV0dXJuIHBhcnNlTnVtZXJpY1BhdHRlcm4obnVtZXJpY1BhdHRlcm5zLm1pbnV0ZSwgc3RyaW5nKTsKCiAgICAgICAgY2FzZSAnbW8nOgogICAgICAgICAgcmV0dXJuIG1hdGNoLm9yZGluYWxOdW1iZXIoc3RyaW5nLCB7CiAgICAgICAgICAgIHVuaXQ6ICdtaW51dGUnCiAgICAgICAgICB9KTsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHJldHVybiBwYXJzZU5EaWdpdHModG9rZW4ubGVuZ3RoLCBzdHJpbmcpOwogICAgICB9CiAgICB9LAogICAgdmFsaWRhdGU6IGZ1bmN0aW9uIHZhbGlkYXRlKGRhdGUsIHZhbHVlLCBvcHRpb25zKSB7CiAgICAgIHJldHVybiB2YWx1ZSA+PSAwICYmIHZhbHVlIDw9IDU5OwogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KGRhdGUsIHZhbHVlLCBvcHRpb25zKSB7CiAgICAgIGRhdGUuc2V0VVRDTWludXRlcyh2YWx1ZSwgMCwgMCk7CiAgICAgIHJldHVybiBkYXRlOwogICAgfQogIH0sCiAgLy8gU2Vjb25kCiAgczogewogICAgcHJpb3JpdHk6IDUwLAogICAgcGFyc2U6IGZ1bmN0aW9uIHBhcnNlKHN0cmluZywgdG9rZW4sIG1hdGNoLCBvcHRpb25zKSB7CiAgICAgIHN3aXRjaCAodG9rZW4pIHsKICAgICAgICBjYXNlICdzJzoKICAgICAgICAgIHJldHVybiBwYXJzZU51bWVyaWNQYXR0ZXJuKG51bWVyaWNQYXR0ZXJucy5zZWNvbmQsIHN0cmluZyk7CgogICAgICAgIGNhc2UgJ3NvJzoKICAgICAgICAgIHJldHVybiBtYXRjaC5vcmRpbmFsTnVtYmVyKHN0cmluZywgewogICAgICAgICAgICB1bml0OiAnc2Vjb25kJwogICAgICAgICAgfSk7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gcGFyc2VORGlnaXRzKHRva2VuLmxlbmd0aCwgc3RyaW5nKTsKICAgICAgfQogICAgfSwKICAgIHZhbGlkYXRlOiBmdW5jdGlvbiB2YWxpZGF0ZShkYXRlLCB2YWx1ZSwgb3B0aW9ucykgewogICAgICByZXR1cm4gdmFsdWUgPj0gMCAmJiB2YWx1ZSA8PSA1OTsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChkYXRlLCB2YWx1ZSwgb3B0aW9ucykgewogICAgICBkYXRlLnNldFVUQ1NlY29uZHModmFsdWUsIDApOwogICAgICByZXR1cm4gZGF0ZTsKICAgIH0KICB9LAogIC8vIEZyYWN0aW9uIG9mIHNlY29uZAogIFM6IHsKICAgIHByaW9yaXR5OiA0MCwKICAgIHBhcnNlOiBmdW5jdGlvbiBwYXJzZShzdHJpbmcsIHRva2VuLCBtYXRjaCwgb3B0aW9ucykgewogICAgICB2YXIgdmFsdWVDYWxsYmFjayA9IGZ1bmN0aW9uIHZhbHVlQ2FsbGJhY2sodmFsdWUpIHsKICAgICAgICByZXR1cm4gTWF0aC5mbG9vcih2YWx1ZSAqIE1hdGgucG93KDEwLCAtdG9rZW4ubGVuZ3RoICsgMykpOwogICAgICB9OwoKICAgICAgcmV0dXJuIHBhcnNlTkRpZ2l0cyh0b2tlbi5sZW5ndGgsIHN0cmluZywgdmFsdWVDYWxsYmFjayk7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQoZGF0ZSwgdmFsdWUsIG9wdGlvbnMpIHsKICAgICAgZGF0ZS5zZXRVVENNaWxsaXNlY29uZHModmFsdWUpOwogICAgICByZXR1cm4gZGF0ZTsKICAgIH0KICB9LAogIC8vIFRpbWV6b25lIChJU08tODYwMS4gKzAwOjAwIGlzIGAnWidgKQogIFg6IHsKICAgIHByaW9yaXR5OiAyMCwKICAgIHBhcnNlOiBmdW5jdGlvbiBwYXJzZShzdHJpbmcsIHRva2VuLCBtYXRjaCwgb3B0aW9ucykgewogICAgICBzd2l0Y2ggKHRva2VuKSB7CiAgICAgICAgY2FzZSAnWCc6CiAgICAgICAgICByZXR1cm4gcGFyc2VUaW1lem9uZVBhdHRlcm4odGltZXpvbmVQYXR0ZXJucy5iYXNpY09wdGlvbmFsTWludXRlcywgc3RyaW5nKTsKCiAgICAgICAgY2FzZSAnWFgnOgogICAgICAgICAgcmV0dXJuIHBhcnNlVGltZXpvbmVQYXR0ZXJuKHRpbWV6b25lUGF0dGVybnMuYmFzaWMsIHN0cmluZyk7CgogICAgICAgIGNhc2UgJ1hYWFgnOgogICAgICAgICAgcmV0dXJuIHBhcnNlVGltZXpvbmVQYXR0ZXJuKHRpbWV6b25lUGF0dGVybnMuYmFzaWNPcHRpb25hbFNlY29uZHMsIHN0cmluZyk7CgogICAgICAgIGNhc2UgJ1hYWFhYJzoKICAgICAgICAgIHJldHVybiBwYXJzZVRpbWV6b25lUGF0dGVybih0aW1lem9uZVBhdHRlcm5zLmV4dGVuZGVkT3B0aW9uYWxTZWNvbmRzLCBzdHJpbmcpOwoKICAgICAgICBjYXNlICdYWFgnOgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gcGFyc2VUaW1lem9uZVBhdHRlcm4odGltZXpvbmVQYXR0ZXJucy5leHRlbmRlZCwgc3RyaW5nKTsKICAgICAgfQogICAgfSwKICAgIHNldDogZnVuY3Rpb24gc2V0KGRhdGUsIHZhbHVlLCBvcHRpb25zKSB7CiAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlLmdldFRpbWUoKSAtIHZhbHVlKTsKICAgIH0KICB9LAogIC8vIFRpbWV6b25lIChJU08tODYwMSkKICB4OiB7CiAgICBwcmlvcml0eTogMjAsCiAgICBwYXJzZTogZnVuY3Rpb24gcGFyc2Uoc3RyaW5nLCB0b2tlbiwgbWF0Y2gsIG9wdGlvbnMpIHsKICAgICAgc3dpdGNoICh0b2tlbikgewogICAgICAgIGNhc2UgJ3gnOgogICAgICAgICAgcmV0dXJuIHBhcnNlVGltZXpvbmVQYXR0ZXJuKHRpbWV6b25lUGF0dGVybnMuYmFzaWNPcHRpb25hbE1pbnV0ZXMsIHN0cmluZyk7CgogICAgICAgIGNhc2UgJ3h4JzoKICAgICAgICAgIHJldHVybiBwYXJzZVRpbWV6b25lUGF0dGVybih0aW1lem9uZVBhdHRlcm5zLmJhc2ljLCBzdHJpbmcpOwoKICAgICAgICBjYXNlICd4eHh4JzoKICAgICAgICAgIHJldHVybiBwYXJzZVRpbWV6b25lUGF0dGVybih0aW1lem9uZVBhdHRlcm5zLmJhc2ljT3B0aW9uYWxTZWNvbmRzLCBzdHJpbmcpOwoKICAgICAgICBjYXNlICd4eHh4eCc6CiAgICAgICAgICByZXR1cm4gcGFyc2VUaW1lem9uZVBhdHRlcm4odGltZXpvbmVQYXR0ZXJucy5leHRlbmRlZE9wdGlvbmFsU2Vjb25kcywgc3RyaW5nKTsKCiAgICAgICAgY2FzZSAneHh4JzoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuIHBhcnNlVGltZXpvbmVQYXR0ZXJuKHRpbWV6b25lUGF0dGVybnMuZXh0ZW5kZWQsIHN0cmluZyk7CiAgICAgIH0KICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChkYXRlLCB2YWx1ZSwgb3B0aW9ucykgewogICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkgLSB2YWx1ZSk7CiAgICB9CiAgfSwKICAvLyBTZWNvbmRzIHRpbWVzdGFtcAogIHQ6IHsKICAgIHByaW9yaXR5OiAxMCwKICAgIHBhcnNlOiBmdW5jdGlvbiBwYXJzZShzdHJpbmcsIHRva2VuLCBtYXRjaCwgb3B0aW9ucykgewogICAgICByZXR1cm4gcGFyc2VBbnlEaWdpdHNTaWduZWQoc3RyaW5nKTsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldChkYXRlLCB2YWx1ZSwgb3B0aW9ucykgewogICAgICByZXR1cm4gbmV3IERhdGUodmFsdWUgKiAxMDAwKTsKICAgIH0KICB9LAogIC8vIE1pbGxpc2Vjb25kcyB0aW1lc3RhbXAKICBUOiB7CiAgICBwcmlvcml0eTogMTAsCiAgICBwYXJzZTogZnVuY3Rpb24gcGFyc2Uoc3RyaW5nLCB0b2tlbiwgbWF0Y2gsIG9wdGlvbnMpIHsKICAgICAgcmV0dXJuIHBhcnNlQW55RGlnaXRzU2lnbmVkKHN0cmluZyk7CiAgICB9LAogICAgc2V0OiBmdW5jdGlvbiBzZXQoZGF0ZSwgdmFsdWUsIG9wdGlvbnMpIHsKICAgICAgcmV0dXJuIG5ldyBEYXRlKHZhbHVlKTsKICAgIH0KICB9Cn07CnZhciBUSU1FWk9ORV9VTklUX1BSSU9SSVRZID0gMjA7IC8vIFRoaXMgUmVnRXhwIGNvbnNpc3RzIG9mIHRocmVlIHBhcnRzIHNlcGFyYXRlZCBieSBgfGA6Ci8vIC0gW3lZUXFNTHdJZERlY2loSEtrbXNdbyBtYXRjaGVzIGFueSBhdmFpbGFibGUgb3JkaW5hbCBudW1iZXIgdG9rZW4KLy8gICAob25lIG9mIHRoZSBjZXJ0YWluIGxldHRlcnMgZm9sbG93ZWQgYnkgYG9gKQovLyAtIChcdylcMSogbWF0Y2hlcyBhbnkgc2VxdWVuY2VzIG9mIHRoZSBzYW1lIGxldHRlcgovLyAtICcnIG1hdGNoZXMgdHdvIHF1b3RlIGNoYXJhY3RlcnMgaW4gYSByb3cKLy8gLSAnKCcnfFteJ10pKygnfCQpIG1hdGNoZXMgYW55dGhpbmcgc3Vycm91bmRlZCBieSB0d28gcXVvdGUgY2hhcmFjdGVycyAoJyksCi8vICAgZXhjZXB0IGEgc2luZ2xlIHF1b3RlIHN5bWJvbCwgd2hpY2ggZW5kcyB0aGUgc2VxdWVuY2UuCi8vICAgVHdvIHF1b3RlIGNoYXJhY3RlcnMgZG8gbm90IGVuZCB0aGUgc2VxdWVuY2UuCi8vICAgSWYgdGhlcmUgaXMgbm8gbWF0Y2hpbmcgc2luZ2xlIHF1b3RlCi8vICAgdGhlbiB0aGUgc2VxdWVuY2Ugd2lsbCBjb250aW51ZSB1bnRpbCB0aGUgZW5kIG9mIHRoZSBzdHJpbmcuCi8vIC0gLiBtYXRjaGVzIGFueSBzaW5nbGUgY2hhcmFjdGVyIHVubWF0Y2hlZCBieSBwcmV2aW91cyBwYXJ0cyBvZiB0aGUgUmVnRXhwcwoKdmFyIGZvcm1hdHRpbmdUb2tlbnNSZWdFeHAkMSA9IC9beVlRcU1Md0lkRGVjaWhIS2ttc11vfChcdylcMSp8Jyd8JygnJ3xbXiddKSsoJ3wkKXwuL2c7CnZhciBlc2NhcGVkU3RyaW5nUmVnRXhwJDEgPSAvXicoLio/KSc/JC87CnZhciBkb3VibGVRdW90ZVJlZ0V4cCQxID0gLycnL2c7CnZhciBub3RXaGl0ZXNwYWNlUmVnRXhwID0gL1xTLzsKLyoqCiAqIEBuYW1lIHBhcnNlCiAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVycwogKiBAc3VtbWFyeSBQYXJzZSB0aGUgZGF0ZS4KICoKICogQGRlc2NyaXB0aW9uCiAqIFJldHVybiB0aGUgZGF0ZSBwYXJzZWQgZnJvbSBzdHJpbmcgdXNpbmcgdGhlIGdpdmVuIGZvcm1hdCBzdHJpbmcuCiAqCiAqID4g4pqg77iPIFBsZWFzZSBub3RlIHRoYXQgdGhlIGBmb3JtYXRgIHRva2VucyBkaWZmZXIgZnJvbSBNb21lbnQuanMgYW5kIG90aGVyIGxpYnJhcmllcy4KICogPiBTZWU6IGh0dHBzOi8vZ2l0LmlvL2Z4Q3lyCiAqCiAqIFRoZSBjaGFyYWN0ZXJzIGluIHRoZSBmb3JtYXQgc3RyaW5nIHdyYXBwZWQgYmV0d2VlbiB0d28gc2luZ2xlIHF1b3RlcyBjaGFyYWN0ZXJzICgnKSBhcmUgZXNjYXBlZC4KICogVHdvIHNpbmdsZSBxdW90ZXMgaW4gYSByb3csIHdoZXRoZXIgaW5zaWRlIG9yIG91dHNpZGUgYSBxdW90ZWQgc2VxdWVuY2UsIHJlcHJlc2VudCBhICdyZWFsJyBzaW5nbGUgcXVvdGUuCiAqCiAqIEZvcm1hdCBvZiB0aGUgZm9ybWF0IHN0cmluZyBpcyBiYXNlZCBvbiBVbmljb2RlIFRlY2huaWNhbCBTdGFuZGFyZCAjMzU6CiAqIGh0dHBzOi8vd3d3LnVuaWNvZGUub3JnL3JlcG9ydHMvdHIzNS90cjM1LWRhdGVzLmh0bWwjRGF0ZV9GaWVsZF9TeW1ib2xfVGFibGUKICogd2l0aCBhIGZldyBhZGRpdGlvbnMgKHNlZSBub3RlIDUgYmVsb3cgdGhlIHRhYmxlKS4KICoKICogQWNjZXB0ZWQgZm9ybWF0IHN0cmluZyBwYXR0ZXJuczoKICogfCBVbml0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxQcmlvcnwgUGF0dGVybiB8IFJlc3VsdCBleGFtcGxlcyAgICAgICAgICAgICAgICAgICB8IE5vdGVzIHwKICogfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLXwtLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLXwKICogfCBFcmEgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgMTQwIHwgRy4uR0dHICB8IEFELCBCQyAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgR0dHRyAgICB8IEFubm8gRG9taW5pLCBCZWZvcmUgQ2hyaXN0ICAgICAgICB8IDIgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgR0dHR0cgICB8IEEsIEIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCBDYWxlbmRhciB5ZWFyICAgICAgICAgICAgICAgICAgIHwgMTMwIHwgeSAgICAgICB8IDQ0LCAxLCAxOTAwLCAyMDE3LCA5OTk5ICAgICAgICAgICB8IDQgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgeW8gICAgICB8IDQ0dGgsIDFzdCwgMTkwMHRoLCA5OTk5OTk5dGggICAgICB8IDQsNSAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgeXkgICAgICB8IDQ0LCAwMSwgMDAsIDE3ICAgICAgICAgICAgICAgICAgICB8IDQgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgeXl5ICAgICB8IDA0NCwgMDAxLCAxMjMsIDk5OSAgICAgICAgICAgICAgICB8IDQgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgeXl5eSAgICB8IDAwNDQsIDAwMDEsIDE5MDAsIDIwMTcgICAgICAgICAgICB8IDQgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgeXl5eXkgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDIsNCAgIHwKICogfCBMb2NhbCB3ZWVrLW51bWJlcmluZyB5ZWFyICAgICAgIHwgMTMwIHwgWSAgICAgICB8IDQ0LCAxLCAxOTAwLCAyMDE3LCA5MDAwICAgICAgICAgICB8IDQgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgWW8gICAgICB8IDQ0dGgsIDFzdCwgMTkwMHRoLCA5OTk5OTk5dGggICAgICB8IDQsNSAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgWVkgICAgICB8IDQ0LCAwMSwgMDAsIDE3ICAgICAgICAgICAgICAgICAgICB8IDQsNiAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgWVlZICAgICB8IDA0NCwgMDAxLCAxMjMsIDk5OSAgICAgICAgICAgICAgICB8IDQgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgWVlZWSAgICB8IDAwNDQsIDAwMDEsIDE5MDAsIDIwMTcgICAgICAgICAgICB8IDQsNiAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgWVlZWVkgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDIsNCAgIHwKICogfCBJU08gd2Vlay1udW1iZXJpbmcgeWVhciAgICAgICAgIHwgMTMwIHwgUiAgICAgICB8IC00MywgMSwgMTkwMCwgMjAxNywgOTk5OSwgLTk5OTkgICB8IDQsNSAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgUlIgICAgICB8IC00MywgMDEsIDAwLCAxNyAgICAgICAgICAgICAgICAgICB8IDQsNSAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgUlJSICAgICB8IC0wNDMsIDAwMSwgMTIzLCA5OTksIC05OTkgICAgICAgICB8IDQsNSAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgUlJSUiAgICB8IC0wMDQzLCAwMDAxLCAyMDE3LCA5OTk5LCAtOTk5OSAgICB8IDQsNSAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgUlJSUlIgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDIsNCw1IHwKICogfCBFeHRlbmRlZCB5ZWFyICAgICAgICAgICAgICAgICAgIHwgMTMwIHwgdSAgICAgICB8IC00MywgMSwgMTkwMCwgMjAxNywgOTk5OSwgLTk5OSAgICB8IDQgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgdXUgICAgICB8IC00MywgMDEsIDk5LCAtOTkgICAgICAgICAgICAgICAgICB8IDQgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgdXV1ICAgICB8IC0wNDMsIDAwMSwgMTIzLCA5OTksIC05OTkgICAgICAgICB8IDQgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgdXV1dSAgICB8IC0wMDQzLCAwMDAxLCAyMDE3LCA5OTk5LCAtOTk5OSAgICB8IDQgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgdXV1dXUgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDIsNCAgIHwKICogfCBRdWFydGVyIChmb3JtYXR0aW5nKSAgICAgICAgICAgIHwgMTIwIHwgUSAgICAgICB8IDEsIDIsIDMsIDQgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgUW8gICAgICB8IDFzdCwgMm5kLCAzcmQsIDR0aCAgICAgICAgICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgUVEgICAgICB8IDAxLCAwMiwgMDMsIDA0ICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgUVFRICAgICB8IFExLCBRMiwgUTMsIFE0ICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgUVFRUSAgICB8IDFzdCBxdWFydGVyLCAybmQgcXVhcnRlciwgLi4uICAgICB8IDIgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgUVFRUVEgICB8IDEsIDIsIDMsIDQgICAgICAgICAgICAgICAgICAgICAgICB8IDQgICAgIHwKICogfCBRdWFydGVyIChzdGFuZC1hbG9uZSkgICAgICAgICAgIHwgMTIwIHwgcSAgICAgICB8IDEsIDIsIDMsIDQgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgcW8gICAgICB8IDFzdCwgMm5kLCAzcmQsIDR0aCAgICAgICAgICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgcXEgICAgICB8IDAxLCAwMiwgMDMsIDA0ICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgcXFxICAgICB8IFExLCBRMiwgUTMsIFE0ICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgcXFxcSAgICB8IDFzdCBxdWFydGVyLCAybmQgcXVhcnRlciwgLi4uICAgICB8IDIgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgcXFxcXEgICB8IDEsIDIsIDMsIDQgICAgICAgICAgICAgICAgICAgICAgICB8IDMgICAgIHwKICogfCBNb250aCAoZm9ybWF0dGluZykgICAgICAgICAgICAgIHwgMTEwIHwgTSAgICAgICB8IDEsIDIsIC4uLiwgMTIgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgTW8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDEydGggICAgICAgICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgTU0gICAgICB8IDAxLCAwMiwgLi4uLCAxMiAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgTU1NICAgICB8IEphbiwgRmViLCAuLi4sIERlYyAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgTU1NTSAgICB8IEphbnVhcnksIEZlYnJ1YXJ5LCAuLi4sIERlY2VtYmVyICB8IDIgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgTU1NTU0gICB8IEosIEYsIC4uLiwgRCAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCBNb250aCAoc3RhbmQtYWxvbmUpICAgICAgICAgICAgIHwgMTEwIHwgTCAgICAgICB8IDEsIDIsIC4uLiwgMTIgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgTG8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDEydGggICAgICAgICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgTEwgICAgICB8IDAxLCAwMiwgLi4uLCAxMiAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgTExMICAgICB8IEphbiwgRmViLCAuLi4sIERlYyAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgTExMTCAgICB8IEphbnVhcnksIEZlYnJ1YXJ5LCAuLi4sIERlY2VtYmVyICB8IDIgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgTExMTEwgICB8IEosIEYsIC4uLiwgRCAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCBMb2NhbCB3ZWVrIG9mIHllYXIgICAgICAgICAgICAgIHwgMTAwIHwgdyAgICAgICB8IDEsIDIsIC4uLiwgNTMgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgd28gICAgICB8IDFzdCwgMm5kLCAuLi4sIDUzdGggICAgICAgICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgd3cgICAgICB8IDAxLCAwMiwgLi4uLCA1MyAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCBJU08gd2VlayBvZiB5ZWFyICAgICAgICAgICAgICAgIHwgMTAwIHwgSSAgICAgICB8IDEsIDIsIC4uLiwgNTMgICAgICAgICAgICAgICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgSW8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDUzdGggICAgICAgICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgSUkgICAgICB8IDAxLCAwMiwgLi4uLCA1MyAgICAgICAgICAgICAgICAgICB8IDUgICAgIHwKICogfCBEYXkgb2YgbW9udGggICAgICAgICAgICAgICAgICAgIHwgIDkwIHwgZCAgICAgICB8IDEsIDIsIC4uLiwgMzEgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgZG8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDMxc3QgICAgICAgICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgZGQgICAgICB8IDAxLCAwMiwgLi4uLCAzMSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCBEYXkgb2YgeWVhciAgICAgICAgICAgICAgICAgICAgIHwgIDkwIHwgRCAgICAgICB8IDEsIDIsIC4uLiwgMzY1LCAzNjYgICAgICAgICAgICAgICB8IDYgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgRG8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDM2NXRoLCAzNjZ0aCAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgREQgICAgICB8IDAxLCAwMiwgLi4uLCAzNjUsIDM2NiAgICAgICAgICAgICB8IDYgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgREREICAgICB8IDAwMSwgMDAyLCAuLi4sIDM2NSwgMzY2ICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgRERERCAgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDIgICAgIHwKICogfCBEYXkgb2Ygd2VlayAoZm9ybWF0dGluZykgICAgICAgIHwgIDkwIHwgRS4uRUVFICB8IE1vbiwgVHVlLCBXZWQsIC4uLiwgU3UgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgRUVFRSAgICB8IE1vbmRheSwgVHVlc2RheSwgLi4uLCBTdW5kYXkgICAgICB8IDIgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgRUVFRUUgICB8IE0sIFQsIFcsIFQsIEYsIFMsIFMgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgRUVFRUVFICB8IE1vLCBUdSwgV2UsIFRoLCBGciwgU3UsIFNhICAgICAgICB8ICAgICAgIHwKICogfCBJU08gZGF5IG9mIHdlZWsgKGZvcm1hdHRpbmcpICAgIHwgIDkwIHwgaSAgICAgICB8IDEsIDIsIDMsIC4uLiwgNyAgICAgICAgICAgICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgaW8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDd0aCAgICAgICAgICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgaWkgICAgICB8IDAxLCAwMiwgLi4uLCAwNyAgICAgICAgICAgICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgaWlpICAgICB8IE1vbiwgVHVlLCBXZWQsIC4uLiwgU3UgICAgICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgaWlpaSAgICB8IE1vbmRheSwgVHVlc2RheSwgLi4uLCBTdW5kYXkgICAgICB8IDIsNSAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgaWlpaWkgICB8IE0sIFQsIFcsIFQsIEYsIFMsIFMgICAgICAgICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgaWlpaWlpICB8IE1vLCBUdSwgV2UsIFRoLCBGciwgU3UsIFNhICAgICAgICB8IDUgICAgIHwKICogfCBMb2NhbCBkYXkgb2Ygd2VlayAoZm9ybWF0dGluZykgIHwgIDkwIHwgZSAgICAgICB8IDIsIDMsIDQsIC4uLiwgMSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgZW8gICAgICB8IDJuZCwgM3JkLCAuLi4sIDFzdCAgICAgICAgICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgZWUgICAgICB8IDAyLCAwMywgLi4uLCAwMSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgZWVlICAgICB8IE1vbiwgVHVlLCBXZWQsIC4uLiwgU3UgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgZWVlZSAgICB8IE1vbmRheSwgVHVlc2RheSwgLi4uLCBTdW5kYXkgICAgICB8IDIgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgZWVlZWUgICB8IE0sIFQsIFcsIFQsIEYsIFMsIFMgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgZWVlZWVlICB8IE1vLCBUdSwgV2UsIFRoLCBGciwgU3UsIFNhICAgICAgICB8ICAgICAgIHwKICogfCBMb2NhbCBkYXkgb2Ygd2VlayAoc3RhbmQtYWxvbmUpIHwgIDkwIHwgYyAgICAgICB8IDIsIDMsIDQsIC4uLiwgMSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgY28gICAgICB8IDJuZCwgM3JkLCAuLi4sIDFzdCAgICAgICAgICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgY2MgICAgICB8IDAyLCAwMywgLi4uLCAwMSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgY2NjICAgICB8IE1vbiwgVHVlLCBXZWQsIC4uLiwgU3UgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgY2NjYyAgICB8IE1vbmRheSwgVHVlc2RheSwgLi4uLCBTdW5kYXkgICAgICB8IDIgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgY2NjY2MgICB8IE0sIFQsIFcsIFQsIEYsIFMsIFMgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgY2NjY2NjICB8IE1vLCBUdSwgV2UsIFRoLCBGciwgU3UsIFNhICAgICAgICB8ICAgICAgIHwKICogfCBBTSwgUE0gICAgICAgICAgICAgICAgICAgICAgICAgIHwgIDgwIHwgYS4uYWFhICB8IEFNLCBQTSAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgYWFhYSAgICB8IGEubS4sIHAubS4gICAgICAgICAgICAgICAgICAgICAgICB8IDIgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgYWFhYWEgICB8IGEsIHAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCBBTSwgUE0sIG5vb24sIG1pZG5pZ2h0ICAgICAgICAgIHwgIDgwIHwgYi4uYmJiICB8IEFNLCBQTSwgbm9vbiwgbWlkbmlnaHQgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgYmJiYiAgICB8IGEubS4sIHAubS4sIG5vb24sIG1pZG5pZ2h0ICAgICAgICB8IDIgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgYmJiYmIgICB8IGEsIHAsIG4sIG1pICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCBGbGV4aWJsZSBkYXkgcGVyaW9kICAgICAgICAgICAgIHwgIDgwIHwgQi4uQkJCICB8IGF0IG5pZ2h0LCBpbiB0aGUgbW9ybmluZywgLi4uICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgQkJCQiAgICB8IGF0IG5pZ2h0LCBpbiB0aGUgbW9ybmluZywgLi4uICAgICB8IDIgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgQkJCQkIgICB8IGF0IG5pZ2h0LCBpbiB0aGUgbW9ybmluZywgLi4uICAgICB8ICAgICAgIHwKICogfCBIb3VyIFsxLTEyXSAgICAgICAgICAgICAgICAgICAgIHwgIDcwIHwgaCAgICAgICB8IDEsIDIsIC4uLiwgMTEsIDEyICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgaG8gICAgICB8IDFzdCwgMm5kLCAuLi4sIDExdGgsIDEydGggICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgaGggICAgICB8IDAxLCAwMiwgLi4uLCAxMSwgMTIgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCBIb3VyIFswLTIzXSAgICAgICAgICAgICAgICAgICAgIHwgIDcwIHwgSCAgICAgICB8IDAsIDEsIDIsIC4uLiwgMjMgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgSG8gICAgICB8IDB0aCwgMXN0LCAybmQsIC4uLiwgMjNyZCAgICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgSEggICAgICB8IDAwLCAwMSwgMDIsIC4uLiwgMjMgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCBIb3VyIFswLTExXSAgICAgICAgICAgICAgICAgICAgIHwgIDcwIHwgSyAgICAgICB8IDEsIDIsIC4uLiwgMTEsIDAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgS28gICAgICB8IDFzdCwgMm5kLCAuLi4sIDExdGgsIDB0aCAgICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgS0sgICAgICB8IDEsIDIsIC4uLiwgMTEsIDAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCBIb3VyIFsxLTI0XSAgICAgICAgICAgICAgICAgICAgIHwgIDcwIHwgayAgICAgICB8IDI0LCAxLCAyLCAuLi4sIDIzICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwga28gICAgICB8IDI0dGgsIDFzdCwgMm5kLCAuLi4sIDIzcmQgICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwga2sgICAgICB8IDI0LCAwMSwgMDIsIC4uLiwgMjMgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCBNaW51dGUgICAgICAgICAgICAgICAgICAgICAgICAgIHwgIDYwIHwgbSAgICAgICB8IDAsIDEsIC4uLiwgNTkgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgbW8gICAgICB8IDB0aCwgMXN0LCAuLi4sIDU5dGggICAgICAgICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgbW0gICAgICB8IDAwLCAwMSwgLi4uLCA1OSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCBTZWNvbmQgICAgICAgICAgICAgICAgICAgICAgICAgIHwgIDUwIHwgcyAgICAgICB8IDAsIDEsIC4uLiwgNTkgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgc28gICAgICB8IDB0aCwgMXN0LCAuLi4sIDU5dGggICAgICAgICAgICAgICB8IDUgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgc3MgICAgICB8IDAwLCAwMSwgLi4uLCA1OSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCBGcmFjdGlvbiBvZiBzZWNvbmQgICAgICAgICAgICAgIHwgIDQwIHwgUyAgICAgICB8IDAsIDEsIC4uLiwgOSAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgU1MgICAgICB8IDAwLCAwMSwgLi4uLCA5OSAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgU1NTICAgICB8IDAwMCwgMDAwMSwgLi4uLCA5OTkgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgU1NTUyAgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDIgICAgIHwKICogfCBUaW1lem9uZSAoSVNPLTg2MDEgdy8gWikgICAgICAgIHwgIDIwIHwgWCAgICAgICB8IC0wOCwgKzA1MzAsIFogICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgWFggICAgICB8IC0wODAwLCArMDUzMCwgWiAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgWFhYICAgICB8IC0wODowMCwgKzA1OjMwLCBaICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgWFhYWCAgICB8IC0wODAwLCArMDUzMCwgWiwgKzEyMzQ1NiAgICAgICAgICB8IDIgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgWFhYWFggICB8IC0wODowMCwgKzA1OjMwLCBaLCArMTI6MzQ6NTYgICAgICB8ICAgICAgIHwKICogfCBUaW1lem9uZSAoSVNPLTg2MDEgdy9vIFopICAgICAgIHwgIDIwIHwgeCAgICAgICB8IC0wOCwgKzA1MzAsICswMCAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgeHggICAgICB8IC0wODAwLCArMDUzMCwgKzAwMDAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgeHh4ICAgICB8IC0wODowMCwgKzA1OjMwLCArMDA6MDAgICAgICAgICAgICB8IDIgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgeHh4eCAgICB8IC0wODAwLCArMDUzMCwgKzAwMDAsICsxMjM0NTYgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgeHh4eHggICB8IC0wODowMCwgKzA1OjMwLCArMDA6MDAsICsxMjozNDo1NiB8ICAgICAgIHwKICogfCBTZWNvbmRzIHRpbWVzdGFtcCAgICAgICAgICAgICAgIHwgIDEwIHwgdCAgICAgICB8IDUxMjk2OTUyMCAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgdHQgICAgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDIgICAgIHwKICogfCBNaWxsaXNlY29uZHMgdGltZXN0YW1wICAgICAgICAgIHwgIDEwIHwgVCAgICAgICB8IDUxMjk2OTUyMDkwMCAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgIHwKICogfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgVFQgICAgICB8IC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IDIgICAgIHwKICogTm90ZXM6CiAqIDEuICJGb3JtYXR0aW5nIiB1bml0cyAoZS5nLiBmb3JtYXR0aW5nIHF1YXJ0ZXIpIGluIHRoZSBkZWZhdWx0IGVuLVVTIGxvY2FsZQogKiAgICBhcmUgdGhlIHNhbWUgYXMgInN0YW5kLWFsb25lIiB1bml0cywgYnV0IGFyZSBkaWZmZXJlbnQgaW4gc29tZSBsYW5ndWFnZXMuCiAqICAgICJGb3JtYXR0aW5nIiB1bml0cyBhcmUgZGVjbGluZWQgYWNjb3JkaW5nIHRvIHRoZSBydWxlcyBvZiB0aGUgbGFuZ3VhZ2UKICogICAgaW4gdGhlIGNvbnRleHQgb2YgYSBkYXRlLiAiU3RhbmQtYWxvbmUiIHVuaXRzIGFyZSBhbHdheXMgbm9taW5hdGl2ZSBzaW5ndWxhci4KICogICAgSW4gYGZvcm1hdGAgZnVuY3Rpb24sIHRoZXkgd2lsbCBwcm9kdWNlIGRpZmZlcmVudCByZXN1bHQ6CiAqCiAqICAgIGBmb3JtYXQobmV3IERhdGUoMjAxNywgMTAsIDYpLCAnZG8gTExMTCcsIHtsb2NhbGU6IGNzfSkgLy89PiAnNi4gbGlzdG9wYWQnYAogKgogKiAgICBgZm9ybWF0KG5ldyBEYXRlKDIwMTcsIDEwLCA2KSwgJ2RvIE1NTU0nLCB7bG9jYWxlOiBjc30pIC8vPT4gJzYuIGxpc3RvcGFkdSdgCiAqCiAqICAgIGBwYXJzZWAgd2lsbCB0cnkgdG8gbWF0Y2ggYm90aCBmb3JtYXR0aW5nIGFuZCBzdGFuZC1hbG9uZSB1bml0cyBpbnRlcmNoYW5nYWJseS4KICoKICogMi4gQW55IHNlcXVlbmNlIG9mIHRoZSBpZGVudGljYWwgbGV0dGVycyBpcyBhIHBhdHRlcm4sIHVubGVzcyBpdCBpcyBlc2NhcGVkIGJ5CiAqICAgIHRoZSBzaW5nbGUgcXVvdGUgY2hhcmFjdGVycyAoc2VlIGJlbG93KS4KICogICAgSWYgdGhlIHNlcXVlbmNlIGlzIGxvbmdlciB0aGFuIGxpc3RlZCBpbiB0YWJsZToKICogICAgLSBmb3IgbnVtZXJpY2FsIHVuaXRzIChgeXl5eXl5eXlgKSBgcGFyc2VgIHdpbGwgdHJ5IHRvIG1hdGNoIGEgbnVtYmVyCiAqICAgICAgYXMgd2lkZSBhcyB0aGUgc2VxdWVuY2UKICogICAgLSBmb3IgdGV4dCB1bml0cyAoYE1NTU1NTU1NYCkgYHBhcnNlYCB3aWxsIHRyeSB0byBtYXRjaCB0aGUgd2lkZXN0IHZhcmlhdGlvbiBvZiB0aGUgdW5pdC4KICogICAgICBUaGVzZSB2YXJpYXRpb25zIGFyZSBtYXJrZWQgd2l0aCAiMiIgaW4gdGhlIGxhc3QgY29sdW1uIG9mIHRoZSB0YWJsZS4KICoKICogMy4gYFFRUVFRYCBhbmQgYHFxcXFxYCBjb3VsZCBiZSBub3Qgc3RyaWN0bHkgbnVtZXJpY2FsIGluIHNvbWUgbG9jYWxlcy4KICogICAgVGhlc2UgdG9rZW5zIHJlcHJlc2VudCB0aGUgc2hvcnRlc3QgZm9ybSBvZiB0aGUgcXVhcnRlci4KICoKICogNC4gVGhlIG1haW4gZGlmZmVyZW5jZSBiZXR3ZWVuIGB5YCBhbmQgYHVgIHBhdHRlcm5zIGFyZSBCLkMuIHllYXJzOgogKgogKiAgICB8IFllYXIgfCBgeWAgfCBgdWAgfAogKiAgICB8LS0tLS0tfC0tLS0tfC0tLS0tfAogKiAgICB8IEFDIDEgfCAgIDEgfCAgIDEgfAogKiAgICB8IEJDIDEgfCAgIDEgfCAgIDAgfAogKiAgICB8IEJDIDIgfCAgIDIgfCAgLTEgfAogKgogKiAgICBBbHNvIGB5eWAgd2lsbCB0cnkgdG8gZ3Vlc3MgdGhlIGNlbnR1cnkgb2YgdHdvIGRpZ2l0IHllYXIgYnkgcHJveGltaXR5IHdpdGggYGJhc2VEYXRlYDoKICoKICogICAgYHBhcnNlKCc1MCcsICd5eScsIG5ldyBEYXRlKDIwMTgsIDAsIDEpKSAvLz0+IFNhdCBKYW4gMDEgMjA1MCAwMDowMDowMGAKICoKICogICAgYHBhcnNlKCc3NScsICd5eScsIG5ldyBEYXRlKDIwMTgsIDAsIDEpKSAvLz0+IFdlZCBKYW4gMDEgMTk3NSAwMDowMDowMGAKICoKICogICAgd2hpbGUgYHV1YCB3aWxsIGp1c3QgYXNzaWduIHRoZSB5ZWFyIGFzIGlzOgogKgogKiAgICBgcGFyc2UoJzUwJywgJ3V1JywgbmV3IERhdGUoMjAxOCwgMCwgMSkpIC8vPT4gU2F0IEphbiAwMSAwMDUwIDAwOjAwOjAwYAogKgogKiAgICBgcGFyc2UoJzc1JywgJ3V1JywgbmV3IERhdGUoMjAxOCwgMCwgMSkpIC8vPT4gVHVlIEphbiAwMSAwMDc1IDAwOjAwOjAwYAogKgogKiAgICBUaGUgc2FtZSBkaWZmZXJlbmNlIGlzIHRydWUgZm9yIGxvY2FsIGFuZCBJU08gd2Vlay1udW1iZXJpbmcgeWVhcnMgKGBZYCBhbmQgYFJgKSwKICogICAgZXhjZXB0IGxvY2FsIHdlZWstbnVtYmVyaW5nIHllYXJzIGFyZSBkZXBlbmRlbnQgb24gYG9wdGlvbnMud2Vla1N0YXJ0c09uYAogKiAgICBhbmQgYG9wdGlvbnMuZmlyc3RXZWVrQ29udGFpbnNEYXRlYCAoY29tcGFyZSBbc2V0SVNPV2Vla1llYXJde0BsaW5rIGh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3Mvc2V0SVNPV2Vla1llYXJ9CiAqICAgIGFuZCBbc2V0V2Vla1llYXJde0BsaW5rIGh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3Mvc2V0V2Vla1llYXJ9KS4KICoKICogNS4gVGhlc2UgcGF0dGVybnMgYXJlIG5vdCBpbiB0aGUgVW5pY29kZSBUZWNobmljYWwgU3RhbmRhcmQgIzM1OgogKiAgICAtIGBpYDogSVNPIGRheSBvZiB3ZWVrCiAqICAgIC0gYElgOiBJU08gd2VlayBvZiB5ZWFyCiAqICAgIC0gYFJgOiBJU08gd2Vlay1udW1iZXJpbmcgeWVhcgogKiAgICAtIGBvYDogb3JkaW5hbCBudW1iZXIgbW9kaWZpZXIKICoKICogNi4gVGhlc2UgdG9rZW5zIGFyZSBvZnRlbiBjb25mdXNlZCB3aXRoIG90aGVycy4gU2VlOiBodHRwczovL2dpdC5pby9meEN5cgogKgogKiBWYWx1ZXMgd2lsbCBiZSBhc3NpZ25lZCB0byB0aGUgZGF0ZSBpbiB0aGUgZGVzY2VuZGluZyBvcmRlciBvZiBpdHMgdW5pdCdzIHByaW9yaXR5LgogKiBVbml0cyBvZiBhbiBlcXVhbCBwcmlvcml0eSBvdmVyd3JpdGUgZWFjaCBvdGhlciBpbiB0aGUgb3JkZXIgb2YgYXBwZWFyYW5jZS4KICoKICogSWYgbm8gdmFsdWVzIG9mIGhpZ2hlciBwcmlvcml0eSBhcmUgcGFyc2VkIChlLmcuIHdoZW4gcGFyc2luZyBzdHJpbmcgJ0phbnVhcnkgMXN0JyB3aXRob3V0IGEgeWVhciksCiAqIHRoZSB2YWx1ZXMgd2lsbCBiZSB0YWtlbiBmcm9tIDNyZCBhcmd1bWVudCBgYmFzZURhdGVgIHdoaWNoIHdvcmtzIGFzIGEgY29udGV4dCBvZiBwYXJzaW5nLgogKgogKiBgYmFzZURhdGVgIG11c3QgYmUgcGFzc2VkIGZvciBjb3JyZWN0IHdvcmsgb2YgdGhlIGZ1bmN0aW9uLgogKiBJZiB5b3UncmUgbm90IHN1cmUgd2hpY2ggYGJhc2VEYXRlYCB0byBzdXBwbHksIGNyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiBEYXRlOgogKiBgcGFyc2UoJzAyLzExLzIwMTQnLCAnTU0vZGQveXl5eScsIG5ldyBEYXRlKCkpYAogKiBJbiB0aGlzIGNhc2UgcGFyc2luZyB3aWxsIGJlIGRvbmUgaW4gdGhlIGNvbnRleHQgb2YgdGhlIGN1cnJlbnQgZGF0ZS4KICogSWYgYGJhc2VEYXRlYCBpcyBgSW52YWxpZCBEYXRlYCBvciBhIHZhbHVlIG5vdCBjb252ZXJ0aWJsZSB0byB2YWxpZCBgRGF0ZWAsCiAqIHRoZW4gYEludmFsaWQgRGF0ZWAgd2lsbCBiZSByZXR1cm5lZC4KICoKICogVGhlIHJlc3VsdCBtYXkgdmFyeSBieSBsb2NhbGUuCiAqCiAqIElmIGBmb3JtYXRTdHJpbmdgIG1hdGNoZXMgd2l0aCBgZGF0ZVN0cmluZ2AgYnV0IGRvZXMgbm90IHByb3ZpZGVzIHRva2VucywgYGJhc2VEYXRlYCB3aWxsIGJlIHJldHVybmVkLgogKgogKiBJZiBwYXJzaW5nIGZhaWxlZCwgYEludmFsaWQgRGF0ZWAgd2lsbCBiZSByZXR1cm5lZC4KICogSW52YWxpZCBEYXRlIGlzIGEgRGF0ZSwgd2hvc2UgdGltZSB2YWx1ZSBpcyBOYU4uCiAqIFRpbWUgdmFsdWUgb2YgRGF0ZTogaHR0cDovL2VzNS5naXRodWIuaW8vI3gxNS45LjEuMQogKgogKiBAcGFyYW0ge1N0cmluZ30gZGF0ZVN0cmluZyAtIHRoZSBzdHJpbmcgdG8gcGFyc2UKICogQHBhcmFtIHtTdHJpbmd9IGZvcm1hdFN0cmluZyAtIHRoZSBzdHJpbmcgb2YgdG9rZW5zCiAqIEBwYXJhbSB7RGF0ZXxTdHJpbmd8TnVtYmVyfSBiYXNlRGF0ZSAtIGRlZmluZXMgdmFsdWVzIG1pc3NpbmcgZnJvbSB0aGUgcGFyc2VkIGRhdGVTdHJpbmcKICogQHBhcmFtIHtPcHRpb25zfSBbb3B0aW9uc10gLSB0aGUgb2JqZWN0IHdpdGggb3B0aW9ucy4gU2VlIFtPcHRpb25zXXtAbGluayBodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL09wdGlvbnN9CiAqIEBwYXJhbSB7MHwxfDJ9IFtvcHRpb25zLmFkZGl0aW9uYWxEaWdpdHM9Ml0gLSBwYXNzZWQgdG8gYHRvRGF0ZWAuIFNlZSBbdG9EYXRlXXtAbGluayBodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL3RvRGF0ZX0KICogQHBhcmFtIHtMb2NhbGV9IFtvcHRpb25zLmxvY2FsZT1kZWZhdWx0TG9jYWxlXSAtIHRoZSBsb2NhbGUgb2JqZWN0LiBTZWUgW0xvY2FsZV17QGxpbmsgaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy9Mb2NhbGV9CiAqIEBwYXJhbSB7MHwxfDJ8M3w0fDV8Nn0gW29wdGlvbnMud2Vla1N0YXJ0c09uPTBdIC0gdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWsgKDAgLSBTdW5kYXkpCiAqIEBwYXJhbSB7MXwyfDN8NHw1fDZ8N30gW29wdGlvbnMuZmlyc3RXZWVrQ29udGFpbnNEYXRlPTFdIC0gdGhlIGRheSBvZiBKYW51YXJ5LCB3aGljaCBpcyBhbHdheXMgaW4gdGhlIGZpcnN0IHdlZWsgb2YgdGhlIHllYXIKICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5hd2FyZU9mVW5pY29kZVRva2Vucz1mYWxzZV0gLSBpZiB0cnVlLCBhbGxvd3MgdXNhZ2Ugb2YgVW5pY29kZSB0b2tlbnMgY2F1c2VzIGNvbmZ1c2lvbjoKICogICAtIFNvbWUgb2YgdGhlIGRheSBvZiB5ZWFyIHRva2VucyAoYERgLCBgRERgKSB0aGF0IGFyZSBjb25mdXNlZCB3aXRoIHRoZSBkYXkgb2YgbW9udGggdG9rZW5zIChgZGAsIGBkZGApLgogKiAgIC0gU29tZSBvZiB0aGUgbG9jYWwgd2Vlay1udW1iZXJpbmcgeWVhciB0b2tlbnMgKGBZWWAsIGBZWVlZYCkgdGhhdCBhcmUgY29uZnVzZWQgd2l0aCB0aGUgY2FsZW5kYXIgeWVhciB0b2tlbnMgKGB5eWAsIGB5eXl5YCkuCiAqICAgU2VlOiBodHRwczovL2dpdC5pby9meEN5cgogKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHBhcnNlZCBkYXRlCiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMyBhcmd1bWVudHMgcmVxdWlyZWQKICogQHRocm93cyB7UmFuZ2VFcnJvcn0gYG9wdGlvbnMuYWRkaXRpb25hbERpZ2l0c2AgbXVzdCBiZSAwLCAxIG9yIDIKICogQHRocm93cyB7UmFuZ2VFcnJvcn0gYG9wdGlvbnMud2Vla1N0YXJ0c09uYCBtdXN0IGJlIGJldHdlZW4gMCBhbmQgNgogKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy5maXJzdFdlZWtDb250YWluc0RhdGVgIG11c3QgYmUgYmV0d2VlbiAxIGFuZCA3CiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IGBvcHRpb25zLmxvY2FsZWAgbXVzdCBjb250YWluIGBtYXRjaGAgcHJvcGVydHkKICogQHRocm93cyB7UmFuZ2VFcnJvcn0gYG9wdGlvbnMuYXdhcmVPZlVuaWNvZGVUb2tlbnNgIG11c3QgYmUgc2V0IHRvIGB0cnVlYCB0byB1c2UgYFhYYCB0b2tlbjsgc2VlOiBodHRwczovL2dpdC5pby9meEN5cgogKgogKiBAZXhhbXBsZQogKiAvLyBQYXJzZSAxMSBGZWJydWFyeSAyMDE0IGZyb20gbWlkZGxlLWVuZGlhbiBmb3JtYXQ6CiAqIHZhciByZXN1bHQgPSBwYXJzZSgKICogICAnMDIvMTEvMjAxNCcsCiAqICAgJ01NL2RkL3l5eXknLAogKiAgIG5ldyBEYXRlKCkKICogKQogKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAwMDowMDowMAogKgogKiBAZXhhbXBsZQogKiAvLyBQYXJzZSAyOHRoIG9mIEZlYnJ1YXJ5IGluIEVzcGVyYW50byBsb2NhbGUgaW4gdGhlIGNvbnRleHQgb2YgMjAxMCB5ZWFyOgogKiBpbXBvcnQgZW8gZnJvbSAnZGF0ZS1mbnMvbG9jYWxlL2VvJwogKiB2YXIgcmVzdWx0ID0gcGFyc2UoCiAqICAgJzI4LWEgZGUgZmVicnVhcm8nLAogKiAgICJkbyAnZGUnIE1NTU0iLAogKiAgIG5ldyBEYXRlKDIwMTAsIDAsIDEpLAogKiAgIHtsb2NhbGU6IGVvfQogKiApCiAqIC8vPT4gU3VuIEZlYiAyOCAyMDEwIDAwOjAwOjAwCiAqLwoKZnVuY3Rpb24gcGFyc2UoZGlydHlEYXRlU3RyaW5nLCBkaXJ0eUZvcm1hdFN0cmluZywgZGlydHlCYXNlRGF0ZSwgZGlydHlPcHRpb25zKSB7CiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAzKSB7CiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCczIGFyZ3VtZW50cyByZXF1aXJlZCwgYnV0IG9ubHkgJyArIGFyZ3VtZW50cy5sZW5ndGggKyAnIHByZXNlbnQnKTsKICB9CgogIHZhciBkYXRlU3RyaW5nID0gU3RyaW5nKGRpcnR5RGF0ZVN0cmluZyk7CiAgdmFyIGZvcm1hdFN0cmluZyA9IFN0cmluZyhkaXJ0eUZvcm1hdFN0cmluZyk7CiAgdmFyIG9wdGlvbnMgPSBkaXJ0eU9wdGlvbnMgfHwge307CiAgdmFyIGxvY2FsZSA9IG9wdGlvbnMubG9jYWxlIHx8IGxvY2FsZSQxOwoKICBpZiAoIWxvY2FsZS5tYXRjaCkgewogICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2xvY2FsZSBtdXN0IGNvbnRhaW4gbWF0Y2ggcHJvcGVydHknKTsKICB9CgogIHZhciBsb2NhbGVGaXJzdFdlZWtDb250YWluc0RhdGUgPSBsb2NhbGUub3B0aW9ucyAmJiBsb2NhbGUub3B0aW9ucy5maXJzdFdlZWtDb250YWluc0RhdGU7CiAgdmFyIGRlZmF1bHRGaXJzdFdlZWtDb250YWluc0RhdGUgPSBsb2NhbGVGaXJzdFdlZWtDb250YWluc0RhdGUgPT0gbnVsbCA/IDEgOiB0b0ludGVnZXIobG9jYWxlRmlyc3RXZWVrQ29udGFpbnNEYXRlKTsKICB2YXIgZmlyc3RXZWVrQ29udGFpbnNEYXRlID0gb3B0aW9ucy5maXJzdFdlZWtDb250YWluc0RhdGUgPT0gbnVsbCA/IGRlZmF1bHRGaXJzdFdlZWtDb250YWluc0RhdGUgOiB0b0ludGVnZXIob3B0aW9ucy5maXJzdFdlZWtDb250YWluc0RhdGUpOyAvLyBUZXN0IGlmIHdlZWtTdGFydHNPbiBpcyBiZXR3ZWVuIDEgYW5kIDcgX2FuZF8gaXMgbm90IE5hTgoKICBpZiAoIShmaXJzdFdlZWtDb250YWluc0RhdGUgPj0gMSAmJiBmaXJzdFdlZWtDb250YWluc0RhdGUgPD0gNykpIHsKICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdmaXJzdFdlZWtDb250YWluc0RhdGUgbXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDcgaW5jbHVzaXZlbHknKTsKICB9CgogIHZhciBsb2NhbGVXZWVrU3RhcnRzT24gPSBsb2NhbGUub3B0aW9ucyAmJiBsb2NhbGUub3B0aW9ucy53ZWVrU3RhcnRzT247CiAgdmFyIGRlZmF1bHRXZWVrU3RhcnRzT24gPSBsb2NhbGVXZWVrU3RhcnRzT24gPT0gbnVsbCA/IDAgOiB0b0ludGVnZXIobG9jYWxlV2Vla1N0YXJ0c09uKTsKICB2YXIgd2Vla1N0YXJ0c09uID0gb3B0aW9ucy53ZWVrU3RhcnRzT24gPT0gbnVsbCA/IGRlZmF1bHRXZWVrU3RhcnRzT24gOiB0b0ludGVnZXIob3B0aW9ucy53ZWVrU3RhcnRzT24pOyAvLyBUZXN0IGlmIHdlZWtTdGFydHNPbiBpcyBiZXR3ZWVuIDAgYW5kIDYgX2FuZF8gaXMgbm90IE5hTgoKICBpZiAoISh3ZWVrU3RhcnRzT24gPj0gMCAmJiB3ZWVrU3RhcnRzT24gPD0gNikpIHsKICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCd3ZWVrU3RhcnRzT24gbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDYgaW5jbHVzaXZlbHknKTsKICB9CgogIGlmIChmb3JtYXRTdHJpbmcgPT09ICcnKSB7CiAgICBpZiAoZGF0ZVN0cmluZyA9PT0gJycpIHsKICAgICAgcmV0dXJuIHRvRGF0ZShkaXJ0eUJhc2VEYXRlLCBvcHRpb25zKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBuZXcgRGF0ZShOYU4pOwogICAgfQogIH0KCiAgdmFyIHN1YkZuT3B0aW9ucyA9IHsKICAgIGZpcnN0V2Vla0NvbnRhaW5zRGF0ZTogZmlyc3RXZWVrQ29udGFpbnNEYXRlLAogICAgd2Vla1N0YXJ0c09uOiB3ZWVrU3RhcnRzT24sCiAgICBsb2NhbGU6IGxvY2FsZQogIH07IC8vIElmIHRpbWV6b25lIGlzbid0IHNwZWNpZmllZCwgaXQgd2lsbCBiZSBzZXQgdG8gdGhlIHN5c3RlbSB0aW1lem9uZQoKICB2YXIgc2V0dGVycyA9IFt7CiAgICBwcmlvcml0eTogVElNRVpPTkVfVU5JVF9QUklPUklUWSwKICAgIHNldDogZGF0ZVRvU3lzdGVtVGltZXpvbmUsCiAgICBpbmRleDogMAogIH1dOwogIHZhciBpOwogIHZhciB0b2tlbnMgPSBmb3JtYXRTdHJpbmcubWF0Y2goZm9ybWF0dGluZ1Rva2Vuc1JlZ0V4cCQxKTsKCiAgZm9yIChpID0gMDsgaSA8IHRva2Vucy5sZW5ndGg7IGkrKykgewogICAgdmFyIHRva2VuID0gdG9rZW5zW2ldOwoKICAgIGlmICghb3B0aW9ucy5hd2FyZU9mVW5pY29kZVRva2VucyAmJiBpc1Byb3RlY3RlZFRva2VuKHRva2VuKSkgewogICAgICB0aHJvd1Byb3RlY3RlZEVycm9yKHRva2VuKTsKICAgIH0KCiAgICB2YXIgZmlyc3RDaGFyYWN0ZXIgPSB0b2tlblswXTsKICAgIHZhciBwYXJzZXIgPSBwYXJzZXJzW2ZpcnN0Q2hhcmFjdGVyXTsKCiAgICBpZiAocGFyc2VyKSB7CiAgICAgIHZhciBwYXJzZVJlc3VsdCA9IHBhcnNlci5wYXJzZShkYXRlU3RyaW5nLCB0b2tlbiwgbG9jYWxlLm1hdGNoLCBzdWJGbk9wdGlvbnMpOwoKICAgICAgaWYgKCFwYXJzZVJlc3VsdCkgewogICAgICAgIHJldHVybiBuZXcgRGF0ZShOYU4pOwogICAgICB9CgogICAgICBzZXR0ZXJzLnB1c2goewogICAgICAgIHByaW9yaXR5OiBwYXJzZXIucHJpb3JpdHksCiAgICAgICAgc2V0OiBwYXJzZXIuc2V0LAogICAgICAgIHZhbGlkYXRlOiBwYXJzZXIudmFsaWRhdGUsCiAgICAgICAgdmFsdWU6IHBhcnNlUmVzdWx0LnZhbHVlLAogICAgICAgIGluZGV4OiBzZXR0ZXJzLmxlbmd0aAogICAgICB9KTsKICAgICAgZGF0ZVN0cmluZyA9IHBhcnNlUmVzdWx0LnJlc3Q7CiAgICB9IGVsc2UgewogICAgICAvLyBSZXBsYWNlIHR3byBzaW5nbGUgcXVvdGUgY2hhcmFjdGVycyB3aXRoIG9uZSBzaW5nbGUgcXVvdGUgY2hhcmFjdGVyCiAgICAgIGlmICh0b2tlbiA9PT0gIicnIikgewogICAgICAgIHRva2VuID0gIiciOwogICAgICB9IGVsc2UgaWYgKGZpcnN0Q2hhcmFjdGVyID09PSAiJyIpIHsKICAgICAgICB0b2tlbiA9IGNsZWFuRXNjYXBlZFN0cmluZyQxKHRva2VuKTsKICAgICAgfSAvLyBDdXQgdG9rZW4gZnJvbSBzdHJpbmcsIG9yLCBpZiBzdHJpbmcgZG9lc24ndCBtYXRjaCB0aGUgdG9rZW4sIHJldHVybiBJbnZhbGlkIERhdGUKCgogICAgICBpZiAoZGF0ZVN0cmluZy5pbmRleE9mKHRva2VuKSA9PT0gMCkgewogICAgICAgIGRhdGVTdHJpbmcgPSBkYXRlU3RyaW5nLnNsaWNlKHRva2VuLmxlbmd0aCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7CiAgICAgIH0KICAgIH0KICB9IC8vIENoZWNrIGlmIHRoZSByZW1haW5pbmcgaW5wdXQgY29udGFpbnMgc29tZXRoaW5nIG90aGVyIHRoYW4gd2hpdGVzcGFjZQoKCiAgaWYgKGRhdGVTdHJpbmcubGVuZ3RoID4gMCAmJiBub3RXaGl0ZXNwYWNlUmVnRXhwLnRlc3QoZGF0ZVN0cmluZykpIHsKICAgIHJldHVybiBuZXcgRGF0ZShOYU4pOwogIH0KCiAgdmFyIHVuaXF1ZVByaW9yaXR5U2V0dGVycyA9IHNldHRlcnMubWFwKGZ1bmN0aW9uIChzZXR0ZXIpIHsKICAgIHJldHVybiBzZXR0ZXIucHJpb3JpdHk7CiAgfSkuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgcmV0dXJuIGIgLSBhOwogIH0pLmZpbHRlcihmdW5jdGlvbiAocHJpb3JpdHksIGluZGV4LCBhcnJheSkgewogICAgcmV0dXJuIGFycmF5LmluZGV4T2YocHJpb3JpdHkpID09PSBpbmRleDsKICB9KS5tYXAoZnVuY3Rpb24gKHByaW9yaXR5KSB7CiAgICByZXR1cm4gc2V0dGVycy5maWx0ZXIoZnVuY3Rpb24gKHNldHRlcikgewogICAgICByZXR1cm4gc2V0dGVyLnByaW9yaXR5ID09PSBwcmlvcml0eTsKICAgIH0pLnJldmVyc2UoKTsKICB9KS5tYXAoZnVuY3Rpb24gKHNldHRlckFycmF5KSB7CiAgICByZXR1cm4gc2V0dGVyQXJyYXlbMF07CiAgfSk7CiAgdmFyIGRhdGUgPSB0b0RhdGUoZGlydHlCYXNlRGF0ZSwgb3B0aW9ucyk7CgogIGlmIChpc05hTihkYXRlKSkgewogICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7CiAgfSAvLyBDb252ZXJ0IHRoZSBkYXRlIGluIHN5c3RlbSB0aW1lem9uZSB0byB0aGUgc2FtZSBkYXRlIGluIFVUQyswMDowMCB0aW1lem9uZS4KICAvLyBUaGlzIGVuc3VyZXMgdGhhdCB3aGVuIFVUQyBmdW5jdGlvbnMgd2lsbCBiZSBpbXBsZW1lbnRlZCwgbG9jYWxlcyB3aWxsIGJlIGNvbXBhdGlibGUgd2l0aCB0aGVtLgogIC8vIFNlZSBhbiBpc3N1ZSBhYm91dCBVVEMgZnVuY3Rpb25zOiBodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvaXNzdWVzLzM3CgoKICB2YXIgdXRjRGF0ZSA9IHN1Yk1pbGxpc2Vjb25kcyhkYXRlLCBnZXRUaW1lem9uZU9mZnNldEluTWlsbGlzZWNvbmRzKGRhdGUpKTsKCiAgZm9yIChpID0gMDsgaSA8IHVuaXF1ZVByaW9yaXR5U2V0dGVycy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNldHRlciA9IHVuaXF1ZVByaW9yaXR5U2V0dGVyc1tpXTsKCiAgICBpZiAoc2V0dGVyLnZhbGlkYXRlICYmICFzZXR0ZXIudmFsaWRhdGUodXRjRGF0ZSwgc2V0dGVyLnZhbHVlLCBzdWJGbk9wdGlvbnMpKSB7CiAgICAgIHJldHVybiBuZXcgRGF0ZShOYU4pOwogICAgfQoKICAgIHV0Y0RhdGUgPSBzZXR0ZXIuc2V0KHV0Y0RhdGUsIHNldHRlci52YWx1ZSwgc3ViRm5PcHRpb25zKTsKICB9CgogIHJldHVybiB1dGNEYXRlOwp9CgpmdW5jdGlvbiBkYXRlVG9TeXN0ZW1UaW1lem9uZShkYXRlKSB7CiAgdmFyIGNvbnZlcnRlZERhdGUgPSBuZXcgRGF0ZSgwKTsKICBjb252ZXJ0ZWREYXRlLnNldEZ1bGxZZWFyKGRhdGUuZ2V0VVRDRnVsbFllYXIoKSwgZGF0ZS5nZXRVVENNb250aCgpLCBkYXRlLmdldFVUQ0RhdGUoKSk7CiAgY29udmVydGVkRGF0ZS5zZXRIb3VycyhkYXRlLmdldFVUQ0hvdXJzKCksIGRhdGUuZ2V0VVRDTWludXRlcygpLCBkYXRlLmdldFVUQ1NlY29uZHMoKSwgZGF0ZS5nZXRVVENNaWxsaXNlY29uZHMoKSk7CiAgcmV0dXJuIGNvbnZlcnRlZERhdGU7Cn0KCmZ1bmN0aW9uIGNsZWFuRXNjYXBlZFN0cmluZyQxKGlucHV0KSB7CiAgcmV0dXJuIGlucHV0Lm1hdGNoKGVzY2FwZWRTdHJpbmdSZWdFeHAkMSlbMV0ucmVwbGFjZShkb3VibGVRdW90ZVJlZ0V4cCQxLCAiJyIpOwp9IC8vIFRoaXMgZmlsZSBpcyBnZW5lcmF0ZWQgYXV0b21hdGljYWxseSBieSBgc2NyaXB0cy9idWlsZC9pbmRpY2VzLmpzYC4gUGxlYXNlLCBkb24ndCBjaGFuZ2UgaXQuCi8vIAoKLyoqCiAqIEN1c3RvbSBwYXJzZSBiZWhhdmlvciBvbiB0b3Agb2YgZGF0ZS1mbnMgcGFyc2UgZnVuY3Rpb24uCiAqLwoKCmZ1bmN0aW9uIHBhcnNlRGF0ZSQxKGRhdGUsIGZvcm1hdCQxKSB7CiAgaWYgKHR5cGVvZiBkYXRlICE9PSAnc3RyaW5nJykgewogICAgcmV0dXJuIGlzVmFsaWQoZGF0ZSkgPyBkYXRlIDogbnVsbDsKICB9CgogIHZhciBwYXJzZWQgPSBwYXJzZShkYXRlLCBmb3JtYXQkMSwgbmV3IERhdGUoKSk7IC8vIGlmIGRhdGUgaXMgbm90IHZhbGlkIG9yIHRoZSBmb3JtYXR0ZWQgb3V0cHV0IGFmdGVyIHBhcnNpbmcgZG9lcyBub3QgbWF0Y2gKICAvLyB0aGUgc3RyaW5nIHZhbHVlIHBhc3NlZCBpbiAoYXZvaWRzIG92ZXJmbG93cykKCiAgaWYgKCFpc1ZhbGlkKHBhcnNlZCkgfHwgZm9ybWF0KHBhcnNlZCwgZm9ybWF0JDEpICE9PSBkYXRlKSB7CiAgICByZXR1cm4gbnVsbDsKICB9CgogIHJldHVybiBwYXJzZWQ7Cn0KCnZhciBhZnRlclZhbGlkYXRvciA9IGZ1bmN0aW9uIGFmdGVyVmFsaWRhdG9yKHZhbHVlLCByZWYpIHsKICBpZiAocmVmID09PSB2b2lkIDApIHJlZiA9IHt9OwogIHZhciB0YXJnZXRWYWx1ZSA9IHJlZi50YXJnZXRWYWx1ZTsKICB2YXIgaW5jbHVzaW9uID0gcmVmLmluY2x1c2lvbjsKICBpZiAoaW5jbHVzaW9uID09PSB2b2lkIDApIGluY2x1c2lvbiA9IGZhbHNlOwogIHZhciBmb3JtYXQgPSByZWYuZm9ybWF0OwoKICBpZiAodHlwZW9mIGZvcm1hdCA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgIGZvcm1hdCA9IGluY2x1c2lvbjsKICAgIGluY2x1c2lvbiA9IGZhbHNlOwogIH0KCiAgdmFsdWUgPSBwYXJzZURhdGUkMSh2YWx1ZSwgZm9ybWF0KTsKICB0YXJnZXRWYWx1ZSA9IHBhcnNlRGF0ZSQxKHRhcmdldFZhbHVlLCBmb3JtYXQpOyAvLyBpZiBlaXRoZXIgaXMgbm90IHZhbGlkLgoKICBpZiAoIXZhbHVlIHx8ICF0YXJnZXRWYWx1ZSkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgcmV0dXJuIGlzQWZ0ZXIodmFsdWUsIHRhcmdldFZhbHVlKSB8fCBpbmNsdXNpb24gJiYgaXNFcXVhbCQxKHZhbHVlLCB0YXJnZXRWYWx1ZSk7Cn07Cgp2YXIgb3B0aW9ucyA9IHsKICBoYXNUYXJnZXQ6IHRydWUsCiAgaXNEYXRlOiB0cnVlCn07IC8vIHJlcXVpcmVkIHRvIGNvbnZlcnQgZnJvbSBhIGxpc3Qgb2YgYXJyYXkgdmFsdWVzIHRvIGFuIG9iamVjdC4KCnZhciBwYXJhbU5hbWVzID0gWyd0YXJnZXRWYWx1ZScsICdpbmNsdXNpb24nLCAnZm9ybWF0J107CnZhciBhZnRlciA9IHsKICB2YWxpZGF0ZTogYWZ0ZXJWYWxpZGF0b3IsCiAgb3B0aW9uczogb3B0aW9ucywKICBwYXJhbU5hbWVzOiBwYXJhbU5hbWVzCn07Ci8qKgogKiBTb21lIEFscGhhIFJlZ2V4IGhlbHBlcnMuCiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9jaHJpc28vdmFsaWRhdG9yLmpzL2Jsb2IvbWFzdGVyL3NyYy9saWIvYWxwaGEuanMKICovCgp2YXIgYWxwaGEgPSB7CiAgZW46IC9eW0EtWl0qJC9pLAogIGNzOiAvXltBLVrDgcSMxI7DicSaw43Fh8OTxZjFoMWkw5rFrsOdxb1dKiQvaSwKICBkYTogL15bQS1aw4bDmMOFXSokL2ksCiAgZGU6IC9eW0EtWsOEw5bDnMOfXSokL2ksCiAgZXM6IC9eW0EtWsOBw4nDjcORw5PDmsOcXSokL2ksCiAgZnI6IC9eW0EtWsOAw4LDhsOHw4nDiMOKw4vDj8OOw5TFksOZw5vDnMW4XSokL2ksCiAgaXQ6IC9eW0EtWlx4QzAtXHhGRl0qJC9pLAogIGx0OiAvXltBLVrEhMSMxJjElsSuxaDFssWqxb1dKiQvaSwKICBubDogL15bQS1aw4nDi8OPw5PDlsOcXSokL2ksCiAgaHU6IC9eW0EtWsOBw4nDjcOTw5bFkMOaw5zFsF0qJC9pLAogIHBsOiAvXltBLVrEhMSGxJjFmsWBxYPDk8W7xbldKiQvaSwKICBwdDogL15bQS1aw4PDgcOAw4LDh8OJw4rDjcOVw5PDlMOaw5xdKiQvaSwKICBydTogL15b0JAt0K/QgV0qJC9pLAogIHNrOiAvXltBLVrDgcOExIzEjsOJw43EucS9xYfDk8WUxaDFpMOaw53FvV0qJC9pLAogIHNyOiAvXltBLVrEjMSGxb3FoMSQXSokL2ksCiAgc3Y6IC9eW0EtWsOFw4TDll0qJC9pLAogIHRyOiAvXltBLVrDh8SexLDEscOWxZ7DnF0qJC9pLAogIHVrOiAvXlvQkC3QqdCs0K7Qr9CE0IbQh9KQXSokL2ksCiAgYXI6IC9eW9ih2KLYo9ik2KXYptin2KjYqdiq2KvYrNit2K7Yr9iw2LHYstiz2LTYtdi22LfYuNi52LrZgdmC2YPZhNmF2YbZh9mI2YnZitmL2YzZjdmO2Y/ZkNmR2ZLZsF0qJC8sCiAgYXo6IC9eW0EtWsOHxo/EnsSwxLHDlsWew5xdKiQvaQp9Owp2YXIgYWxwaGFTcGFjZXMgPSB7CiAgZW46IC9eW0EtWlxzXSokL2ksCiAgY3M6IC9eW0EtWsOBxIzEjsOJxJrDjcWHw5PFmMWgxaTDmsWuw53FvVxzXSokL2ksCiAgZGE6IC9eW0EtWsOGw5jDhVxzXSokL2ksCiAgZGU6IC9eW0EtWsOEw5bDnMOfXHNdKiQvaSwKICBlczogL15bQS1aw4HDicONw5HDk8Oaw5xcc10qJC9pLAogIGZyOiAvXltBLVrDgMOCw4bDh8OJw4jDisOLw4/DjsOUxZLDmcObw5zFuFxzXSokL2ksCiAgaXQ6IC9eW0EtWlx4QzAtXHhGRlxzXSokL2ksCiAgbHQ6IC9eW0EtWsSExIzEmMSWxK7FoMWyxarFvVxzXSokL2ksCiAgbmw6IC9eW0EtWsOJw4vDj8OTw5bDnFxzXSokL2ksCiAgaHU6IC9eW0EtWsOBw4nDjcOTw5bFkMOaw5zFsFxzXSokL2ksCiAgcGw6IC9eW0EtWsSExIbEmMWaxYHFg8OTxbvFuVxzXSokL2ksCiAgcHQ6IC9eW0EtWsODw4HDgMOCw4fDicOKw43DlcOTw5TDmsOcXHNdKiQvaSwKICBydTogL15b0JAt0K/QgVxzXSokL2ksCiAgc2s6IC9eW0EtWsOBw4TEjMSOw4nDjcS5xL3Fh8OTxZTFoMWkw5rDncW9XHNdKiQvaSwKICBzcjogL15bQS1axIzEhsW9xaDEkFxzXSokL2ksCiAgc3Y6IC9eW0EtWsOFw4TDllxzXSokL2ksCiAgdHI6IC9eW0EtWsOHxJ7EsMSxw5bFnsOcXHNdKiQvaSwKICB1azogL15b0JAt0KnQrNCu0K/QhNCG0IfSkFxzXSokL2ksCiAgYXI6IC9eW9ih2KLYo9ik2KXYptin2KjYqdiq2KvYrNit2K7Yr9iw2LHYstiz2LTYtdi22LfYuNi52LrZgdmC2YPZhNmF2YbZh9mI2YnZitmL2YzZjdmO2Y/ZkNmR2ZLZsFxzXSokLywKICBhejogL15bQS1aw4fGj8SexLDEscOWxZ7DnFxzXSokL2kKfTsKdmFyIGFscGhhbnVtZXJpYyA9IHsKICBlbjogL15bMC05QS1aXSokL2ksCiAgY3M6IC9eWzAtOUEtWsOBxIzEjsOJxJrDjcWHw5PFmMWgxaTDmsWuw53FvV0qJC9pLAogIGRhOiAvXlswLTlBLVrDhsOYw4VdJC9pLAogIGRlOiAvXlswLTlBLVrDhMOWw5zDn10qJC9pLAogIGVzOiAvXlswLTlBLVrDgcOJw43DkcOTw5rDnF0qJC9pLAogIGZyOiAvXlswLTlBLVrDgMOCw4bDh8OJw4jDisOLw4/DjsOUxZLDmcObw5zFuF0qJC9pLAogIGl0OiAvXlswLTlBLVpceEMwLVx4RkZdKiQvaSwKICBsdDogL15bMC05QS1axITEjMSYxJbErsWgxbLFqsW9XSokL2ksCiAgaHU6IC9eWzAtOUEtWsOBw4nDjcOTw5bFkMOaw5zFsF0qJC9pLAogIG5sOiAvXlswLTlBLVrDicOLw4/Dk8OWw5xdKiQvaSwKICBwbDogL15bMC05QS1axITEhsSYxZrFgcWDw5PFu8W5XSokL2ksCiAgcHQ6IC9eWzAtOUEtWsODw4HDgMOCw4fDicOKw43DlcOTw5TDmsOcXSokL2ksCiAgcnU6IC9eWzAtOdCQLdCv0IFdKiQvaSwKICBzazogL15bMC05QS1aw4HDhMSMxI7DicONxLnEvcWHw5PFlMWgxaTDmsOdxb1dKiQvaSwKICBzcjogL15bMC05QS1axIzEhsW9xaDEkF0qJC9pLAogIHN2OiAvXlswLTlBLVrDhcOEw5ZdKiQvaSwKICB0cjogL15bMC05QS1aw4fEnsSwxLHDlsWew5xdKiQvaSwKICB1azogL15bMC050JAt0KnQrNCu0K/QhNCG0IfSkF0qJC9pLAogIGFyOiAvXlvZoNmh2aLZo9mk2aXZptmn2ajZqTAtOdih2KLYo9ik2KXYptin2KjYqdiq2KvYrNit2K7Yr9iw2LHYstiz2LTYtdi22LfYuNi52LrZgdmC2YPZhNmF2YbZh9mI2YnZitmL2YzZjdmO2Y/ZkNmR2ZLZsF0qJC8sCiAgYXo6IC9eWzAtOUEtWsOHxo/EnsSwxLHDlsWew5xdKiQvaQp9Owp2YXIgYWxwaGFEYXNoID0gewogIGVuOiAvXlswLTlBLVpfLV0qJC9pLAogIGNzOiAvXlswLTlBLVrDgcSMxI7DicSaw43Fh8OTxZjFoMWkw5rFrsOdxb1fLV0qJC9pLAogIGRhOiAvXlswLTlBLVrDhsOYw4VfLV0qJC9pLAogIGRlOiAvXlswLTlBLVrDhMOWw5zDn18tXSokL2ksCiAgZXM6IC9eWzAtOUEtWsOBw4nDjcORw5PDmsOcXy1dKiQvaSwKICBmcjogL15bMC05QS1aw4DDgsOGw4fDicOIw4rDi8OPw47DlMWSw5nDm8OcxbhfLV0qJC9pLAogIGl0OiAvXlswLTlBLVpceEMwLVx4RkZfLV0qJC9pLAogIGx0OiAvXlswLTlBLVrEhMSMxJjElsSuxaDFssWqxb1fLV0qJC9pLAogIG5sOiAvXlswLTlBLVrDicOLw4/Dk8OWw5xfLV0qJC9pLAogIGh1OiAvXlswLTlBLVrDgcOJw43Dk8OWxZDDmsOcxbBfLV0qJC9pLAogIHBsOiAvXlswLTlBLVrEhMSGxJjFmsWBxYPDk8W7xblfLV0qJC9pLAogIHB0OiAvXlswLTlBLVrDg8OBw4DDgsOHw4nDisONw5XDk8OUw5rDnF8tXSokL2ksCiAgcnU6IC9eWzAtOdCQLdCv0IFfLV0qJC9pLAogIHNrOiAvXlswLTlBLVrDgcOExIzEjsOJw43EucS9xYfDk8WUxaDFpMOaw53FvV8tXSokL2ksCiAgc3I6IC9eWzAtOUEtWsSMxIbFvcWgxJBfLV0qJC9pLAogIHN2OiAvXlswLTlBLVrDhcOEw5ZfLV0qJC9pLAogIHRyOiAvXlswLTlBLVrDh8SexLDEscOWxZ7DnF8tXSokL2ksCiAgdWs6IC9eWzAtOdCQLdCp0KzQrtCv0ITQhtCH0pBfLV0qJC9pLAogIGFyOiAvXlvZoNmh2aLZo9mk2aXZptmn2ajZqTAtOdih2KLYo9ik2KXYptin2KjYqdiq2KvYrNit2K7Yr9iw2LHYstiz2LTYtdi22LfYuNi52LrZgdmC2YPZhNmF2YbZh9mI2YnZitmL2YzZjdmO2Y/ZkNmR2ZLZsF8tXSokLywKICBhejogL15bMC05QS1aw4fGj8SexLDEscOWxZ7DnF8tXSokL2kKfTsKCnZhciB2YWxpZGF0ZSA9IGZ1bmN0aW9uIHZhbGlkYXRlKHZhbHVlLCByZWYpIHsKICBpZiAocmVmID09PSB2b2lkIDApIHJlZiA9IHt9OwogIHZhciBsb2NhbGUgPSByZWYubG9jYWxlOwoKICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHsKICAgIHJldHVybiB2YWx1ZS5ldmVyeShmdW5jdGlvbiAodmFsKSB7CiAgICAgIHJldHVybiB2YWxpZGF0ZSh2YWwsIFtsb2NhbGVdKTsKICAgIH0pOwogIH0gLy8gTWF0Y2ggYXQgbGVhc3Qgb25lIGxvY2FsZS4KCgogIGlmICghbG9jYWxlKSB7CiAgICByZXR1cm4gT2JqZWN0LmtleXMoYWxwaGEpLnNvbWUoZnVuY3Rpb24gKGxvYykgewogICAgICByZXR1cm4gYWxwaGFbbG9jXS50ZXN0KHZhbHVlKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIChhbHBoYVtsb2NhbGVdIHx8IGFscGhhLmVuKS50ZXN0KHZhbHVlKTsKfTsKCnZhciBwYXJhbU5hbWVzJDEgPSBbJ2xvY2FsZSddOwp2YXIgYWxwaGEkMSA9IHsKICB2YWxpZGF0ZTogdmFsaWRhdGUsCiAgcGFyYW1OYW1lczogcGFyYW1OYW1lcyQxCn07Cgp2YXIgdmFsaWRhdGUkMSA9IGZ1bmN0aW9uIHZhbGlkYXRlJDEodmFsdWUsIHJlZikgewogIGlmIChyZWYgPT09IHZvaWQgMCkgcmVmID0ge307CiAgdmFyIGxvY2FsZSA9IHJlZi5sb2NhbGU7CgogIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgewogICAgcmV0dXJuIHZhbHVlLmV2ZXJ5KGZ1bmN0aW9uICh2YWwpIHsKICAgICAgcmV0dXJuIHZhbGlkYXRlJDEodmFsLCBbbG9jYWxlXSk7CiAgICB9KTsKICB9IC8vIE1hdGNoIGF0IGxlYXN0IG9uZSBsb2NhbGUuCgoKICBpZiAoIWxvY2FsZSkgewogICAgcmV0dXJuIE9iamVjdC5rZXlzKGFscGhhRGFzaCkuc29tZShmdW5jdGlvbiAobG9jKSB7CiAgICAgIHJldHVybiBhbHBoYURhc2hbbG9jXS50ZXN0KHZhbHVlKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIChhbHBoYURhc2hbbG9jYWxlXSB8fCBhbHBoYURhc2guZW4pLnRlc3QodmFsdWUpOwp9OwoKdmFyIHBhcmFtTmFtZXMkMiA9IFsnbG9jYWxlJ107CnZhciBhbHBoYV9kYXNoID0gewogIHZhbGlkYXRlOiB2YWxpZGF0ZSQxLAogIHBhcmFtTmFtZXM6IHBhcmFtTmFtZXMkMgp9OwoKdmFyIHZhbGlkYXRlJDIgPSBmdW5jdGlvbiB2YWxpZGF0ZSQyKHZhbHVlLCByZWYpIHsKICBpZiAocmVmID09PSB2b2lkIDApIHJlZiA9IHt9OwogIHZhciBsb2NhbGUgPSByZWYubG9jYWxlOwoKICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHsKICAgIHJldHVybiB2YWx1ZS5ldmVyeShmdW5jdGlvbiAodmFsKSB7CiAgICAgIHJldHVybiB2YWxpZGF0ZSQyKHZhbCwgW2xvY2FsZV0pOwogICAgfSk7CiAgfSAvLyBNYXRjaCBhdCBsZWFzdCBvbmUgbG9jYWxlLgoKCiAgaWYgKCFsb2NhbGUpIHsKICAgIHJldHVybiBPYmplY3Qua2V5cyhhbHBoYW51bWVyaWMpLnNvbWUoZnVuY3Rpb24gKGxvYykgewogICAgICByZXR1cm4gYWxwaGFudW1lcmljW2xvY10udGVzdCh2YWx1ZSk7CiAgICB9KTsKICB9CgogIHJldHVybiAoYWxwaGFudW1lcmljW2xvY2FsZV0gfHwgYWxwaGFudW1lcmljLmVuKS50ZXN0KHZhbHVlKTsKfTsKCnZhciBwYXJhbU5hbWVzJDMgPSBbJ2xvY2FsZSddOwp2YXIgYWxwaGFfbnVtID0gewogIHZhbGlkYXRlOiB2YWxpZGF0ZSQyLAogIHBhcmFtTmFtZXM6IHBhcmFtTmFtZXMkMwp9OwoKdmFyIHZhbGlkYXRlJDMgPSBmdW5jdGlvbiB2YWxpZGF0ZSQzKHZhbHVlLCByZWYpIHsKICBpZiAocmVmID09PSB2b2lkIDApIHJlZiA9IHt9OwogIHZhciBsb2NhbGUgPSByZWYubG9jYWxlOwoKICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHsKICAgIHJldHVybiB2YWx1ZS5ldmVyeShmdW5jdGlvbiAodmFsKSB7CiAgICAgIHJldHVybiB2YWxpZGF0ZSQzKHZhbCwgW2xvY2FsZV0pOwogICAgfSk7CiAgfSAvLyBNYXRjaCBhdCBsZWFzdCBvbmUgbG9jYWxlLgoKCiAgaWYgKCFsb2NhbGUpIHsKICAgIHJldHVybiBPYmplY3Qua2V5cyhhbHBoYVNwYWNlcykuc29tZShmdW5jdGlvbiAobG9jKSB7CiAgICAgIHJldHVybiBhbHBoYVNwYWNlc1tsb2NdLnRlc3QodmFsdWUpOwogICAgfSk7CiAgfQoKICByZXR1cm4gKGFscGhhU3BhY2VzW2xvY2FsZV0gfHwgYWxwaGFTcGFjZXMuZW4pLnRlc3QodmFsdWUpOwp9OwoKdmFyIHBhcmFtTmFtZXMkNCA9IFsnbG9jYWxlJ107CnZhciBhbHBoYV9zcGFjZXMgPSB7CiAgdmFsaWRhdGU6IHZhbGlkYXRlJDMsCiAgcGFyYW1OYW1lczogcGFyYW1OYW1lcyQ0Cn07Cgp2YXIgdmFsaWRhdGUkNCA9IGZ1bmN0aW9uIHZhbGlkYXRlJDQodmFsdWUsIHJlZikgewogIGlmIChyZWYgPT09IHZvaWQgMCkgcmVmID0ge307CiAgdmFyIHRhcmdldFZhbHVlID0gcmVmLnRhcmdldFZhbHVlOwogIHZhciBpbmNsdXNpb24gPSByZWYuaW5jbHVzaW9uOwogIGlmIChpbmNsdXNpb24gPT09IHZvaWQgMCkgaW5jbHVzaW9uID0gZmFsc2U7CiAgdmFyIGZvcm1hdCA9IHJlZi5mb3JtYXQ7CgogIGlmICh0eXBlb2YgZm9ybWF0ID09PSAndW5kZWZpbmVkJykgewogICAgZm9ybWF0ID0gaW5jbHVzaW9uOwogICAgaW5jbHVzaW9uID0gZmFsc2U7CiAgfQoKICB2YWx1ZSA9IHBhcnNlRGF0ZSQxKHZhbHVlLCBmb3JtYXQpOwogIHRhcmdldFZhbHVlID0gcGFyc2VEYXRlJDEodGFyZ2V0VmFsdWUsIGZvcm1hdCk7IC8vIGlmIGVpdGhlciBpcyBub3QgdmFsaWQuCgogIGlmICghdmFsdWUgfHwgIXRhcmdldFZhbHVlKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICByZXR1cm4gaXNCZWZvcmUodmFsdWUsIHRhcmdldFZhbHVlKSB8fCBpbmNsdXNpb24gJiYgaXNFcXVhbCQxKHZhbHVlLCB0YXJnZXRWYWx1ZSk7Cn07Cgp2YXIgb3B0aW9ucyQxID0gewogIGhhc1RhcmdldDogdHJ1ZSwKICBpc0RhdGU6IHRydWUKfTsKdmFyIHBhcmFtTmFtZXMkNSA9IFsndGFyZ2V0VmFsdWUnLCAnaW5jbHVzaW9uJywgJ2Zvcm1hdCddOwp2YXIgYmVmb3JlID0gewogIHZhbGlkYXRlOiB2YWxpZGF0ZSQ0LAogIG9wdGlvbnM6IG9wdGlvbnMkMSwKICBwYXJhbU5hbWVzOiBwYXJhbU5hbWVzJDUKfTsKCnZhciB2YWxpZGF0ZSQ1ID0gZnVuY3Rpb24gdmFsaWRhdGUkNSh2YWx1ZSwgcmVmKSB7CiAgaWYgKHJlZiA9PT0gdm9pZCAwKSByZWYgPSB7fTsKICB2YXIgbWluID0gcmVmLm1pbjsKICB2YXIgbWF4ID0gcmVmLm1heDsKCiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7CiAgICByZXR1cm4gdmFsdWUuZXZlcnkoZnVuY3Rpb24gKHZhbCkgewogICAgICByZXR1cm4gdmFsaWRhdGUkNSh2YWwsIHsKICAgICAgICBtaW46IG1pbiwKICAgICAgICBtYXg6IG1heAogICAgICB9KTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIE51bWJlcihtaW4pIDw9IHZhbHVlICYmIE51bWJlcihtYXgpID49IHZhbHVlOwp9OwoKdmFyIHBhcmFtTmFtZXMkNiA9IFsnbWluJywgJ21heCddOwp2YXIgYmV0d2VlbiA9IHsKICB2YWxpZGF0ZTogdmFsaWRhdGUkNSwKICBwYXJhbU5hbWVzOiBwYXJhbU5hbWVzJDYKfTsKCnZhciB2YWxpZGF0ZSQ2ID0gZnVuY3Rpb24gdmFsaWRhdGUkNih2YWx1ZSwgcmVmKSB7CiAgdmFyIHRhcmdldFZhbHVlID0gcmVmLnRhcmdldFZhbHVlOwogIHJldHVybiBTdHJpbmcodmFsdWUpID09PSBTdHJpbmcodGFyZ2V0VmFsdWUpOwp9OwoKdmFyIG9wdGlvbnMkMiA9IHsKICBoYXNUYXJnZXQ6IHRydWUKfTsKdmFyIHBhcmFtTmFtZXMkNyA9IFsndGFyZ2V0VmFsdWUnXTsKdmFyIGNvbmZpcm1lZCA9IHsKICB2YWxpZGF0ZTogdmFsaWRhdGUkNiwKICBvcHRpb25zOiBvcHRpb25zJDIsCiAgcGFyYW1OYW1lczogcGFyYW1OYW1lcyQ3Cn07CgpmdW5jdGlvbiB1bndyYXBFeHBvcnRzKHgpIHsKICByZXR1cm4geCAmJiB4Ll9fZXNNb2R1bGUgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHgsICdkZWZhdWx0JykgPyB4WyJkZWZhdWx0Il0gOiB4Owp9CgpmdW5jdGlvbiBjcmVhdGVDb21tb25qc01vZHVsZShmbiwgbW9kdWxlKSB7CiAgcmV0dXJuIG1vZHVsZSA9IHsKICAgIGV4cG9ydHM6IHt9CiAgfSwgZm4obW9kdWxlLCBtb2R1bGUuZXhwb3J0cyksIG1vZHVsZS5leHBvcnRzOwp9Cgp2YXIgYXNzZXJ0U3RyaW5nXzEgPSBjcmVhdGVDb21tb25qc01vZHVsZShmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgdmFsdWU6IHRydWUKICB9KTsKCiAgdmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIF90eXBlb2YyKFN5bWJvbC5pdGVyYXRvcikgPT09ICJzeW1ib2wiID8gZnVuY3Rpb24gKG9iaikgewogICAgcmV0dXJuIF90eXBlb2YyKG9iaik7CiAgfSA6IGZ1bmN0aW9uIChvYmopIHsKICAgIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IF90eXBlb2YyKG9iaik7CiAgfTsKCiAgZXhwb3J0c1siZGVmYXVsdCJdID0gYXNzZXJ0U3RyaW5nOwoKICBmdW5jdGlvbiBhc3NlcnRTdHJpbmcoaW5wdXQpIHsKICAgIHZhciBpc1N0cmluZyA9IHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgfHwgaW5wdXQgaW5zdGFuY2VvZiBTdHJpbmc7CgogICAgaWYgKCFpc1N0cmluZykgewogICAgICB2YXIgaW52YWxpZFR5cGUgPSB2b2lkIDA7CgogICAgICBpZiAoaW5wdXQgPT09IG51bGwpIHsKICAgICAgICBpbnZhbGlkVHlwZSA9ICdudWxsJzsKICAgICAgfSBlbHNlIHsKICAgICAgICBpbnZhbGlkVHlwZSA9IHR5cGVvZiBpbnB1dCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoaW5wdXQpOwoKICAgICAgICBpZiAoaW52YWxpZFR5cGUgPT09ICdvYmplY3QnICYmIGlucHV0LmNvbnN0cnVjdG9yICYmIGlucHV0LmNvbnN0cnVjdG9yLmhhc093blByb3BlcnR5KCduYW1lJykpIHsKICAgICAgICAgIGludmFsaWRUeXBlID0gaW5wdXQuY29uc3RydWN0b3IubmFtZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaW52YWxpZFR5cGUgPSAnYSAnICsgaW52YWxpZFR5cGU7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBzdHJpbmcgYnV0IHJlY2VpdmVkICcgKyBpbnZhbGlkVHlwZSArICcuJyk7CiAgICB9CiAgfQoKICBtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKfSk7CnVud3JhcEV4cG9ydHMoYXNzZXJ0U3RyaW5nXzEpOwp2YXIgaXNDcmVkaXRDYXJkXzEgPSBjcmVhdGVDb21tb25qc01vZHVsZShmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgdmFsdWU6IHRydWUKICB9KTsKICBleHBvcnRzWyJkZWZhdWx0Il0gPSBpc0NyZWRpdENhcmQ7CgogIHZhciBfYXNzZXJ0U3RyaW5nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYXNzZXJ0U3RyaW5nXzEpOwoKICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgICAgImRlZmF1bHQiOiBvYmoKICAgIH07CiAgfQogIC8qIGVzbGludC1kaXNhYmxlIG1heC1sZW4gKi8KCgogIHZhciBjcmVkaXRDYXJkID0gL14oPzo0WzAtOV17MTJ9KD86WzAtOV17M30pP3w1WzEtNV1bMC05XXsxNH18KDIyMlsxLTldfDIyWzMtOV1bMC05XXwyWzMtNl1bMC05XXsyfXwyN1swMV1bMC05XXwyNzIwKVswLTldezEyfXw2KD86MDExfDVbMC05XVswLTldKVswLTldezEyfXwzWzQ3XVswLTldezEzfXwzKD86MFswLTVdfFs2OF1bMC05XSlbMC05XXsxMX18KD86MjEzMXwxODAwfDM1XGR7M30pXGR7MTF9fDZbMjddWzAtOV17MTR9KSQvOwogIC8qIGVzbGludC1lbmFibGUgbWF4LWxlbiAqLwoKICBmdW5jdGlvbiBpc0NyZWRpdENhcmQoc3RyKSB7CiAgICAoMCwgX2Fzc2VydFN0cmluZzJbImRlZmF1bHQiXSkoc3RyKTsKICAgIHZhciBzYW5pdGl6ZWQgPSBzdHIucmVwbGFjZSgvWy0gXSsvZywgJycpOwoKICAgIGlmICghY3JlZGl0Q2FyZC50ZXN0KHNhbml0aXplZCkpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHZhciBzdW0gPSAwOwogICAgdmFyIGRpZ2l0ID0gdm9pZCAwOwogICAgdmFyIHRtcE51bSA9IHZvaWQgMDsKICAgIHZhciBzaG91bGREb3VibGUgPSB2b2lkIDA7CgogICAgZm9yICh2YXIgaSA9IHNhbml0aXplZC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICBkaWdpdCA9IHNhbml0aXplZC5zdWJzdHJpbmcoaSwgaSArIDEpOwogICAgICB0bXBOdW0gPSBwYXJzZUludChkaWdpdCwgMTApOwoKICAgICAgaWYgKHNob3VsZERvdWJsZSkgewogICAgICAgIHRtcE51bSAqPSAyOwoKICAgICAgICBpZiAodG1wTnVtID49IDEwKSB7CiAgICAgICAgICBzdW0gKz0gdG1wTnVtICUgMTAgKyAxOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzdW0gKz0gdG1wTnVtOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBzdW0gKz0gdG1wTnVtOwogICAgICB9CgogICAgICBzaG91bGREb3VibGUgPSAhc2hvdWxkRG91YmxlOwogICAgfQoKICAgIHJldHVybiAhIShzdW0gJSAxMCA9PT0gMCA/IHNhbml0aXplZCA6IGZhbHNlKTsKICB9CgogIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwp9KTsKdmFyIGlzQ3JlZGl0Q2FyZCA9IHVud3JhcEV4cG9ydHMoaXNDcmVkaXRDYXJkXzEpOwoKdmFyIHZhbGlkYXRlJDcgPSBmdW5jdGlvbiB2YWxpZGF0ZSQ3KHZhbHVlKSB7CiAgcmV0dXJuIGlzQ3JlZGl0Q2FyZChTdHJpbmcodmFsdWUpKTsKfTsKCnZhciBjcmVkaXRfY2FyZCA9IHsKICB2YWxpZGF0ZTogdmFsaWRhdGUkNwp9OwoKdmFyIHZhbGlkYXRlJDggPSBmdW5jdGlvbiB2YWxpZGF0ZSQ4KHZhbHVlLCByZWYpIHsKICBpZiAocmVmID09PSB2b2lkIDApIHJlZiA9IHt9OwogIHZhciBtaW4gPSByZWYubWluOwogIHZhciBtYXggPSByZWYubWF4OwogIHZhciBpbmNsdXNpdml0eSA9IHJlZi5pbmNsdXNpdml0eTsKICBpZiAoaW5jbHVzaXZpdHkgPT09IHZvaWQgMCkgaW5jbHVzaXZpdHkgPSAnKCknOwogIHZhciBmb3JtYXQgPSByZWYuZm9ybWF0OwoKICBpZiAodHlwZW9mIGZvcm1hdCA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgIGZvcm1hdCA9IGluY2x1c2l2aXR5OwogICAgaW5jbHVzaXZpdHkgPSAnKCknOwogIH0KCiAgdmFyIG1pbkRhdGUgPSBwYXJzZURhdGUkMShTdHJpbmcobWluKSwgZm9ybWF0KTsKICB2YXIgbWF4RGF0ZSA9IHBhcnNlRGF0ZSQxKFN0cmluZyhtYXgpLCBmb3JtYXQpOwogIHZhciBkYXRlVmFsID0gcGFyc2VEYXRlJDEoU3RyaW5nKHZhbHVlKSwgZm9ybWF0KTsKCiAgaWYgKCFtaW5EYXRlIHx8ICFtYXhEYXRlIHx8ICFkYXRlVmFsKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBpZiAoaW5jbHVzaXZpdHkgPT09ICcoKScpIHsKICAgIHJldHVybiBpc0FmdGVyKGRhdGVWYWwsIG1pbkRhdGUpICYmIGlzQmVmb3JlKGRhdGVWYWwsIG1heERhdGUpOwogIH0KCiAgaWYgKGluY2x1c2l2aXR5ID09PSAnKF0nKSB7CiAgICByZXR1cm4gaXNBZnRlcihkYXRlVmFsLCBtaW5EYXRlKSAmJiAoaXNFcXVhbCQxKGRhdGVWYWwsIG1heERhdGUpIHx8IGlzQmVmb3JlKGRhdGVWYWwsIG1heERhdGUpKTsKICB9CgogIGlmIChpbmNsdXNpdml0eSA9PT0gJ1spJykgewogICAgcmV0dXJuIGlzQmVmb3JlKGRhdGVWYWwsIG1heERhdGUpICYmIChpc0VxdWFsJDEoZGF0ZVZhbCwgbWluRGF0ZSkgfHwgaXNBZnRlcihkYXRlVmFsLCBtaW5EYXRlKSk7CiAgfQoKICByZXR1cm4gaXNFcXVhbCQxKGRhdGVWYWwsIG1heERhdGUpIHx8IGlzRXF1YWwkMShkYXRlVmFsLCBtaW5EYXRlKSB8fCBpc0JlZm9yZShkYXRlVmFsLCBtYXhEYXRlKSAmJiBpc0FmdGVyKGRhdGVWYWwsIG1pbkRhdGUpOwp9OwoKdmFyIG9wdGlvbnMkMyA9IHsKICBpc0RhdGU6IHRydWUKfTsKdmFyIHBhcmFtTmFtZXMkOCA9IFsnbWluJywgJ21heCcsICdpbmNsdXNpdml0eScsICdmb3JtYXQnXTsKdmFyIGRhdGVfYmV0d2VlbiA9IHsKICB2YWxpZGF0ZTogdmFsaWRhdGUkOCwKICBvcHRpb25zOiBvcHRpb25zJDMsCiAgcGFyYW1OYW1lczogcGFyYW1OYW1lcyQ4Cn07Cgp2YXIgdmFsaWRhdGUkOSA9IGZ1bmN0aW9uIHZhbGlkYXRlJDkodmFsdWUsIHJlZikgewogIHZhciBmb3JtYXQgPSByZWYuZm9ybWF0OwogIHJldHVybiAhIXBhcnNlRGF0ZSQxKHZhbHVlLCBmb3JtYXQpOwp9OwoKdmFyIG9wdGlvbnMkNCA9IHsKICBpc0RhdGU6IHRydWUKfTsKdmFyIHBhcmFtTmFtZXMkOSA9IFsnZm9ybWF0J107CnZhciBkYXRlX2Zvcm1hdCA9IHsKICB2YWxpZGF0ZTogdmFsaWRhdGUkOSwKICBvcHRpb25zOiBvcHRpb25zJDQsCiAgcGFyYW1OYW1lczogcGFyYW1OYW1lcyQ5Cn07Cgp2YXIgdmFsaWRhdGUkYSA9IGZ1bmN0aW9uIHZhbGlkYXRlJGEodmFsdWUsIHJlZikgewogIGlmIChyZWYgPT09IHZvaWQgMCkgcmVmID0ge307CiAgdmFyIGRlY2ltYWxzID0gcmVmLmRlY2ltYWxzOwogIGlmIChkZWNpbWFscyA9PT0gdm9pZCAwKSBkZWNpbWFscyA9ICcqJzsKICB2YXIgc2VwYXJhdG9yID0gcmVmLnNlcGFyYXRvcjsKICBpZiAoc2VwYXJhdG9yID09PSB2b2lkIDApIHNlcGFyYXRvciA9ICcuJzsKCiAgaWYgKGlzTnVsbE9yVW5kZWZpbmVkKHZhbHVlKSB8fCB2YWx1ZSA9PT0gJycpIHsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgewogICAgcmV0dXJuIHZhbHVlLmV2ZXJ5KGZ1bmN0aW9uICh2YWwpIHsKICAgICAgcmV0dXJuIHZhbGlkYXRlJGEodmFsLCB7CiAgICAgICAgZGVjaW1hbHM6IGRlY2ltYWxzLAogICAgICAgIHNlcGFyYXRvcjogc2VwYXJhdG9yCiAgICAgIH0pOwogICAgfSk7CiAgfSAvLyBpZiBpcyAwLgoKCiAgaWYgKE51bWJlcihkZWNpbWFscykgPT09IDApIHsKICAgIHJldHVybiAvXi0/XGQqJC8udGVzdCh2YWx1ZSk7CiAgfQoKICB2YXIgcmVnZXhQYXJ0ID0gZGVjaW1hbHMgPT09ICcqJyA/ICcrJyA6ICJ7MSwiICsgZGVjaW1hbHMgKyAifSI7CiAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cCgiXlstK10/XFxkKihcXCIgKyBzZXBhcmF0b3IgKyAiXFxkIiArIHJlZ2V4UGFydCArICIpPyhbZUVdezF9Wy1dP1xcZCspPyQiKTsKCiAgaWYgKCFyZWdleC50ZXN0KHZhbHVlKSkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgdmFyIHBhcnNlZFZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSk7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZQoKICByZXR1cm4gcGFyc2VkVmFsdWUgPT09IHBhcnNlZFZhbHVlOwp9OwoKdmFyIHBhcmFtTmFtZXMkYSA9IFsnZGVjaW1hbHMnLCAnc2VwYXJhdG9yJ107CnZhciBkZWNpbWFsID0gewogIHZhbGlkYXRlOiB2YWxpZGF0ZSRhLAogIHBhcmFtTmFtZXM6IHBhcmFtTmFtZXMkYQp9OwoKdmFyIHZhbGlkYXRlJGIgPSBmdW5jdGlvbiB2YWxpZGF0ZSRiKHZhbHVlLCByZWYpIHsKICB2YXIgbGVuZ3RoID0gcmVmWzBdOwoKICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHsKICAgIHJldHVybiB2YWx1ZS5ldmVyeShmdW5jdGlvbiAodmFsKSB7CiAgICAgIHJldHVybiB2YWxpZGF0ZSRiKHZhbCwgW2xlbmd0aF0pOwogICAgfSk7CiAgfQoKICB2YXIgc3RyVmFsID0gU3RyaW5nKHZhbHVlKTsKICByZXR1cm4gL15bMC05XSokLy50ZXN0KHN0clZhbCkgJiYgc3RyVmFsLmxlbmd0aCA9PT0gTnVtYmVyKGxlbmd0aCk7Cn07Cgp2YXIgZGlnaXRzID0gewogIHZhbGlkYXRlOiB2YWxpZGF0ZSRiCn07CnZhciBpbWFnZVJlZ2V4ID0gL1wuKGpwZ3xzdmd8anBlZ3xwbmd8Ym1wfGdpZikkL2k7Cgp2YXIgdmFsaWRhdGVJbWFnZSA9IGZ1bmN0aW9uIHZhbGlkYXRlSW1hZ2UoZmlsZSwgd2lkdGgsIGhlaWdodCkgewogIHZhciBVUkwgPSB3aW5kb3cuVVJMIHx8IHdpbmRvdy53ZWJraXRVUkw7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICB2YXIgaW1hZ2UgPSBuZXcgSW1hZ2UoKTsKCiAgICBpbWFnZS5vbmVycm9yID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gcmVzb2x2ZSh7CiAgICAgICAgdmFsaWQ6IGZhbHNlCiAgICAgIH0pOwogICAgfTsKCiAgICBpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiByZXNvbHZlKHsKICAgICAgICB2YWxpZDogaW1hZ2Uud2lkdGggPT09IE51bWJlcih3aWR0aCkgJiYgaW1hZ2UuaGVpZ2h0ID09PSBOdW1iZXIoaGVpZ2h0KQogICAgICB9KTsKICAgIH07CgogICAgaW1hZ2Uuc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTsKICB9KTsKfTsKCnZhciB2YWxpZGF0ZSRjID0gZnVuY3Rpb24gdmFsaWRhdGUkYyhmaWxlcywgcmVmKSB7CiAgdmFyIHdpZHRoID0gcmVmWzBdOwogIHZhciBoZWlnaHQgPSByZWZbMV07CiAgdmFyIGltYWdlcyA9IGVuc3VyZUFycmF5KGZpbGVzKS5maWx0ZXIoZnVuY3Rpb24gKGZpbGUpIHsKICAgIHJldHVybiBpbWFnZVJlZ2V4LnRlc3QoZmlsZS5uYW1lKTsKICB9KTsKCiAgaWYgKGltYWdlcy5sZW5ndGggPT09IDApIHsKICAgIHJldHVybiBmYWxzZTsKICB9CgogIHJldHVybiBQcm9taXNlLmFsbChpbWFnZXMubWFwKGZ1bmN0aW9uIChpbWFnZSkgewogICAgcmV0dXJuIHZhbGlkYXRlSW1hZ2UoaW1hZ2UsIHdpZHRoLCBoZWlnaHQpOwogIH0pKTsKfTsKCnZhciBkaW1lbnNpb25zID0gewogIHZhbGlkYXRlOiB2YWxpZGF0ZSRjCn07CnZhciBtZXJnZV8xID0gY3JlYXRlQ29tbW9uanNNb2R1bGUoZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgIHZhbHVlOiB0cnVlCiAgfSk7CiAgZXhwb3J0c1siZGVmYXVsdCJdID0gbWVyZ2U7CgogIGZ1bmN0aW9uIG1lcmdlKCkgewogICAgdmFyIG9iaiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CiAgICB2YXIgZGVmYXVsdHMgPSBhcmd1bWVudHNbMV07CgogICAgZm9yICh2YXIga2V5IGluIGRlZmF1bHRzKSB7CiAgICAgIGlmICh0eXBlb2Ygb2JqW2tleV0gPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgb2JqW2tleV0gPSBkZWZhdWx0c1trZXldOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIG9iajsKICB9CgogIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwp9KTsKdW53cmFwRXhwb3J0cyhtZXJnZV8xKTsKdmFyIGlzQnl0ZUxlbmd0aF8xID0gY3JlYXRlQ29tbW9uanNNb2R1bGUoZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgIHZhbHVlOiB0cnVlCiAgfSk7CgogIHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBfdHlwZW9mMihTeW1ib2wuaXRlcmF0b3IpID09PSAic3ltYm9sIiA/IGZ1bmN0aW9uIChvYmopIHsKICAgIHJldHVybiBfdHlwZW9mMihvYmopOwogIH0gOiBmdW5jdGlvbiAob2JqKSB7CiAgICByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiBfdHlwZW9mMihvYmopOwogIH07CgogIGV4cG9ydHNbImRlZmF1bHQiXSA9IGlzQnl0ZUxlbmd0aDsKCiAgdmFyIF9hc3NlcnRTdHJpbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChhc3NlcnRTdHJpbmdfMSk7CgogIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgICAiZGVmYXVsdCI6IG9iagogICAgfTsKICB9CiAgLyogZXNsaW50LWRpc2FibGUgcHJlZmVyLXJlc3QtcGFyYW1zICovCgoKICBmdW5jdGlvbiBpc0J5dGVMZW5ndGgoc3RyLCBvcHRpb25zKSB7CiAgICAoMCwgX2Fzc2VydFN0cmluZzJbImRlZmF1bHQiXSkoc3RyKTsKICAgIHZhciBtaW4gPSB2b2lkIDA7CiAgICB2YXIgbWF4ID0gdm9pZCAwOwoKICAgIGlmICgodHlwZW9mIG9wdGlvbnMgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKG9wdGlvbnMpKSA9PT0gJ29iamVjdCcpIHsKICAgICAgbWluID0gb3B0aW9ucy5taW4gfHwgMDsKICAgICAgbWF4ID0gb3B0aW9ucy5tYXg7CiAgICB9IGVsc2UgewogICAgICAvLyBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eTogaXNCeXRlTGVuZ3RoKHN0ciwgbWluIFssIG1heF0pCiAgICAgIG1pbiA9IGFyZ3VtZW50c1sxXTsKICAgICAgbWF4ID0gYXJndW1lbnRzWzJdOwogICAgfQoKICAgIHZhciBsZW4gPSBlbmNvZGVVUkkoc3RyKS5zcGxpdCgvJS4ufC4vKS5sZW5ndGggLSAxOwogICAgcmV0dXJuIGxlbiA+PSBtaW4gJiYgKHR5cGVvZiBtYXggPT09ICd1bmRlZmluZWQnIHx8IGxlbiA8PSBtYXgpOwogIH0KCiAgbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cn0pOwp1bndyYXBFeHBvcnRzKGlzQnl0ZUxlbmd0aF8xKTsKdmFyIGlzRlFETl8xID0gY3JlYXRlQ29tbW9uanNNb2R1bGUoZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgIHZhbHVlOiB0cnVlCiAgfSk7CiAgZXhwb3J0c1siZGVmYXVsdCJdID0gaXNGUUROOwoKICB2YXIgX2Fzc2VydFN0cmluZzIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KGFzc2VydFN0cmluZ18xKTsKCiAgdmFyIF9tZXJnZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG1lcmdlXzEpOwoKICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgICAgImRlZmF1bHQiOiBvYmoKICAgIH07CiAgfQoKICB2YXIgZGVmYXVsdF9mcWRuX29wdGlvbnMgPSB7CiAgICByZXF1aXJlX3RsZDogdHJ1ZSwKICAgIGFsbG93X3VuZGVyc2NvcmVzOiBmYWxzZSwKICAgIGFsbG93X3RyYWlsaW5nX2RvdDogZmFsc2UKICB9OwoKICBmdW5jdGlvbiBpc0ZRRE4oc3RyLCBvcHRpb25zKSB7CiAgICAoMCwgX2Fzc2VydFN0cmluZzJbImRlZmF1bHQiXSkoc3RyKTsKICAgIG9wdGlvbnMgPSAoMCwgX21lcmdlMlsiZGVmYXVsdCJdKShvcHRpb25zLCBkZWZhdWx0X2ZxZG5fb3B0aW9ucyk7CiAgICAvKiBSZW1vdmUgdGhlIG9wdGlvbmFsIHRyYWlsaW5nIGRvdCBiZWZvcmUgY2hlY2tpbmcgdmFsaWRpdHkgKi8KCiAgICBpZiAob3B0aW9ucy5hbGxvd190cmFpbGluZ19kb3QgJiYgc3RyW3N0ci5sZW5ndGggLSAxXSA9PT0gJy4nKSB7CiAgICAgIHN0ciA9IHN0ci5zdWJzdHJpbmcoMCwgc3RyLmxlbmd0aCAtIDEpOwogICAgfQoKICAgIHZhciBwYXJ0cyA9IHN0ci5zcGxpdCgnLicpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoOyBpKyspIHsKICAgICAgaWYgKHBhcnRzW2ldLmxlbmd0aCA+IDYzKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CgogICAgaWYgKG9wdGlvbnMucmVxdWlyZV90bGQpIHsKICAgICAgdmFyIHRsZCA9IHBhcnRzLnBvcCgpOwoKICAgICAgaWYgKCFwYXJ0cy5sZW5ndGggfHwgIS9eKFthLXpcdTAwYTEtXHVmZmZmXXsyLH18eG5bYS16MC05LV17Mix9KSQvaS50ZXN0KHRsZCkpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gLy8gZGlzYWxsb3cgc3BhY2VzCgoKICAgICAgaWYgKC9bXHNcdTIwMDItXHUyMDBCXHUyMDJGXHUyMDVGXHUzMDAwXHVGRUZGXHVEQjQwXHVEQzIwXS8udGVzdCh0bGQpKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CgogICAgZm9yICh2YXIgcGFydCwgX2kgPSAwOyBfaSA8IHBhcnRzLmxlbmd0aDsgX2krKykgewogICAgICBwYXJ0ID0gcGFydHNbX2ldOwoKICAgICAgaWYgKG9wdGlvbnMuYWxsb3dfdW5kZXJzY29yZXMpIHsKICAgICAgICBwYXJ0ID0gcGFydC5yZXBsYWNlKC9fL2csICcnKTsKICAgICAgfQoKICAgICAgaWYgKCEvXlthLXpcdTAwYTEtXHVmZmZmMC05LV0rJC9pLnRlc3QocGFydCkpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gLy8gZGlzYWxsb3cgZnVsbC13aWR0aCBjaGFycwoKCiAgICAgIGlmICgvW1x1ZmYwMS1cdWZmNWVdLy50ZXN0KHBhcnQpKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICBpZiAocGFydFswXSA9PT0gJy0nIHx8IHBhcnRbcGFydC5sZW5ndGggLSAxXSA9PT0gJy0nKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CgogICAgcmV0dXJuIHRydWU7CiAgfQoKICBtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKfSk7CnZhciBpc0ZRRE4gPSB1bndyYXBFeHBvcnRzKGlzRlFETl8xKTsKdmFyIGlzSVBfMSA9IGNyZWF0ZUNvbW1vbmpzTW9kdWxlKGZ1bmN0aW9uIChtb2R1bGUsIGV4cG9ydHMpIHsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgICB2YWx1ZTogdHJ1ZQogIH0pOwogIGV4cG9ydHNbImRlZmF1bHQiXSA9IGlzSVA7CgogIHZhciBfYXNzZXJ0U3RyaW5nMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoYXNzZXJ0U3RyaW5nXzEpOwoKICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgICAgImRlZmF1bHQiOiBvYmoKICAgIH07CiAgfQoKICB2YXIgaXB2NE1heWJlID0gL14oXGR7MSwzfSlcLihcZHsxLDN9KVwuKFxkezEsM30pXC4oXGR7MSwzfSkkLzsKICB2YXIgaXB2NkJsb2NrID0gL15bMC05QS1GXXsxLDR9JC9pOwoKICBmdW5jdGlvbiBpc0lQKHN0cikgewogICAgdmFyIHZlcnNpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICcnOwogICAgKDAsIF9hc3NlcnRTdHJpbmcyWyJkZWZhdWx0Il0pKHN0cik7CiAgICB2ZXJzaW9uID0gU3RyaW5nKHZlcnNpb24pOwoKICAgIGlmICghdmVyc2lvbikgewogICAgICByZXR1cm4gaXNJUChzdHIsIDQpIHx8IGlzSVAoc3RyLCA2KTsKICAgIH0gZWxzZSBpZiAodmVyc2lvbiA9PT0gJzQnKSB7CiAgICAgIGlmICghaXB2NE1heWJlLnRlc3Qoc3RyKSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgdmFyIHBhcnRzID0gc3RyLnNwbGl0KCcuJykuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgIHJldHVybiBhIC0gYjsKICAgICAgfSk7CiAgICAgIHJldHVybiBwYXJ0c1szXSA8PSAyNTU7CiAgICB9IGVsc2UgaWYgKHZlcnNpb24gPT09ICc2JykgewogICAgICB2YXIgYmxvY2tzID0gc3RyLnNwbGl0KCc6Jyk7CiAgICAgIHZhciBmb3VuZE9taXNzaW9uQmxvY2sgPSBmYWxzZTsgLy8gbWFya2VyIHRvIGluZGljYXRlIDo6CiAgICAgIC8vIEF0IGxlYXN0IHNvbWUgT1MgYWNjZXB0IHRoZSBsYXN0IDMyIGJpdHMgb2YgYW4gSVB2NiBhZGRyZXNzCiAgICAgIC8vIChpLmUuIDIgb2YgdGhlIGJsb2NrcykgaW4gSVB2NCBub3RhdGlvbiwgYW5kIFJGQyAzNDkzIHNheXMKICAgICAgLy8gdGhhdCAnOjpmZmZmOmEuYi5jLmQnIGlzIHZhbGlkIGZvciBJUHY0LW1hcHBlZCBJUHY2IGFkZHJlc3NlcywKICAgICAgLy8gYW5kICc6OmEuYi5jLmQnIGlzIGRlcHJlY2F0ZWQsIGJ1dCBhbHNvIHZhbGlkLgoKICAgICAgdmFyIGZvdW5kSVB2NFRyYW5zaXRpb25CbG9jayA9IGlzSVAoYmxvY2tzW2Jsb2Nrcy5sZW5ndGggLSAxXSwgNCk7CiAgICAgIHZhciBleHBlY3RlZE51bWJlck9mQmxvY2tzID0gZm91bmRJUHY0VHJhbnNpdGlvbkJsb2NrID8gNyA6IDg7CgogICAgICBpZiAoYmxvY2tzLmxlbmd0aCA+IGV4cGVjdGVkTnVtYmVyT2ZCbG9ja3MpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gLy8gaW5pdGlhbCBvciBmaW5hbCA6OgoKCiAgICAgIGlmIChzdHIgPT09ICc6OicpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSBlbHNlIGlmIChzdHIuc3Vic3RyKDAsIDIpID09PSAnOjonKSB7CiAgICAgICAgYmxvY2tzLnNoaWZ0KCk7CiAgICAgICAgYmxvY2tzLnNoaWZ0KCk7CiAgICAgICAgZm91bmRPbWlzc2lvbkJsb2NrID0gdHJ1ZTsKICAgICAgfSBlbHNlIGlmIChzdHIuc3Vic3RyKHN0ci5sZW5ndGggLSAyKSA9PT0gJzo6JykgewogICAgICAgIGJsb2Nrcy5wb3AoKTsKICAgICAgICBibG9ja3MucG9wKCk7CiAgICAgICAgZm91bmRPbWlzc2lvbkJsb2NrID0gdHJ1ZTsKICAgICAgfQoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBibG9ja3MubGVuZ3RoOyArK2kpIHsKICAgICAgICAvLyB0ZXN0IGZvciBhIDo6IHdoaWNoIGNhbiBub3QgYmUgYXQgdGhlIHN0cmluZyBzdGFydC9lbmQKICAgICAgICAvLyBzaW5jZSB0aG9zZSBjYXNlcyBoYXZlIGJlZW4gaGFuZGxlZCBhYm92ZQogICAgICAgIGlmIChibG9ja3NbaV0gPT09ICcnICYmIGkgPiAwICYmIGkgPCBibG9ja3MubGVuZ3RoIC0gMSkgewogICAgICAgICAgaWYgKGZvdW5kT21pc3Npb25CbG9jaykgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIG11bHRpcGxlIDo6IGluIGFkZHJlc3MKICAgICAgICAgIH0KCiAgICAgICAgICBmb3VuZE9taXNzaW9uQmxvY2sgPSB0cnVlOwogICAgICAgIH0gZWxzZSBpZiAoZm91bmRJUHY0VHJhbnNpdGlvbkJsb2NrICYmIGkgPT09IGJsb2Nrcy5sZW5ndGggLSAxKSA7ZWxzZSBpZiAoIWlwdjZCbG9jay50ZXN0KGJsb2Nrc1tpXSkpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChmb3VuZE9taXNzaW9uQmxvY2spIHsKICAgICAgICByZXR1cm4gYmxvY2tzLmxlbmd0aCA+PSAxOwogICAgICB9CgogICAgICByZXR1cm4gYmxvY2tzLmxlbmd0aCA9PT0gZXhwZWN0ZWROdW1iZXJPZkJsb2NrczsKICAgIH0KCiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHNbJ2RlZmF1bHQnXTsKfSk7CnZhciBpc0lQID0gdW53cmFwRXhwb3J0cyhpc0lQXzEpOwp2YXIgaXNFbWFpbF8xID0gY3JlYXRlQ29tbW9uanNNb2R1bGUoZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgIHZhbHVlOiB0cnVlCiAgfSk7CiAgZXhwb3J0c1siZGVmYXVsdCJdID0gaXNFbWFpbDsKCiAgdmFyIF9hc3NlcnRTdHJpbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChhc3NlcnRTdHJpbmdfMSk7CgogIHZhciBfbWVyZ2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChtZXJnZV8xKTsKCiAgdmFyIF9pc0J5dGVMZW5ndGgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChpc0J5dGVMZW5ndGhfMSk7CgogIHZhciBfaXNGUUROMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaXNGUUROXzEpOwoKICB2YXIgX2lzSVAyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChpc0lQXzEpOwoKICBmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgewogICAgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsKICAgICAgImRlZmF1bHQiOiBvYmoKICAgIH07CiAgfQoKICB2YXIgZGVmYXVsdF9lbWFpbF9vcHRpb25zID0gewogICAgYWxsb3dfZGlzcGxheV9uYW1lOiBmYWxzZSwKICAgIHJlcXVpcmVfZGlzcGxheV9uYW1lOiBmYWxzZSwKICAgIGFsbG93X3V0ZjhfbG9jYWxfcGFydDogdHJ1ZSwKICAgIHJlcXVpcmVfdGxkOiB0cnVlCiAgfTsKICAvKiBlc2xpbnQtZGlzYWJsZSBtYXgtbGVuICovCgogIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnRyb2wtcmVnZXggKi8KCiAgdmFyIGRpc3BsYXlOYW1lID0gL15bYS16XGQhI1wkJSYnXCpcK1wtXC89XD9cXl9ge1x8fX5cLlx1MDBBMC1cdUQ3RkZcdUY5MDAtXHVGRENGXHVGREYwLVx1RkZFRl0rW2EtelxkISNcJCUmJ1wqXCtcLVwvPVw/XF5fYHtcfH1+XCxcLlx1MDBBMC1cdUQ3RkZcdUY5MDAtXHVGRENGXHVGREYwLVx1RkZFRlxzXSo8KC4rKT4kL2k7CiAgdmFyIGVtYWlsVXNlclBhcnQgPSAvXlthLXpcZCEjXCQlJidcKlwrXC1cLz1cP1xeX2B7XHx9fl0rJC9pOwogIHZhciBnbWFpbFVzZXJQYXJ0ID0gL15bYS16XGRdKyQvOwogIHZhciBxdW90ZWRFbWFpbFVzZXIgPSAvXihbXHNceDAxLVx4MDhceDBiXHgwY1x4MGUtXHgxZlx4N2ZceDIxXHgyMy1ceDViXHg1ZC1ceDdlXXwoXFxbXHgwMS1ceDA5XHgwYlx4MGNceDBkLVx4N2ZdKSkqJC9pOwogIHZhciBlbWFpbFVzZXJVdGY4UGFydCA9IC9eW2EtelxkISNcJCUmJ1wqXCtcLVwvPVw/XF5fYHtcfH1+XHUwMEEwLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkVGXSskL2k7CiAgdmFyIHF1b3RlZEVtYWlsVXNlclV0ZjggPSAvXihbXHNceDAxLVx4MDhceDBiXHgwY1x4MGUtXHgxZlx4N2ZceDIxXHgyMy1ceDViXHg1ZC1ceDdlXHUwMEEwLVx1RDdGRlx1RjkwMC1cdUZEQ0ZcdUZERjAtXHVGRkVGXXwoXFxbXHgwMS1ceDA5XHgwYlx4MGNceDBkLVx4N2ZcdTAwQTAtXHVEN0ZGXHVGOTAwLVx1RkRDRlx1RkRGMC1cdUZGRUZdKSkqJC9pOwogIC8qIGVzbGludC1lbmFibGUgbWF4LWxlbiAqLwoKICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbnRyb2wtcmVnZXggKi8KCiAgZnVuY3Rpb24gaXNFbWFpbChzdHIsIG9wdGlvbnMpIHsKICAgICgwLCBfYXNzZXJ0U3RyaW5nMlsiZGVmYXVsdCJdKShzdHIpOwogICAgb3B0aW9ucyA9ICgwLCBfbWVyZ2UyWyJkZWZhdWx0Il0pKG9wdGlvbnMsIGRlZmF1bHRfZW1haWxfb3B0aW9ucyk7CgogICAgaWYgKG9wdGlvbnMucmVxdWlyZV9kaXNwbGF5X25hbWUgfHwgb3B0aW9ucy5hbGxvd19kaXNwbGF5X25hbWUpIHsKICAgICAgdmFyIGRpc3BsYXlfZW1haWwgPSBzdHIubWF0Y2goZGlzcGxheU5hbWUpOwoKICAgICAgaWYgKGRpc3BsYXlfZW1haWwpIHsKICAgICAgICBzdHIgPSBkaXNwbGF5X2VtYWlsWzFdOwogICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucmVxdWlyZV9kaXNwbGF5X25hbWUpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KCiAgICB2YXIgcGFydHMgPSBzdHIuc3BsaXQoJ0AnKTsKICAgIHZhciBkb21haW4gPSBwYXJ0cy5wb3AoKTsKICAgIHZhciB1c2VyID0gcGFydHMuam9pbignQCcpOwogICAgdmFyIGxvd2VyX2RvbWFpbiA9IGRvbWFpbi50b0xvd2VyQ2FzZSgpOwoKICAgIGlmIChvcHRpb25zLmRvbWFpbl9zcGVjaWZpY192YWxpZGF0aW9uICYmIChsb3dlcl9kb21haW4gPT09ICdnbWFpbC5jb20nIHx8IGxvd2VyX2RvbWFpbiA9PT0gJ2dvb2dsZW1haWwuY29tJykpIHsKICAgICAgLyoKICAgICAgICBQcmV2aW91c2x5IHdlIHJlbW92ZWQgZG90cyBmb3IgZ21haWwgYWRkcmVzc2VzIGJlZm9yZSB2YWxpZGF0aW5nLgogICAgICAgIFRoaXMgd2FzIHJlbW92ZWQgYmVjYXVzZSBpdCBhbGxvd3MgYG11bHRpcGxlLi5kb3RzQGdtYWlsLmNvbWAKICAgICAgICB0byBiZSByZXBvcnRlZCBhcyB2YWxpZCwgYnV0IGl0IGlzIG5vdC4KICAgICAgICBHbWFpbCBvbmx5IG5vcm1hbGl6ZXMgc2luZ2xlIGRvdHMsIHJlbW92aW5nIHRoZW0gZnJvbSBoZXJlIGlzIHBvaW50bGVzcywKICAgICAgICBzaG91bGQgYmUgZG9uZSBpbiBub3JtYWxpemVFbWFpbAogICAgICAqLwogICAgICB1c2VyID0gdXNlci50b0xvd2VyQ2FzZSgpOyAvLyBSZW1vdmluZyBzdWItYWRkcmVzcyBmcm9tIHVzZXJuYW1lIGJlZm9yZSBnbWFpbCB2YWxpZGF0aW9uCgogICAgICB2YXIgdXNlcm5hbWUgPSB1c2VyLnNwbGl0KCcrJylbMF07IC8vIERvdHMgYXJlIG5vdCBpbmNsdWRlZCBpbiBnbWFpbCBsZW5ndGggcmVzdHJpY3Rpb24KCiAgICAgIGlmICghKDAsIF9pc0J5dGVMZW5ndGgyWyJkZWZhdWx0Il0pKHVzZXJuYW1lLnJlcGxhY2UoJy4nLCAnJyksIHsKICAgICAgICBtaW46IDYsCiAgICAgICAgbWF4OiAzMAogICAgICB9KSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgdmFyIF91c2VyX3BhcnRzID0gdXNlcm5hbWUuc3BsaXQoJy4nKTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX3VzZXJfcGFydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAoIWdtYWlsVXNlclBhcnQudGVzdChfdXNlcl9wYXJ0c1tpXSkpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBpZiAoISgwLCBfaXNCeXRlTGVuZ3RoMlsiZGVmYXVsdCJdKSh1c2VyLCB7CiAgICAgIG1heDogNjQKICAgIH0pIHx8ICEoMCwgX2lzQnl0ZUxlbmd0aDJbImRlZmF1bHQiXSkoZG9tYWluLCB7CiAgICAgIG1heDogMjU0CiAgICB9KSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgaWYgKCEoMCwgX2lzRlFETjJbImRlZmF1bHQiXSkoZG9tYWluLCB7CiAgICAgIHJlcXVpcmVfdGxkOiBvcHRpb25zLnJlcXVpcmVfdGxkCiAgICB9KSkgewogICAgICBpZiAoIW9wdGlvbnMuYWxsb3dfaXBfZG9tYWluKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICBpZiAoISgwLCBfaXNJUDJbImRlZmF1bHQiXSkoZG9tYWluKSkgewogICAgICAgIGlmICghZG9tYWluLnN0YXJ0c1dpdGgoJ1snKSB8fCAhZG9tYWluLmVuZHNXaXRoKCddJykpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIHZhciBub0JyYWNrZXRkb21haW4gPSBkb21haW4uc3Vic3RyKDEsIGRvbWFpbi5sZW5ndGggLSAyKTsKCiAgICAgICAgaWYgKG5vQnJhY2tldGRvbWFpbi5sZW5ndGggPT09IDAgfHwgISgwLCBfaXNJUDJbImRlZmF1bHQiXSkobm9CcmFja2V0ZG9tYWluKSkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGlmICh1c2VyWzBdID09PSAnIicpIHsKICAgICAgdXNlciA9IHVzZXIuc2xpY2UoMSwgdXNlci5sZW5ndGggLSAxKTsKICAgICAgcmV0dXJuIG9wdGlvbnMuYWxsb3dfdXRmOF9sb2NhbF9wYXJ0ID8gcXVvdGVkRW1haWxVc2VyVXRmOC50ZXN0KHVzZXIpIDogcXVvdGVkRW1haWxVc2VyLnRlc3QodXNlcik7CiAgICB9CgogICAgdmFyIHBhdHRlcm4gPSBvcHRpb25zLmFsbG93X3V0ZjhfbG9jYWxfcGFydCA/IGVtYWlsVXNlclV0ZjhQYXJ0IDogZW1haWxVc2VyUGFydDsKICAgIHZhciB1c2VyX3BhcnRzID0gdXNlci5zcGxpdCgnLicpOwoKICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCB1c2VyX3BhcnRzLmxlbmd0aDsgX2krKykgewogICAgICBpZiAoIXBhdHRlcm4udGVzdCh1c2VyX3BhcnRzW19pXSkpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwp9KTsKdmFyIGlzRW1haWwgPSB1bndyYXBFeHBvcnRzKGlzRW1haWxfMSk7CgpmdW5jdGlvbiBvYmplY3RXaXRob3V0UHJvcGVydGllcyhvYmosIGV4Y2x1ZGUpIHsKICB2YXIgdGFyZ2V0ID0ge307CgogIGZvciAodmFyIGsgaW4gb2JqKSB7CiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgaykgJiYgZXhjbHVkZS5pbmRleE9mKGspID09PSAtMSkgdGFyZ2V0W2tdID0gb2JqW2tdOwogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKdmFyIHZhbGlkYXRlJGQgPSBmdW5jdGlvbiB2YWxpZGF0ZSRkKHZhbHVlLCByZWYpIHsKICBpZiAocmVmID09PSB2b2lkIDApIHJlZiA9IHt9OwogIHZhciBtdWx0aXBsZSA9IHJlZi5tdWx0aXBsZTsKICBpZiAobXVsdGlwbGUgPT09IHZvaWQgMCkgbXVsdGlwbGUgPSBmYWxzZTsKICB2YXIgcmVzdCA9IG9iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKHJlZiwgWyJtdWx0aXBsZSJdKTsKICB2YXIgb3B0aW9ucyA9IHJlc3Q7CgogIGlmIChtdWx0aXBsZSAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHsKICAgIHZhbHVlID0gU3RyaW5nKHZhbHVlKS5zcGxpdCgnLCcpLm1hcChmdW5jdGlvbiAoZW1haWxTdHIpIHsKICAgICAgcmV0dXJuIGVtYWlsU3RyLnRyaW0oKTsKICAgIH0pOwogIH0KCiAgdmFyIHZhbGlkYXRvck9wdGlvbnMgPSBhc3NpZ24oe30sIG9wdGlvbnMpOwoKICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHsKICAgIHJldHVybiB2YWx1ZS5ldmVyeShmdW5jdGlvbiAodmFsKSB7CiAgICAgIHJldHVybiBpc0VtYWlsKFN0cmluZyh2YWwpLCB2YWxpZGF0b3JPcHRpb25zKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIGlzRW1haWwoU3RyaW5nKHZhbHVlKSwgdmFsaWRhdG9yT3B0aW9ucyk7Cn07Cgp2YXIgZW1haWwgPSB7CiAgdmFsaWRhdGU6IHZhbGlkYXRlJGQKfTsKCnZhciB2YWxpZGF0ZSRlID0gZnVuY3Rpb24gdmFsaWRhdGUkZSh2YWx1ZSwgb3B0aW9ucykgewogIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgewogICAgcmV0dXJuIHZhbHVlLmV2ZXJ5KGZ1bmN0aW9uICh2YWwpIHsKICAgICAgcmV0dXJuIHZhbGlkYXRlJGUodmFsLCBvcHRpb25zKTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIHRvQXJyYXkob3B0aW9ucykuc29tZShmdW5jdGlvbiAoaXRlbSkgewogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lCiAgICByZXR1cm4gaXRlbSA9PSB2YWx1ZTsKICB9KTsKfTsKCnZhciBpbmNsdWRlZCA9IHsKICB2YWxpZGF0ZTogdmFsaWRhdGUkZQp9OwoKdmFyIHZhbGlkYXRlJGYgPSBmdW5jdGlvbiB2YWxpZGF0ZSRmKCkgewogIHZhciBhcmdzID0gW10sCiAgICAgIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7CgogIHdoaWxlIChsZW4tLSkgewogICAgYXJnc1tsZW5dID0gYXJndW1lbnRzW2xlbl07CiAgfQoKICByZXR1cm4gIXZhbGlkYXRlJGUuYXBwbHkodm9pZCAwLCBhcmdzKTsKfTsKCnZhciBleGNsdWRlZCA9IHsKICB2YWxpZGF0ZTogdmFsaWRhdGUkZgp9OwoKdmFyIHZhbGlkYXRlJGcgPSBmdW5jdGlvbiB2YWxpZGF0ZSRnKGZpbGVzLCBleHRlbnNpb25zKSB7CiAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cCgiLigiICsgZXh0ZW5zaW9ucy5qb2luKCd8JykgKyAiKSQiLCAnaScpOwogIHJldHVybiBlbnN1cmVBcnJheShmaWxlcykuZXZlcnkoZnVuY3Rpb24gKGZpbGUpIHsKICAgIHJldHVybiByZWdleC50ZXN0KGZpbGUubmFtZSk7CiAgfSk7Cn07Cgp2YXIgZXh0ID0gewogIHZhbGlkYXRlOiB2YWxpZGF0ZSRnCn07Cgp2YXIgdmFsaWRhdGUkaCA9IGZ1bmN0aW9uIHZhbGlkYXRlJGgoZmlsZXMpIHsKICByZXR1cm4gKEFycmF5LmlzQXJyYXkoZmlsZXMpID8gZmlsZXMgOiBbZmlsZXNdKS5ldmVyeShmdW5jdGlvbiAoZmlsZSkgewogICAgcmV0dXJuIC9cLihqcGd8c3ZnfGpwZWd8cG5nfGJtcHxnaWYpJC9pLnRlc3QoZmlsZS5uYW1lKTsKICB9KTsKfTsKCnZhciBpbWFnZSA9IHsKICB2YWxpZGF0ZTogdmFsaWRhdGUkaAp9OwoKdmFyIHZhbGlkYXRlJGkgPSBmdW5jdGlvbiB2YWxpZGF0ZSRpKHZhbHVlKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7CiAgICByZXR1cm4gdmFsdWUuZXZlcnkoZnVuY3Rpb24gKHZhbCkgewogICAgICByZXR1cm4gL14tP1swLTldKyQvLnRlc3QoU3RyaW5nKHZhbCkpOwogICAgfSk7CiAgfQoKICByZXR1cm4gL14tP1swLTldKyQvLnRlc3QoU3RyaW5nKHZhbHVlKSk7Cn07Cgp2YXIgaW50ZWdlciA9IHsKICB2YWxpZGF0ZTogdmFsaWRhdGUkaQp9OwoKdmFyIHZhbGlkYXRlJGogPSBmdW5jdGlvbiB2YWxpZGF0ZSRqKHZhbHVlLCByZWYpIHsKICBpZiAocmVmID09PSB2b2lkIDApIHJlZiA9IHt9OwogIHZhciB2ZXJzaW9uID0gcmVmLnZlcnNpb247CiAgaWYgKHZlcnNpb24gPT09IHZvaWQgMCkgdmVyc2lvbiA9IDQ7CgogIGlmIChpc051bGxPclVuZGVmaW5lZCh2YWx1ZSkpIHsKICAgIHZhbHVlID0gJyc7CiAgfQoKICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHsKICAgIHJldHVybiB2YWx1ZS5ldmVyeShmdW5jdGlvbiAodmFsKSB7CiAgICAgIHJldHVybiBpc0lQKHZhbCwgdmVyc2lvbik7CiAgICB9KTsKICB9CgogIHJldHVybiBpc0lQKHZhbHVlLCB2ZXJzaW9uKTsKfTsKCnZhciBwYXJhbU5hbWVzJGIgPSBbJ3ZlcnNpb24nXTsKdmFyIGlwID0gewogIHZhbGlkYXRlOiB2YWxpZGF0ZSRqLAogIHBhcmFtTmFtZXM6IHBhcmFtTmFtZXMkYgp9OwoKdmFyIHZhbGlkYXRlJGsgPSBmdW5jdGlvbiB2YWxpZGF0ZSRrKHZhbHVlKSB7CiAgaWYgKGlzTnVsbE9yVW5kZWZpbmVkKHZhbHVlKSkgewogICAgdmFsdWUgPSAnJzsKICB9CgogIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgewogICAgcmV0dXJuIHZhbHVlLmV2ZXJ5KGZ1bmN0aW9uICh2YWwpIHsKICAgICAgcmV0dXJuIGlzSVAodmFsLCAnJykgfHwgaXNGUUROKHZhbCk7CiAgICB9KTsKICB9CgogIHJldHVybiBpc0lQKHZhbHVlLCAnJykgfHwgaXNGUUROKHZhbHVlKTsKfTsKCnZhciBpcF9vcl9mcWRuID0gewogIHZhbGlkYXRlOiB2YWxpZGF0ZSRrCn07Cgp2YXIgdmFsaWRhdGUkbCA9IGZ1bmN0aW9uIHZhbGlkYXRlJGwodmFsdWUsIHJlZikgewogIGlmIChyZWYgPT09IHZvaWQgMCkgcmVmID0gW107CiAgdmFyIG90aGVyID0gcmVmWzBdOwogIHJldHVybiB2YWx1ZSA9PT0gb3RoZXI7Cn07Cgp2YXIgaXMgPSB7CiAgdmFsaWRhdGU6IHZhbGlkYXRlJGwKfTsKCnZhciB2YWxpZGF0ZSRtID0gZnVuY3Rpb24gdmFsaWRhdGUkbSh2YWx1ZSwgcmVmKSB7CiAgaWYgKHJlZiA9PT0gdm9pZCAwKSByZWYgPSBbXTsKICB2YXIgb3RoZXIgPSByZWZbMF07CiAgcmV0dXJuIHZhbHVlICE9PSBvdGhlcjsKfTsKCnZhciBpc19ub3QgPSB7CiAgdmFsaWRhdGU6IHZhbGlkYXRlJG0KfTsKLyoqCiAqIEBwYXJhbSB7QXJyYXl8U3RyaW5nfSB2YWx1ZQogKiBAcGFyYW0ge051bWJlcn0gbGVuZ3RoCiAqIEBwYXJhbSB7TnVtYmVyfSBtYXgKICovCgp2YXIgY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUodmFsdWUsIGxlbmd0aCwgbWF4KSB7CiAgaWYgKG1heCA9PT0gdW5kZWZpbmVkKSB7CiAgICByZXR1cm4gdmFsdWUubGVuZ3RoID09PSBsZW5ndGg7CiAgfSAvLyBjYXN0IHRvIG51bWJlci4KCgogIG1heCA9IE51bWJlcihtYXgpOwogIHJldHVybiB2YWx1ZS5sZW5ndGggPj0gbGVuZ3RoICYmIHZhbHVlLmxlbmd0aCA8PSBtYXg7Cn07Cgp2YXIgdmFsaWRhdGUkbiA9IGZ1bmN0aW9uIHZhbGlkYXRlJG4odmFsdWUsIHJlZikgewogIHZhciBsZW5ndGggPSByZWZbMF07CiAgdmFyIG1heCA9IHJlZlsxXTsKICBpZiAobWF4ID09PSB2b2lkIDApIG1heCA9IHVuZGVmaW5lZDsKCiAgaWYgKGlzTnVsbE9yVW5kZWZpbmVkKHZhbHVlKSkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgbGVuZ3RoID0gTnVtYmVyKGxlbmd0aCk7CgogIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7CiAgICB2YWx1ZSA9IFN0cmluZyh2YWx1ZSk7CiAgfQoKICBpZiAoIXZhbHVlLmxlbmd0aCkgewogICAgdmFsdWUgPSB0b0FycmF5KHZhbHVlKTsKICB9CgogIHJldHVybiBjb21wYXJlKHZhbHVlLCBsZW5ndGgsIG1heCk7Cn07Cgp2YXIgbGVuZ3RoID0gewogIHZhbGlkYXRlOiB2YWxpZGF0ZSRuCn07Cgp2YXIgdmFsaWRhdGUkbyA9IGZ1bmN0aW9uIHZhbGlkYXRlJG8odmFsdWUsIHJlZikgewogIHZhciBsZW5ndGggPSByZWZbMF07CgogIGlmIChpc051bGxPclVuZGVmaW5lZCh2YWx1ZSkpIHsKICAgIHJldHVybiBsZW5ndGggPj0gMDsKICB9CgogIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgewogICAgcmV0dXJuIHZhbHVlLmV2ZXJ5KGZ1bmN0aW9uICh2YWwpIHsKICAgICAgcmV0dXJuIHZhbGlkYXRlJG8odmFsLCBbbGVuZ3RoXSk7CiAgICB9KTsKICB9CgogIHJldHVybiBTdHJpbmcodmFsdWUpLmxlbmd0aCA8PSBsZW5ndGg7Cn07Cgp2YXIgbWF4ID0gewogIHZhbGlkYXRlOiB2YWxpZGF0ZSRvCn07Cgp2YXIgdmFsaWRhdGUkcCA9IGZ1bmN0aW9uIHZhbGlkYXRlJHAodmFsdWUsIHJlZikgewogIHZhciBtYXggPSByZWZbMF07CgogIGlmIChpc051bGxPclVuZGVmaW5lZCh2YWx1ZSkgfHwgdmFsdWUgPT09ICcnKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHsKICAgIHJldHVybiB2YWx1ZS5sZW5ndGggPiAwICYmIHZhbHVlLmV2ZXJ5KGZ1bmN0aW9uICh2YWwpIHsKICAgICAgcmV0dXJuIHZhbGlkYXRlJHAodmFsLCBbbWF4XSk7CiAgICB9KTsKICB9CgogIHJldHVybiBOdW1iZXIodmFsdWUpIDw9IG1heDsKfTsKCnZhciBtYXhfdmFsdWUgPSB7CiAgdmFsaWRhdGU6IHZhbGlkYXRlJHAKfTsKCnZhciB2YWxpZGF0ZSRxID0gZnVuY3Rpb24gdmFsaWRhdGUkcShmaWxlcywgbWltZXMpIHsKICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKG1pbWVzLmpvaW4oJ3wnKS5yZXBsYWNlKCcqJywgJy4rJykgKyAiJCIsICdpJyk7CiAgcmV0dXJuIGVuc3VyZUFycmF5KGZpbGVzKS5ldmVyeShmdW5jdGlvbiAoZmlsZSkgewogICAgcmV0dXJuIHJlZ2V4LnRlc3QoZmlsZS50eXBlKTsKICB9KTsKfTsKCnZhciBtaW1lcyA9IHsKICB2YWxpZGF0ZTogdmFsaWRhdGUkcQp9OwoKdmFyIHZhbGlkYXRlJHIgPSBmdW5jdGlvbiB2YWxpZGF0ZSRyKHZhbHVlLCByZWYpIHsKICB2YXIgbGVuZ3RoID0gcmVmWzBdOwoKICBpZiAoaXNOdWxsT3JVbmRlZmluZWQodmFsdWUpKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHsKICAgIHJldHVybiB2YWx1ZS5ldmVyeShmdW5jdGlvbiAodmFsKSB7CiAgICAgIHJldHVybiB2YWxpZGF0ZSRyKHZhbCwgW2xlbmd0aF0pOwogICAgfSk7CiAgfQoKICByZXR1cm4gU3RyaW5nKHZhbHVlKS5sZW5ndGggPj0gbGVuZ3RoOwp9OwoKdmFyIG1pbiA9IHsKICB2YWxpZGF0ZTogdmFsaWRhdGUkcgp9OwoKdmFyIHZhbGlkYXRlJHMgPSBmdW5jdGlvbiB2YWxpZGF0ZSRzKHZhbHVlLCByZWYpIHsKICB2YXIgbWluID0gcmVmWzBdOwoKICBpZiAoaXNOdWxsT3JVbmRlZmluZWQodmFsdWUpIHx8IHZhbHVlID09PSAnJykgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7CiAgICByZXR1cm4gdmFsdWUubGVuZ3RoID4gMCAmJiB2YWx1ZS5ldmVyeShmdW5jdGlvbiAodmFsKSB7CiAgICAgIHJldHVybiB2YWxpZGF0ZSRzKHZhbCwgW21pbl0pOwogICAgfSk7CiAgfQoKICByZXR1cm4gTnVtYmVyKHZhbHVlKSA+PSBtaW47Cn07Cgp2YXIgbWluX3ZhbHVlID0gewogIHZhbGlkYXRlOiB2YWxpZGF0ZSRzCn07CnZhciBhciA9IC9eW9mg2aHZotmj2aTZpdmm2afZqNmpXSskLzsKdmFyIGVuID0gL15bMC05XSskLzsKCnZhciB2YWxpZGF0ZSR0ID0gZnVuY3Rpb24gdmFsaWRhdGUkdCh2YWx1ZSkgewogIHZhciB0ZXN0VmFsdWUgPSBmdW5jdGlvbiB0ZXN0VmFsdWUodmFsKSB7CiAgICB2YXIgc3RyVmFsdWUgPSBTdHJpbmcodmFsKTsKICAgIHJldHVybiBlbi50ZXN0KHN0clZhbHVlKSB8fCBhci50ZXN0KHN0clZhbHVlKTsKICB9OwoKICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHsKICAgIHJldHVybiB2YWx1ZS5ldmVyeSh0ZXN0VmFsdWUpOwogIH0KCiAgcmV0dXJuIHRlc3RWYWx1ZSh2YWx1ZSk7Cn07Cgp2YXIgbnVtZXJpYyA9IHsKICB2YWxpZGF0ZTogdmFsaWRhdGUkdAp9OwoKdmFyIHZhbGlkYXRlJHUgPSBmdW5jdGlvbiB2YWxpZGF0ZSR1KHZhbHVlLCByZWYpIHsKICB2YXIgZXhwcmVzc2lvbiA9IHJlZi5leHByZXNzaW9uOwoKICBpZiAodHlwZW9mIGV4cHJlc3Npb24gPT09ICdzdHJpbmcnKSB7CiAgICBleHByZXNzaW9uID0gbmV3IFJlZ0V4cChleHByZXNzaW9uKTsKICB9CgogIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgewogICAgcmV0dXJuIHZhbHVlLmV2ZXJ5KGZ1bmN0aW9uICh2YWwpIHsKICAgICAgcmV0dXJuIHZhbGlkYXRlJHUodmFsLCB7CiAgICAgICAgZXhwcmVzc2lvbjogZXhwcmVzc2lvbgogICAgICB9KTsKICAgIH0pOwogIH0KCiAgcmV0dXJuIGV4cHJlc3Npb24udGVzdChTdHJpbmcodmFsdWUpKTsKfTsKCnZhciBwYXJhbU5hbWVzJGMgPSBbJ2V4cHJlc3Npb24nXTsKdmFyIHJlZ2V4ID0gewogIHZhbGlkYXRlOiB2YWxpZGF0ZSR1LAogIHBhcmFtTmFtZXM6IHBhcmFtTmFtZXMkYwp9OwoKdmFyIHZhbGlkYXRlJHYgPSBmdW5jdGlvbiB2YWxpZGF0ZSR2KHZhbHVlLCByZWYpIHsKICBpZiAocmVmID09PSB2b2lkIDApIHJlZiA9IFtdOwogIHZhciBpbnZhbGlkYXRlRmFsc2UgPSByZWZbMF07CiAgaWYgKGludmFsaWRhdGVGYWxzZSA9PT0gdm9pZCAwKSBpbnZhbGlkYXRlRmFsc2UgPSBmYWxzZTsKCiAgaWYgKGlzTnVsbE9yVW5kZWZpbmVkKHZhbHVlKSB8fCBpc0VtcHR5QXJyYXkodmFsdWUpKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfSAvLyBpbmNhc2UgYSBmaWVsZCBjb25zaWRlcnMgYGZhbHNlYCBhcyBhbiBlbXB0eSB2YWx1ZSBsaWtlIGNoZWNrYm94ZXMuCgoKICBpZiAodmFsdWUgPT09IGZhbHNlICYmIGludmFsaWRhdGVGYWxzZSkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgcmV0dXJuICEhU3RyaW5nKHZhbHVlKS50cmltKCkubGVuZ3RoOwp9OwoKdmFyIHJlcXVpcmVkID0gewogIHZhbGlkYXRlOiB2YWxpZGF0ZSR2Cn07Cgp2YXIgdmFsaWRhdGUkdyA9IGZ1bmN0aW9uIHZhbGlkYXRlJHcodmFsdWUsIHJlZikgewogIGlmIChyZWYgPT09IHZvaWQgMCkgcmVmID0gW107CiAgdmFyIG90aGVyRmllbGRWYWwgPSByZWZbMF07CiAgdmFyIHBvc3NpYmxlVmFscyA9IHJlZi5zbGljZSgxKTsKICB2YXIgcmVxdWlyZWQgPSBwb3NzaWJsZVZhbHMuaW5jbHVkZXMoU3RyaW5nKG90aGVyRmllbGRWYWwpLnRyaW0oKSk7CgogIGlmICghcmVxdWlyZWQpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkOiB0cnVlLAogICAgICBkYXRhOiB7CiAgICAgICAgcmVxdWlyZWQ6IHJlcXVpcmVkCiAgICAgIH0KICAgIH07CiAgfQoKICB2YXIgaW52YWxpZCA9IGlzRW1wdHlBcnJheSh2YWx1ZSkgfHwgW2ZhbHNlLCBudWxsLCB1bmRlZmluZWRdLmluY2x1ZGVzKHZhbHVlKTsKICBpbnZhbGlkID0gaW52YWxpZCB8fCAhU3RyaW5nKHZhbHVlKS50cmltKCkubGVuZ3RoOwogIHJldHVybiB7CiAgICB2YWxpZDogIWludmFsaWQsCiAgICBkYXRhOiB7CiAgICAgIHJlcXVpcmVkOiByZXF1aXJlZAogICAgfQogIH07Cn07Cgp2YXIgb3B0aW9ucyQ1ID0gewogIGhhc1RhcmdldDogdHJ1ZSwKICBjb21wdXRlc1JlcXVpcmVkOiB0cnVlCn07CnZhciByZXF1aXJlZF9pZiA9IHsKICB2YWxpZGF0ZTogdmFsaWRhdGUkdywKICBvcHRpb25zOiBvcHRpb25zJDUKfTsKCnZhciB2YWxpZGF0ZSR4ID0gZnVuY3Rpb24gdmFsaWRhdGUkeChmaWxlcywgcmVmKSB7CiAgdmFyIHNpemUgPSByZWZbMF07CgogIGlmIChpc05hTihzaXplKSkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KCiAgdmFyIG5TaXplID0gTnVtYmVyKHNpemUpICogMTAyNDsKICByZXR1cm4gZW5zdXJlQXJyYXkoZmlsZXMpLmV2ZXJ5KGZ1bmN0aW9uIChmaWxlKSB7CiAgICByZXR1cm4gZmlsZS5zaXplIDw9IG5TaXplOwogIH0pOwp9OwoKdmFyIHNpemUgPSB7CiAgdmFsaWRhdGU6IHZhbGlkYXRlJHgKfTsKdmFyIGlzVVJMXzEgPSBjcmVhdGVDb21tb25qc01vZHVsZShmdW5jdGlvbiAobW9kdWxlLCBleHBvcnRzKSB7CiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgdmFsdWU6IHRydWUKICB9KTsKICBleHBvcnRzWyJkZWZhdWx0Il0gPSBpc1VSTDsKCiAgdmFyIF9hc3NlcnRTdHJpbmcyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChhc3NlcnRTdHJpbmdfMSk7CgogIHZhciBfaXNGUUROMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoaXNGUUROXzEpOwoKICB2YXIgX2lzSVAyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChpc0lQXzEpOwoKICB2YXIgX21lcmdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQobWVyZ2VfMSk7CgogIGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7CiAgICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogewogICAgICAiZGVmYXVsdCI6IG9iagogICAgfTsKICB9CgogIHZhciBkZWZhdWx0X3VybF9vcHRpb25zID0gewogICAgcHJvdG9jb2xzOiBbJ2h0dHAnLCAnaHR0cHMnLCAnZnRwJ10sCiAgICByZXF1aXJlX3RsZDogdHJ1ZSwKICAgIHJlcXVpcmVfcHJvdG9jb2w6IGZhbHNlLAogICAgcmVxdWlyZV9ob3N0OiB0cnVlLAogICAgcmVxdWlyZV92YWxpZF9wcm90b2NvbDogdHJ1ZSwKICAgIGFsbG93X3VuZGVyc2NvcmVzOiBmYWxzZSwKICAgIGFsbG93X3RyYWlsaW5nX2RvdDogZmFsc2UsCiAgICBhbGxvd19wcm90b2NvbF9yZWxhdGl2ZV91cmxzOiBmYWxzZQogIH07CiAgdmFyIHdyYXBwZWRfaXB2NiA9IC9eXFsoW15cXV0rKVxdKD86OihbMC05XSspKT8kLzsKCiAgZnVuY3Rpb24gaXNSZWdFeHAob2JqKSB7CiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IFJlZ0V4cF0nOwogIH0KCiAgZnVuY3Rpb24gY2hlY2tIb3N0KGhvc3QsIG1hdGNoZXMpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF0Y2hlcy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgbWF0Y2ggPSBtYXRjaGVzW2ldOwoKICAgICAgaWYgKGhvc3QgPT09IG1hdGNoIHx8IGlzUmVnRXhwKG1hdGNoKSAmJiBtYXRjaC50ZXN0KGhvc3QpKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBmdW5jdGlvbiBpc1VSTCh1cmwsIG9wdGlvbnMpIHsKICAgICgwLCBfYXNzZXJ0U3RyaW5nMlsiZGVmYXVsdCJdKSh1cmwpOwoKICAgIGlmICghdXJsIHx8IHVybC5sZW5ndGggPj0gMjA4MyB8fCAvW1xzPD5dLy50ZXN0KHVybCkpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIGlmICh1cmwuaW5kZXhPZignbWFpbHRvOicpID09PSAwKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBvcHRpb25zID0gKDAsIF9tZXJnZTJbImRlZmF1bHQiXSkob3B0aW9ucywgZGVmYXVsdF91cmxfb3B0aW9ucyk7CiAgICB2YXIgcHJvdG9jb2wgPSB2b2lkIDAsCiAgICAgICAgYXV0aCA9IHZvaWQgMCwKICAgICAgICBob3N0ID0gdm9pZCAwLAogICAgICAgIGhvc3RuYW1lID0gdm9pZCAwLAogICAgICAgIHBvcnQgPSB2b2lkIDAsCiAgICAgICAgcG9ydF9zdHIgPSB2b2lkIDAsCiAgICAgICAgc3BsaXQgPSB2b2lkIDAsCiAgICAgICAgaXB2NiA9IHZvaWQgMDsKICAgIHNwbGl0ID0gdXJsLnNwbGl0KCcjJyk7CiAgICB1cmwgPSBzcGxpdC5zaGlmdCgpOwogICAgc3BsaXQgPSB1cmwuc3BsaXQoJz8nKTsKICAgIHVybCA9IHNwbGl0LnNoaWZ0KCk7CiAgICBzcGxpdCA9IHVybC5zcGxpdCgnOi8vJyk7CgogICAgaWYgKHNwbGl0Lmxlbmd0aCA+IDEpIHsKICAgICAgcHJvdG9jb2wgPSBzcGxpdC5zaGlmdCgpLnRvTG93ZXJDYXNlKCk7CgogICAgICBpZiAob3B0aW9ucy5yZXF1aXJlX3ZhbGlkX3Byb3RvY29sICYmIG9wdGlvbnMucHJvdG9jb2xzLmluZGV4T2YocHJvdG9jb2wpID09PSAtMSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfSBlbHNlIGlmIChvcHRpb25zLnJlcXVpcmVfcHJvdG9jb2wpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSBlbHNlIGlmICh1cmwuc3Vic3RyKDAsIDIpID09PSAnLy8nKSB7CiAgICAgIGlmICghb3B0aW9ucy5hbGxvd19wcm90b2NvbF9yZWxhdGl2ZV91cmxzKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICBzcGxpdFswXSA9IHVybC5zdWJzdHIoMik7CiAgICB9CgogICAgdXJsID0gc3BsaXQuam9pbignOi8vJyk7CgogICAgaWYgKHVybCA9PT0gJycpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHNwbGl0ID0gdXJsLnNwbGl0KCcvJyk7CiAgICB1cmwgPSBzcGxpdC5zaGlmdCgpOwoKICAgIGlmICh1cmwgPT09ICcnICYmICFvcHRpb25zLnJlcXVpcmVfaG9zdCkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBzcGxpdCA9IHVybC5zcGxpdCgnQCcpOwoKICAgIGlmIChzcGxpdC5sZW5ndGggPiAxKSB7CiAgICAgIGF1dGggPSBzcGxpdC5zaGlmdCgpOwoKICAgICAgaWYgKGF1dGguaW5kZXhPZignOicpID49IDAgJiYgYXV0aC5zcGxpdCgnOicpLmxlbmd0aCA+IDIpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KCiAgICBob3N0bmFtZSA9IHNwbGl0LmpvaW4oJ0AnKTsKICAgIHBvcnRfc3RyID0gbnVsbDsKICAgIGlwdjYgPSBudWxsOwogICAgdmFyIGlwdjZfbWF0Y2ggPSBob3N0bmFtZS5tYXRjaCh3cmFwcGVkX2lwdjYpOwoKICAgIGlmIChpcHY2X21hdGNoKSB7CiAgICAgIGhvc3QgPSAnJzsKICAgICAgaXB2NiA9IGlwdjZfbWF0Y2hbMV07CiAgICAgIHBvcnRfc3RyID0gaXB2Nl9tYXRjaFsyXSB8fCBudWxsOwogICAgfSBlbHNlIHsKICAgICAgc3BsaXQgPSBob3N0bmFtZS5zcGxpdCgnOicpOwogICAgICBob3N0ID0gc3BsaXQuc2hpZnQoKTsKCiAgICAgIGlmIChzcGxpdC5sZW5ndGgpIHsKICAgICAgICBwb3J0X3N0ciA9IHNwbGl0LmpvaW4oJzonKTsKICAgICAgfQogICAgfQoKICAgIGlmIChwb3J0X3N0ciAhPT0gbnVsbCkgewogICAgICBwb3J0ID0gcGFyc2VJbnQocG9ydF9zdHIsIDEwKTsKCiAgICAgIGlmICghL15bMC05XSskLy50ZXN0KHBvcnRfc3RyKSB8fCBwb3J0IDw9IDAgfHwgcG9ydCA+IDY1NTM1KSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CgogICAgaWYgKCEoMCwgX2lzSVAyWyJkZWZhdWx0Il0pKGhvc3QpICYmICEoMCwgX2lzRlFETjJbImRlZmF1bHQiXSkoaG9zdCwgb3B0aW9ucykgJiYgKCFpcHY2IHx8ICEoMCwgX2lzSVAyWyJkZWZhdWx0Il0pKGlwdjYsIDYpKSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgaG9zdCA9IGhvc3QgfHwgaXB2NjsKCiAgICBpZiAob3B0aW9ucy5ob3N0X3doaXRlbGlzdCAmJiAhY2hlY2tIb3N0KGhvc3QsIG9wdGlvbnMuaG9zdF93aGl0ZWxpc3QpKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBpZiAob3B0aW9ucy5ob3N0X2JsYWNrbGlzdCAmJiBjaGVja0hvc3QoaG9zdCwgb3B0aW9ucy5ob3N0X2JsYWNrbGlzdCkpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHJldHVybiB0cnVlOwogIH0KCiAgbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107Cn0pOwp2YXIgaXNVUkwgPSB1bndyYXBFeHBvcnRzKGlzVVJMXzEpOwoKdmFyIHZhbGlkYXRlJHkgPSBmdW5jdGlvbiB2YWxpZGF0ZSR5KHZhbHVlLCBvcHRpb25zKSB7CiAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgb3B0aW9ucyA9IHt9OwoKICBpZiAoaXNOdWxsT3JVbmRlZmluZWQodmFsdWUpKSB7CiAgICB2YWx1ZSA9ICcnOwogIH0KCiAgdmFyIHZhbGlkYXRvck9wdGlvbnMgPSBhc3NpZ24oe30sIG9wdGlvbnMpOwoKICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHsKICAgIHJldHVybiB2YWx1ZS5ldmVyeShmdW5jdGlvbiAodmFsKSB7CiAgICAgIHJldHVybiBpc1VSTCh2YWwsIHZhbGlkYXRvck9wdGlvbnMpOwogICAgfSk7CiAgfQoKICByZXR1cm4gaXNVUkwodmFsdWUsIHZhbGlkYXRvck9wdGlvbnMpOwp9OwoKdmFyIHVybCA9IHsKICB2YWxpZGF0ZTogdmFsaWRhdGUkeQp9OwovKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi8KCnZhciBSdWxlcyA9Ci8qI19fUFVSRV9fKi8KT2JqZWN0LmZyZWV6ZSh7CiAgYWZ0ZXI6IGFmdGVyLAogIGFscGhhX2Rhc2g6IGFscGhhX2Rhc2gsCiAgYWxwaGFfbnVtOiBhbHBoYV9udW0sCiAgYWxwaGFfc3BhY2VzOiBhbHBoYV9zcGFjZXMsCiAgYWxwaGE6IGFscGhhJDEsCiAgYmVmb3JlOiBiZWZvcmUsCiAgYmV0d2VlbjogYmV0d2VlbiwKICBjb25maXJtZWQ6IGNvbmZpcm1lZCwKICBjcmVkaXRfY2FyZDogY3JlZGl0X2NhcmQsCiAgZGF0ZV9iZXR3ZWVuOiBkYXRlX2JldHdlZW4sCiAgZGF0ZV9mb3JtYXQ6IGRhdGVfZm9ybWF0LAogIGRlY2ltYWw6IGRlY2ltYWwsCiAgZGlnaXRzOiBkaWdpdHMsCiAgZGltZW5zaW9uczogZGltZW5zaW9ucywKICBlbWFpbDogZW1haWwsCiAgZXh0OiBleHQsCiAgaW1hZ2U6IGltYWdlLAogIGluY2x1ZGVkOiBpbmNsdWRlZCwKICBpbnRlZ2VyOiBpbnRlZ2VyLAogIGxlbmd0aDogbGVuZ3RoLAogIGlwOiBpcCwKICBpcF9vcl9mcWRuOiBpcF9vcl9mcWRuLAogIGlzX25vdDogaXNfbm90LAogIGlzOiBpcywKICBtYXg6IG1heCwKICBtYXhfdmFsdWU6IG1heF92YWx1ZSwKICBtaW1lczogbWltZXMsCiAgbWluOiBtaW4sCiAgbWluX3ZhbHVlOiBtaW5fdmFsdWUsCiAgZXhjbHVkZWQ6IGV4Y2x1ZGVkLAogIG51bWVyaWM6IG51bWVyaWMsCiAgcmVnZXg6IHJlZ2V4LAogIHJlcXVpcmVkOiByZXF1aXJlZCwKICByZXF1aXJlZF9pZjogcmVxdWlyZWRfaWYsCiAgc2l6ZTogc2l6ZSwKICB1cmw6IHVybAp9KTsgLy8gCgp2YXIgbm9ybWFsaXplID0gZnVuY3Rpb24gbm9ybWFsaXplKGZpZWxkcykgewogIGlmIChBcnJheS5pc0FycmF5KGZpZWxkcykpIHsKICAgIHJldHVybiBmaWVsZHMucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCBjdXJyKSB7CiAgICAgIGlmIChpbmNsdWRlcyhjdXJyLCAnLicpKSB7CiAgICAgICAgcHJldltjdXJyLnNwbGl0KCcuJylbMV1dID0gY3VycjsKICAgICAgfSBlbHNlIHsKICAgICAgICBwcmV2W2N1cnJdID0gY3VycjsKICAgICAgfQoKICAgICAgcmV0dXJuIHByZXY7CiAgICB9LCB7fSk7CiAgfQoKICByZXR1cm4gZmllbGRzOwp9OyAvLyBDb21iaW5lcyB0d28gZmxhZ3MgdXNpbmcgZWl0aGVyIEFORCBvciBPUiBkZXBlbmRpbmcgb24gdGhlIGZsYWcgdHlwZS4KCgp2YXIgY29tYmluZSA9IGZ1bmN0aW9uIGNvbWJpbmUobGhzLCByaHMpIHsKICB2YXIgbWFwcGVyID0gewogICAgcHJpc3RpbmU6IGZ1bmN0aW9uIHByaXN0aW5lKGxocywgcmhzKSB7CiAgICAgIHJldHVybiBsaHMgJiYgcmhzOwogICAgfSwKICAgIGRpcnR5OiBmdW5jdGlvbiBkaXJ0eShsaHMsIHJocykgewogICAgICByZXR1cm4gbGhzIHx8IHJoczsKICAgIH0sCiAgICB0b3VjaGVkOiBmdW5jdGlvbiB0b3VjaGVkKGxocywgcmhzKSB7CiAgICAgIHJldHVybiBsaHMgfHwgcmhzOwogICAgfSwKICAgIHVudG91Y2hlZDogZnVuY3Rpb24gdW50b3VjaGVkKGxocywgcmhzKSB7CiAgICAgIHJldHVybiBsaHMgJiYgcmhzOwogICAgfSwKICAgIHZhbGlkOiBmdW5jdGlvbiB2YWxpZChsaHMsIHJocykgewogICAgICByZXR1cm4gbGhzICYmIHJoczsKICAgIH0sCiAgICBpbnZhbGlkOiBmdW5jdGlvbiBpbnZhbGlkKGxocywgcmhzKSB7CiAgICAgIHJldHVybiBsaHMgfHwgcmhzOwogICAgfSwKICAgIHBlbmRpbmc6IGZ1bmN0aW9uIHBlbmRpbmcobGhzLCByaHMpIHsKICAgICAgcmV0dXJuIGxocyB8fCByaHM7CiAgICB9LAogICAgcmVxdWlyZWQ6IGZ1bmN0aW9uIHJlcXVpcmVkKGxocywgcmhzKSB7CiAgICAgIHJldHVybiBsaHMgfHwgcmhzOwogICAgfSwKICAgIHZhbGlkYXRlZDogZnVuY3Rpb24gdmFsaWRhdGVkKGxocywgcmhzKSB7CiAgICAgIHJldHVybiBsaHMgJiYgcmhzOwogICAgfQogIH07CiAgcmV0dXJuIE9iamVjdC5rZXlzKG1hcHBlcikucmVkdWNlKGZ1bmN0aW9uIChmbGFncywgZmxhZykgewogICAgZmxhZ3NbZmxhZ10gPSBtYXBwZXJbZmxhZ10obGhzW2ZsYWddLCByaHNbZmxhZ10pOwogICAgcmV0dXJuIGZsYWdzOwogIH0sIHt9KTsKfTsKCnZhciBtYXBTY29wZSA9IGZ1bmN0aW9uIG1hcFNjb3BlKHNjb3BlLCBkZWVwKSB7CiAgaWYgKGRlZXAgPT09IHZvaWQgMCkgZGVlcCA9IHRydWU7CiAgcmV0dXJuIE9iamVjdC5rZXlzKHNjb3BlKS5yZWR1Y2UoZnVuY3Rpb24gKGZsYWdzLCBmaWVsZCkgewogICAgaWYgKCFmbGFncykgewogICAgICBmbGFncyA9IGFzc2lnbih7fSwgc2NvcGVbZmllbGRdKTsKICAgICAgcmV0dXJuIGZsYWdzOwogICAgfSAvLyBzY29wZS4KCgogICAgdmFyIGlzU2NvcGUgPSBmaWVsZC5pbmRleE9mKCckJykgPT09IDA7CgogICAgaWYgKGRlZXAgJiYgaXNTY29wZSkgewogICAgICByZXR1cm4gY29tYmluZShtYXBTY29wZShzY29wZVtmaWVsZF0pLCBmbGFncyk7CiAgICB9IGVsc2UgaWYgKCFkZWVwICYmIGlzU2NvcGUpIHsKICAgICAgcmV0dXJuIGZsYWdzOwogICAgfQoKICAgIGZsYWdzID0gY29tYmluZShmbGFncywgc2NvcGVbZmllbGRdKTsKICAgIHJldHVybiBmbGFnczsKICB9LCBudWxsKTsKfTsKLyoqCiAqIE1hcHMgZmllbGRzIHRvIGNvbXB1dGVkIGZ1bmN0aW9ucy4KICovCgoKdmFyIG1hcEZpZWxkcyA9IGZ1bmN0aW9uIG1hcEZpZWxkcyhmaWVsZHMpIHsKICBpZiAoIWZpZWxkcykgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIG1hcFNjb3BlKHRoaXMuJHZhbGlkYXRvci5mbGFncyk7CiAgICB9OwogIH0KCiAgdmFyIG5vcm1hbGl6ZWQgPSBub3JtYWxpemUoZmllbGRzKTsKICByZXR1cm4gT2JqZWN0LmtleXMobm9ybWFsaXplZCkucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCBjdXJyKSB7CiAgICB2YXIgZmllbGQgPSBub3JtYWxpemVkW2N1cnJdOwoKICAgIHByZXZbY3Vycl0gPSBmdW5jdGlvbiBtYXBwZWRGaWVsZCgpIHsKICAgICAgLy8gaWYgZmllbGQgZXhpc3RzCiAgICAgIGlmICh0aGlzLiR2YWxpZGF0b3IuZmxhZ3NbZmllbGRdKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHZhbGlkYXRvci5mbGFnc1tmaWVsZF07CiAgICAgIH0gLy8gc2NvcGVsZXNzIGZpZWxkcyB3ZXJlIHNlbGVjdGVkLgoKCiAgICAgIGlmIChub3JtYWxpemVkW2N1cnJdID09PSAnKicpIHsKICAgICAgICByZXR1cm4gbWFwU2NvcGUodGhpcy4kdmFsaWRhdG9yLmZsYWdzLCBmYWxzZSk7CiAgICAgIH0gLy8gaWYgaXQgaGFzIGEgc2NvcGUgZGVmaW5lZAoKCiAgICAgIHZhciBpbmRleCA9IGZpZWxkLmluZGV4T2YoJy4nKTsKCiAgICAgIGlmIChpbmRleCA8PSAwKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9CgogICAgICB2YXIgcmVmID0gZmllbGQuc3BsaXQoJy4nKTsKICAgICAgdmFyIHNjb3BlID0gcmVmWzBdOwogICAgICB2YXIgbmFtZSA9IHJlZi5zbGljZSgxKTsKICAgICAgc2NvcGUgPSB0aGlzLiR2YWxpZGF0b3IuZmxhZ3NbIiQiICsgc2NvcGVdOwogICAgICBuYW1lID0gbmFtZS5qb2luKCcuJyk7IC8vIGFuIGVudGlyZSBzY29wZSB3YXMgc2VsZWN0ZWQ6IHNjb3BlLioKCiAgICAgIGlmIChuYW1lID09PSAnKicgJiYgc2NvcGUpIHsKICAgICAgICByZXR1cm4gbWFwU2NvcGUoc2NvcGUpOwogICAgICB9CgogICAgICBpZiAoc2NvcGUgJiYgc2NvcGVbbmFtZV0pIHsKICAgICAgICByZXR1cm4gc2NvcGVbbmFtZV07CiAgICAgIH0KCiAgICAgIHJldHVybiB7fTsKICAgIH07CgogICAgcmV0dXJuIHByZXY7CiAgfSwge30pOwp9OwoKdmFyICR2YWxpZGF0b3IgPSBudWxsOwp2YXIgUFJPVklERVJfQ09VTlRFUiA9IDA7CgpmdW5jdGlvbiBjcmVhdGVWYWxpZGF0aW9uQ3R4KGN0eCkgewogIHJldHVybiB7CiAgICBlcnJvcnM6IGN0eC5tZXNzYWdlcywKICAgIGZsYWdzOiBjdHguZmxhZ3MsCiAgICBjbGFzc2VzOiBjdHguY2xhc3NlcywKICAgIHZhbGlkOiBjdHguaXNWYWxpZCwKICAgIGZhaWxlZFJ1bGVzOiBjdHguZmFpbGVkUnVsZXMsCiAgICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7CiAgICAgIHJldHVybiBjdHgucmVzZXQoKTsKICAgIH0sCiAgICB2YWxpZGF0ZTogZnVuY3Rpb24gdmFsaWRhdGUoKSB7CiAgICAgIHZhciBhcmdzID0gW10sCiAgICAgICAgICBsZW4gPSBhcmd1bWVudHMubGVuZ3RoOwoKICAgICAgd2hpbGUgKGxlbi0tKSB7CiAgICAgICAgYXJnc1tsZW5dID0gYXJndW1lbnRzW2xlbl07CiAgICAgIH0KCiAgICAgIHJldHVybiBjdHgudmFsaWRhdGUuYXBwbHkoY3R4LCBhcmdzKTsKICAgIH0sCiAgICBhcmlhOiB7CiAgICAgICdhcmlhLWludmFsaWQnOiBjdHguZmxhZ3MuaW52YWxpZCA/ICd0cnVlJyA6ICdmYWxzZScsCiAgICAgICdhcmlhLXJlcXVpcmVkJzogY3R4LmlzUmVxdWlyZWQgPyAndHJ1ZScgOiAnZmFsc2UnCiAgICB9CiAgfTsKfQoKZnVuY3Rpb24gbm9ybWFsaXplVmFsdWUkMSh2YWx1ZSkgewogIGlmIChpc0V2ZW50KHZhbHVlKSkgewogICAgcmV0dXJuIHZhbHVlLnRhcmdldC50eXBlID09PSAnZmlsZScgPyB0b0FycmF5KHZhbHVlLnRhcmdldC5maWxlcykgOiB2YWx1ZS50YXJnZXQudmFsdWU7CiAgfQoKICByZXR1cm4gdmFsdWU7Cn0KLyoqCiAqIERldGVybWluZXMgaWYgYSBwcm92aWRlciBuZWVkcyB0byBydW4gdmFsaWRhdGlvbi4KICovCgoKZnVuY3Rpb24gc2hvdWxkVmFsaWRhdGUoY3R4LCBtb2RlbCkgewogIC8vIHdoZW4gYW4gaW1tZWRpYXRlL2luaXRpYWwgdmFsaWRhdGlvbiBpcyBuZWVkZWQgYW5kIHdhc24ndCBkb25lIGJlZm9yZS4KICBpZiAoIWN0eC5faWdub3JlSW1tZWRpYXRlICYmIGN0eC5pbW1lZGlhdGUpIHsKICAgIHJldHVybiB0cnVlOwogIH0gLy8gd2hlbiB0aGUgdmFsdWUgY2hhbmdlcyBmb3Igd2hhdGV2ZXIgcmVhc29uLgoKCiAgaWYgKGN0eC52YWx1ZSAhPT0gbW9kZWwudmFsdWUpIHsKICAgIHJldHVybiB0cnVlOwogIH0gLy8gd2hlbiBpdCBuZWVkcyB2YWxpZGF0aW9uIGR1ZSB0byBwcm9wcy9jcm9zcy1maWVsZHMgY2hhbmdlcy4KCgogIGlmIChjdHguX25lZWRzVmFsaWRhdGlvbikgewogICAgcmV0dXJuIHRydWU7CiAgfSAvLyB3aGVuIHRoZSBpbml0aWFsIHZhbHVlIGlzIHVuZGVmaW5lZCBhbmQgdGhlIGZpZWxkIHdhc24ndCByZW5kZXJlZCB5ZXQuCgoKICBpZiAoIWN0eC5pbml0aWFsaXplZCAmJiBtb2RlbC52YWx1ZSA9PT0gdW5kZWZpbmVkKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIHJldHVybiBmYWxzZTsKfQoKZnVuY3Rpb24gY29tcHV0ZU1vZGVTZXR0aW5nKGN0eCkgewogIHZhciBjb21wdXRlID0gaXNDYWxsYWJsZShjdHgubW9kZSkgPyBjdHgubW9kZSA6IG1vZGVzW2N0eC5tb2RlXTsKICByZXR1cm4gY29tcHV0ZSh7CiAgICBlcnJvcnM6IGN0eC5tZXNzYWdlcywKICAgIHZhbHVlOiBjdHgudmFsdWUsCiAgICBmbGFnczogY3R4LmZsYWdzCiAgfSk7Cn0KCmZ1bmN0aW9uIG9uUmVuZGVyVXBkYXRlKG1vZGVsKSB7CiAgaWYgKCF0aGlzLmluaXRpYWxpemVkKSB7CiAgICB0aGlzLmluaXRpYWxWYWx1ZSA9IG1vZGVsLnZhbHVlOwogIH0KCiAgdmFyIHZhbGlkYXRlTm93ID0gc2hvdWxkVmFsaWRhdGUodGhpcywgbW9kZWwpOwogIHRoaXMuX25lZWRzVmFsaWRhdGlvbiA9IGZhbHNlOwogIHRoaXMudmFsdWUgPSBtb2RlbC52YWx1ZTsKICB0aGlzLl9pZ25vcmVJbW1lZGlhdGUgPSB0cnVlOwoKICBpZiAoIXZhbGlkYXRlTm93KSB7CiAgICByZXR1cm47CiAgfQoKICB0aGlzLnZhbGlkYXRlU2lsZW50KCkudGhlbih0aGlzLmltbWVkaWF0ZSB8fCB0aGlzLmZsYWdzLnZhbGlkYXRlZCA/IHRoaXMuYXBwbHlSZXN1bHQgOiBmdW5jdGlvbiAoeCkgewogICAgcmV0dXJuIHg7CiAgfSk7Cn0gLy8gQ3JlYXRlcyB0aGUgY29tbW9uIGhhbmRsZXJzIGZvciBhIHZhbGlkYXRhYmxlIGNvbnRleHQuCgoKZnVuY3Rpb24gY3JlYXRlQ29tbW9uSGFuZGxlcnMoY3R4KSB7CiAgdmFyIG9uSW5wdXQgPSBmdW5jdGlvbiBvbklucHV0KGUpIHsKICAgIGN0eC5zeW5jVmFsdWUoZSk7IC8vIHRyYWNrIGFuZCBrZWVwIHRoZSB2YWx1ZSB1cGRhdGVkLgoKICAgIGN0eC5zZXRGbGFncyh7CiAgICAgIGRpcnR5OiB0cnVlLAogICAgICBwcmlzdGluZTogZmFsc2UKICAgIH0pOwogIH07IC8vIEJsdXIgZXZlbnQgbGlzdGVuZXIuCgoKICB2YXIgb25CbHVyID0gZnVuY3Rpb24gb25CbHVyKCkgewogICAgY3R4LnNldEZsYWdzKHsKICAgICAgdG91Y2hlZDogdHJ1ZSwKICAgICAgdW50b3VjaGVkOiBmYWxzZQogICAgfSk7CiAgfTsKCiAgdmFyIG9uVmFsaWRhdGUgPSBjdHguJHZlZUhhbmRsZXI7CiAgdmFyIG1vZGUgPSBjb21wdXRlTW9kZVNldHRpbmcoY3R4KTsgLy8gSGFuZGxlIGRlYm91bmNlIGNoYW5nZXMuCgogIGlmICghb25WYWxpZGF0ZSB8fCBjdHguJHZlZURlYm91bmNlICE9PSBjdHguZGVib3VuY2UpIHsKICAgIG9uVmFsaWRhdGUgPSBkZWJvdW5jZShmdW5jdGlvbiAoKSB7CiAgICAgIGN0eC4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBwZW5kaW5nUHJvbWlzZSA9IGN0eC52YWxpZGF0ZVNpbGVudCgpOyAvLyBhdm9pZHMgcmFjZSBjb25kaXRpb25zIGJldHdlZW4gc3VjY2Vzc2l2ZSB2YWxpZGF0aW9ucy4KCiAgICAgICAgY3R4Ll9wZW5kaW5nVmFsaWRhdGlvbiA9IHBlbmRpbmdQcm9taXNlOwogICAgICAgIHBlbmRpbmdQcm9taXNlLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgaWYgKHBlbmRpbmdQcm9taXNlID09PSBjdHguX3BlbmRpbmdWYWxpZGF0aW9uKSB7CiAgICAgICAgICAgIGN0eC5hcHBseVJlc3VsdChyZXN1bHQpOwogICAgICAgICAgICBjdHguX3BlbmRpbmdWYWxpZGF0aW9uID0gbnVsbDsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LCBtb2RlLmRlYm91bmNlIHx8IGN0eC5kZWJvdW5jZSk7IC8vIENhY2hlIHRoZSBoYW5kbGVyIHNvIHdlIGRvbid0IGNyZWF0ZSBpdCBlYWNoIHRpbWUuCgogICAgY3R4LiR2ZWVIYW5kbGVyID0gb25WYWxpZGF0ZTsgLy8gY2FjaGUgdGhlIGRlYm91bmNlIHZhbHVlIHNvIHdlIGRldGVjdCBpZiBpdCB3YXMgY2hhbmdlZC4KCiAgICBjdHguJHZlZURlYm91bmNlID0gY3R4LmRlYm91bmNlOwogIH0KCiAgcmV0dXJuIHsKICAgIG9uSW5wdXQ6IG9uSW5wdXQsCiAgICBvbkJsdXI6IG9uQmx1ciwKICAgIG9uVmFsaWRhdGU6IG9uVmFsaWRhdGUKICB9Owp9IC8vIEFkZHMgYWxsIHBsdWdpbiBsaXN0ZW5lcnMgdG8gdGhlIHZub2RlLgoKCmZ1bmN0aW9uIGFkZExpc3RlbmVycyhub2RlKSB7CiAgdmFyIG1vZGVsID0gZmluZE1vZGVsKG5vZGUpOyAvLyBjYWNoZSB0aGUgaW5wdXQgZXZlbnROYW1lLgoKICB0aGlzLl9pbnB1dEV2ZW50TmFtZSA9IHRoaXMuX2lucHV0RXZlbnROYW1lIHx8IGdldElucHV0RXZlbnROYW1lKG5vZGUsIG1vZGVsKTsKICBvblJlbmRlclVwZGF0ZS5jYWxsKHRoaXMsIG1vZGVsKTsKICB2YXIgcmVmID0gY3JlYXRlQ29tbW9uSGFuZGxlcnModGhpcyk7CiAgdmFyIG9uSW5wdXQgPSByZWYub25JbnB1dDsKICB2YXIgb25CbHVyID0gcmVmLm9uQmx1cjsKICB2YXIgb25WYWxpZGF0ZSA9IHJlZi5vblZhbGlkYXRlOwogIGFkZFZOb2RlTGlzdGVuZXIobm9kZSwgdGhpcy5faW5wdXRFdmVudE5hbWUsIG9uSW5wdXQpOwogIGFkZFZOb2RlTGlzdGVuZXIobm9kZSwgJ2JsdXInLCBvbkJsdXIpOyAvLyBhZGQgdGhlIHZhbGlkYXRpb24gbGlzdGVuZXJzLgoKICB0aGlzLm5vcm1hbGl6ZWRFdmVudHMuZm9yRWFjaChmdW5jdGlvbiAoZXZ0KSB7CiAgICBhZGRWTm9kZUxpc3RlbmVyKG5vZGUsIGV2dCwgb25WYWxpZGF0ZSk7CiAgfSk7CiAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7Cn0KCmZ1bmN0aW9uIGNyZWF0ZVZhbHVlc0xvb2t1cChjdHgpIHsKICB2YXIgcHJvdmlkZXJzID0gY3R4LiRfdmVlT2JzZXJ2ZXIucmVmczsKICByZXR1cm4gY3R4LmZpZWxkRGVwcy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgZGVwTmFtZSkgewogICAgaWYgKCFwcm92aWRlcnNbZGVwTmFtZV0pIHsKICAgICAgcmV0dXJuIGFjYzsKICAgIH0KCiAgICBhY2NbZGVwTmFtZV0gPSBwcm92aWRlcnNbZGVwTmFtZV0udmFsdWU7CiAgICByZXR1cm4gYWNjOwogIH0sIHt9KTsKfQoKZnVuY3Rpb24gdXBkYXRlUmVuZGVyaW5nQ29udGV4dFJlZnMoY3R4KSB7CiAgLy8gSURzIHNob3VsZCBub3QgYmUgbnVsbGFibGUuCiAgaWYgKGlzTnVsbE9yVW5kZWZpbmVkKGN0eC5pZCkgJiYgY3R4LmlkID09PSBjdHgudmlkKSB7CiAgICBjdHguaWQgPSBQUk9WSURFUl9DT1VOVEVSOwogICAgUFJPVklERVJfQ09VTlRFUisrOwogIH0KCiAgdmFyIGlkID0gY3R4LmlkOwogIHZhciB2aWQgPSBjdHgudmlkOyAvLyBOb3RoaW5nIGhhcyBjaGFuZ2VkLgoKICBpZiAoY3R4LmlzRGVhY3RpdmF0ZWQgfHwgaWQgPT09IHZpZCAmJiBjdHguJF92ZWVPYnNlcnZlci5yZWZzW2lkXSkgewogICAgcmV0dXJuOwogIH0gLy8gdmlkIHdhcyBjaGFuZ2VkLgoKCiAgaWYgKGlkICE9PSB2aWQgJiYgY3R4LiRfdmVlT2JzZXJ2ZXIucmVmc1tpZF0gPT09IGN0eCkgewogICAgY3R4LiRfdmVlT2JzZXJ2ZXIudW5zdWJzY3JpYmUoY3R4KTsKICB9CgogIGN0eC4kX3ZlZU9ic2VydmVyLnN1YnNjcmliZShjdHgpOwogIGN0eC5pZCA9IHZpZDsKfQoKZnVuY3Rpb24gY3JlYXRlT2JzZXJ2ZXIoKSB7CiAgcmV0dXJuIHsKICAgIHJlZnM6IHt9LAogICAgc3Vic2NyaWJlOiBmdW5jdGlvbiBzdWJzY3JpYmUoY3R4KSB7CiAgICAgIHRoaXMucmVmc1tjdHgudmlkXSA9IGN0eDsKICAgIH0sCiAgICB1bnN1YnNjcmliZTogZnVuY3Rpb24gdW5zdWJzY3JpYmUoY3R4KSB7CiAgICAgIGRlbGV0ZSB0aGlzLnJlZnNbY3R4LnZpZF07CiAgICB9CiAgfTsKfQoKdmFyIFZhbGlkYXRpb25Qcm92aWRlciA9IHsKICAkX192ZWVJbmplY3Q6IGZhbHNlLAogIGluamVjdDogewogICAgJF92ZWVPYnNlcnZlcjogewogICAgICBmcm9tOiAnJF92ZWVPYnNlcnZlcicsCiAgICAgICJkZWZhdWx0IjogZnVuY3Rpb24gZGVmYXVsdCQxKCkgewogICAgICAgIGlmICghdGhpcy4kdm5vZGUuY29udGV4dC4kX3ZlZU9ic2VydmVyKSB7CiAgICAgICAgICB0aGlzLiR2bm9kZS5jb250ZXh0LiRfdmVlT2JzZXJ2ZXIgPSBjcmVhdGVPYnNlcnZlcigpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRoaXMuJHZub2RlLmNvbnRleHQuJF92ZWVPYnNlcnZlcjsKICAgICAgfQogICAgfQogIH0sCiAgcHJvcHM6IHsKICAgIHZpZDogewogICAgICB0eXBlOiBbU3RyaW5nLCBOdW1iZXJdLAogICAgICAiZGVmYXVsdCI6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIFBST1ZJREVSX0NPVU5URVIrKzsKICAgICAgICByZXR1cm4gIl92ZWVfIiArIFBST1ZJREVSX0NPVU5URVI7CiAgICAgIH0KICAgIH0sCiAgICBuYW1lOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgImRlZmF1bHQiOiBudWxsCiAgICB9LAogICAgbW9kZTogewogICAgICB0eXBlOiBbU3RyaW5nLCBGdW5jdGlvbl0sCiAgICAgICJkZWZhdWx0IjogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIGdldENvbmZpZygpLm1vZGU7CiAgICAgIH0KICAgIH0sCiAgICBldmVudHM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIHZhbGlkYXRlOiBmdW5jdGlvbiB2YWxpZGF0ZSgpIHsKICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwogICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICAgICAgICB3YXJuKCdldmVudHMgcHJvcCBhbmQgY29uZmlnIHdpbGwgYmUgZGVwcmVjYXRlZCBpbiBmdXR1cmUgdmVyc2lvbiBwbGVhc2UgdXNlIHRoZSBpbnRlcmFjdGlvbiBtb2RlcyBpbnN0ZWFkJyk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSwKICAgICAgImRlZmF1bHQiOiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICB2YXIgZXZlbnRzID0gZ2V0Q29uZmlnKCkuZXZlbnRzOwoKICAgICAgICBpZiAodHlwZW9mIGV2ZW50cyA9PT0gJ3N0cmluZycpIHsKICAgICAgICAgIHJldHVybiBldmVudHMuc3BsaXQoJ3wnKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBldmVudHM7CiAgICAgIH0KICAgIH0sCiAgICBydWxlczogewogICAgICB0eXBlOiBbT2JqZWN0LCBTdHJpbmddLAogICAgICAiZGVmYXVsdCI6IG51bGwKICAgIH0sCiAgICBpbW1lZGlhdGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgImRlZmF1bHQiOiBmYWxzZQogICAgfSwKICAgIHBlcnNpc3Q6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgImRlZmF1bHQiOiBmYWxzZQogICAgfSwKICAgIGJhaWxzOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgICJkZWZhdWx0IjogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIGdldENvbmZpZygpLmZhc3RFeGl0OwogICAgICB9CiAgICB9LAogICAgZGVib3VuY2U6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICAiZGVmYXVsdCI6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBnZXRDb25maWcoKS5kZWxheSB8fCAwOwogICAgICB9CiAgICB9LAogICAgdGFnOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgImRlZmF1bHQiOiAnc3BhbicKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBydWxlczogewogICAgICBkZWVwOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKHZhbCwgb2xkVmFsKSB7CiAgICAgICAgdGhpcy5fbmVlZHNWYWxpZGF0aW9uID0gIWlzRXF1YWwodmFsLCBvbGRWYWwpOwogICAgICB9CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbWVzc2FnZXM6IFtdLAogICAgICB2YWx1ZTogdW5kZWZpbmVkLAogICAgICBpbml0aWFsaXplZDogZmFsc2UsCiAgICAgIGluaXRpYWxWYWx1ZTogdW5kZWZpbmVkLAogICAgICBmbGFnczogY3JlYXRlRmxhZ3MoKSwKICAgICAgZmFpbGVkUnVsZXM6IHt9LAogICAgICBmb3JjZVJlcXVpcmVkOiBmYWxzZSwKICAgICAgaXNEZWFjdGl2YXRlZDogZmFsc2UsCiAgICAgIGlkOiBudWxsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGlzVmFsaWQ6IGZ1bmN0aW9uIGlzVmFsaWQoKSB7CiAgICAgIHJldHVybiB0aGlzLmZsYWdzLnZhbGlkOwogICAgfSwKICAgIGZpZWxkRGVwczogZnVuY3Rpb24gZmllbGREZXBzKCkgewogICAgICB2YXIgdGhpcyQxID0gdGhpczsKICAgICAgdmFyIHJ1bGVzID0gbm9ybWFsaXplUnVsZXModGhpcy5ydWxlcyk7CiAgICAgIHZhciBwcm92aWRlcnMgPSB0aGlzLiRfdmVlT2JzZXJ2ZXIucmVmczsKICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHJ1bGVzKS5maWx0ZXIoUnVsZUNvbnRhaW5lci5pc1RhcmdldFJ1bGUpLm1hcChmdW5jdGlvbiAocnVsZSkgewogICAgICAgIHZhciBkZXBOYW1lID0gcnVsZXNbcnVsZV1bMF07CiAgICAgICAgdmFyIHdhdGNoZXJOYW1lID0gIiRfXyIgKyBkZXBOYW1lOwoKICAgICAgICBpZiAoIWlzQ2FsbGFibGUodGhpcyQxW3dhdGNoZXJOYW1lXSkgJiYgcHJvdmlkZXJzW2RlcE5hbWVdKSB7CiAgICAgICAgICB0aGlzJDFbd2F0Y2hlck5hbWVdID0gcHJvdmlkZXJzW2RlcE5hbWVdLiR3YXRjaCgndmFsdWUnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGlmICh0aGlzJDEuZmxhZ3MudmFsaWRhdGVkKSB7CiAgICAgICAgICAgICAgdGhpcyQxLl9uZWVkc1ZhbGlkYXRpb24gPSB0cnVlOwogICAgICAgICAgICAgIHRoaXMkMS52YWxpZGF0ZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBkZXBOYW1lOwogICAgICB9KTsKICAgIH0sCiAgICBub3JtYWxpemVkRXZlbnRzOiBmdW5jdGlvbiBub3JtYWxpemVkRXZlbnRzKCkgewogICAgICB2YXIgdGhpcyQxID0gdGhpczsKICAgICAgdmFyIHJlZiA9IGNvbXB1dGVNb2RlU2V0dGluZyh0aGlzKTsKICAgICAgdmFyIG9uID0gcmVmLm9uOwogICAgICByZXR1cm4gbm9ybWFsaXplRXZlbnRzKG9uIHx8IHRoaXMuZXZlbnRzIHx8IFtdKS5tYXAoZnVuY3Rpb24gKGUpIHsKICAgICAgICBpZiAoZSA9PT0gJ2lucHV0JykgewogICAgICAgICAgcmV0dXJuIHRoaXMkMS5faW5wdXRFdmVudE5hbWU7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZTsKICAgICAgfSk7CiAgICB9LAogICAgaXNSZXF1aXJlZDogZnVuY3Rpb24gaXNSZXF1aXJlZCgpIHsKICAgICAgdmFyIHJ1bGVzID0gbm9ybWFsaXplUnVsZXModGhpcy5ydWxlcyk7CiAgICAgIHZhciBmb3JjZVJlcXVpcmVkID0gdGhpcy5mb3JjZVJlcXVpcmVkOwogICAgICB2YXIgaXNSZXF1aXJlZCA9IHJ1bGVzLnJlcXVpcmVkIHx8IGZvcmNlUmVxdWlyZWQ7CiAgICAgIHRoaXMuZmxhZ3MucmVxdWlyZWQgPSBpc1JlcXVpcmVkOwogICAgICByZXR1cm4gaXNSZXF1aXJlZDsKICAgIH0sCiAgICBjbGFzc2VzOiBmdW5jdGlvbiBjbGFzc2VzKCkgewogICAgICB2YXIgdGhpcyQxID0gdGhpczsKICAgICAgdmFyIG5hbWVzID0gZ2V0Q29uZmlnKCkuY2xhc3NOYW1lczsKICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuZmxhZ3MpLnJlZHVjZShmdW5jdGlvbiAoY2xhc3NlcywgZmxhZykgewogICAgICAgIHZhciBjbGFzc05hbWUgPSBuYW1lcyAmJiBuYW1lc1tmbGFnXSB8fCBmbGFnOwoKICAgICAgICBpZiAoaXNOdWxsT3JVbmRlZmluZWQodGhpcyQxLmZsYWdzW2ZsYWddKSkgewogICAgICAgICAgcmV0dXJuIGNsYXNzZXM7CiAgICAgICAgfQoKICAgICAgICBpZiAoY2xhc3NOYW1lKSB7CiAgICAgICAgICBjbGFzc2VzW2NsYXNzTmFtZV0gPSB0aGlzJDEuZmxhZ3NbZmxhZ107CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gY2xhc3NlczsKICAgICAgfSwge30pOwogICAgfQogIH0sCiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoaCkgewogICAgdmFyIHRoaXMkMSA9IHRoaXM7CiAgICB0aGlzLnJlZ2lzdGVyRmllbGQoKTsKICAgIHZhciBjdHggPSBjcmVhdGVWYWxpZGF0aW9uQ3R4KHRoaXMpOyAvLyBHcmFjZWZ1bGx5IGhhbmRsZSBub24tZXhpc3RlbnQgc2NvcGVkIHNsb3RzLgoKICAgIHZhciBzbG90ID0gdGhpcy4kc2NvcGVkU2xvdHNbImRlZmF1bHQiXTsKICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCgogICAgaWYgKCFpc0NhbGxhYmxlKHNsb3QpKSB7CiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7CiAgICAgICAgd2FybignVmFsaWRhdGlvblByb3ZpZGVyIGV4cGVjdHMgYSBzY29wZWQgc2xvdC4gRGlkIHlvdSBmb3JnZXQgdG8gYWRkICJzbG90LXNjb3BlIiB0byB5b3VyIHNsb3Q/Jyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBoKHRoaXMudGFnLCB0aGlzLiRzbG90c1siZGVmYXVsdCJdKTsKICAgIH0KCiAgICB2YXIgbm9kZXMgPSBzbG90KGN0eCk7IC8vIEhhbmRsZSBzaW5nbGUtcm9vdCBzbG90LgoKICAgIGV4dHJhY3RWTm9kZXMobm9kZXMpLmZvckVhY2goZnVuY3Rpb24gKGlucHV0KSB7CiAgICAgIGFkZExpc3RlbmVycy5jYWxsKHRoaXMkMSwgaW5wdXQpOwogICAgfSk7CiAgICByZXR1cm4gaCh0aGlzLnRhZywgbm9kZXMpOwogIH0sCiAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHsKICAgIC8vIGNsZWFudXAgcmVmZXJlbmNlLgogICAgdGhpcy4kX3ZlZU9ic2VydmVyLnVuc3Vic2NyaWJlKHRoaXMpOwogIH0sCiAgYWN0aXZhdGVkOiBmdW5jdGlvbiBhY3RpdmF0ZWQoKSB7CiAgICB0aGlzLiRfdmVlT2JzZXJ2ZXIuc3Vic2NyaWJlKHRoaXMpOwogICAgdGhpcy5pc0RlYWN0aXZhdGVkID0gZmFsc2U7CiAgfSwKICBkZWFjdGl2YXRlZDogZnVuY3Rpb24gZGVhY3RpdmF0ZWQoKSB7CiAgICB0aGlzLiRfdmVlT2JzZXJ2ZXIudW5zdWJzY3JpYmUodGhpcyk7CiAgICB0aGlzLmlzRGVhY3RpdmF0ZWQgPSB0cnVlOwogIH0sCiAgbWV0aG9kczogewogICAgc2V0RmxhZ3M6IGZ1bmN0aW9uIHNldEZsYWdzKGZsYWdzKSB7CiAgICAgIHZhciB0aGlzJDEgPSB0aGlzOwogICAgICBPYmplY3Qua2V5cyhmbGFncykuZm9yRWFjaChmdW5jdGlvbiAoZmxhZykgewogICAgICAgIHRoaXMkMS5mbGFnc1tmbGFnXSA9IGZsYWdzW2ZsYWddOwogICAgICB9KTsKICAgIH0sCiAgICBzeW5jVmFsdWU6IGZ1bmN0aW9uIHN5bmNWYWx1ZShlKSB7CiAgICAgIHZhciB2YWx1ZSA9IG5vcm1hbGl6ZVZhbHVlJDEoZSk7CiAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKICAgICAgdGhpcy5mbGFncy5jaGFuZ2VkID0gdGhpcy5pbml0aWFsVmFsdWUgIT09IHZhbHVlOwogICAgfSwKICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHsKICAgICAgdGhpcy5tZXNzYWdlcyA9IFtdOwogICAgICB0aGlzLl9wZW5kaW5nVmFsaWRhdGlvbiA9IG51bGw7CiAgICAgIHRoaXMuaW5pdGlhbFZhbHVlID0gdGhpcy52YWx1ZTsKICAgICAgdmFyIGZsYWdzID0gY3JlYXRlRmxhZ3MoKTsKICAgICAgdGhpcy5zZXRGbGFncyhmbGFncyk7CiAgICB9LAogICAgdmFsaWRhdGU6IGZ1bmN0aW9uIHZhbGlkYXRlKCkgewogICAgICB2YXIgdGhpcyQxID0gdGhpczsKICAgICAgdmFyIGFyZ3MgPSBbXSwKICAgICAgICAgIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7CgogICAgICB3aGlsZSAobGVuLS0pIHsKICAgICAgICBhcmdzW2xlbl0gPSBhcmd1bWVudHNbbGVuXTsKICAgICAgfQoKICAgICAgaWYgKGFyZ3MubGVuZ3RoID4gMCkgewogICAgICAgIHRoaXMuc3luY1ZhbHVlKGFyZ3NbMF0pOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy52YWxpZGF0ZVNpbGVudCgpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgIHRoaXMkMS5hcHBseVJlc3VsdChyZXN1bHQpOwogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgIH0pOwogICAgfSwKICAgIHZhbGlkYXRlU2lsZW50OiBmdW5jdGlvbiB2YWxpZGF0ZVNpbGVudCgpIHsKICAgICAgdmFyIHRoaXMkMSA9IHRoaXM7CiAgICAgIHRoaXMuc2V0RmxhZ3MoewogICAgICAgIHBlbmRpbmc6IHRydWUKICAgICAgfSk7CiAgICAgIHJldHVybiAkdmFsaWRhdG9yLnZlcmlmeSh0aGlzLnZhbHVlLCB0aGlzLnJ1bGVzLCB7CiAgICAgICAgbmFtZTogdGhpcy5uYW1lLAogICAgICAgIHZhbHVlczogY3JlYXRlVmFsdWVzTG9va3VwKHRoaXMpLAogICAgICAgIGJhaWxzOiB0aGlzLmJhaWxzCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgIHRoaXMkMS5zZXRGbGFncyh7CiAgICAgICAgICBwZW5kaW5nOiBmYWxzZQogICAgICAgIH0pOwoKICAgICAgICBpZiAoIXRoaXMkMS5pc1JlcXVpcmVkKSB7CiAgICAgICAgICB0aGlzJDEuc2V0RmxhZ3MoewogICAgICAgICAgICB2YWxpZDogcmVzdWx0LnZhbGlkLAogICAgICAgICAgICBpbnZhbGlkOiAhcmVzdWx0LnZhbGlkCiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgIH0pOwogICAgfSwKICAgIGFwcGx5UmVzdWx0OiBmdW5jdGlvbiBhcHBseVJlc3VsdChyZWYpIHsKICAgICAgdmFyIGVycm9ycyA9IHJlZi5lcnJvcnM7CiAgICAgIHZhciBmYWlsZWRSdWxlcyA9IHJlZi5mYWlsZWRSdWxlczsKICAgICAgdGhpcy5tZXNzYWdlcyA9IGVycm9yczsKICAgICAgdGhpcy5mYWlsZWRSdWxlcyA9IGFzc2lnbih7fSwgZmFpbGVkUnVsZXMpOwogICAgICB0aGlzLnNldEZsYWdzKHsKICAgICAgICB2YWxpZDogIWVycm9ycy5sZW5ndGgsCiAgICAgICAgY2hhbmdlZDogdGhpcy52YWx1ZSAhPT0gdGhpcy5pbml0aWFsVmFsdWUsCiAgICAgICAgaW52YWxpZDogISFlcnJvcnMubGVuZ3RoLAogICAgICAgIHZhbGlkYXRlZDogdHJ1ZQogICAgICB9KTsKICAgIH0sCiAgICByZWdpc3RlckZpZWxkOiBmdW5jdGlvbiByZWdpc3RlckZpZWxkKCkgewogICAgICBpZiAoISR2YWxpZGF0b3IpIHsKICAgICAgICAkdmFsaWRhdG9yID0gZ2V0VmFsaWRhdG9yKCkgfHwgbmV3IFZhbGlkYXRvcihudWxsLCB7CiAgICAgICAgICBmYXN0RXhpdDogZ2V0Q29uZmlnKCkuZmFzdEV4aXQKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgdXBkYXRlUmVuZGVyaW5nQ29udGV4dFJlZnModGhpcyk7CiAgICB9CiAgfQp9Owp2YXIgZmxhZ01lcmdpbmdTdHJhdGVneSA9IHsKICBwcmlzdGluZTogJ2V2ZXJ5JywKICBkaXJ0eTogJ3NvbWUnLAogIHRvdWNoZWQ6ICdzb21lJywKICB1bnRvdWNoZWQ6ICdldmVyeScsCiAgdmFsaWQ6ICdldmVyeScsCiAgaW52YWxpZDogJ3NvbWUnLAogIHBlbmRpbmc6ICdzb21lJywKICB2YWxpZGF0ZWQ6ICdldmVyeScKfTsKCmZ1bmN0aW9uIG1lcmdlRmxhZ3MobGhzLCByaHMsIHN0cmF0ZWd5KSB7CiAgdmFyIHN0cmF0TmFtZSA9IGZsYWdNZXJnaW5nU3RyYXRlZ3lbc3RyYXRlZ3ldOwogIHJldHVybiBbbGhzLCByaHNdW3N0cmF0TmFtZV0oZnVuY3Rpb24gKGYpIHsKICAgIHJldHVybiBmOwogIH0pOwp9Cgp2YXIgT0JTRVJWRVJfQ09VTlRFUiA9IDA7CnZhciBWYWxpZGF0aW9uT2JzZXJ2ZXIgPSB7CiAgbmFtZTogJ1ZhbGlkYXRpb25PYnNlcnZlcicsCiAgcHJvdmlkZTogZnVuY3Rpb24gcHJvdmlkZSgpIHsKICAgIHJldHVybiB7CiAgICAgICRfdmVlT2JzZXJ2ZXI6IHRoaXMKICAgIH07CiAgfSwKICBpbmplY3Q6IHsKICAgICRfdmVlT2JzZXJ2ZXI6IHsKICAgICAgZnJvbTogJyRfdmVlT2JzZXJ2ZXInLAogICAgICAiZGVmYXVsdCI6IGZ1bmN0aW9uIGRlZmF1bHQkMSgpIHsKICAgICAgICBpZiAoIXRoaXMuJHZub2RlLmNvbnRleHQuJF92ZWVPYnNlcnZlcikgewogICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdGhpcy4kdm5vZGUuY29udGV4dC4kX3ZlZU9ic2VydmVyOwogICAgICB9CiAgICB9CiAgfSwKICBwcm9wczogewogICAgdGFnOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgImRlZmF1bHQiOiAnc3BhbicKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB2aWQ6ICJvYnNfIiArIE9CU0VSVkVSX0NPVU5URVIrKywKICAgICAgcmVmczoge30sCiAgICAgIG9ic2VydmVyczogW10KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgY3R4OiBmdW5jdGlvbiBjdHgoKSB7CiAgICAgIHZhciB0aGlzJDEgPSB0aGlzOwogICAgICB2YXIgY3R4ID0gewogICAgICAgIGVycm9yczoge30sCiAgICAgICAgdmFsaWRhdGU6IGZ1bmN0aW9uIHZhbGlkYXRlKGFyZykgewogICAgICAgICAgdmFyIHByb21pc2UgPSB0aGlzJDEudmFsaWRhdGUoYXJnKTsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHRoZW46IGZ1bmN0aW9uIHRoZW4odGhlbmFibGUpIHsKICAgICAgICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgIGlmIChzdWNjZXNzICYmIGlzQ2FsbGFibGUodGhlbmFibGUpKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhlbmFibGUoKSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShzdWNjZXNzKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfTsKICAgICAgICB9LAogICAgICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHsKICAgICAgICAgIHJldHVybiB0aGlzJDEucmVzZXQoKTsKICAgICAgICB9CiAgICAgIH07CiAgICAgIHJldHVybiB2YWx1ZXModGhpcy5yZWZzKS5jb25jYXQodGhpcy5vYnNlcnZlcnMpLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBwcm92aWRlcikgewogICAgICAgIE9iamVjdC5rZXlzKGZsYWdNZXJnaW5nU3RyYXRlZ3kpLmZvckVhY2goZnVuY3Rpb24gKGZsYWcpIHsKICAgICAgICAgIHZhciBmbGFncyA9IHByb3ZpZGVyLmZsYWdzIHx8IHByb3ZpZGVyLmN0eDsKCiAgICAgICAgICBpZiAoIShmbGFnIGluIGFjYykpIHsKICAgICAgICAgICAgYWNjW2ZsYWddID0gZmxhZ3NbZmxhZ107CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBhY2NbZmxhZ10gPSBtZXJnZUZsYWdzKGFjY1tmbGFnXSwgZmxhZ3NbZmxhZ10sIGZsYWcpOwogICAgICAgIH0pOwogICAgICAgIGFjYy5lcnJvcnNbcHJvdmlkZXIudmlkXSA9IHByb3ZpZGVyLm1lc3NhZ2VzIHx8IHZhbHVlcyhwcm92aWRlci5jdHguZXJyb3JzKS5yZWR1Y2UoZnVuY3Rpb24gKGVycnMsIG9ic0Vycm9ycykgewogICAgICAgICAgcmV0dXJuIGVycnMuY29uY2F0KG9ic0Vycm9ycyk7CiAgICAgICAgfSwgW10pOwogICAgICAgIHJldHVybiBhY2M7CiAgICAgIH0sIGN0eCk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgaWYgKHRoaXMuJF92ZWVPYnNlcnZlcikgewogICAgICB0aGlzLiRfdmVlT2JzZXJ2ZXIuc3Vic2NyaWJlKHRoaXMsICdvYnNlcnZlcicpOwogICAgfQogIH0sCiAgYWN0aXZhdGVkOiBmdW5jdGlvbiBhY3RpdmF0ZWQoKSB7CiAgICBpZiAodGhpcy4kX3ZlZU9ic2VydmVyKSB7CiAgICAgIHRoaXMuJF92ZWVPYnNlcnZlci5zdWJzY3JpYmUodGhpcywgJ29ic2VydmVyJyk7CiAgICB9CiAgfSwKICBkZWFjdGl2YXRlZDogZnVuY3Rpb24gZGVhY3RpdmF0ZWQoKSB7CiAgICBpZiAodGhpcy4kX3ZlZU9ic2VydmVyKSB7CiAgICAgIHRoaXMuJF92ZWVPYnNlcnZlci51bnN1YnNjcmliZSh0aGlzLCAnb2JzZXJ2ZXInKTsKICAgIH0KICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICBpZiAodGhpcy4kX3ZlZU9ic2VydmVyKSB7CiAgICAgIHRoaXMuJF92ZWVPYnNlcnZlci51bnN1YnNjcmliZSh0aGlzLCAnb2JzZXJ2ZXInKTsKICAgIH0KICB9LAogIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKGgpIHsKICAgIHZhciBzbG90cyA9IHRoaXMuJHNjb3BlZFNsb3RzWyJkZWZhdWx0Il07CiAgICB0aGlzLl9wZXJzaXN0ZWRTdG9yZSA9IHRoaXMuX3BlcnNpc3RlZFN0b3JlIHx8IHt9OwoKICAgIGlmICghaXNDYWxsYWJsZShzbG90cykpIHsKICAgICAgcmV0dXJuIGgodGhpcy50YWcsIHRoaXMuJHNsb3RzWyJkZWZhdWx0Il0pOwogICAgfQoKICAgIHJldHVybiBoKHRoaXMudGFnLCB7CiAgICAgIG9uOiB0aGlzLiRsaXN0ZW5lcnMsCiAgICAgIGF0dHJzOiB0aGlzLiRhdHRycwogICAgfSwgc2xvdHModGhpcy5jdHgpKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHN1YnNjcmliZTogZnVuY3Rpb24gc3Vic2NyaWJlKHN1YnNjcmliZXIsIGtpbmQpIHsKICAgICAgdmFyIG9iajsKICAgICAgaWYgKGtpbmQgPT09IHZvaWQgMCkga2luZCA9ICdwcm92aWRlcic7CgogICAgICBpZiAoa2luZCA9PT0gJ29ic2VydmVyJykgewogICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2goc3Vic2NyaWJlcik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLnJlZnMgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnJlZnMsIChvYmogPSB7fSwgb2JqW3N1YnNjcmliZXIudmlkXSA9IHN1YnNjcmliZXIsIG9iaikpOwoKICAgICAgaWYgKHN1YnNjcmliZXIucGVyc2lzdCAmJiB0aGlzLl9wZXJzaXN0ZWRTdG9yZVtzdWJzY3JpYmVyLnZpZF0pIHsKICAgICAgICB0aGlzLnJlc3RvcmVQcm92aWRlclN0YXRlKHN1YnNjcmliZXIpOwogICAgICB9CiAgICB9LAogICAgdW5zdWJzY3JpYmU6IGZ1bmN0aW9uIHVuc3Vic2NyaWJlKHJlZiwga2luZCkgewogICAgICB2YXIgdmlkID0gcmVmLnZpZDsKICAgICAgaWYgKGtpbmQgPT09IHZvaWQgMCkga2luZCA9ICdwcm92aWRlcic7CgogICAgICBpZiAoa2luZCA9PT0gJ3Byb3ZpZGVyJykgewogICAgICAgIHRoaXMucmVtb3ZlUHJvdmlkZXIodmlkKTsKICAgICAgfQoKICAgICAgdmFyIGlkeCA9IGZpbmRJbmRleCh0aGlzLm9ic2VydmVycywgZnVuY3Rpb24gKG8pIHsKICAgICAgICByZXR1cm4gby52aWQgPT09IHZpZDsKICAgICAgfSk7CgogICAgICBpZiAoaWR4ICE9PSAtMSkgewogICAgICAgIHRoaXMub2JzZXJ2ZXJzLnNwbGljZShpZHgsIDEpOwogICAgICB9CiAgICB9LAogICAgdmFsaWRhdGU6IGZ1bmN0aW9uIHZhbGlkYXRlKHJlZikgewogICAgICBpZiAocmVmID09PSB2b2lkIDApIHJlZiA9IHsKICAgICAgICBzaWxlbnQ6IGZhbHNlCiAgICAgIH07CiAgICAgIHZhciBzaWxlbnQgPSByZWYuc2lsZW50OwogICAgICByZXR1cm4gUHJvbWlzZS5hbGwodmFsdWVzKHRoaXMucmVmcykubWFwKGZ1bmN0aW9uIChyZWYpIHsKICAgICAgICByZXR1cm4gcmVmW3NpbGVudCA/ICd2YWxpZGF0ZVNpbGVudCcgOiAndmFsaWRhdGUnXSgpLnRoZW4oZnVuY3Rpb24gKHIpIHsKICAgICAgICAgIHJldHVybiByLnZhbGlkOwogICAgICAgIH0pOwogICAgICB9KS5jb25jYXQodGhpcy5vYnNlcnZlcnMubWFwKGZ1bmN0aW9uIChvYnMpIHsKICAgICAgICByZXR1cm4gb2JzLnZhbGlkYXRlKHsKICAgICAgICAgIHNpbGVudDogc2lsZW50CiAgICAgICAgfSk7CiAgICAgIH0pKSkudGhlbihmdW5jdGlvbiAocmVzdWx0cykgewogICAgICAgIHJldHVybiByZXN1bHRzLmV2ZXJ5KGZ1bmN0aW9uIChyKSB7CiAgICAgICAgICByZXR1cm4gcjsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkgewogICAgICByZXR1cm4gdmFsdWVzKHRoaXMucmVmcykuY29uY2F0KHRoaXMub2JzZXJ2ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uIChyZWYpIHsKICAgICAgICByZXR1cm4gcmVmLnJlc2V0KCk7CiAgICAgIH0pOwogICAgfSwKICAgIHJlc3RvcmVQcm92aWRlclN0YXRlOiBmdW5jdGlvbiByZXN0b3JlUHJvdmlkZXJTdGF0ZShwcm92aWRlcikgewogICAgICB2YXIgc3RhdGUgPSB0aGlzLl9wZXJzaXN0ZWRTdG9yZVtwcm92aWRlci52aWRdOwogICAgICBwcm92aWRlci5zZXRGbGFncyhzdGF0ZS5mbGFncyk7CiAgICAgIHByb3ZpZGVyLmFwcGx5UmVzdWx0KHN0YXRlKTsKICAgICAgZGVsZXRlIHRoaXMuX3BlcnNpc3RlZFN0b3JlW3Byb3ZpZGVyLnZpZF07CiAgICB9LAogICAgcmVtb3ZlUHJvdmlkZXI6IGZ1bmN0aW9uIHJlbW92ZVByb3ZpZGVyKHZpZCkgewogICAgICB2YXIgcHJvdmlkZXIgPSB0aGlzLnJlZnNbdmlkXTsgLy8gc2F2ZSBpdCBmb3IgdGhlIG5leHQgdGltZS4KCiAgICAgIGlmIChwcm92aWRlciAmJiBwcm92aWRlci5wZXJzaXN0KSB7CiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi8KICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgewogICAgICAgICAgaWYgKHZpZC5pbmRleE9mKCdfdmVlXycpID09PSAwKSB7CiAgICAgICAgICAgIHdhcm4oJ1BsZWFzZSBwcm92aWRlIGEgYHZpZGAgcHJvcCB3aGVuIHVzaW5nIGBwZXJzaXN0YCwgdGhlcmUgbWlnaHQgYmUgdW5leHBlY3RlZCBpc3N1ZXMgb3RoZXJ3aXNlLicpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdGhpcy5fcGVyc2lzdGVkU3RvcmVbdmlkXSA9IHsKICAgICAgICAgIGZsYWdzOiBwcm92aWRlci5mbGFncywKICAgICAgICAgIGVycm9yczogcHJvdmlkZXIubWVzc2FnZXMsCiAgICAgICAgICBmYWlsZWRSdWxlczogcHJvdmlkZXIuZmFpbGVkUnVsZXMKICAgICAgICB9OwogICAgICB9CgogICAgICB0aGlzLiRkZWxldGUodGhpcy5yZWZzLCB2aWQpOwogICAgfQogIH0KfTsKCmZ1bmN0aW9uIHdpdGhWYWxpZGF0aW9uKGNvbXBvbmVudCwgY3R4VG9Qcm9wcykgewogIGlmIChjdHhUb1Byb3BzID09PSB2b2lkIDApIGN0eFRvUHJvcHMgPSBudWxsOwogIHZhciBvcHRpb25zID0gaXNDYWxsYWJsZShjb21wb25lbnQpID8gY29tcG9uZW50Lm9wdGlvbnMgOiBjb21wb25lbnQ7CiAgb3B0aW9ucy4kX192ZWVJbmplY3QgPSBmYWxzZTsKICB2YXIgaG9jID0gewogICAgbmFtZTogKG9wdGlvbnMubmFtZSB8fCAnQW5vbnltb3VzSG9jJykgKyAiV2l0aFZhbGlkYXRpb24iLAogICAgcHJvcHM6IGFzc2lnbih7fSwgVmFsaWRhdGlvblByb3ZpZGVyLnByb3BzKSwKICAgIGRhdGE6IFZhbGlkYXRpb25Qcm92aWRlci5kYXRhLAogICAgY29tcHV0ZWQ6IGFzc2lnbih7fSwgVmFsaWRhdGlvblByb3ZpZGVyLmNvbXB1dGVkKSwKICAgIG1ldGhvZHM6IGFzc2lnbih7fSwgVmFsaWRhdGlvblByb3ZpZGVyLm1ldGhvZHMpLAogICAgJF9fdmVlSW5qZWN0OiBmYWxzZSwKICAgIGJlZm9yZURlc3Ryb3k6IFZhbGlkYXRpb25Qcm92aWRlci5iZWZvcmVEZXN0cm95LAogICAgaW5qZWN0OiBWYWxpZGF0aW9uUHJvdmlkZXIuaW5qZWN0CiAgfTsgLy8gRGVmYXVsdCBjdHggY29udmVydHMgY3R4IHByb3BzIHRvIGNvbXBvbmVudCBwcm9wcy4KCiAgaWYgKCFjdHhUb1Byb3BzKSB7CiAgICBjdHhUb1Byb3BzID0gZnVuY3Rpb24gY3R4VG9Qcm9wcyhjdHgpIHsKICAgICAgcmV0dXJuIGN0eDsKICAgIH07CiAgfQoKICB2YXIgZXZlbnROYW1lID0gb3B0aW9ucy5tb2RlbCAmJiBvcHRpb25zLm1vZGVsLmV2ZW50IHx8ICdpbnB1dCc7CgogIGhvYy5yZW5kZXIgPSBmdW5jdGlvbiAoaCkgewogICAgdmFyIG9iajsKICAgIHRoaXMucmVnaXN0ZXJGaWVsZCgpOwogICAgdmFyIHZjdHggPSBjcmVhdGVWYWxpZGF0aW9uQ3R4KHRoaXMpOwogICAgdmFyIGxpc3RlbmVycyA9IGFzc2lnbih7fSwgdGhpcy4kbGlzdGVuZXJzKTsKICAgIHZhciBtb2RlbCA9IGZpbmRNb2RlbCh0aGlzLiR2bm9kZSk7CiAgICB0aGlzLl9pbnB1dEV2ZW50TmFtZSA9IHRoaXMuX2lucHV0RXZlbnROYW1lIHx8IGdldElucHV0RXZlbnROYW1lKHRoaXMuJHZub2RlLCBtb2RlbCk7CiAgICBvblJlbmRlclVwZGF0ZS5jYWxsKHRoaXMsIG1vZGVsKTsKICAgIHZhciByZWYgPSBjcmVhdGVDb21tb25IYW5kbGVycyh0aGlzKTsKICAgIHZhciBvbklucHV0ID0gcmVmLm9uSW5wdXQ7CiAgICB2YXIgb25CbHVyID0gcmVmLm9uQmx1cjsKICAgIHZhciBvblZhbGlkYXRlID0gcmVmLm9uVmFsaWRhdGU7CiAgICBtZXJnZVZOb2RlTGlzdGVuZXJzKGxpc3RlbmVycywgZXZlbnROYW1lLCBvbklucHV0KTsKICAgIG1lcmdlVk5vZGVMaXN0ZW5lcnMobGlzdGVuZXJzLCAnYmx1cicsIG9uQmx1cik7CiAgICB0aGlzLm5vcm1hbGl6ZWRFdmVudHMuZm9yRWFjaChmdW5jdGlvbiAoZXZ0LCBpZHgpIHsKICAgICAgbWVyZ2VWTm9kZUxpc3RlbmVycyhsaXN0ZW5lcnMsIGV2dCwgb25WYWxpZGF0ZSk7CiAgICB9KTsgLy8gUHJvcHMgYXJlIGFueSBhdHRycyBub3QgYXNzb2NpYXRlZCB3aXRoIFZhbGlkYXRpb25Qcm92aWRlciBQbHVzIHRoZSBtb2RlbCBwcm9wLgogICAgLy8gV0FSTklORzogQWNjaWRlbnRhbCBwcm9wIG92ZXJ3cml0ZSB3aWxsIHByb2JhYmx5IGhhcHBlbi4KCiAgICB2YXIgcmVmJDEgPSBmaW5kTW9kZWxDb25maWcodGhpcy4kdm5vZGUpIHx8IHsKICAgICAgcHJvcDogJ3ZhbHVlJwogICAgfTsKICAgIHZhciBwcm9wID0gcmVmJDEucHJvcDsKICAgIHZhciBwcm9wcyA9IGFzc2lnbih7fSwgdGhpcy4kYXR0cnMsIChvYmogPSB7fSwgb2JqW3Byb3BdID0gbW9kZWwudmFsdWUsIG9iaiksIGN0eFRvUHJvcHModmN0eCkpOwogICAgcmV0dXJuIGgob3B0aW9ucywgewogICAgICBhdHRyczogdGhpcy4kYXR0cnMsCiAgICAgIHByb3BzOiBwcm9wcywKICAgICAgb246IGxpc3RlbmVycwogICAgfSwgbm9ybWFsaXplU2xvdHModGhpcy4kc2xvdHMsIHRoaXMuJHZub2RlLmNvbnRleHQpKTsKICB9OwoKICByZXR1cm4gaG9jOwp9Cgp2YXIgdmVyc2lvbiA9ICcyLjIuNyc7Ck9iamVjdC5rZXlzKFJ1bGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChydWxlKSB7CiAgVmFsaWRhdG9yLmV4dGVuZChydWxlLCBSdWxlc1tydWxlXS52YWxpZGF0ZSwgYXNzaWduKHt9LCBSdWxlc1tydWxlXS5vcHRpb25zLCB7CiAgICBwYXJhbU5hbWVzOiBSdWxlc1tydWxlXS5wYXJhbU5hbWVzCiAgfSkpOwp9KTsgLy8gTWVyZ2UgdGhlIGVuZ2xpc2ggbWVzc2FnZXMuCgpWYWxpZGF0b3IubG9jYWxpemUoewogIGVuOiBsb2NhbGUKfSk7CnZhciBpbnN0YWxsID0gVmVlVmFsaWRhdGUkMS5pbnN0YWxsOwpWZWVWYWxpZGF0ZSQxLnZlcnNpb24gPSB2ZXJzaW9uOwpWZWVWYWxpZGF0ZSQxLm1hcEZpZWxkcyA9IG1hcEZpZWxkczsKVmVlVmFsaWRhdGUkMS5WYWxpZGF0aW9uUHJvdmlkZXIgPSBWYWxpZGF0aW9uUHJvdmlkZXI7ClZlZVZhbGlkYXRlJDEuVmFsaWRhdGlvbk9ic2VydmVyID0gVmFsaWRhdGlvbk9ic2VydmVyOwpWZWVWYWxpZGF0ZSQxLndpdGhWYWxpZGF0aW9uID0gd2l0aFZhbGlkYXRpb247CmV4cG9ydCBkZWZhdWx0IFZlZVZhbGlkYXRlJDE7CmV4cG9ydCB7IGluc3RhbGwsIGRpcmVjdGl2ZSwgbWl4aW4sIG1hcEZpZWxkcywgVmFsaWRhdG9yLCBFcnJvckJhZywgUnVsZXMsIHZlcnNpb24sIFZhbGlkYXRpb25Qcm92aWRlciwgVmFsaWRhdGlvbk9ic2VydmVyLCB3aXRoVmFsaWRhdGlvbiB9Ow=="},{"version":3,"sources":["C:\\mine\\搭webpack环境\\so\\node_modules\\vee-validate\\dist\\vee-validate.esm.js"],"names":["isTextInput","includes","el","isCheckboxOrRadioInput","isDateInput","getDataAttribute","isNaN$1","Number","value","isNullOrUndefined","values","len","arguments","createFlags","untouched","touched","dirty","pristine","valid","invalid","validated","pending","required","changed","isEqual","lhs","rhs","Array","i","isObject","getScope","scope","form","getForm","getPath","def","path","prop","hasPath","obj","previousPath","isNullOrNonObject","isValidPath","reducer","process","parseRule","params","name","rule","debounce","wait","token","cancelled","args","later","timeout","fn","clearTimeout","setTimeout","appendRule","normalizeRules","rules","assign","prev","warn","parsedRule","console","createError","isCallable","hasClass","addClass","removeClass","reg","toggleClass","className","toArray","array","length","arrayLike","ensureArray","isEmptyArray","others","Object","target","to","arg","id","idTemplate","uniqId","newId","String","findIndex","predicate","find","idx","isBuiltInComponent","tag","vnode","makeDelayObject","e","delay","delayConfig","deepParseInt","parseInt","map","input","merge","source","obj$1","fillRulesFromElement","regex","pattern","timeFormat","parseSelector","selector","parts","collection","arr","defineNonReactive","configurable","writable","LOCALE","Dictionary","dictionary","prototypeAccessors","locale","message","dict","fallback","messages","attributes","drivers","en","custom","currentDriver","DictionaryResolver","implementation","ErrorBag","errorBag","Symbol","this$1","index","next","done","ref","error","item","filterFn","matchesScope","matchesVM","isSingleField","field","groupErrors","errors","isPrimary","isAlt","collected","primary","alt","match","condition","matches","shouldRemove","matchesRule","matchesName","isLast","DEFAULT_CONFIG","errorBagName","fieldsBagName","classes","classNames","events","inject","fastExit","aria","validity","mode","useConstraintAttrs","i18n","i18nRootKey","currentConfig","resolveConfig","selfConfig","getConfig","setConfig","d","findModel","children","extractChildren","candidates","extractVNodes","nodes","prevHandler","node","mergeVNodeListeners","addComponentNodeListener","addNativeNodeListener","findModelConfig","event","model","type","slots","Resolver","options","listen","binding","bails","vm","expression","component","getter","immediate","persist","initialValue","config","normalized","globalDelay","watchable","lazy","boundGetter","els","document","checkbox","elm","opt","RULES","RuleContainer","staticAccessors","validate","paramNames","isEvent","evt","normalizeEvents","evts","supportsPassive","detectPassiveSupport","opts","get","window","addEventListener","passive","DEFAULT_OPTIONS","targetOf","Field","prototypeAccessors$1","validator","isRequired","isDisabled","alias","rejectsFalse","matchesComponentId","defaults","flag","negated","flags","fields","r","ref$1","w","isReset","applyClasses","onBlur","inputEvent","onInput","unwatch","blurEvent","ctx","debouncedFn","addListener","applyAriaAttrs","FieldBag","items","itemsById","prototypeAccessors$2","matcher","ScopedValidator","base","prototypeAccessors$3","f","acc","vmId","attachOpts","Promise","VALIDATOR","getValidator","setValidator","requestsValidator","injections","mixin","provide","$validator","beforeCreate","requested","Vue","beforeDestroy","context","directive","bind","fieldOptions","inserted","findField","update","unbind","Validator","pluginContainer","_vm","$nextTick","cb","$emit","$off","prototypeAccessors$4","staticAccessors$1","hasChanged","mergedOpts","hasTarget","lang","oldFieldMatcher","fieldOpts","oldField","initial","result","uid","silent","fieldDescriptor","matched","validationPromise","providedValues","t","forceRequired","targetRules","targetKey","ruleMap","failedRules","validations","format","data","targetName","paramName","localizedName","hasKeys","dateFormat","allValid","msg","regenerate","fieldScope","fieldName","fullName","matchers","m","results","allErrors","curr","requireRules","ruleOptions","promises","isExitEarly","resolve","v","normalizeValue","normalizeFormat","I18nDictionary","prototypeAccessors$5","dataOptions","clone","localeKey","aggressive","on","eager","modes","VeeValidate$1","pluginInstance","prototypeAccessors$6","i18nDriver","staticAccessors$2","pendingPlugins","plugin","Rules","_Vue","onLocaleChanged","formatFileSize","units","threshold","size","Math","isDefinedGlobally","_default","after","inclusion","alpha","alpha_dash","alpha_num","alpha_spaces","before","between","min","max","confirmed","credit_card","date_between","date_format","decimal","decimals","digits","dimensions","width","height","email","excluded","ext","image","included","integer","ip","ip_or_fqdn","max_value","mimes","min_value","numeric","required_if","url","VeeValidate","dirtyNumber","number","isNaN","MILLISECONDS_IN_MINUTE","date","dirtyDate","baseTimezoneOffset","millisecondsPartOfTimezoneOffset","MILLISECONDS_IN_HOUR","MILLISECONDS_IN_MINUTE$1","DEFAULT_ADDITIONAL_DIGITS","patterns","dateTimeDelimeter","plainTime","timeZoneDelimeter","YY","YYY","YYYY","YYYYY","MM","DDD","MMDD","Www","WwwD","HH","HHMM","HHMMSS","timezone","timezoneZ","timezoneHH","timezoneHHMM","argument","dirtyOptions","additionalDigits","toInteger","dateStrings","splitDateString","parseYearResult","parseYear","year","restDateString","parseDate","timestamp","time","parseTime","offset","parseTimezone","getTimezoneOffsetInMilliseconds","dateString","timeString","patternYYY","patternYYYYY","yearString","centuryString","month","validateDate","dayOfYear","validateDayOfYearDate","day","week","validateWeekDate","dayOfISOWeekYear","dayOfWeek","hours","parseFloat","validateTime","minutes","seconds","validateTimezone","absoluteOffset","fourthOfJanuaryDay","diff","DAYS_IN_MONTH","DAYS_IN_MONTH_LEAP_YEAR","isLeapYear","isLeapYearIndex","toDate","amount","formatDistanceLocale","lessThanXSeconds","one","other","xSeconds","halfAMinute","lessThanXMinutes","xMinutes","aboutXHours","xHours","xDays","aboutXMonths","xMonths","aboutXYears","xYears","overXYears","almostXYears","count","dateFormats","full","medium","timeFormats","dateTimeFormats","formatLong","buildFormatLongFn","formats","defaultWidth","dateTime","formatRelativeLocale","lastWeek","yesterday","today","tomorrow","nextWeek","valuesArray","eraValues","narrow","abbreviated","wide","quarterValues","monthValues","dayValues","dayPeriodValues","am","pm","midnight","noon","morning","afternoon","evening","night","formattingDayPeriodValues","rem100","localize","ordinalNumber","era","buildLocalizeFn","quarter","argumentCallback","dayPeriod","formattingValues","defaulFormattingWidth","string","matchResult","matchedString","parseResult","rest","matchPattern","parsePatterns","findKey","object","matchOrdinalNumberPattern","parseOrdinalNumberPattern","matchEraPatterns","parseEraPatterns","any","matchQuarterPatterns","parseQuarterPatterns","matchMonthPatterns","parseMonthPatterns","matchDayPatterns","parseDayPatterns","matchDayPeriodPatterns","parseDayPeriodPatterns","buildMatchPatternFn","parsePattern","valueCallback","buildMatchFn","matchPatterns","defaultMatchWidth","defaultParseWidth","locale$1","formatDistance","formatRelative","weekStartsOn","firstWeekContainsDate","MILLISECONDS_IN_DAY","startOfYearTimestamp","difference","fourthOfJanuaryOfNextYear","startOfNextYear","startOfUTCISOWeek","fourthOfJanuaryOfThisYear","startOfThisYear","getUTCISOWeekYear","fourthOfJanuary","MILLISECONDS_IN_WEEK","startOfUTCISOWeekYear","localeWeekStartsOn","defaultWeekStartsOn","localeFirstWeekContainsDate","defaultFirstWeekContainsDate","firstWeekOfNextYear","startOfUTCWeek","firstWeekOfThisYear","getUTCWeekYear","firstWeek","MILLISECONDS_IN_WEEK$1","startOfUTCWeekYear","dayPeriodEnum","formatters","G","y","signedYear","twoDigitYear","addLeadingZeros","unit","Y","signedWeekYear","weekYear","R","isoWeekYear","u","Q","q","M","L","getUTCWeek","I","isoWeek","getUTCISOWeek","dayOfMonth","D","getUTCDayOfYear","E","localDayOfWeek","c","isoDayOfWeek","a","dayPeriodEnumValue","b","B","h","H","K","k","s","S","numberOfDigits","milliseconds","fractionalSeconds","X","originalDate","timezoneOffset","formatTimezoneWithOptionalMinutes","formatTimezone","x","O","formatTimezoneShort","z","T","sign","output","delimeter","dirtyDelimeter","absOffset","datePattern","timePattern","dateLongFormatter","dateTimeFormat","timeLongFormatter","longFormatters","p","P","dateTimeLongFormatter","addMilliseconds","protectedTokens","formattingTokensRegExp","longFormattingTokensRegExp","escapedStringRegExp","doubleQuoteRegExp","formatStr","isValid","utcDate","subMilliseconds","formatterOptions","_originalDate","firstCharacter","substring","longFormatter","cleanEscapedString","formatter","isProtectedToken","throwProtectedError","dateToCompare","dateLeft","dateRight","currentDay","remainder","dayIndex","MILLISECONDS_IN_HOUR$1","MILLISECONDS_IN_MINUTE$2","MILLISECONDS_IN_SECOND","numericPatterns","hour23h","hour24h","hour11h","hour12h","minute","second","singleDigit","twoDigits","threeDigits","fourDigits","anyDigitsSigned","singleDigitSigned","twoDigitsSigned","threeDigitsSigned","fourDigitsSigned","timezonePatterns","basicOptionalMinutes","basic","basicOptionalSeconds","extended","extendedOptionalSeconds","parseNumericPattern","isCommonEra","currentYear","absCurrentYear","rangeEnd","rangeEndCentury","isPreviousCentury","DAYS_IN_MONTH$1","DAYS_IN_MONTH_LEAP_YEAR$1","parsers","priority","parse","set","isTwoDigitYear","parseNDigits","normalizedTwoDigitYear","normalizeTwoDigitYear","parseNDigitsSigned","firstWeekOfYear","setUTCWeek","setUTCISOWeek","isLeapYearIndex$1","setUTCDay","wholeWeekDays","setUTCISODay","dayPeriodEnumToHours","isPM","parseTimezonePattern","parseAnyDigitsSigned","TIMEZONE_UNIT_PRIORITY","formattingTokensRegExp$1","escapedStringRegExp$1","doubleQuoteRegExp$1","notWhitespaceRegExp","formatString","subFnOptions","setters","tokens","parser","cleanEscapedString$1","uniquePrioritySetters","setter","setterArray","convertedDate","parsed","afterValidator","targetValue","parseDate$1","isAfter","isEqual$1","isDate","cs","da","de","es","fr","it","lt","nl","hu","pl","pt","ru","sk","sr","sv","tr","uk","ar","az","alphaSpaces","alphanumeric","alphaDash","paramNames$1","alpha$1","validate$1","paramNames$2","validate$2","paramNames$3","validate$3","paramNames$4","validate$4","isBefore","options$1","paramNames$5","validate$5","paramNames$6","validate$6","options$2","paramNames$7","exports","module","assertString_1","createCommonjsModule","_typeof","isString","invalidType","unwrapExports","isCreditCard_1","_assertString2","_interopRequireDefault","creditCard","sanitized","str","sum","digit","tmpNum","shouldDouble","isCreditCard","validate$7","validate$8","inclusivity","minDate","maxDate","dateVal","options$3","paramNames$8","validate$9","options$4","paramNames$9","validate$a","separator","regexPart","parsedValue","paramNames$a","validate$b","strVal","imageRegex","validateImage","URL","validate$c","images","file","merge_1","isByteLength_1","encodeURI","isFQDN_1","_merge2","default_fqdn_options","require_tld","allow_underscores","allow_trailing_dot","tld","_i","part","isFQDN","isIP_1","ipv4Maybe","ipv6Block","version","isIP","blocks","foundOmissionBlock","foundIPv4TransitionBlock","expectedNumberOfBlocks","isEmail_1","_isByteLength2","_isFQDN2","_isIP2","default_email_options","allow_display_name","require_display_name","allow_utf8_local_part","displayName","emailUserPart","gmailUserPart","quotedEmailUser","emailUserUtf8Part","quotedEmailUserUtf8","display_email","domain","user","lower_domain","username","_user_parts","noBracketdomain","user_parts","isEmail","exclude","validate$d","multiple","objectWithoutProperties","emailStr","validatorOptions","validate$e","validate$f","validate$g","extensions","validate$h","validate$i","validate$j","paramNames$b","validate$k","validate$l","is","validate$m","is_not","compare","validate$n","validate$o","validate$p","validate$q","validate$r","validate$s","validate$t","testValue","strValue","validate$u","paramNames$c","validate$v","invalidateFalse","validate$w","otherFieldVal","possibleVals","options$5","computesRequired","validate$x","nSize","isURL_1","default_url_options","protocols","require_protocol","require_host","require_valid_protocol","allow_protocol_relative_urls","wrapped_ipv6","host","isRegExp","protocol","auth","hostname","port","port_str","split","ipv6","ipv6_match","checkHost","isURL","validate$y","normalize","combine","mapper","mapScope","deep","isScope","mapFields","PROVIDER_COUNTER","reset","compute","validateNow","shouldValidate","onValidate","computeModeSetting","pendingPromise","getInputEventName","onRenderUpdate","createCommonHandlers","addVNodeListener","providers","vid","refs","subscribe","unsubscribe","ValidationProvider","$__veeInject","$_veeObserver","from","createObserver","props","watch","handler","initialized","isDeactivated","computed","fieldDeps","depName","watcherName","normalizedEvents","names","render","createValidationCtx","slot","addListeners","activated","deactivated","methods","setFlags","syncValue","normalizeValue$1","validateSilent","createValuesLookup","applyResult","registerField","updateRenderingContextRefs","flagMergingStrategy","stratName","OBSERVER_COUNTER","ValidationObserver","observers","promise","then","success","thenable","provider","mergeFlags","errs","created","attrs","$attrs","kind","subscriber","o","restoreProviderState","state","removeProvider","ctxToProps","hoc","eventName","vctx","listeners","normalizeSlots","install"],"mappings":"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","sourcesContent":["/**\n  * vee-validate v2.2.7\n  * (c) 2019 Abdelrahman Awad\n  * @license MIT\n  */\n// \n\nvar isTextInput = function (el) {\n  return includes(['text', 'password', 'search', 'email', 'tel', 'url', 'textarea', 'number'], el.type);\n};\n\nvar isCheckboxOrRadioInput = function (el) {\n  return includes(['radio', 'checkbox'], el.type);\n};\n\nvar isDateInput = function (el) {\n  return includes(['date', 'week', 'month', 'datetime-local', 'time'], el.type);\n};\n\n/**\n * Gets the data attribute. the name must be kebab-case.\n */\nvar getDataAttribute = function (el, name) { return el.getAttribute((\"data-vv-\" + name)); };\n\nvar isNaN$1 = function (value) {\n  if ('isNaN' in Number) {\n    return Number.isNaN(value);\n  }\n\n  // eslint-disable-next-line\n  return value === value;\n};\n\n/**\n * Checks if the values are either null or undefined.\n */\nvar isNullOrUndefined = function () {\n  var values = [], len = arguments.length;\n  while ( len-- ) values[ len ] = arguments[ len ];\n\n  return values.every(function (value) {\n    return value === null || value === undefined;\n  });\n};\n\n/**\n * Creates the default flags object.\n */\nvar createFlags = function () { return ({\n  untouched: true,\n  touched: false,\n  dirty: false,\n  pristine: true,\n  valid: null,\n  invalid: null,\n  validated: false,\n  pending: false,\n  required: false,\n  changed: false\n}); };\n\n/**\n * Shallow object comparison.\n */\nvar isEqual = function (lhs, rhs) {\n  if (lhs instanceof RegExp && rhs instanceof RegExp) {\n    return isEqual(lhs.source, rhs.source) && isEqual(lhs.flags, rhs.flags);\n  }\n\n  if (Array.isArray(lhs) && Array.isArray(rhs)) {\n    if (lhs.length !== rhs.length) { return false; }\n\n    for (var i = 0; i < lhs.length; i++) {\n      if (!isEqual(lhs[i], rhs[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  // if both are objects, compare each key recursively.\n  if (isObject(lhs) && isObject(rhs)) {\n    return Object.keys(lhs).every(function (key) {\n      return isEqual(lhs[key], rhs[key]);\n    }) && Object.keys(rhs).every(function (key) {\n      return isEqual(lhs[key], rhs[key]);\n    });\n  }\n\n  if (isNaN$1(lhs) && isNaN$1(rhs)) {\n    return true;\n  }\n\n  return lhs === rhs;\n};\n\n/**\n * Determines the input field scope.\n */\nvar getScope = function (el) {\n  var scope = getDataAttribute(el, 'scope');\n  if (isNullOrUndefined(scope)) {\n    var form = getForm(el);\n\n    if (form) {\n      scope = getDataAttribute(form, 'scope');\n    }\n  }\n\n  return !isNullOrUndefined(scope) ? scope : null;\n};\n\n/**\n * Get the closest form element.\n */\nvar getForm = function (el) {\n  if (isNullOrUndefined(el)) { return null; }\n\n  if (el.tagName === 'FORM') { return el; }\n\n  if (!isNullOrUndefined(el.form)) { return el.form; }\n\n  return !isNullOrUndefined(el.parentNode) ? getForm(el.parentNode) : null;\n};\n\n/**\n * Gets the value in an object safely.\n */\nvar getPath = function (path, target, def) {\n  if ( def === void 0 ) def = undefined;\n\n  if (!path || !target) { return def; }\n\n  var value = target;\n  path.split('.').every(function (prop) {\n    if (prop in value) {\n      value = value[prop];\n\n      return true;\n    }\n\n    value = def;\n\n    return false;\n  });\n\n  return value;\n};\n\n/**\n * Checks if path exists within an object.\n */\nvar hasPath = function (path, target) {\n  var obj = target;\n  var previousPath = null;\n  var isNullOrNonObject = false;\n  var isValidPath = path.split('.').reduce(function (reducer, prop) {\n    if (obj == null || typeof obj !== 'object') {\n      isNullOrNonObject = true;\n      return reducer && false;\n    }\n\n    if (prop in obj) {\n      obj = obj[prop];\n      previousPath = previousPath === null ? prop : previousPath + '.' + prop;\n\n      return reducer && true;\n    }\n\n    return reducer && false;\n  }, true);\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (isNullOrNonObject) {\n      throw new Error(previousPath + ' is not an object');\n    }\n  }\n\n  return isValidPath;\n};\n\n/**\n * Parses a rule string expression.\n */\nvar parseRule = function (rule) {\n  var params = [];\n  var name = rule.split(':')[0];\n\n  if (includes(rule, ':')) {\n    params = rule.split(':').slice(1).join(':').split(',');\n  }\n\n  return { name: name, params: params };\n};\n\n/**\n * Debounces a function.\n */\nvar debounce = function (fn, wait, token) {\n  if ( wait === void 0 ) wait = 0;\n  if ( token === void 0 ) token = { cancelled: false };\n\n  if (wait === 0) {\n    return fn;\n  }\n\n  var timeout;\n\n  return function () {\n    var args = [], len = arguments.length;\n    while ( len-- ) args[ len ] = arguments[ len ];\n\n    var later = function () {\n      timeout = null;\n\n      // check if the fn call was cancelled.\n      if (!token.cancelled) { fn.apply(void 0, args); }\n    };\n\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (!timeout) { fn.apply(void 0, args); }\n  };\n};\n\n/**\n * Appends a rule definition to a list of rules.\n */\nvar appendRule = function (rule, rules) {\n  if (!rules) {\n    return normalizeRules(rule);\n  }\n\n  if (!rule) {\n    return normalizeRules(rules);\n  }\n\n  if (typeof rules === 'string') {\n    rules = normalizeRules(rules);\n  }\n\n  return assign({}, rules, normalizeRules(rule));\n};\n\n/**\n * Normalizes the given rules expression.\n */\nvar normalizeRules = function (rules) {\n  // if falsy value return an empty object.\n  if (!rules) {\n    return {};\n  }\n\n  if (isObject(rules)) {\n    // $FlowFixMe\n    return Object.keys(rules).reduce(function (prev, curr) {\n      var params = [];\n      // $FlowFixMe\n      if (rules[curr] === true) {\n        params = [];\n      } else if (Array.isArray(rules[curr])) {\n        params = rules[curr];\n      } else if (isObject(rules[curr])) {\n        params = rules[curr];\n      } else {\n        params = [rules[curr]];\n      }\n\n      // $FlowFixMe\n      if (rules[curr] !== false) {\n        prev[curr] = params;\n      }\n\n      return prev;\n    }, {});\n  }\n\n  if (typeof rules !== 'string') {\n    warn('rules must be either a string or an object.');\n    return {};\n  }\n\n  return rules.split('|').reduce(function (prev, rule) {\n    var parsedRule = parseRule(rule);\n    if (!parsedRule.name) {\n      return prev;\n    }\n\n    prev[parsedRule.name] = parsedRule.params;\n    return prev;\n  }, {});\n};\n\n/**\n * Emits a warning to the console.\n */\nvar warn = function (message) {\n  console.warn((\"[vee-validate] \" + message)); // eslint-disable-line\n};\n\n/**\n * Creates a branded error object.\n */\nvar createError = function (message) { return new Error((\"[vee-validate] \" + message)); };\n\n/**\n * Checks if the value is an object.\n */\nvar isObject = function (obj) { return obj !== null && obj && typeof obj === 'object' && ! Array.isArray(obj); };\n\n/**\n * Checks if a function is callable.\n */\nvar isCallable = function (func) { return typeof func === 'function'; };\n\n/**\n * Check if element has the css class on it.\n */\nvar hasClass = function (el, className) {\n  if (el.classList) {\n    return el.classList.contains(className);\n  }\n\n  return !!el.className.match(new RegExp((\"(\\\\s|^)\" + className + \"(\\\\s|$)\")));\n};\n\n/**\n * Adds the provided css className to the element.\n */\nvar addClass = function (el, className) {\n  if (el.classList) {\n    el.classList.add(className);\n    return;\n  }\n\n  if (!hasClass(el, className)) {\n    el.className += \" \" + className;\n  }\n};\n\n/**\n * Remove the provided css className from the element.\n */\nvar removeClass = function (el, className) {\n  if (el.classList) {\n    el.classList.remove(className);\n    return;\n  }\n\n  if (hasClass(el, className)) {\n    var reg = new RegExp((\"(\\\\s|^)\" + className + \"(\\\\s|$)\"));\n    el.className = el.className.replace(reg, ' ');\n  }\n};\n\n/**\n * Adds or removes a class name on the input depending on the status flag.\n */\nvar toggleClass = function (el, className, status) {\n  if (!el || !className) { return; }\n\n  if (Array.isArray(className)) {\n    className.forEach(function (item) { return toggleClass(el, item, status); });\n    return;\n  }\n\n  if (status) {\n    return addClass(el, className);\n  }\n\n  removeClass(el, className);\n};\n\n/**\n * Converts an array-like object to array, provides a simple polyfill for Array.from\n */\nvar toArray = function (arrayLike) {\n  if (isCallable(Array.from)) {\n    return Array.from(arrayLike);\n  }\n\n  var array = [];\n  var length = arrayLike.length;\n  /* istanbul ignore next */\n  for (var i = 0; i < length; i++) {\n    array.push(arrayLike[i]);\n  }\n\n  /* istanbul ignore next */\n  return array;\n};\n\n/**\n * Converts an array-like object to array and place other elements in an array\n */\nvar ensureArray = function (arrayLike) {\n  if (Array.isArray(arrayLike)) {\n    return [].concat( arrayLike );\n  }\n  var array = toArray(arrayLike);\n  return isEmptyArray(array) ? [arrayLike] : array;\n};\n\n/**\n * Assign polyfill from the mdn.\n */\nvar assign = function (target) {\n  var others = [], len = arguments.length - 1;\n  while ( len-- > 0 ) others[ len ] = arguments[ len + 1 ];\n\n  /* istanbul ignore else */\n  if (isCallable(Object.assign)) {\n    return Object.assign.apply(Object, [ target ].concat( others ));\n  }\n\n  /* istanbul ignore next */\n  if (target == null) {\n    throw new TypeError('Cannot convert undefined or null to object');\n  }\n\n  /* istanbul ignore next */\n  var to = Object(target);\n  /* istanbul ignore next */\n  others.forEach(function (arg) {\n    // Skip over if undefined or null\n    if (arg != null) {\n      Object.keys(arg).forEach(function (key) {\n        to[key] = arg[key];\n      });\n    }\n  });\n  /* istanbul ignore next */\n  return to;\n};\n\nvar id = 0;\nvar idTemplate = '{id}';\n\n/**\n * Generates a unique id.\n */\nvar uniqId = function () {\n  // handle too many uses of uniqId, although unlikely.\n  if (id >= 9999) {\n    id = 0;\n    // shift the template.\n    idTemplate = idTemplate.replace('{id}', '_{id}');\n  }\n\n  id++;\n  var newId = idTemplate.replace('{id}', String(id));\n\n  return newId;\n};\n\nvar findIndex = function (arrayLike, predicate) {\n  var array = Array.isArray(arrayLike) ? arrayLike : toArray(arrayLike);\n  for (var i = 0; i < array.length; i++) {\n    if (predicate(array[i])) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n\n/**\n * finds the first element that satisfies the predicate callback, polyfills array.find\n */\nvar find = function (arrayLike, predicate) {\n  var array = Array.isArray(arrayLike) ? arrayLike : toArray(arrayLike);\n  var idx = findIndex(array, predicate);\n\n  return idx === -1 ? undefined : array[idx];\n};\n\nvar isBuiltInComponent = function (vnode) {\n  if (!vnode) {\n    return false;\n  }\n\n  var tag = vnode.componentOptions.tag;\n\n  return /^(keep-alive|transition|transition-group)$/.test(tag);\n};\n\nvar makeDelayObject = function (events, delay, delayConfig) {\n  if (typeof delay === 'number') {\n    return events.reduce(function (prev, e) {\n      prev[e] = delay;\n      return prev;\n    }, {});\n  }\n\n  return events.reduce(function (prev, e) {\n    if (typeof delay === 'object' && e in delay) {\n      prev[e] = delay[e];\n      return prev;\n    }\n\n    if (typeof delayConfig === 'number') {\n      prev[e] = delayConfig;\n      return prev;\n    }\n\n    prev[e] = (delayConfig && delayConfig[e]) || 0;\n\n    return prev;\n  }, {});\n};\n\nvar deepParseInt = function (input) {\n  if (typeof input === 'number') { return input; }\n\n  if (typeof input === 'string') { return parseInt(input); }\n\n  var map = {};\n  for (var element in input) {\n    map[element] = parseInt(input[element]);\n  }\n\n  return map;\n};\n\nvar merge = function (target, source) {\n  if (! (isObject(target) && isObject(source))) {\n    return target;\n  }\n\n  Object.keys(source).forEach(function (key) {\n    var obj, obj$1;\n\n    if (isObject(source[key])) {\n      if (! target[key]) {\n        assign(target, ( obj = {}, obj[key] = {}, obj ));\n      }\n\n      merge(target[key], source[key]);\n      return;\n    }\n\n    assign(target, ( obj$1 = {}, obj$1[key] = source[key], obj$1 ));\n  });\n\n  return target;\n};\n\nvar fillRulesFromElement = function (el, rules) {\n  if (el.required) {\n    rules = appendRule('required', rules);\n  }\n\n  if (isTextInput(el)) {\n    if (el.type === 'email') {\n      rules = appendRule((\"email\" + (el.multiple ? ':multiple' : '')), rules);\n    }\n\n    if (el.pattern) {\n      rules = appendRule({ regex: el.pattern }, rules);\n    }\n\n    // 524288 is the max on some browsers and test environments.\n    if (el.maxLength >= 0 && el.maxLength < 524288) {\n      rules = appendRule((\"max:\" + (el.maxLength)), rules);\n    }\n\n    if (el.minLength > 0) {\n      rules = appendRule((\"min:\" + (el.minLength)), rules);\n    }\n\n    if (el.type === 'number') {\n      rules = appendRule('decimal', rules);\n      if (el.min !== '') {\n        rules = appendRule((\"min_value:\" + (el.min)), rules);\n      }\n\n      if (el.max !== '') {\n        rules = appendRule((\"max_value:\" + (el.max)), rules);\n      }\n    }\n\n    return rules;\n  }\n\n  if (isDateInput(el)) {\n    var timeFormat = el.step && Number(el.step) < 60 ? 'HH:mm:ss' : 'HH:mm';\n\n    if (el.type === 'date') {\n      return appendRule('date_format:yyyy-MM-dd', rules);\n    }\n\n    if (el.type === 'datetime-local') {\n      return appendRule((\"date_format:yyyy-MM-ddT\" + timeFormat), rules);\n    }\n\n    if (el.type === 'month') {\n      return appendRule('date_format:yyyy-MM', rules);\n    }\n\n    if (el.type === 'week') {\n      return appendRule('date_format:yyyy-[W]WW', rules);\n    }\n\n    if (el.type === 'time') {\n      return appendRule((\"date_format:\" + timeFormat), rules);\n    }\n  }\n\n  return rules;\n};\n\nvar values = function (obj) {\n  if (isCallable(Object.values)) {\n    return Object.values(obj);\n  }\n\n  // fallback to keys()\n  /* istanbul ignore next */\n  return Object.keys(obj).map(function (k) { return obj[k]; });\n};\n\nvar parseSelector = function (selector) {\n  var rule = null;\n  if (includes(selector, ':')) {\n    rule = selector.split(':').pop();\n    selector = selector.replace((\":\" + rule), '');\n  }\n\n  if (selector[0] === '#') {\n    return {\n      id: selector.slice(1),\n      rule: rule,\n      name: null,\n      scope: null\n    };\n  }\n\n  var scope = null;\n  var name = selector;\n  if (includes(selector, '.')) {\n    var parts = selector.split('.');\n    scope = parts[0];\n    name = parts.slice(1).join('.');\n  }\n\n  return {\n    id: null,\n    scope: scope,\n    name: name,\n    rule: rule\n  };\n};\n\nvar includes = function (collection, item) {\n  return collection.indexOf(item) !== -1;\n};\n\nvar isEmptyArray = function (arr) {\n  return Array.isArray(arr) && arr.length === 0;\n};\n\nvar defineNonReactive = function (obj, prop, value) {\n  Object.defineProperty(obj, prop, {\n    configurable: false,\n    writable: true,\n    value: value\n  });\n};\n\n// \n\nvar LOCALE = 'en';\n\nvar Dictionary = function Dictionary (dictionary) {\n  if ( dictionary === void 0 ) dictionary = {};\n\n  this.container = {};\n  this.merge(dictionary);\n};\n\nvar prototypeAccessors = { locale: { configurable: true } };\n\nprototypeAccessors.locale.get = function () {\n  return LOCALE;\n};\n\nprototypeAccessors.locale.set = function (value) {\n  LOCALE = value || 'en';\n};\n\nDictionary.prototype.hasLocale = function hasLocale (locale) {\n  return !!this.container[locale];\n};\n\nDictionary.prototype.setDateFormat = function setDateFormat (locale, format) {\n  if (!this.container[locale]) {\n    this.container[locale] = {};\n  }\n\n  this.container[locale].dateFormat = format;\n};\n\nDictionary.prototype.getDateFormat = function getDateFormat (locale) {\n  if (!this.container[locale] || !this.container[locale].dateFormat) {\n    return null;\n  }\n\n  return this.container[locale].dateFormat;\n};\n\nDictionary.prototype.getMessage = function getMessage (locale, key, data) {\n  var message = null;\n  if (!this.hasMessage(locale, key)) {\n    message = this._getDefaultMessage(locale);\n  } else {\n    message = this.container[locale].messages[key];\n  }\n\n  return isCallable(message) ? message.apply(void 0, data) : message;\n};\n\n/**\n * Gets a specific message for field. falls back to the rule message.\n */\nDictionary.prototype.getFieldMessage = function getFieldMessage (locale, field, key, data) {\n  if (!this.hasLocale(locale)) {\n    return this.getMessage(locale, key, data);\n  }\n\n  var dict = this.container[locale].custom && this.container[locale].custom[field];\n  if (!dict || !dict[key]) {\n    return this.getMessage(locale, key, data);\n  }\n\n  var message = dict[key];\n  return isCallable(message) ? message.apply(void 0, data) : message;\n};\n\nDictionary.prototype._getDefaultMessage = function _getDefaultMessage (locale) {\n  if (this.hasMessage(locale, '_default')) {\n    return this.container[locale].messages._default;\n  }\n\n  return this.container.en.messages._default;\n};\n\nDictionary.prototype.getAttribute = function getAttribute (locale, key, fallback) {\n    if ( fallback === void 0 ) fallback = '';\n\n  if (!this.hasAttribute(locale, key)) {\n    return fallback;\n  }\n\n  return this.container[locale].attributes[key];\n};\n\nDictionary.prototype.hasMessage = function hasMessage (locale, key) {\n  return !! (\n    this.hasLocale(locale) &&\n          this.container[locale].messages &&\n          this.container[locale].messages[key]\n  );\n};\n\nDictionary.prototype.hasAttribute = function hasAttribute (locale, key) {\n  return !! (\n    this.hasLocale(locale) &&\n          this.container[locale].attributes &&\n          this.container[locale].attributes[key]\n  );\n};\n\nDictionary.prototype.merge = function merge$1 (dictionary) {\n  merge(this.container, dictionary);\n};\n\nDictionary.prototype.setMessage = function setMessage (locale, key, message) {\n  if (! this.hasLocale(locale)) {\n    this.container[locale] = {\n      messages: {},\n      attributes: {}\n    };\n  }\n\n  this.container[locale].messages[key] = message;\n};\n\nDictionary.prototype.setAttribute = function setAttribute (locale, key, attribute) {\n  if (! this.hasLocale(locale)) {\n    this.container[locale] = {\n      messages: {},\n      attributes: {}\n    };\n  }\n\n  this.container[locale].attributes[key] = attribute;\n};\n\nObject.defineProperties( Dictionary.prototype, prototypeAccessors );\n\nvar drivers = {\n  default: new Dictionary({\n    en: {\n      messages: {},\n      attributes: {},\n      custom: {}\n    }\n  })\n};\n\nvar currentDriver = 'default';\n\nvar DictionaryResolver = function DictionaryResolver () {};\n\nDictionaryResolver._checkDriverName = function _checkDriverName (driver) {\n  if (!driver) {\n    throw createError('you must provide a name to the dictionary driver');\n  }\n};\n\nDictionaryResolver.setDriver = function setDriver (driver, implementation) {\n    if ( implementation === void 0 ) implementation = null;\n\n  this._checkDriverName(driver);\n  if (implementation) {\n    drivers[driver] = implementation;\n  }\n\n  currentDriver = driver;\n};\n\nDictionaryResolver.getDriver = function getDriver () {\n  return drivers[currentDriver];\n};\n\n// \n\nvar ErrorBag = function ErrorBag (errorBag, id) {\n  if ( errorBag === void 0 ) errorBag = null;\n  if ( id === void 0 ) id = null;\n\n  this.vmId = id || null;\n  // make this bag a mirror of the provided one, sharing the same items reference.\n  if (errorBag && errorBag instanceof ErrorBag) {\n    this.items = errorBag.items;\n  } else {\n    this.items = [];\n  }\n};\n\nErrorBag.prototype[typeof Symbol === 'function' ? Symbol.iterator : '@@iterator'] = function () {\n    var this$1 = this;\n\n  var index = 0;\n  return {\n    next: function () {\n      return { value: this$1.items[index++], done: index > this$1.items.length };\n    }\n  };\n};\n\n/**\n * Adds an error to the internal array.\n */\nErrorBag.prototype.add = function add (error) {\n    var ref;\n\n  (ref = this.items).push.apply(\n    ref, this._normalizeError(error)\n  );\n};\n\n/**\n * Normalizes passed errors to an error array.\n */\nErrorBag.prototype._normalizeError = function _normalizeError (error) {\n    var this$1 = this;\n\n  if (Array.isArray(error)) {\n    return error.map(function (e) {\n      e.scope = !isNullOrUndefined(e.scope) ? e.scope : null;\n      e.vmId = !isNullOrUndefined(e.vmId) ? e.vmId : (this$1.vmId || null);\n\n      return e;\n    });\n  }\n\n  error.scope = !isNullOrUndefined(error.scope) ? error.scope : null;\n  error.vmId = !isNullOrUndefined(error.vmId) ? error.vmId : (this.vmId || null);\n\n  return [error];\n};\n\n/**\n * Regenrates error messages if they have a generator function.\n */\nErrorBag.prototype.regenerate = function regenerate () {\n  this.items.forEach(function (i) {\n    i.msg = isCallable(i.regenerate) ? i.regenerate() : i.msg;\n  });\n};\n\n/**\n * Updates a field error with the new field scope.\n */\nErrorBag.prototype.update = function update (id, error) {\n  var item = find(this.items, function (i) { return i.id === id; });\n  if (!item) {\n    return;\n  }\n\n  var idx = this.items.indexOf(item);\n  this.items.splice(idx, 1);\n  item.scope = error.scope;\n  this.items.push(item);\n};\n\n/**\n * Gets all error messages from the internal array.\n */\nErrorBag.prototype.all = function all (scope) {\n    var this$1 = this;\n\n  var filterFn = function (item) {\n    var matchesScope = true;\n    var matchesVM = true;\n    if (!isNullOrUndefined(scope)) {\n      matchesScope = item.scope === scope;\n    }\n\n    if (!isNullOrUndefined(this$1.vmId)) {\n      matchesVM = item.vmId === this$1.vmId;\n    }\n\n    return matchesVM && matchesScope;\n  };\n\n  return this.items.filter(filterFn).map(function (e) { return e.msg; });\n};\n\n/**\n * Checks if there are any errors in the internal array.\n */\nErrorBag.prototype.any = function any (scope) {\n    var this$1 = this;\n\n  var filterFn = function (item) {\n    var matchesScope = true;\n    var matchesVM = true;\n    if (!isNullOrUndefined(scope)) {\n      matchesScope = item.scope === scope;\n    }\n\n    if (!isNullOrUndefined(this$1.vmId)) {\n      matchesVM = item.vmId === this$1.vmId;\n    }\n\n    return matchesVM && matchesScope;\n  };\n\n  return !!this.items.filter(filterFn).length;\n};\n\n/**\n * Removes all items from the internal array.\n */\nErrorBag.prototype.clear = function clear (scope) {\n    var this$1 = this;\n\n  var matchesVM = isNullOrUndefined(this.vmId) ? function () { return true; } : function (i) { return i.vmId === this$1.vmId; };\n  if (isNullOrUndefined(scope)) {\n    scope = null;\n  }\n\n  for (var i = 0; i < this.items.length; ++i) {\n    if (matchesVM(this.items[i]) && this.items[i].scope === scope) {\n      this.items.splice(i, 1);\n      --i;\n    }\n  }\n};\n\n/**\n * Collects errors into groups or for a specific field.\n */\nErrorBag.prototype.collect = function collect (field, scope, map) {\n    var this$1 = this;\n    if ( map === void 0 ) map = true;\n\n  var isSingleField = !isNullOrUndefined(field) && !field.includes('*');\n  var groupErrors = function (items) {\n    var errors = items.reduce(function (collection, error) {\n      if (!isNullOrUndefined(this$1.vmId) && error.vmId !== this$1.vmId) {\n        return collection;\n      }\n\n      if (!collection[error.field]) {\n        collection[error.field] = [];\n      }\n\n      collection[error.field].push(map ? error.msg : error);\n\n      return collection;\n    }, {});\n\n    // reduce the collection to be a single array.\n    if (isSingleField) {\n      return values(errors)[0] || [];\n    }\n\n    return errors;\n  };\n\n  if (isNullOrUndefined(field)) {\n    return groupErrors(this.items);\n  }\n\n  var selector = isNullOrUndefined(scope) ? String(field) : (scope + \".\" + field);\n  var ref = this._makeCandidateFilters(selector);\n    var isPrimary = ref.isPrimary;\n    var isAlt = ref.isAlt;\n\n  var collected = this.items.reduce(function (prev, curr) {\n    if (isPrimary(curr)) {\n      prev.primary.push(curr);\n    }\n\n    if (isAlt(curr)) {\n      prev.alt.push(curr);\n    }\n\n    return prev;\n  }, { primary: [], alt: [] });\n\n  collected = collected.primary.length ? collected.primary : collected.alt;\n\n  return groupErrors(collected);\n};\n\n/**\n * Gets the internal array length.\n */\nErrorBag.prototype.count = function count () {\n    var this$1 = this;\n\n  if (this.vmId) {\n    return this.items.filter(function (e) { return e.vmId === this$1.vmId; }).length;\n  }\n\n  return this.items.length;\n};\n\n/**\n * Finds and fetches the first error message for the specified field id.\n */\nErrorBag.prototype.firstById = function firstById (id) {\n  var error = find(this.items, function (i) { return i.id === id; });\n\n  return error ? error.msg : undefined;\n};\n\n/**\n * Gets the first error message for a specific field.\n */\nErrorBag.prototype.first = function first (field, scope) {\n    if ( scope === void 0 ) scope = null;\n\n  var selector = isNullOrUndefined(scope) ? field : (scope + \".\" + field);\n  var match = this._match(selector);\n\n  return match && match.msg;\n};\n\n/**\n * Returns the first error rule for the specified field\n */\nErrorBag.prototype.firstRule = function firstRule (field, scope) {\n  var errors = this.collect(field, scope, false);\n\n  return (errors.length && errors[0].rule) || undefined;\n};\n\n/**\n * Checks if the internal array has at least one error for the specified field.\n */\nErrorBag.prototype.has = function has (field, scope) {\n    if ( scope === void 0 ) scope = null;\n\n  return !!this.first(field, scope);\n};\n\n/**\n * Gets the first error message for a specific field and a rule.\n */\nErrorBag.prototype.firstByRule = function firstByRule (name, rule, scope) {\n    if ( scope === void 0 ) scope = null;\n\n  var error = this.collect(name, scope, false).filter(function (e) { return e.rule === rule; })[0];\n\n  return (error && error.msg) || undefined;\n};\n\n/**\n * Gets the first error message for a specific field that not match the rule.\n */\nErrorBag.prototype.firstNot = function firstNot (name, rule, scope) {\n    if ( rule === void 0 ) rule = 'required';\n    if ( scope === void 0 ) scope = null;\n\n  var error = this.collect(name, scope, false).filter(function (e) { return e.rule !== rule; })[0];\n\n  return (error && error.msg) || undefined;\n};\n\n/**\n * Removes errors by matching against the id or ids.\n */\nErrorBag.prototype.removeById = function removeById (id) {\n  var condition = function (item) { return item.id === id; };\n  if (Array.isArray(id)) {\n    condition = function (item) { return id.indexOf(item.id) !== -1; };\n  }\n\n  for (var i = 0; i < this.items.length; ++i) {\n    if (condition(this.items[i])) {\n      this.items.splice(i, 1);\n      --i;\n    }\n  }\n};\n\n/**\n * Removes all error messages associated with a specific field.\n */\nErrorBag.prototype.remove = function remove (field, scope, vmId) {\n  if (isNullOrUndefined(field)) {\n    return;\n  }\n\n  var selector = isNullOrUndefined(scope) ? String(field) : (scope + \".\" + field);\n  var ref = this._makeCandidateFilters(selector);\n    var isPrimary = ref.isPrimary;\n    var isAlt = ref.isAlt;\n  var matches = function (item) { return isPrimary(item) || isAlt(item); };\n  var shouldRemove = function (item) {\n    if (isNullOrUndefined(vmId)) { return matches(item); }\n\n    return matches(item) && item.vmId === vmId;\n  };\n\n  for (var i = 0; i < this.items.length; ++i) {\n    if (shouldRemove(this.items[i])) {\n      this.items.splice(i, 1);\n      --i;\n    }\n  }\n};\n\nErrorBag.prototype._makeCandidateFilters = function _makeCandidateFilters (selector) {\n    var this$1 = this;\n\n  var matchesRule = function () { return true; };\n  var matchesScope = function () { return true; };\n  var matchesName = function () { return true; };\n  var matchesVM = function () { return true; };\n\n  var ref = parseSelector(selector);\n    var id = ref.id;\n    var rule = ref.rule;\n    var scope = ref.scope;\n    var name = ref.name;\n\n  if (rule) {\n    matchesRule = function (item) { return item.rule === rule; };\n  }\n\n  // match by id, can be combined with rule selection.\n  if (id) {\n    return {\n      isPrimary: function (item) { return matchesRule(item) && (function (item) { return id === item.id; }); },\n      isAlt: function () { return false; }\n    };\n  }\n\n  if (isNullOrUndefined(scope)) {\n    // if no scope specified, make sure the found error has no scope.\n    matchesScope = function (item) { return isNullOrUndefined(item.scope); };\n  } else {\n    matchesScope = function (item) { return item.scope === scope; };\n  }\n\n  if (!isNullOrUndefined(name) && name !== '*') {\n    matchesName = function (item) { return item.field === name; };\n  }\n\n  if (!isNullOrUndefined(this.vmId)) {\n    matchesVM = function (item) { return item.vmId === this$1.vmId; };\n  }\n\n  // matches the first candidate.\n  var isPrimary = function (item) {\n    return matchesVM(item) && matchesName(item) && matchesRule(item) && matchesScope(item);\n  };\n\n  // matches a second candidate, which is a field with a name containing the '.' character.\n  var isAlt = function (item) {\n    return matchesVM(item) && matchesRule(item) && item.field === (scope + \".\" + name);\n  };\n\n  return {\n    isPrimary: isPrimary,\n    isAlt: isAlt\n  };\n};\n\nErrorBag.prototype._match = function _match (selector) {\n  if (isNullOrUndefined(selector)) {\n    return undefined;\n  }\n\n  var ref = this._makeCandidateFilters(selector);\n    var isPrimary = ref.isPrimary;\n    var isAlt = ref.isAlt;\n\n  return this.items.reduce(function (prev, item, idx, arr) {\n    var isLast = idx === arr.length - 1;\n    if (prev.primary) {\n      return isLast ? prev.primary : prev;\n    }\n\n    if (isPrimary(item)) {\n      prev.primary = item;\n    }\n\n    if (isAlt(item)) {\n      prev.alt = item;\n    }\n\n    // keep going.\n    if (!isLast) {\n      return prev;\n    }\n\n    return prev.primary || prev.alt;\n  }, {});\n};\n\nvar DEFAULT_CONFIG = {\n  locale: 'en',\n  delay: 0,\n  errorBagName: 'errors',\n  dictionary: null,\n  fieldsBagName: 'fields',\n  classes: false,\n  classNames: null,\n  events: 'input',\n  inject: true,\n  fastExit: true,\n  aria: true,\n  validity: false,\n  mode: 'aggressive',\n  useConstraintAttrs: true,\n  i18n: null,\n  i18nRootKey: 'validation'\n};\n\nvar currentConfig = assign({}, DEFAULT_CONFIG);\n\nvar resolveConfig = function (ctx) {\n  var selfConfig = getPath('$options.$_veeValidate', ctx, {});\n\n  return assign({}, currentConfig, selfConfig);\n};\n\nvar getConfig = function () { return currentConfig; };\n\nvar setConfig = function (newConf) {\n  currentConfig = assign({}, currentConfig, newConf);\n};\n\n// VNode Utils\n\n// Gets the model object on the vnode.\nfunction findModel (vnode) {\n  if (!vnode.data) {\n    return null;\n  }\n\n  // Component Model\n  if (vnode.data.model) {\n    return vnode.data.model;\n  }\n\n  return !!(vnode.data.directives) && find(vnode.data.directives, function (d) { return d.name === 'model'; });\n}\n\nfunction extractChildren (vnode) {\n  if (Array.isArray(vnode)) {\n    return vnode;\n  }\n\n  if (Array.isArray(vnode.children)) {\n    return vnode.children;\n  }\n\n  if (vnode.componentOptions && Array.isArray(vnode.componentOptions.children)) {\n    return vnode.componentOptions.children;\n  }\n\n  return [];\n}\n\nfunction extractVNodes (vnode) {\n  if (findModel(vnode)) {\n    return [vnode];\n  }\n\n  var children = extractChildren(vnode);\n\n  return children.reduce(function (nodes, node) {\n    var candidates = extractVNodes(node);\n    if (candidates.length) {\n      nodes.push.apply(nodes, candidates);\n    }\n\n    return nodes;\n  }, []);\n}\n\n// Resolves v-model config if exists.\nfunction findModelConfig (vnode) {\n  if (!vnode.componentOptions) { return null; }\n\n  return vnode.componentOptions.Ctor.options.model;\n}\n// Adds a listener to vnode listener object.\nfunction mergeVNodeListeners (obj, eventName, handler) {\n  // Has a single listener.\n  if (isCallable(obj[eventName])) {\n    var prevHandler = obj[eventName];\n    obj[eventName] = [prevHandler];\n  }\n\n  // has other listeners.\n  if (Array.isArray(obj[eventName])) {\n    obj[eventName].push(handler);\n    return;\n  }\n\n  // no listener at all.\n  if (isNullOrUndefined(obj[eventName])) {\n    obj[eventName] = [handler];\n  }\n}\n\n// Adds a listener to a native HTML vnode.\nfunction addNativeNodeListener (node, eventName, handler) {\n  if (isNullOrUndefined(node.data.on)) {\n    node.data.on = {};\n  }\n\n  mergeVNodeListeners(node.data.on, eventName, handler);\n}\n\n// Adds a listener to a Vue component vnode.\nfunction addComponentNodeListener (node, eventName, handler) {\n  /* istanbul ignore next */\n  if (!node.componentOptions.listeners) {\n    node.componentOptions.listeners = {};\n  }\n\n  mergeVNodeListeners(node.componentOptions.listeners, eventName, handler);\n}\nfunction addVNodeListener (vnode, eventName, handler) {\n  if (vnode.componentOptions) {\n    addComponentNodeListener(vnode, eventName, handler);\n    return;\n  }\n\n  addNativeNodeListener(vnode, eventName, handler);\n}\n// Determines if `change` should be used over `input` for listeners.\nfunction getInputEventName (vnode, model) {\n  // Is a component.\n  if (vnode.componentOptions) {\n    var ref = findModelConfig(vnode) || { event: 'input' };\n    var event = ref.event;\n\n    return event;\n  }\n\n  // Lazy Models and select tag typically use change event\n  if ((model && model.modifiers && model.modifiers.lazy) || vnode.tag === 'select') {\n    return 'change';\n  }\n\n  // is a textual-type input.\n  if (vnode.data.attrs && isTextInput({ type: vnode.data.attrs.type || 'text' })) {\n    return 'input';\n  }\n\n  return 'change';\n}\n\nfunction normalizeSlots (slots, ctx) {\n  return Object.keys(slots).reduce(function (arr, key) {\n    slots[key].forEach(function (vnode) {\n      if (!vnode.context) {\n        slots[key].context = ctx;\n        if (!vnode.data) {\n          vnode.data = {};\n        }\n        vnode.data.slot = key;\n      }\n    });\n\n    return arr.concat(slots[key]);\n  }, []);\n}\n\n/**\n * Generates the options required to construct a field.\n */\nvar Resolver = function Resolver () {};\n\nResolver.generate = function generate (el, binding, vnode) {\n  var model = Resolver.resolveModel(binding, vnode);\n  var options = resolveConfig(vnode.context);\n\n  return {\n    name: Resolver.resolveName(el, vnode),\n    el: el,\n    listen: !binding.modifiers.disable,\n    bails: binding.modifiers.bails ? true : (binding.modifiers.continues === true ? false : undefined),\n    scope: Resolver.resolveScope(el, binding, vnode),\n    vm: vnode.context,\n    expression: binding.value,\n    component: vnode.componentInstance,\n    classes: options.classes,\n    classNames: options.classNames,\n    getter: Resolver.resolveGetter(el, vnode, model),\n    events: Resolver.resolveEvents(el, vnode) || options.events,\n    model: model,\n    delay: Resolver.resolveDelay(el, vnode, options),\n    rules: Resolver.resolveRules(el, binding, vnode),\n    immediate: !!binding.modifiers.initial || !!binding.modifiers.immediate,\n    persist: !!binding.modifiers.persist,\n    validity: options.validity && !vnode.componentInstance,\n    aria: options.aria && !vnode.componentInstance,\n    initialValue: Resolver.resolveInitialValue(vnode)\n  };\n};\n\nResolver.getCtorConfig = function getCtorConfig (vnode) {\n  if (!vnode.componentInstance) { return null; }\n\n  var config = getPath('componentInstance.$options.$_veeValidate', vnode);\n\n  return config;\n};\n\n/**\n * Resolves the rules defined on an element.\n */\nResolver.resolveRules = function resolveRules (el, binding, vnode) {\n  var rules = '';\n  if (!binding.value && (!binding || !binding.expression)) {\n    rules = getDataAttribute(el, 'rules');\n  }\n\n  if (binding.value && includes(['string', 'object'], typeof binding.value.rules)) {\n    rules = binding.value.rules;\n  } else if (binding.value) {\n    rules = binding.value;\n  }\n\n  if (vnode.componentInstance) {\n    return rules;\n  }\n\n  // If validity is disabled, ignore field rules.\n  var normalized = normalizeRules(rules);\n  if (!getConfig().useConstraintAttrs) {\n    return normalized;\n  }\n\n  return assign({}, fillRulesFromElement(el, {}), normalized);\n};\n\n/**\n * @param {*} vnode\n */\nResolver.resolveInitialValue = function resolveInitialValue (vnode) {\n  var model = vnode.data.model || find(vnode.data.directives, function (d) { return d.name === 'model'; });\n\n  return model && model.value;\n};\n\n/**\n * Resolves the delay value.\n * @param {*} el\n * @param {*} vnode\n * @param {Object} options\n */\nResolver.resolveDelay = function resolveDelay (el, vnode, options) {\n  var delay = getDataAttribute(el, 'delay');\n  var globalDelay = (options && 'delay' in options) ? options.delay : 0;\n\n  if (!delay && vnode.componentInstance && vnode.componentInstance.$attrs) {\n    delay = vnode.componentInstance.$attrs['data-vv-delay'];\n  }\n\n  if (!isObject(globalDelay)) {\n    return deepParseInt(delay || globalDelay);\n  }\n\n  if (!isNullOrUndefined(delay)) {\n    globalDelay.input = delay;\n  }\n\n  return deepParseInt(globalDelay);\n};\n\n/**\n * Resolves the events to validate in response to.\n * @param {*} el\n * @param {*} vnode\n */\nResolver.resolveEvents = function resolveEvents (el, vnode) {\n  // resolve it from the root element.\n  var events = getDataAttribute(el, 'validate-on');\n\n  // resolve from data-vv-validate-on if its a vue component.\n  if (!events && vnode.componentInstance && vnode.componentInstance.$attrs) {\n    events = vnode.componentInstance.$attrs['data-vv-validate-on'];\n  }\n\n  // resolve it from $_veeValidate options.\n  if (!events && vnode.componentInstance) {\n    var config = Resolver.getCtorConfig(vnode);\n    events = config && config.events;\n  }\n\n  if (!events && getConfig().events) {\n    events = getConfig().events;\n  }\n\n  // resolve the model event if its configured for custom components.\n  if (events && vnode.componentInstance && includes(events, 'input')) {\n    var ref = vnode.componentInstance.$options.model || { event: 'input' };\n      var event = ref.event;\n    // if the prop was configured but not the model.\n    if (!event) {\n      return events;\n    }\n\n    events = events.replace('input', event);\n  }\n\n  return events;\n};\n\n/**\n * Resolves the scope for the field.\n * @param {*} el\n * @param {*} binding\n */\nResolver.resolveScope = function resolveScope (el, binding, vnode) {\n    if ( vnode === void 0 ) vnode = {};\n\n  var scope = null;\n  if (vnode.componentInstance && isNullOrUndefined(scope)) {\n    scope = vnode.componentInstance.$attrs && vnode.componentInstance.$attrs['data-vv-scope'];\n  }\n\n  return !isNullOrUndefined(scope) ? scope : getScope(el);\n};\n\n/**\n * Checks if the node directives contains a v-model or a specified arg.\n * Args take priority over models.\n *\n * @return {Object}\n */\nResolver.resolveModel = function resolveModel (binding, vnode) {\n  if (binding.arg) {\n    return { expression: binding.arg };\n  }\n\n  var model = findModel(vnode);\n  if (!model) {\n    return null;\n  }\n\n  // https://github.com/vuejs/vue/blob/dev/src/core/util/lang.js#L26\n  var watchable = !/[^\\w.$]/.test(model.expression) && hasPath(model.expression, vnode.context);\n  var lazy = !!(model.modifiers && model.modifiers.lazy);\n\n  if (!watchable) {\n    return { expression: null, lazy: lazy };\n  }\n\n  return { expression: model.expression, lazy: lazy };\n};\n\n/**\n * Resolves the field name to trigger validations.\n * @return {String} The field name.\n */\nResolver.resolveName = function resolveName (el, vnode) {\n  var name = getDataAttribute(el, 'name');\n\n  if (!name && !vnode.componentInstance) {\n    return el.name;\n  }\n\n  if (!name && vnode.componentInstance && vnode.componentInstance.$attrs) {\n    name = vnode.componentInstance.$attrs['data-vv-name'] || vnode.componentInstance.$attrs['name'];\n  }\n\n  if (!name && vnode.componentInstance) {\n    var config = Resolver.getCtorConfig(vnode);\n    if (config && isCallable(config.name)) {\n      var boundGetter = config.name.bind(vnode.componentInstance);\n\n      return boundGetter();\n    }\n\n    return vnode.componentInstance.name;\n  }\n\n  return name;\n};\n\n/**\n * Returns a value getter input type.\n */\nResolver.resolveGetter = function resolveGetter (el, vnode, model) {\n  if (model && model.expression) {\n    return function () {\n      return getPath(model.expression, vnode.context);\n    };\n  }\n\n  if (vnode.componentInstance) {\n    var path = getDataAttribute(el, 'value-path') || (vnode.componentInstance.$attrs && vnode.componentInstance.$attrs['data-vv-value-path']);\n    if (path) {\n      return function () {\n        return getPath(path, vnode.componentInstance);\n      };\n    }\n\n    var config = Resolver.getCtorConfig(vnode);\n    if (config && isCallable(config.value)) {\n      var boundGetter = config.value.bind(vnode.componentInstance);\n\n      return function () {\n        return boundGetter();\n      };\n    }\n\n    var ref = vnode.componentInstance.$options.model || { prop: 'value' };\n      var prop = ref.prop;\n\n    return function () {\n      return vnode.componentInstance[prop];\n    };\n  }\n\n  switch (el.type) {\n  case 'checkbox': return function () {\n    var els = document.querySelectorAll((\"input[name=\\\"\" + (el.name) + \"\\\"]\"));\n\n    els = toArray(els).filter(function (el) { return el.checked; });\n    if (!els.length) { return undefined; }\n\n    return els.map(function (checkbox) { return checkbox.value; });\n  };\n  case 'radio': return function () {\n    var els = document.querySelectorAll((\"input[name=\\\"\" + (el.name) + \"\\\"]\"));\n    var elm = find(els, function (el) { return el.checked; });\n\n    return elm && elm.value;\n  };\n  case 'file': return function (context) {\n    return toArray(el.files);\n  };\n  case 'select-multiple': return function () {\n    return toArray(el.options).filter(function (opt) { return opt.selected; }).map(function (opt) { return opt.value; });\n  };\n  default: return function () {\n    return el && el.value;\n  };\n  }\n};\n\nvar RULES = {};\n\nvar RuleContainer = function RuleContainer () {};\n\nvar staticAccessors = { rules: { configurable: true } };\n\nRuleContainer.add = function add (name, ref) {\n    var validate = ref.validate;\n    var options = ref.options;\n    var paramNames = ref.paramNames;\n\n  RULES[name] = {\n    validate: validate,\n    options: options,\n    paramNames: paramNames\n  };\n};\n\nstaticAccessors.rules.get = function () {\n  return RULES;\n};\n\nRuleContainer.has = function has (name) {\n  return !!RULES[name];\n};\n\nRuleContainer.isImmediate = function isImmediate (name) {\n  return !!(RULES[name] && RULES[name].options.immediate);\n};\n\nRuleContainer.isRequireRule = function isRequireRule (name) {\n  return !!(RULES[name] && RULES[name].options.computesRequired);\n};\n\nRuleContainer.isTargetRule = function isTargetRule (name) {\n  return !!(RULES[name] && RULES[name].options.hasTarget);\n};\n\nRuleContainer.remove = function remove (ruleName) {\n  delete RULES[ruleName];\n};\n\nRuleContainer.getParamNames = function getParamNames (ruleName) {\n  return RULES[ruleName] && RULES[ruleName].paramNames;\n};\n\nRuleContainer.getOptions = function getOptions (ruleName) {\n  return RULES[ruleName] && RULES[ruleName].options;\n};\n\nRuleContainer.getValidatorMethod = function getValidatorMethod (ruleName) {\n  return RULES[ruleName] ? RULES[ruleName].validate : null;\n};\n\nObject.defineProperties( RuleContainer, staticAccessors );\n\n// \n\nvar isEvent = function (evt) {\n  return (typeof Event !== 'undefined' && isCallable(Event) && evt instanceof Event) || (evt && evt.srcElement);\n};\n\nvar normalizeEvents = function (evts) {\n  if (!evts) { return []; }\n\n  return (typeof evts === 'string' ? evts.split('|') : evts);\n};\n\nvar supportsPassive = true;\n\nvar detectPassiveSupport = function () {\n  try {\n    var opts = Object.defineProperty({}, 'passive', {\n      get: function get () {\n        supportsPassive = true;\n      }\n    });\n    window.addEventListener('testPassive', null, opts);\n    window.removeEventListener('testPassive', null, opts);\n  } catch (e) {\n    supportsPassive = false;\n  }\n  return supportsPassive;\n};\n\nvar addEventListener = function (el, eventName, cb) {\n  el.addEventListener(eventName, cb, supportsPassive ? { passive: true } : false);\n};\n\n// \n\nvar DEFAULT_OPTIONS = {\n  targetOf: null,\n  immediate: false,\n  persist: false,\n  scope: null,\n  listen: true,\n  name: null,\n  rules: {},\n  vm: null,\n  classes: false,\n  validity: true,\n  aria: true,\n  events: 'input|blur',\n  delay: 0,\n  classNames: {\n    touched: 'touched', // the control has been blurred\n    untouched: 'untouched', // the control hasn't been blurred\n    valid: 'valid', // model is valid\n    invalid: 'invalid', // model is invalid\n    pristine: 'pristine', // control has not been interacted with\n    dirty: 'dirty' // control has been interacted with\n  }\n};\n\nvar Field = function Field (options) {\n  if ( options === void 0 ) options = {};\n\n  this.id = uniqId();\n  this.el = options.el;\n  this.updated = false;\n  this.vmId = options.vmId;\n  defineNonReactive(this, 'dependencies', []);\n  defineNonReactive(this, 'watchers', []);\n  defineNonReactive(this, 'events', []);\n  this.delay = 0;\n  this.rules = {};\n  this.forceRequired = false;\n  this._cacheId(options);\n  this.classNames = assign({}, DEFAULT_OPTIONS.classNames);\n  options = assign({}, DEFAULT_OPTIONS, options);\n  this._delay = !isNullOrUndefined(options.delay) ? options.delay : 0; // cache initial delay\n  this.validity = options.validity;\n  this.aria = options.aria;\n  this.flags = options.flags || createFlags();\n  defineNonReactive(this, 'vm', options.vm);\n  defineNonReactive(this, 'componentInstance', options.component);\n  this.ctorConfig = this.componentInstance ? getPath('$options.$_veeValidate', this.componentInstance) : undefined;\n  this.update(options);\n  // set initial value.\n  this.initialValue = this.value;\n  this.updated = false;\n};\n\nvar prototypeAccessors$1 = { validator: { configurable: true },isRequired: { configurable: true },isDisabled: { configurable: true },alias: { configurable: true },value: { configurable: true },bails: { configurable: true },rejectsFalse: { configurable: true } };\n\nprototypeAccessors$1.validator.get = function () {\n  if (!this.vm || !this.vm.$validator) {\n    return { validate: function () {} };\n  }\n\n  return this.vm.$validator;\n};\n\nprototypeAccessors$1.isRequired.get = function () {\n  return !!this.rules.required || this.forceRequired;\n};\n\nprototypeAccessors$1.isDisabled.get = function () {\n  return !!(this.el && this.el.disabled);\n};\n\n/**\n * Gets the display name (user-friendly name).\n */\nprototypeAccessors$1.alias.get = function () {\n  if (this._alias) {\n    return this._alias;\n  }\n\n  var alias = null;\n  if (this.ctorConfig && this.ctorConfig.alias) {\n    alias = isCallable(this.ctorConfig.alias) ? this.ctorConfig.alias.call(this.componentInstance) : this.ctorConfig.alias;\n  }\n\n  if (!alias && this.el) {\n    alias = getDataAttribute(this.el, 'as');\n  }\n\n  if (!alias && this.componentInstance) {\n    return this.componentInstance.$attrs && this.componentInstance.$attrs['data-vv-as'];\n  }\n\n  return alias;\n};\n\n/**\n * Gets the input value.\n */\n\nprototypeAccessors$1.value.get = function () {\n  if (!isCallable(this.getter)) {\n    return undefined;\n  }\n\n  return this.getter();\n};\n\nprototypeAccessors$1.bails.get = function () {\n  return this._bails;\n};\n\n/**\n * If the field rejects false as a valid value for the required rule.\n */\n\nprototypeAccessors$1.rejectsFalse.get = function () {\n  if (this.componentInstance && this.ctorConfig) {\n    return !!this.ctorConfig.rejectsFalse;\n  }\n\n  if (!this.el) {\n    return false;\n  }\n\n  return this.el.type === 'checkbox';\n};\n\n/**\n * Determines if the instance matches the options provided.\n */\nField.prototype.matches = function matches (options) {\n    var this$1 = this;\n\n  if (!options) {\n    return true;\n  }\n\n  if (options.id) {\n    return this.id === options.id;\n  }\n\n  var matchesComponentId = isNullOrUndefined(options.vmId) ? function () { return true; } : function (id) { return id === this$1.vmId; };\n  if (!matchesComponentId(options.vmId)) {\n    return false;\n  }\n\n  if (options.name === undefined && options.scope === undefined) {\n    return true;\n  }\n\n  if (options.scope === undefined) {\n    return this.name === options.name;\n  }\n\n  if (options.name === undefined) {\n    return this.scope === options.scope;\n  }\n\n  return options.name === this.name && options.scope === this.scope;\n};\n\n/**\n * Caches the field id.\n */\nField.prototype._cacheId = function _cacheId (options) {\n  if (this.el && !options.targetOf) {\n    this.el._veeValidateId = this.id;\n  }\n};\n\n/**\n * Keeps a reference of the most current validation run.\n */\nField.prototype.waitFor = function waitFor (pendingPromise) {\n  this._waitingFor = pendingPromise;\n};\n\nField.prototype.isWaitingFor = function isWaitingFor (promise) {\n  return this._waitingFor === promise;\n};\n\n/**\n * Updates the field with changed data.\n */\nField.prototype.update = function update (options) {\n  this.targetOf = options.targetOf || null;\n  this.immediate = options.immediate || this.immediate || false;\n  this.persist = options.persist || this.persist || false;\n\n  // update errors scope if the field scope was changed.\n  if (!isNullOrUndefined(options.scope) && options.scope !== this.scope && isCallable(this.validator.update)) {\n    this.validator.update(this.id, { scope: options.scope });\n  }\n  this.scope = !isNullOrUndefined(options.scope) ? options.scope\n    : !isNullOrUndefined(this.scope) ? this.scope : null;\n  this.name = (!isNullOrUndefined(options.name) ? String(options.name) : options.name) || this.name || null;\n  this.rules = options.rules !== undefined ? normalizeRules(options.rules) : this.rules;\n  this._bails = options.bails !== undefined ? options.bails : this._bails;\n  this.model = options.model || this.model;\n  this.listen = options.listen !== undefined ? options.listen : this.listen;\n  this.classes = (options.classes || this.classes || false) && !this.componentInstance;\n  this.classNames = isObject(options.classNames) ? merge(this.classNames, options.classNames) : this.classNames;\n  this.getter = isCallable(options.getter) ? options.getter : this.getter;\n  this._alias = options.alias || this._alias;\n  this.events = (options.events) ? normalizeEvents(options.events) : this.events;\n  this.delay = makeDelayObject(this.events, options.delay || this.delay, this._delay);\n  this.updateDependencies();\n  this.addActionListeners();\n\n  if (process.env.NODE_ENV !== 'production' && !this.name && !this.targetOf) {\n    warn('A field is missing a \"name\" or \"data-vv-name\" attribute');\n  }\n\n  // update required flag flags\n  if (options.rules !== undefined) {\n    this.flags.required = this.isRequired;\n  }\n\n  // validate if it was validated before and field was updated and there was a rules mutation.\n  if (this.flags.validated && options.rules !== undefined && this.updated) {\n    this.validator.validate((\"#\" + (this.id)));\n  }\n\n  this.updated = true;\n  this.addValueListeners();\n\n  // no need to continue.\n  if (!this.el) {\n    return;\n  }\n  this.updateClasses();\n  this.updateAriaAttrs();\n};\n\n/**\n * Resets field flags and errors.\n */\nField.prototype.reset = function reset () {\n    var this$1 = this;\n\n  if (this._cancellationToken) {\n    this._cancellationToken.cancelled = true;\n    delete this._cancellationToken;\n  }\n\n  var defaults = createFlags();\n  Object.keys(this.flags).filter(function (flag) { return flag !== 'required'; }).forEach(function (flag) {\n    this$1.flags[flag] = defaults[flag];\n  });\n\n  // update initial value\n  this.initialValue = this.value;\n  this.flags.changed = false;\n\n  this.addValueListeners();\n  this.addActionListeners();\n  this.updateClasses(true);\n  this.updateAriaAttrs();\n  this.updateCustomValidity();\n};\n\n/**\n * Sets the flags and their negated counterparts, and updates the classes and re-adds action listeners.\n */\nField.prototype.setFlags = function setFlags (flags) {\n    var this$1 = this;\n\n  var negated = {\n    pristine: 'dirty',\n    dirty: 'pristine',\n    valid: 'invalid',\n    invalid: 'valid',\n    touched: 'untouched',\n    untouched: 'touched'\n  };\n\n  Object.keys(flags).forEach(function (flag) {\n    this$1.flags[flag] = flags[flag];\n    // if it has a negation and was not specified, set it as well.\n    if (negated[flag] && flags[negated[flag]] === undefined) {\n      this$1.flags[negated[flag]] = !flags[flag];\n    }\n  });\n\n  if (\n    flags.untouched !== undefined ||\n    flags.touched !== undefined ||\n    flags.dirty !== undefined ||\n    flags.pristine !== undefined\n  ) {\n    this.addActionListeners();\n  }\n  this.updateClasses();\n  this.updateAriaAttrs();\n  this.updateCustomValidity();\n};\n\n/**\n * Determines if the field requires references to target fields.\n*/\nField.prototype.updateDependencies = function updateDependencies () {\n    var this$1 = this;\n\n  // reset dependencies.\n  this.dependencies.forEach(function (d) { return d.field.destroy(); });\n  this.dependencies = [];\n\n  // we get the selectors for each field.\n  var fields = Object.keys(this.rules).reduce(function (prev, r) {\n    if (RuleContainer.isTargetRule(r)) {\n      prev.push({ selector: this$1.rules[r][0], name: r });\n    }\n\n    return prev;\n  }, []);\n\n  if (!fields.length || !this.vm || !this.vm.$el) { return; }\n\n  // must be contained within the same component, so we use the vm root element constrain our dom search.\n  fields.forEach(function (ref$1) {\n      var selector = ref$1.selector;\n      var name = ref$1.name;\n\n    var ref = this$1.vm.$refs[selector];\n    var el = Array.isArray(ref) ? ref[0] : ref;\n    if (!el) {\n      return;\n    }\n\n    var options = {\n      vm: this$1.vm,\n      classes: this$1.classes,\n      classNames: this$1.classNames,\n      delay: this$1.delay,\n      scope: this$1.scope,\n      events: this$1.events.join('|'),\n      immediate: this$1.immediate,\n      targetOf: this$1.id\n    };\n\n    // probably a component.\n    if (isCallable(el.$watch)) {\n      options.component = el;\n      options.el = el.$el;\n      options.getter = Resolver.resolveGetter(el.$el, el.$vnode);\n    } else {\n      options.el = el;\n      options.getter = Resolver.resolveGetter(el, {});\n    }\n\n    this$1.dependencies.push({ name: name, field: new Field(options) });\n  });\n};\n\n/**\n * Removes listeners.\n */\nField.prototype.unwatch = function unwatch (tag) {\n    if ( tag === void 0 ) tag = null;\n\n  if (!tag) {\n    this.watchers.forEach(function (w) { return w.unwatch(); });\n    this.watchers = [];\n    return;\n  }\n\n  this.watchers.filter(function (w) { return tag.test(w.tag); }).forEach(function (w) { return w.unwatch(); });\n  this.watchers = this.watchers.filter(function (w) { return !tag.test(w.tag); });\n};\n\n/**\n * Updates the element classes depending on each field flag status.\n */\nField.prototype.updateClasses = function updateClasses (isReset) {\n    var this$1 = this;\n    if ( isReset === void 0 ) isReset = false;\n\n  if (!this.classes || this.isDisabled) { return; }\n  var applyClasses = function (el) {\n    toggleClass(el, this$1.classNames.dirty, this$1.flags.dirty);\n    toggleClass(el, this$1.classNames.pristine, this$1.flags.pristine);\n    toggleClass(el, this$1.classNames.touched, this$1.flags.touched);\n    toggleClass(el, this$1.classNames.untouched, this$1.flags.untouched);\n\n    // remove valid/invalid classes on reset.\n    if (isReset) {\n      toggleClass(el, this$1.classNames.valid, false);\n      toggleClass(el, this$1.classNames.invalid, false);\n    }\n\n    // make sure we don't set any classes if the state is undetermined.\n    if (!isNullOrUndefined(this$1.flags.valid) && this$1.flags.validated) {\n      toggleClass(el, this$1.classNames.valid, this$1.flags.valid);\n    }\n\n    if (!isNullOrUndefined(this$1.flags.invalid) && this$1.flags.validated) {\n      toggleClass(el, this$1.classNames.invalid, this$1.flags.invalid);\n    }\n  };\n\n  if (!isCheckboxOrRadioInput(this.el)) {\n    applyClasses(this.el);\n    return;\n  }\n\n  var els = document.querySelectorAll((\"input[name=\\\"\" + (this.el.name) + \"\\\"]\"));\n  toArray(els).forEach(applyClasses);\n};\n\n/**\n * Adds the listeners required for automatic classes and some flags.\n */\nField.prototype.addActionListeners = function addActionListeners () {\n    var this$1 = this;\n\n  // remove previous listeners.\n  this.unwatch(/class/);\n\n  if (!this.el) { return; }\n\n  var onBlur = function () {\n    this$1.flags.touched = true;\n    this$1.flags.untouched = false;\n    if (this$1.classes) {\n      toggleClass(this$1.el, this$1.classNames.touched, true);\n      toggleClass(this$1.el, this$1.classNames.untouched, false);\n    }\n\n    // only needed once.\n    this$1.unwatch(/^class_blur$/);\n  };\n\n  var inputEvent = isTextInput(this.el) ? 'input' : 'change';\n  var onInput = function () {\n    this$1.flags.dirty = true;\n    this$1.flags.pristine = false;\n    if (this$1.classes) {\n      toggleClass(this$1.el, this$1.classNames.pristine, false);\n      toggleClass(this$1.el, this$1.classNames.dirty, true);\n    }\n\n    // only needed once.\n    this$1.unwatch(/^class_input$/);\n  };\n\n  if (this.componentInstance && isCallable(this.componentInstance.$once)) {\n    this.componentInstance.$once('input', onInput);\n    this.componentInstance.$once('blur', onBlur);\n    this.watchers.push({\n      tag: 'class_input',\n      unwatch: function () {\n        this$1.componentInstance.$off('input', onInput);\n      }\n    });\n    this.watchers.push({\n      tag: 'class_blur',\n      unwatch: function () {\n        this$1.componentInstance.$off('blur', onBlur);\n      }\n    });\n    return;\n  }\n\n  if (!this.el) { return; }\n\n  addEventListener(this.el, inputEvent, onInput);\n  // Checkboxes and radio buttons on Mac don't emit blur naturally, so we listen on click instead.\n  var blurEvent = isCheckboxOrRadioInput(this.el) ? 'change' : 'blur';\n  addEventListener(this.el, blurEvent, onBlur);\n  this.watchers.push({\n    tag: 'class_input',\n    unwatch: function () {\n      this$1.el.removeEventListener(inputEvent, onInput);\n    }\n  });\n\n  this.watchers.push({\n    tag: 'class_blur',\n    unwatch: function () {\n      this$1.el.removeEventListener(blurEvent, onBlur);\n    }\n  });\n};\n\nField.prototype.checkValueChanged = function checkValueChanged () {\n  // handle some people initialize the value to null, since text inputs have empty string value.\n  if (this.initialValue === null && this.value === '' && isTextInput(this.el)) {\n    return false;\n  }\n\n  return this.value !== this.initialValue;\n};\n\n/**\n * Determines the suitable primary event to listen for.\n */\nField.prototype._determineInputEvent = function _determineInputEvent () {\n  // if its a custom component, use the customized model event or the input event.\n  if (this.componentInstance) {\n    return (this.componentInstance.$options.model && this.componentInstance.$options.model.event) || 'input';\n  }\n\n  if (this.model && this.model.lazy) {\n    return 'change';\n  }\n\n  if (isTextInput(this.el)) {\n    return 'input';\n  }\n\n  return 'change';\n};\n\n/**\n * Determines the list of events to listen to.\n */\nField.prototype._determineEventList = function _determineEventList (defaultInputEvent) {\n    var this$1 = this;\n\n  // if no event is configured, or it is a component or a text input then respect the user choice.\n  if (!this.events.length || this.componentInstance || isTextInput(this.el)) {\n    return [].concat( this.events ).map(function (evt) {\n      if (evt === 'input' && this$1.model && this$1.model.lazy) {\n        return 'change';\n      }\n\n      return evt;\n    });\n  }\n\n  // force suitable event for non-text type fields.\n  return this.events.map(function (e) {\n    if (e === 'input') {\n      return defaultInputEvent;\n    }\n\n    return e;\n  });\n};\n\n/**\n * Adds the listeners required for validation.\n */\nField.prototype.addValueListeners = function addValueListeners () {\n    var this$1 = this;\n\n  this.unwatch(/^input_.+/);\n  if (!this.listen || !this.el) { return; }\n\n  var token = { cancelled: false };\n  var fn = this.targetOf ? function () {\n    var target = this$1.validator._resolveField((\"#\" + (this$1.targetOf)));\n    if (target && target.flags.validated) {\n      this$1.validator.validate((\"#\" + (this$1.targetOf)));\n    }\n  } : function () {\n      var args = [], len = arguments.length;\n      while ( len-- ) args[ len ] = arguments[ len ];\n\n    // if its a DOM event, resolve the value, otherwise use the first parameter as the value.\n    if (args.length === 0 || isEvent(args[0])) {\n      args[0] = this$1.value;\n    }\n\n    this$1.flags.pending = true;\n    this$1._cancellationToken = token;\n    this$1.validator.validate((\"#\" + (this$1.id)), args[0]);\n  };\n\n  var inputEvent = this._determineInputEvent();\n  var events = this._determineEventList(inputEvent);\n\n  // if there is a model and an on input validation is requested.\n  if (this.model && includes(events, inputEvent)) {\n    var ctx = null;\n    var expression = this.model.expression;\n    // if its watchable from the context vm.\n    if (this.model.expression) {\n      ctx = this.vm;\n      expression = this.model.expression;\n    }\n\n    // watch it from the custom component vm instead.\n    if (!expression && this.componentInstance && this.componentInstance.$options.model) {\n      ctx = this.componentInstance;\n      expression = this.componentInstance.$options.model.prop || 'value';\n    }\n\n    if (ctx && expression) {\n      var debouncedFn = debounce(fn, this.delay[inputEvent], token);\n      var unwatch = ctx.$watch(expression, debouncedFn);\n      this.watchers.push({\n        tag: 'input_model',\n        unwatch: function () {\n          this$1.vm.$nextTick(function () {\n            unwatch();\n          });\n        }\n      });\n\n      // filter out input event as it is already handled by the watcher API.\n      events = events.filter(function (e) { return e !== inputEvent; });\n    }\n  }\n\n  // Add events.\n  events.forEach(function (e) {\n    var debouncedFn = debounce(fn, this$1.delay[e], token);\n\n    this$1._addComponentEventListener(e, debouncedFn);\n    this$1._addHTMLEventListener(e, debouncedFn);\n  });\n};\n\nField.prototype._addComponentEventListener = function _addComponentEventListener (evt, validate) {\n    var this$1 = this;\n\n  if (!this.componentInstance) { return; }\n\n  this.componentInstance.$on(evt, validate);\n  this.watchers.push({\n    tag: 'input_vue',\n    unwatch: function () {\n      this$1.componentInstance.$off(evt, validate);\n    }\n  });\n};\n\nField.prototype._addHTMLEventListener = function _addHTMLEventListener (evt, validate) {\n    var this$1 = this;\n\n  if (!this.el || this.componentInstance) { return; }\n\n  // listen for the current element.\n  var addListener = function (el) {\n    addEventListener(el, evt, validate);\n    this$1.watchers.push({\n      tag: 'input_native',\n      unwatch: function () {\n        el.removeEventListener(evt, validate);\n      }\n    });\n  };\n\n  addListener(this.el);\n  if (!isCheckboxOrRadioInput(this.el)) {\n    return;\n  }\n\n  var els = document.querySelectorAll((\"input[name=\\\"\" + (this.el.name) + \"\\\"]\"));\n  toArray(els).forEach(function (el) {\n    // skip if it is added by v-validate and is not the current element.\n    if (el._veeValidateId && el !== this$1.el) {\n      return;\n    }\n\n    addListener(el);\n  });\n};\n\n/**\n * Updates aria attributes on the element.\n */\nField.prototype.updateAriaAttrs = function updateAriaAttrs () {\n    var this$1 = this;\n\n  if (!this.aria || !this.el || !isCallable(this.el.setAttribute)) { return; }\n\n  var applyAriaAttrs = function (el) {\n    el.setAttribute('aria-required', this$1.isRequired ? 'true' : 'false');\n    el.setAttribute('aria-invalid', this$1.flags.invalid ? 'true' : 'false');\n  };\n\n  if (!isCheckboxOrRadioInput(this.el)) {\n    applyAriaAttrs(this.el);\n    return;\n  }\n\n  var els = document.querySelectorAll((\"input[name=\\\"\" + (this.el.name) + \"\\\"]\"));\n  toArray(els).forEach(applyAriaAttrs);\n};\n\n/**\n * Updates the custom validity for the field.\n */\nField.prototype.updateCustomValidity = function updateCustomValidity () {\n  if (!this.validity || !this.el || !isCallable(this.el.setCustomValidity) || !this.validator.errors) { return; }\n\n  this.el.setCustomValidity(this.flags.valid ? '' : (this.validator.errors.firstById(this.id) || ''));\n};\n\n/**\n * Removes all listeners.\n */\nField.prototype.destroy = function destroy () {\n  // ignore the result of any ongoing validation.\n  if (this._cancellationToken) {\n    this._cancellationToken.cancelled = true;\n  }\n\n  this.unwatch();\n  this.dependencies.forEach(function (d) { return d.field.destroy(); });\n  this.dependencies = [];\n};\n\nObject.defineProperties( Field.prototype, prototypeAccessors$1 );\n\n// \n\nvar FieldBag = function FieldBag (items) {\n  if ( items === void 0 ) items = [];\n\n  this.items = items || [];\n  this.itemsById = this.items.reduce(function (itemsById, item) {\n    itemsById[item.id] = item;\n    return itemsById;\n  }, {});\n};\n\nvar prototypeAccessors$2 = { length: { configurable: true } };\n\nFieldBag.prototype[typeof Symbol === 'function' ? Symbol.iterator : '@@iterator'] = function () {\n    var this$1 = this;\n\n  var index = 0;\n  return {\n    next: function () {\n      return { value: this$1.items[index++], done: index > this$1.items.length };\n    }\n  };\n};\n\n/**\n * Gets the current items length.\n */\n\nprototypeAccessors$2.length.get = function () {\n  return this.items.length;\n};\n\n/**\n * Finds the first field that matches the provided matcher object.\n */\nFieldBag.prototype.find = function find$1 (matcher) {\n  return find(this.items, function (item) { return item.matches(matcher); });\n};\n\n/**\n * Finds the field with the given id, using a plain object as a map to link\n * ids to items faster than by looping over the array and matching.\n */\nFieldBag.prototype.findById = function findById (id) {\n  return this.itemsById[id] || null;\n};\n\n/**\n * Filters the items down to the matched fields.\n */\nFieldBag.prototype.filter = function filter (matcher) {\n  // multiple matchers to be tried.\n  if (Array.isArray(matcher)) {\n    return this.items.filter(function (item) { return matcher.some(function (m) { return item.matches(m); }); });\n  }\n\n  return this.items.filter(function (item) { return item.matches(matcher); });\n};\n\n/**\n * Maps the field items using the mapping function.\n */\nFieldBag.prototype.map = function map (mapper) {\n  return this.items.map(mapper);\n};\n\n/**\n * Finds and removes the first field that matches the provided matcher object, returns the removed item.\n */\nFieldBag.prototype.remove = function remove (matcher) {\n  var item = null;\n  if (matcher instanceof Field) {\n    item = matcher;\n  } else {\n    item = this.find(matcher);\n  }\n\n  if (!item) { return null; }\n\n  var index = this.items.indexOf(item);\n  this.items.splice(index, 1);\n  delete this.itemsById[item.id];\n\n  return item;\n};\n\n/**\n * Adds a field item to the list.\n */\nFieldBag.prototype.push = function push (item) {\n  if (! (item instanceof Field)) {\n    throw createError('FieldBag only accepts instances of Field that has an id defined.');\n  }\n\n  if (!item.id) {\n    throw createError('Field id must be defined.');\n  }\n\n  if (this.findById(item.id)) {\n    throw createError((\"Field with id \" + (item.id) + \" is already added.\"));\n  }\n\n  this.items.push(item);\n  this.itemsById[item.id] = item;\n};\n\nObject.defineProperties( FieldBag.prototype, prototypeAccessors$2 );\n\nvar ScopedValidator = function ScopedValidator (base, vm) {\n  this.id = vm._uid;\n  this._base = base;\n  this._paused = false;\n\n  // create a mirror bag with limited component scope.\n  this.errors = new ErrorBag(base.errors, this.id);\n};\n\nvar prototypeAccessors$3 = { flags: { configurable: true },rules: { configurable: true },fields: { configurable: true },dictionary: { configurable: true },locale: { configurable: true } };\n\nprototypeAccessors$3.flags.get = function () {\n    var this$1 = this;\n\n  return this._base.fields.items.filter(function (f) { return f.vmId === this$1.id; }).reduce(function (acc, field) {\n    if (field.scope) {\n      if (!acc[(\"$\" + (field.scope))]) {\n        acc[(\"$\" + (field.scope))] = {};\n      }\n\n      acc[(\"$\" + (field.scope))][field.name] = field.flags;\n    }\n\n    acc[field.name] = field.flags;\n\n    return acc;\n  }, {});\n};\n\nprototypeAccessors$3.rules.get = function () {\n  return this._base.rules;\n};\n\nprototypeAccessors$3.fields.get = function () {\n  return new FieldBag(this._base.fields.filter({ vmId: this.id }));\n};\n\nprototypeAccessors$3.dictionary.get = function () {\n  return this._base.dictionary;\n};\n\nprototypeAccessors$3.locale.get = function () {\n  return this._base.locale;\n};\n\nprototypeAccessors$3.locale.set = function (val) {\n  this._base.locale = val;\n};\n\nScopedValidator.prototype.localize = function localize () {\n    var ref;\n\n    var args = [], len = arguments.length;\n    while ( len-- ) args[ len ] = arguments[ len ];\n  return (ref = this._base).localize.apply(ref, args);\n};\n\nScopedValidator.prototype.update = function update () {\n    var ref;\n\n    var args = [], len = arguments.length;\n    while ( len-- ) args[ len ] = arguments[ len ];\n  return (ref = this._base).update.apply(ref, args);\n};\n\nScopedValidator.prototype.attach = function attach (opts) {\n  var attachOpts = assign({}, opts, { vmId: this.id });\n\n  return this._base.attach(attachOpts);\n};\n\nScopedValidator.prototype.pause = function pause () {\n  this._paused = true;\n};\n\nScopedValidator.prototype.resume = function resume () {\n  this._paused = false;\n};\n\nScopedValidator.prototype.remove = function remove (ruleName) {\n  return this._base.remove(ruleName);\n};\n\nScopedValidator.prototype.detach = function detach (name, scope) {\n  return this._base.detach(name, scope, this.id);\n};\n\nScopedValidator.prototype.extend = function extend () {\n    var ref;\n\n    var args = [], len = arguments.length;\n    while ( len-- ) args[ len ] = arguments[ len ];\n  return (ref = this._base).extend.apply(ref, args);\n};\n\nScopedValidator.prototype.validate = function validate (descriptor, value, opts) {\n    if ( opts === void 0 ) opts = {};\n\n  if (this._paused) { return Promise.resolve(true); }\n\n  return this._base.validate(descriptor, value, assign({}, { vmId: this.id }, opts || {}));\n};\n\nScopedValidator.prototype.verify = function verify () {\n    var ref;\n\n    var args = [], len = arguments.length;\n    while ( len-- ) args[ len ] = arguments[ len ];\n  return (ref = this._base).verify.apply(ref, args);\n};\n\nScopedValidator.prototype.validateAll = function validateAll (values, opts) {\n    if ( opts === void 0 ) opts = {};\n\n  if (this._paused) { return Promise.resolve(true); }\n\n  return this._base.validateAll(values, assign({}, { vmId: this.id }, opts || {}));\n};\n\nScopedValidator.prototype.validateScopes = function validateScopes (opts) {\n    if ( opts === void 0 ) opts = {};\n\n  if (this._paused) { return Promise.resolve(true); }\n\n  return this._base.validateScopes(assign({}, { vmId: this.id }, opts || {}));\n};\n\nScopedValidator.prototype.destroy = function destroy () {\n  delete this.id;\n  delete this._base;\n};\n\nScopedValidator.prototype.reset = function reset (matcher) {\n  return this._base.reset(Object.assign({}, matcher || {}, { vmId: this.id }));\n};\n\nScopedValidator.prototype.flag = function flag () {\n    var ref;\n\n    var args = [], len = arguments.length;\n    while ( len-- ) args[ len ] = arguments[ len ];\n  return (ref = this._base).flag.apply(ref, args.concat( [this.id] ));\n};\n\nScopedValidator.prototype._resolveField = function _resolveField () {\n    var ref;\n\n    var args = [], len = arguments.length;\n    while ( len-- ) args[ len ] = arguments[ len ];\n  return (ref = this._base)._resolveField.apply(ref, args);\n};\n\nObject.defineProperties( ScopedValidator.prototype, prototypeAccessors$3 );\n\nvar VALIDATOR = null;\n\nvar getValidator = function () {\n  return VALIDATOR;\n};\n\nvar setValidator = function (value) {\n  VALIDATOR = value;\n\n  return value;\n};\n\n// \n\n/**\n * Checks if a parent validator instance was requested.\n */\nvar requestsValidator = function (injections) {\n  if (isObject(injections) && injections.$validator) {\n    return true;\n  }\n\n  return false;\n};\n\nvar mixin = {\n  provide: function provide () {\n    if (this.$validator && !isBuiltInComponent(this.$vnode)) {\n      return {\n        $validator: this.$validator\n      };\n    }\n\n    return {};\n  },\n  beforeCreate: function beforeCreate () {\n    // if built in do nothing.\n    if (isBuiltInComponent(this.$vnode) || this.$options.$__veeInject === false) {\n      return;\n    }\n\n    // if its a root instance set the config if it exists.\n    if (!this.$parent) {\n      setConfig(this.$options.$_veeValidate || {});\n    }\n\n    var options = resolveConfig(this);\n\n    // if its a root instance, inject anyways, or if it requested a new instance.\n    if (!this.$parent || (this.$options.$_veeValidate && /new/.test(this.$options.$_veeValidate.validator))) {\n      this.$validator = new ScopedValidator(getValidator(), this);\n    }\n\n    var requested = requestsValidator(this.$options.inject);\n\n    // if automatic injection is enabled and no instance was requested.\n    if (! this.$validator && options.inject && !requested) {\n      this.$validator = new ScopedValidator(getValidator(), this);\n    }\n\n    // don't inject errors or fieldBag as no validator was resolved.\n    if (!requested && !this.$validator) {\n      return;\n    }\n\n    // There is a validator but it isn't injected, mark as reactive.\n    if (!requested && this.$validator) {\n      var Vue = this.$options._base; // the vue constructor.\n      Vue.util.defineReactive(this.$validator, 'errors', this.$validator.errors);\n    }\n\n    if (!this.$options.computed) {\n      this.$options.computed = {};\n    }\n\n    this.$options.computed[options.errorBagName || 'errors'] = function errorBagGetter () {\n      return this.$validator.errors;\n    };\n    this.$options.computed[options.fieldsBagName || 'fields'] = function fieldBagGetter () {\n      return this.$validator.fields.items.reduce(function (acc, field) {\n        if (field.scope) {\n          if (!acc[(\"$\" + (field.scope))]) {\n            acc[(\"$\" + (field.scope))] = {};\n          }\n\n          acc[(\"$\" + (field.scope))][field.name] = field.flags;\n\n          return acc;\n        }\n\n        acc[field.name] = field.flags;\n\n        return acc;\n      }, {});\n    };\n  },\n  beforeDestroy: function beforeDestroy () {\n    if (this.$validator && this._uid === this.$validator.id) {\n      this.$validator.errors.clear(); // remove errors generated by this component.\n    }\n  }\n};\n\n// \n\n/**\n * Finds the requested field by id from the context object.\n */\nfunction findField (el, context) {\n  if (!context || !context.$validator) {\n    return null;\n  }\n\n  return context.$validator.fields.findById(el._veeValidateId);\n}\nvar directive = {\n  bind: function bind (el, binding, vnode) {\n    var validator = vnode.context.$validator;\n    if (!validator) {\n      if (process.env.NODE_ENV !== 'production') {\n        warn(\"No validator instance is present on vm, did you forget to inject '$validator'?\");\n      }\n\n      return;\n    }\n\n    var fieldOptions = Resolver.generate(el, binding, vnode);\n    validator.attach(fieldOptions);\n  },\n  inserted: function inserted (el, binding, vnode) {\n    var field = findField(el, vnode.context);\n    var scope = Resolver.resolveScope(el, binding, vnode);\n\n    // skip if scope hasn't changed.\n    if (!field || scope === field.scope) { return; }\n\n    // only update scope.\n    field.update({ scope: scope });\n\n    // allows the field to re-evaluated once more in the update hook.\n    field.updated = false;\n  },\n  update: function update (el, binding, vnode) {\n    var field = findField(el, vnode.context);\n\n    // make sure we don't do unneccasary work if no important change was done.\n    if (!field || (field.updated && isEqual(binding.value, binding.oldValue))) { return; }\n    var scope = Resolver.resolveScope(el, binding, vnode);\n    var rules = Resolver.resolveRules(el, binding, vnode);\n\n    field.update({\n      scope: scope,\n      rules: rules\n    });\n  },\n  unbind: function unbind (el, binding, ref) {\n    var context = ref.context;\n\n    var field = findField(el, context);\n    if (!field) { return; }\n\n    context.$validator.detach(field);\n  }\n};\n\n// \n\nvar Validator = function Validator (validations, options, pluginContainer) {\n  if ( options === void 0 ) options = { fastExit: true };\n  if ( pluginContainer === void 0 ) pluginContainer = null;\n\n  this.errors = new ErrorBag();\n  this.fields = new FieldBag();\n  this._createFields(validations);\n  this.paused = false;\n  this.fastExit = !isNullOrUndefined(options && options.fastExit) ? options.fastExit : true;\n  this.$vee = pluginContainer || {\n    _vm: {\n      $nextTick: function (cb) { return isCallable(cb) ? cb() : Promise.resolve(); },\n      $emit: function () {},\n      $off: function () {}\n    }\n  };\n};\n\nvar prototypeAccessors$4 = { rules: { configurable: true },dictionary: { configurable: true },flags: { configurable: true },locale: { configurable: true } };\nvar staticAccessors$1 = { rules: { configurable: true },dictionary: { configurable: true },locale: { configurable: true } };\n\n/**\n * @deprecated\n */\nstaticAccessors$1.rules.get = function () {\n  if (process.env.NODE_ENV !== 'production') {\n    warn('this accessor will be deprecated, use `import { rules } from \"vee-validate\"` instead.');\n  }\n\n  return RuleContainer.rules;\n};\n\n/**\n * @deprecated\n */\nprototypeAccessors$4.rules.get = function () {\n  if (process.env.NODE_ENV !== 'production') {\n    warn('this accessor will be deprecated, use `import { rules } from \"vee-validate\"` instead.');\n  }\n\n  return RuleContainer.rules;\n};\n\nprototypeAccessors$4.dictionary.get = function () {\n  return DictionaryResolver.getDriver();\n};\n\nstaticAccessors$1.dictionary.get = function () {\n  return DictionaryResolver.getDriver();\n};\n\nprototypeAccessors$4.flags.get = function () {\n  return this.fields.items.reduce(function (acc, field) {\n      var obj;\n\n    if (field.scope) {\n      acc[(\"$\" + (field.scope))] = ( obj = {}, obj[field.name] = field.flags, obj );\n\n      return acc;\n    }\n\n    acc[field.name] = field.flags;\n\n    return acc;\n  }, {});\n};\n\n/**\n * Getter for the current locale.\n */\nprototypeAccessors$4.locale.get = function () {\n  return Validator.locale;\n};\n\n/**\n * Setter for the validator locale.\n */\nprototypeAccessors$4.locale.set = function (value) {\n  Validator.locale = value;\n};\n\nstaticAccessors$1.locale.get = function () {\n  return DictionaryResolver.getDriver().locale;\n};\n\n/**\n * Setter for the validator locale.\n */\nstaticAccessors$1.locale.set = function (value) {\n  var hasChanged = value !== DictionaryResolver.getDriver().locale;\n  DictionaryResolver.getDriver().locale = value;\n  if (hasChanged && Validator.$vee && Validator.$vee._vm) {\n    Validator.$vee._vm.$emit('localeChanged');\n  }\n};\n\n/**\n * Static constructor.\n * @deprecated\n */\nValidator.create = function create (validations, options) {\n  if (process.env.NODE_ENV !== 'production') {\n    warn('Please use `new` to create new validator instances.');\n  }\n\n  return new Validator(validations, options);\n};\n\n/**\n * Adds a custom validator to the list of validation rules.\n */\nValidator.extend = function extend (name, validator, options) {\n    if ( options === void 0 ) options = {};\n\n  Validator._guardExtend(name, validator);\n  // rules imported from the minimal bundle\n  // will have the options embedded in them\n  var mergedOpts = validator.options || {};\n  Validator._merge(name, {\n    validator: validator,\n    paramNames: (options && options.paramNames) || validator.paramNames,\n    options: assign({ hasTarget: false, immediate: true }, mergedOpts, options || {})\n  });\n};\n\n/**\n * Removes a rule from the list of validators.\n * @deprecated\n */\nValidator.remove = function remove (name) {\n  if (process.env.NODE_ENV !== 'production') {\n    warn('this method will be deprecated, you can still override your rules with `extend`');\n  }\n\n  RuleContainer.remove(name);\n};\n\n/**\n * Adds and sets the current locale for the validator.\n*/\nValidator.prototype.localize = function localize (lang, dictionary) {\n  Validator.localize(lang, dictionary);\n};\n\n/**\n * Adds and sets the current locale for the validator.\n */\nValidator.localize = function localize (lang, dictionary) {\n    var obj;\n\n  if (isObject(lang)) {\n    DictionaryResolver.getDriver().merge(lang);\n    return;\n  }\n\n  // merge the dictionary.\n  if (dictionary) {\n    var locale = lang || dictionary.name;\n    dictionary = assign({}, dictionary);\n    DictionaryResolver.getDriver().merge(( obj = {}, obj[locale] = dictionary, obj ));\n  }\n\n  if (lang) {\n    // set the locale.\n    Validator.locale = lang;\n  }\n};\n\n/**\n * Registers a field to be validated.\n */\nValidator.prototype.attach = function attach (fieldOpts) {\n    var this$1 = this;\n\n  // We search for a field with the same name & scope, having persist enabled\n  var oldFieldMatcher = { name: fieldOpts.name, scope: fieldOpts.scope, persist: true };\n  var oldField = fieldOpts.persist ? this.fields.find(oldFieldMatcher) : null;\n\n  if (oldField) {\n    // We keep the flags of the old field, then we remove its instance\n    fieldOpts.flags = oldField.flags;\n    oldField.destroy();\n    this.fields.remove(oldField);\n  }\n\n  // fixes initial value detection with v-model and select elements.\n  var value = fieldOpts.initialValue;\n  var field = new Field(fieldOpts);\n  this.fields.push(field);\n\n  // validate the field initially\n  if (field.immediate) {\n    this.$vee._vm.$nextTick(function () { return this$1.validate((\"#\" + (field.id)), value || field.value, { vmId: fieldOpts.vmId }); });\n  } else {\n    this._validate(field, value || field.value, { initial: true }).then(function (result) {\n      field.flags.valid = result.valid;\n      field.flags.invalid = !result.valid;\n    });\n  }\n\n  return field;\n};\n\n/**\n * Sets the flags on a field.\n */\nValidator.prototype.flag = function flag (name, flags, uid) {\n    if ( uid === void 0 ) uid = null;\n\n  var field = this._resolveField(name, undefined, uid);\n  if (!field || !flags) {\n    return;\n  }\n\n  field.setFlags(flags);\n};\n\n/**\n * Removes a field from the validator.\n */\nValidator.prototype.detach = function detach (name, scope, uid) {\n  var field = isCallable(name.destroy) ? name : this._resolveField(name, scope, uid);\n  if (!field) { return; }\n\n  // We destroy/remove the field & error instances if it's not a `persist` one\n  if (!field.persist) {\n    field.destroy();\n    this.errors.remove(field.name, field.scope, field.vmId);\n    this.fields.remove(field);\n  }\n};\n\n/**\n * Adds a custom validator to the list of validation rules.\n */\nValidator.prototype.extend = function extend (name, validator, options) {\n    if ( options === void 0 ) options = {};\n\n  Validator.extend(name, validator, options);\n};\n\nValidator.prototype.reset = function reset (matcher) {\n    var this$1 = this;\n\n  // two ticks\n  return this.$vee._vm.$nextTick().then(function () {\n    return this$1.$vee._vm.$nextTick();\n  }).then(function () {\n    this$1.fields.filter(matcher).forEach(function (field) {\n      field.waitFor(null);\n      field.reset(); // reset field flags.\n      this$1.errors.remove(field.name, field.scope, matcher && matcher.vmId);\n    });\n  });\n};\n\n/**\n * Updates a field, updating both errors and flags.\n */\nValidator.prototype.update = function update (id, ref) {\n    var scope = ref.scope;\n\n  var field = this._resolveField((\"#\" + id));\n  if (!field) { return; }\n\n  // remove old scope.\n  this.errors.update(id, { scope: scope });\n};\n\n/**\n * Removes a rule from the list of validators.\n * @deprecated\n */\nValidator.prototype.remove = function remove (name) {\n  Validator.remove(name);\n};\n\n/**\n * Validates a value against a registered field validations.\n */\nValidator.prototype.validate = function validate (fieldDescriptor, value, ref) {\n    var this$1 = this;\n    if ( ref === void 0 ) ref = {};\n    var silent = ref.silent;\n    var vmId = ref.vmId;\n\n  if (this.paused) { return Promise.resolve(true); }\n\n  // overload to validate all.\n  if (isNullOrUndefined(fieldDescriptor)) {\n    return this.validateScopes({ silent: silent, vmId: vmId });\n  }\n\n  // overload to validate scope-less fields.\n  if (fieldDescriptor === '*') {\n    return this.validateAll(undefined, { silent: silent, vmId: vmId });\n  }\n\n  // if scope validation was requested.\n  if (/^(.+)\\.\\*$/.test(fieldDescriptor)) {\n    var matched = fieldDescriptor.match(/^(.+)\\.\\*$/)[1];\n    return this.validateAll(matched);\n  }\n\n  var field = this._resolveField(fieldDescriptor);\n  if (!field) {\n    return this._handleFieldNotFound(fieldDescriptor);\n  }\n\n  if (!silent) { field.flags.pending = true; }\n  if (value === undefined) {\n    value = field.value;\n  }\n\n  var validationPromise = this._validate(field, value);\n  field.waitFor(validationPromise);\n\n  return validationPromise.then(function (result) {\n    if (!silent && field.isWaitingFor(validationPromise)) {\n      // allow next validation to mutate the state.\n      field.waitFor(null);\n      this$1._handleValidationResults([result], vmId);\n    }\n\n    return result.valid;\n  });\n};\n\n/**\n * Pauses the validator.\n */\nValidator.prototype.pause = function pause () {\n  this.paused = true;\n\n  return this;\n};\n\n/**\n * Resumes the validator.\n */\nValidator.prototype.resume = function resume () {\n  this.paused = false;\n\n  return this;\n};\n\n/**\n * Validates each value against the corresponding field validations.\n */\nValidator.prototype.validateAll = function validateAll (values, ref) {\n    var this$1 = this;\n    if ( ref === void 0 ) ref = {};\n    var silent = ref.silent;\n    var vmId = ref.vmId;\n\n  if (this.paused) { return Promise.resolve(true); }\n\n  var matcher = null;\n  var providedValues = false;\n\n  if (typeof values === 'string') {\n    matcher = { scope: values, vmId: vmId };\n  } else if (isObject(values)) {\n    matcher = Object.keys(values).map(function (key) {\n      return { name: key, vmId: vmId, scope: null };\n    });\n    providedValues = true;\n  } else if (Array.isArray(values)) {\n    matcher = values.map(function (key) {\n      return typeof key === 'object' ? Object.assign({ vmId: vmId }, key) : { name: key, vmId: vmId };\n    });\n  } else {\n    matcher = { scope: null, vmId: vmId };\n  }\n\n  return Promise.all(\n    this.fields.filter(matcher).map(function (field) { return this$1._validate(field, providedValues ? values[field.name] : field.value); })\n  ).then(function (results) {\n    if (!silent) {\n      this$1._handleValidationResults(results, vmId);\n    }\n\n    return results.every(function (t) { return t.valid; });\n  });\n};\n\n/**\n * Validates all scopes.\n */\nValidator.prototype.validateScopes = function validateScopes (ref) {\n    var this$1 = this;\n    if ( ref === void 0 ) ref = {};\n    var silent = ref.silent;\n    var vmId = ref.vmId;\n\n  if (this.paused) { return Promise.resolve(true); }\n\n  return Promise.all(\n    this.fields.filter({ vmId: vmId }).map(function (field) { return this$1._validate(field, field.value); })\n  ).then(function (results) {\n    if (!silent) {\n      this$1._handleValidationResults(results, vmId);\n    }\n\n    return results.every(function (t) { return t.valid; });\n  });\n};\n\n/**\n * Validates a value against the rules.\n */\nValidator.prototype.verify = function verify (value, rules, options) {\n    if ( options === void 0 ) options = {};\n\n  var field = {\n    name: (options && options.name) || '{field}',\n    rules: normalizeRules(rules),\n    bails: getPath('bails', options, true),\n    forceRequired: false,\n    get isRequired () {\n      return !!this.rules.required || this.forceRequired;\n    }\n  };\n\n  var targetRules = Object.keys(field.rules).filter(RuleContainer.isTargetRule);\n  if (targetRules.length && options && isObject(options.values)) {\n    field.dependencies = targetRules.map(function (rule) {\n      var ref = field.rules[rule];\n        var targetKey = ref[0];\n\n      return {\n        name: rule,\n        field: { value: options.values[targetKey] }\n      };\n    });\n  }\n\n  return this._validate(field, value).then(function (result) {\n    var errors = [];\n    var ruleMap = {};\n    result.errors.forEach(function (e) {\n      errors.push(e.msg);\n      ruleMap[e.rule] = e.msg;\n    });\n\n    return {\n      valid: result.valid,\n      errors: errors,\n      failedRules: ruleMap\n    };\n  });\n};\n\n/**\n * Perform cleanup.\n */\nValidator.prototype.destroy = function destroy () {\n  this.$vee._vm.$off('localeChanged');\n};\n\n/**\n * Creates the fields to be validated.\n */\nValidator.prototype._createFields = function _createFields (validations) {\n    var this$1 = this;\n\n  if (!validations) { return; }\n\n  Object.keys(validations).forEach(function (field) {\n    var options = assign({}, { name: field, rules: validations[field] });\n    this$1.attach(options);\n  });\n};\n\n/**\n * Date rules need the existence of a format, so date_format must be supplied.\n */\nValidator.prototype._getDateFormat = function _getDateFormat (validations) {\n  var format = null;\n  if (validations.date_format && Array.isArray(validations.date_format)) {\n    format = validations.date_format[0];\n  }\n\n  return format || DictionaryResolver.getDriver().getDateFormat(this.locale);\n};\n\n/**\n * Formats an error message for field and a rule.\n */\nValidator.prototype._formatErrorMessage = function _formatErrorMessage (field, rule, data, targetName) {\n    if ( data === void 0 ) data = {};\n    if ( targetName === void 0 ) targetName = null;\n\n  var name = this._getFieldDisplayName(field);\n  var params = this._getLocalizedParams(rule, targetName);\n\n  return DictionaryResolver.getDriver().getFieldMessage(this.locale, field.name, rule.name, [name, params, data]);\n};\n\n/**\n * We need to convert any object param to an array format since the locales do not handle params as objects yet.\n */\nValidator.prototype._convertParamObjectToArray = function _convertParamObjectToArray (obj, ruleName) {\n  if (Array.isArray(obj)) {\n    return obj;\n  }\n\n  var paramNames = RuleContainer.getParamNames(ruleName);\n  if (!paramNames || !isObject(obj)) {\n    return obj;\n  }\n\n  return paramNames.reduce(function (prev, paramName) {\n    if (paramName in obj) {\n      prev.push(obj[paramName]);\n    }\n\n    return prev;\n  }, []);\n};\n\n/**\n * Translates the parameters passed to the rule (mainly for target fields).\n */\nValidator.prototype._getLocalizedParams = function _getLocalizedParams (rule, targetName) {\n    if ( targetName === void 0 ) targetName = null;\n\n  var params = this._convertParamObjectToArray(rule.params, rule.name);\n  if (rule.options.hasTarget && params && params[0]) {\n    var localizedName = targetName || DictionaryResolver.getDriver().getAttribute(this.locale, params[0], params[0]);\n    return [localizedName].concat(params.slice(1));\n  }\n\n  return params;\n};\n\n/**\n * Resolves an appropriate display name, first checking 'data-as' or the registered 'prettyName'\n */\nValidator.prototype._getFieldDisplayName = function _getFieldDisplayName (field) {\n  return field.alias || DictionaryResolver.getDriver().getAttribute(this.locale, field.name, field.name);\n};\n\n/**\n * Converts an array of params to an object with named properties.\n * Only works if the rule is configured with a paramNames array.\n * Returns the same params if it cannot convert it.\n */\nValidator.prototype._convertParamArrayToObj = function _convertParamArrayToObj (params, ruleName) {\n  var paramNames = RuleContainer.getParamNames(ruleName);\n  if (!paramNames) {\n    return params;\n  }\n\n  if (isObject(params)) {\n    // check if the object is either a config object or a single parameter that is an object.\n    var hasKeys = paramNames.some(function (name) { return Object.keys(params).indexOf(name) !== -1; });\n    // if it has some of the keys, return it as is.\n    if (hasKeys) {\n      return params;\n    }\n    // otherwise wrap the object in an array.\n    params = [params];\n  }\n\n  // Reduce the paramsNames to a param object.\n  return params.reduce(function (prev, value, idx) {\n    prev[paramNames[idx]] = value;\n\n    return prev;\n  }, {});\n};\n\n/**\n * Tests a single input value against a rule.\n */\nValidator.prototype._test = function _test (field, value, rule) {\n    var this$1 = this;\n\n  var validator = RuleContainer.getValidatorMethod(rule.name);\n  var params = Array.isArray(rule.params) ? toArray(rule.params) : rule.params;\n  if (!params) {\n    params = [];\n  }\n\n  var targetName = null;\n  if (!validator || typeof validator !== 'function') {\n    return Promise.reject(createError((\"No such validator '\" + (rule.name) + \"' exists.\")));\n  }\n\n  // has field dependencies.\n  if (rule.options.hasTarget && field.dependencies) {\n    var target = find(field.dependencies, function (d) { return d.name === rule.name; });\n    if (target) {\n      targetName = target.field.alias;\n      params = [target.field.value].concat(params.slice(1));\n    }\n  } else if (rule.name === 'required' && field.rejectsFalse) {\n    // invalidate false if no args were specified and the field rejects false by default.\n    params = params.length ? params : [true];\n  }\n\n  if (rule.options.isDate) {\n    var dateFormat = this._getDateFormat(field.rules);\n    if (rule.name !== 'date_format') {\n      params.push(dateFormat);\n    }\n  }\n\n  var result = validator(value, this._convertParamArrayToObj(params, rule.name));\n\n  // If it is a promise.\n  if (isCallable(result.then)) {\n    return result.then(function (values) {\n      var allValid = true;\n      var data = {};\n      if (Array.isArray(values)) {\n        allValid = values.every(function (t) { return (isObject(t) ? t.valid : t); });\n      } else { // Is a single object/boolean.\n        allValid = isObject(values) ? values.valid : values;\n        data = values.data;\n      }\n\n      return {\n        valid: allValid,\n        data: result.data,\n        errors: allValid ? [] : [this$1._createFieldError(field, rule, data, targetName)]\n      };\n    });\n  }\n\n  if (!isObject(result)) {\n    result = { valid: result, data: {} };\n  }\n\n  return {\n    valid: result.valid,\n    data: result.data,\n    errors: result.valid ? [] : [this._createFieldError(field, rule, result.data, targetName)]\n  };\n};\n\n/**\n * Merges a validator object into the RULES and Messages.\n */\nValidator._merge = function _merge (name, ref) {\n    var validator = ref.validator;\n    var options = ref.options;\n    var paramNames = ref.paramNames;\n\n  var validate = isCallable(validator) ? validator : validator.validate;\n  if (validator.getMessage) {\n    DictionaryResolver.getDriver().setMessage(Validator.locale, name, validator.getMessage);\n  }\n\n  RuleContainer.add(name, {\n    validate: validate,\n    options: options,\n    paramNames: paramNames\n  });\n};\n\n/**\n * Guards from extension violations.\n */\nValidator._guardExtend = function _guardExtend (name, validator) {\n  if (isCallable(validator)) {\n    return;\n  }\n\n  if (!isCallable(validator.validate)) {\n    throw createError(\n      (\"Extension Error: The validator '\" + name + \"' must be a function or have a 'validate' method.\")\n    );\n  }\n};\n\n/**\n * Creates a Field Error Object.\n */\nValidator.prototype._createFieldError = function _createFieldError (field, rule, data, targetName) {\n    var this$1 = this;\n\n  return {\n    id: field.id,\n    vmId: field.vmId,\n    field: field.name,\n    msg: this._formatErrorMessage(field, rule, data, targetName),\n    rule: rule.name,\n    scope: field.scope,\n    regenerate: function () {\n      return this$1._formatErrorMessage(field, rule, data, targetName);\n    }\n  };\n};\n\n/**\n * Tries different strategies to find a field.\n */\nValidator.prototype._resolveField = function _resolveField (name, scope, uid) {\n  if (name[0] === '#') {\n    return this.fields.findById(name.slice(1));\n  }\n\n  if (!isNullOrUndefined(scope)) {\n    return this.fields.find({ name: name, scope: scope, vmId: uid });\n  }\n\n  if (includes(name, '.')) {\n    var ref = name.split('.');\n      var fieldScope = ref[0];\n      var fieldName = ref.slice(1);\n    var field = this.fields.find({ name: fieldName.join('.'), scope: fieldScope, vmId: uid });\n    if (field) {\n      return field;\n    }\n  }\n\n  return this.fields.find({ name: name, scope: null, vmId: uid });\n};\n\n/**\n * Handles when a field is not found.\n */\nValidator.prototype._handleFieldNotFound = function _handleFieldNotFound (name, scope) {\n  var fullName = isNullOrUndefined(scope) ? name : (\"\" + (!isNullOrUndefined(scope) ? scope + '.' : '') + name);\n\n  return Promise.reject(createError(\n    (\"Validating a non-existent field: \\\"\" + fullName + \"\\\". Use \\\"attach()\\\" first.\")\n  ));\n};\n\n/**\n * Handles validation results.\n */\nValidator.prototype._handleValidationResults = function _handleValidationResults (results, vmId) {\n    var this$1 = this;\n\n  var matchers = results.map(function (result) { return ({ id: result.id }); });\n  this.errors.removeById(matchers.map(function (m) { return m.id; }));\n  // remove by name and scope to remove any custom errors added.\n  results.forEach(function (result) {\n    this$1.errors.remove(result.field, result.scope, vmId);\n  });\n  var allErrors = results.reduce(function (prev, curr) {\n    prev.push.apply(prev, curr.errors);\n\n    return prev;\n  }, []);\n\n  this.errors.add(allErrors);\n\n  // handle flags.\n  this.fields.filter(matchers).forEach(function (field) {\n    var result = find(results, function (r) { return r.id === field.id; });\n    field.setFlags({\n      pending: false,\n      valid: result.valid,\n      validated: true\n    });\n  });\n};\n\nValidator.prototype._shouldSkip = function _shouldSkip (field, value) {\n  // field is configured to run through the pipeline regardless\n  if (field.bails === false) {\n    return false;\n  }\n\n  // disabled fields are skipped if useConstraintAttrs is enabled in config\n  if (field.isDisabled && getConfig().useConstraintAttrs) {\n    return true;\n  }\n\n  // skip if the field is not required and has an empty value.\n  return !field.isRequired && (isNullOrUndefined(value) || value === '' || isEmptyArray(value));\n};\n\nValidator.prototype._shouldBail = function _shouldBail (field) {\n  // if the field was configured explicitly.\n  if (field.bails !== undefined) {\n    return field.bails;\n  }\n\n  return this.fastExit;\n};\n\n/**\n * Starts the validation process.\n */\nValidator.prototype._validate = function _validate (field, value, ref) {\n    var this$1 = this;\n    if ( ref === void 0 ) ref = {};\n    var initial = ref.initial;\n\n  var requireRules = Object.keys(field.rules).filter(RuleContainer.isRequireRule);\n\n  field.forceRequired = false;\n  requireRules.forEach(function (rule) {\n    var ruleOptions = RuleContainer.getOptions(rule);\n    var result = this$1._test(field, value, { name: rule, params: field.rules[rule], options: ruleOptions });\n\n    if (isCallable(result.then)) { throw createError('Require rules cannot be async'); }\n    if (!isObject(result)) { throw createError('Require rules has to return an object (see docs)'); }\n\n    if (result.data.required === true) {\n      field.forceRequired = true;\n    }\n  });\n\n  if (this._shouldSkip(field, value)) {\n    return Promise.resolve({ valid: true, id: field.id, field: field.name, scope: field.scope, errors: [] });\n  }\n\n  var promises = [];\n  var errors = [];\n  var isExitEarly = false;\n  if (isCallable(field.checkValueChanged)) {\n    field.flags.changed = field.checkValueChanged();\n  }\n\n  // use of '.some()' is to break iteration in middle by returning true\n  Object.keys(field.rules).filter(function (rule) {\n    if (!initial || !RuleContainer.has(rule)) { return true; }\n\n    return RuleContainer.isImmediate(rule);\n  }).some(function (rule) {\n    var ruleOptions = RuleContainer.getOptions(rule);\n    var result = this$1._test(field, value, { name: rule, params: field.rules[rule], options: ruleOptions });\n    if (isCallable(result.then)) {\n      promises.push(result);\n    } else if (!result.valid && this$1._shouldBail(field)) {\n      errors.push.apply(errors, result.errors);\n      isExitEarly = true;\n    } else {\n      // promisify the result.\n      promises.push(new Promise(function (resolve) { return resolve(result); }));\n    }\n\n    return isExitEarly;\n  });\n\n  if (isExitEarly) {\n    return Promise.resolve({ valid: false, errors: errors, id: field.id, field: field.name, scope: field.scope });\n  }\n\n  return Promise.all(promises).then(function (results) {\n    return results.reduce(function (prev, v) {\n        var ref;\n\n      if (!v.valid) {\n        (ref = prev.errors).push.apply(ref, v.errors);\n      }\n\n      prev.valid = prev.valid && v.valid;\n\n      return prev;\n    }, { valid: true, errors: errors, id: field.id, field: field.name, scope: field.scope });\n  });\n};\n\nObject.defineProperties( Validator.prototype, prototypeAccessors$4 );\nObject.defineProperties( Validator, staticAccessors$1 );\n\n// \n\nvar normalizeValue = function (value) {\n  if (isObject(value)) {\n    return Object.keys(value).reduce(function (prev, key) {\n      prev[key] = normalizeValue(value[key]);\n\n      return prev;\n    }, {});\n  }\n\n  if (isCallable(value)) {\n    return value('{0}', ['{1}', '{2}', '{3}']);\n  }\n\n  return value;\n};\n\nvar normalizeFormat = function (locale) {\n  // normalize messages\n  var dictionary = {};\n  if (locale.messages) {\n    dictionary.messages = normalizeValue(locale.messages);\n  }\n\n  if (locale.custom) {\n    dictionary.custom = normalizeValue(locale.custom);\n  }\n\n  if (locale.attributes) {\n    dictionary.attributes = locale.attributes;\n  }\n\n  if (!isNullOrUndefined(locale.dateFormat)) {\n    dictionary.dateFormat = locale.dateFormat;\n  }\n\n  return dictionary;\n};\n\nvar I18nDictionary = function I18nDictionary (i18n, rootKey) {\n  this.i18n = i18n;\n  this.rootKey = rootKey;\n};\n\nvar prototypeAccessors$5 = { locale: { configurable: true } };\n\nprototypeAccessors$5.locale.get = function () {\n  return this.i18n.locale;\n};\n\nprototypeAccessors$5.locale.set = function (value) {\n  warn('Cannot set locale from the validator when using vue-i18n, use i18n.locale setter instead');\n};\n\nI18nDictionary.prototype.getDateFormat = function getDateFormat (locale) {\n  return this.i18n.getDateTimeFormat(locale || this.locale);\n};\n\nI18nDictionary.prototype.setDateFormat = function setDateFormat (locale, value) {\n  this.i18n.setDateTimeFormat(locale || this.locale, value);\n};\n\nI18nDictionary.prototype.getMessage = function getMessage (_, key, data) {\n  var path = (this.rootKey) + \".messages.\" + key;\n  var dataOptions = data;\n\n  if (Array.isArray(data)) {\n    dataOptions = [].concat.apply([], data);\n  }\n\n  if (this.i18n.te(path)) {\n    return this.i18n.t(path, dataOptions);\n  }\n\n  // fallback to the fallback message\n  if (this.i18n.te(path, this.i18n.fallbackLocale)) {\n    return this.i18n.t(path, this.i18n.fallbackLocale, dataOptions);\n  }\n\n  // fallback to the root message\n  return this.i18n.t(((this.rootKey) + \".messages._default\"), dataOptions);\n};\n\nI18nDictionary.prototype.getAttribute = function getAttribute (_, key, fallback) {\n    if ( fallback === void 0 ) fallback = '';\n\n  var path = (this.rootKey) + \".attributes.\" + key;\n  if (this.i18n.te(path)) {\n    return this.i18n.t(path);\n  }\n\n  return fallback;\n};\n\nI18nDictionary.prototype.getFieldMessage = function getFieldMessage (_, field, key, data) {\n  var path = (this.rootKey) + \".custom.\" + field + \".\" + key;\n  if (this.i18n.te(path)) {\n    return this.i18n.t(path, data);\n  }\n\n  return this.getMessage(_, key, data);\n};\n\nI18nDictionary.prototype.merge = function merge$1 (dictionary) {\n    var this$1 = this;\n\n  Object.keys(dictionary).forEach(function (localeKey) {\n      var obj;\n\n    // i18n doesn't deep merge\n    // first clone the existing locale (avoid mutations to locale)\n    var clone = merge({}, getPath((localeKey + \".\" + (this$1.rootKey)), this$1.i18n.messages, {}));\n    // Merge cloned locale with new one\n    var locale = merge(clone, normalizeFormat(dictionary[localeKey]));\n    this$1.i18n.mergeLocaleMessage(localeKey, ( obj = {}, obj[this$1.rootKey] = locale, obj ));\n    if (locale.dateFormat) {\n      this$1.i18n.setDateTimeFormat(localeKey, locale.dateFormat);\n    }\n  });\n};\n\nI18nDictionary.prototype.setMessage = function setMessage (locale, key, value) {\n    var obj, obj$1;\n\n  this.merge(( obj$1 = {}, obj$1[locale] = {\n      messages: ( obj = {}, obj[key] = value, obj )\n    }, obj$1 ));\n};\n\nI18nDictionary.prototype.setAttribute = function setAttribute (locale, key, value) {\n    var obj, obj$1;\n\n  this.merge(( obj$1 = {}, obj$1[locale] = {\n      attributes: ( obj = {}, obj[key] = value, obj )\n    }, obj$1 ));\n};\n\nObject.defineProperties( I18nDictionary.prototype, prototypeAccessors$5 );\n\nvar aggressive = function () { return ({\n  on: ['input']\n}); };\n\nvar lazy = function () { return ({\n  on: ['change']\n}); };\n\nvar eager = function (ref) {\n  var errors = ref.errors;\n\n  if (errors.length) {\n    return {\n      on: ['input']\n    };\n  }\n\n  return {\n    on: ['change', 'blur']\n  };\n};\n\nvar passive = function () { return ({\n  on: []\n}); };\n\nvar modes = {\n  aggressive: aggressive,\n  eager: eager,\n  passive: passive,\n  lazy: lazy\n};\n\n// \n\nvar Vue;\nvar pendingPlugins;\nvar pluginInstance;\n\nvar VeeValidate$1 = function VeeValidate (config, _Vue) {\n  this.configure(config);\n  pluginInstance = this;\n  if (_Vue) {\n    Vue = _Vue;\n  }\n  this._validator = setValidator(\n    new Validator(null, { fastExit: config && config.fastExit }, this)\n  );\n  this._initVM(this.config);\n  this._initI18n(this.config);\n};\n\nvar prototypeAccessors$6 = { i18nDriver: { configurable: true },config: { configurable: true } };\nvar staticAccessors$2 = { i18nDriver: { configurable: true },config: { configurable: true } };\n\nVeeValidate$1.setI18nDriver = function setI18nDriver (driver, instance) {\n  DictionaryResolver.setDriver(driver, instance);\n};\n\nVeeValidate$1.configure = function configure (cfg) {\n  setConfig(cfg);\n};\n\nVeeValidate$1.setMode = function setMode (mode, implementation) {\n  setConfig({ mode: mode });\n  if (!implementation) {\n    return;\n  }\n\n  if (!isCallable(implementation)) {\n    throw new Error('A mode implementation must be a function');\n  }\n\n  modes[mode] = implementation;\n};\n\nVeeValidate$1.use = function use (plugin, options) {\n    if ( options === void 0 ) options = {};\n\n  if (!isCallable(plugin)) {\n    return warn('The plugin must be a callable function');\n  }\n\n  // Don't install plugins until vee-validate is installed.\n  if (!pluginInstance) {\n    if (!pendingPlugins) {\n      pendingPlugins = [];\n    }\n    pendingPlugins.push({ plugin: plugin, options: options });\n    return;\n  }\n\n  plugin({ Validator: Validator, ErrorBag: ErrorBag, Rules: Validator.rules }, options);\n};\nVeeValidate$1.install = function install (_Vue, opts) {\n  if (Vue && _Vue === Vue) {\n    if (process.env.NODE_ENV !== 'production') {\n      warn('already installed, Vue.use(VeeValidate) should only be called once.');\n    }\n    return;\n  }\n\n  Vue = _Vue;\n  pluginInstance = new VeeValidate$1(opts);\n  // inject the plugin container statically into the validator class\n  Validator.$vee = pluginInstance;\n\n  detectPassiveSupport();\n\n  Vue.mixin(mixin);\n  Vue.directive('validate', directive);\n  if (pendingPlugins) {\n    pendingPlugins.forEach(function (ref) {\n        var plugin = ref.plugin;\n        var options = ref.options;\n\n      VeeValidate$1.use(plugin, options);\n    });\n    pendingPlugins = null;\n  }\n};\n\nprototypeAccessors$6.i18nDriver.get = function () {\n  return DictionaryResolver.getDriver();\n};\n\nstaticAccessors$2.i18nDriver.get = function () {\n  return DictionaryResolver.getDriver();\n};\n\nprototypeAccessors$6.config.get = function () {\n  return getConfig();\n};\n\nstaticAccessors$2.config.get = function () {\n  return getConfig();\n};\n\nVeeValidate$1.prototype._initVM = function _initVM (config) {\n    var this$1 = this;\n\n  this._vm = new Vue({\n    data: function () { return ({\n      errors: this$1._validator.errors,\n      fields: this$1._validator.fields\n    }); }\n  });\n};\n\nVeeValidate$1.prototype._initI18n = function _initI18n (config) {\n    var this$1 = this;\n\n  var dictionary = config.dictionary;\n    var i18n = config.i18n;\n    var i18nRootKey = config.i18nRootKey;\n    var locale = config.locale;\n  var onLocaleChanged = function () {\n    if (dictionary) {\n      this$1.i18nDriver.merge(dictionary);\n    }\n\n    this$1._validator.errors.regenerate();\n  };\n\n  // i18 is being used for localization.\n  if (i18n) {\n    VeeValidate$1.setI18nDriver('i18n', new I18nDictionary(i18n, i18nRootKey));\n    i18n._vm.$watch('locale', onLocaleChanged);\n  } else if (typeof window !== 'undefined') {\n    this._vm.$on('localeChanged', onLocaleChanged);\n  }\n\n  if (dictionary) {\n    this.i18nDriver.merge(dictionary);\n  }\n\n  if (locale && !i18n) {\n    this._validator.localize(locale);\n  }\n};\n\nVeeValidate$1.prototype.configure = function configure (cfg) {\n  setConfig(cfg);\n};\n\nObject.defineProperties( VeeValidate$1.prototype, prototypeAccessors$6 );\nObject.defineProperties( VeeValidate$1, staticAccessors$2 );\n\nVeeValidate$1.mixin = mixin;\nVeeValidate$1.directive = directive;\nVeeValidate$1.Validator = Validator;\nVeeValidate$1.ErrorBag = ErrorBag;\n\n/**\n * Formates file size.\n *\n * @param {Number|String} size\n */\nvar formatFileSize = function (size) {\n  var units = ['Byte', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n  var threshold = 1024;\n  size = Number(size) * threshold;\n  var i = size === 0 ? 0 : Math.floor(Math.log(size) / Math.log(threshold));\n  return (((size / Math.pow(threshold, i)).toFixed(2) * 1) + \" \" + (units[i]));\n};\n\n/**\n * Checks if vee-validate is defined globally.\n */\nvar isDefinedGlobally = function () {\n  return typeof VeeValidate !== 'undefined';\n};\n\nvar obj;\n\nvar messages = {\n  _default: function (field) { return (\"The \" + field + \" value is not valid.\"); },\n  after: function (field, ref) {\n    var target = ref[0];\n    var inclusion = ref[1];\n\n    return (\"The \" + field + \" must be after \" + (inclusion ? 'or equal to ' : '') + target + \".\");\n},\n  alpha: function (field) { return (\"The \" + field + \" field may only contain alphabetic characters.\"); },\n  alpha_dash: function (field) { return (\"The \" + field + \" field may contain alpha-numeric characters as well as dashes and underscores.\"); },\n  alpha_num: function (field) { return (\"The \" + field + \" field may only contain alpha-numeric characters.\"); },\n  alpha_spaces: function (field) { return (\"The \" + field + \" field may only contain alphabetic characters as well as spaces.\"); },\n  before: function (field, ref) {\n    var target = ref[0];\n    var inclusion = ref[1];\n\n    return (\"The \" + field + \" must be before \" + (inclusion ? 'or equal to ' : '') + target + \".\");\n},\n  between: function (field, ref) {\n    var min = ref[0];\n    var max = ref[1];\n\n    return (\"The \" + field + \" field must be between \" + min + \" and \" + max + \".\");\n},\n  confirmed: function (field) { return (\"The \" + field + \" confirmation does not match.\"); },\n  credit_card: function (field) { return (\"The \" + field + \" field is invalid.\"); },\n  date_between: function (field, ref) {\n    var min = ref[0];\n    var max = ref[1];\n\n    return (\"The \" + field + \" must be between \" + min + \" and \" + max + \".\");\n},\n  date_format: function (field, ref) {\n    var format = ref[0];\n\n    return (\"The \" + field + \" must be in the format \" + format + \".\");\n},\n  decimal: function (field, ref) {\n    if ( ref === void 0 ) ref = [];\n    var decimals = ref[0]; if ( decimals === void 0 ) decimals = '*';\n\n    return (\"The \" + field + \" field must be numeric and may contain \" + (!decimals || decimals === '*' ? '' : decimals) + \" decimal points.\");\n},\n  digits: function (field, ref) {\n    var length = ref[0];\n\n    return (\"The \" + field + \" field must be numeric and exactly contain \" + length + \" digits.\");\n},\n  dimensions: function (field, ref) {\n    var width = ref[0];\n    var height = ref[1];\n\n    return (\"The \" + field + \" field must be \" + width + \" pixels by \" + height + \" pixels.\");\n},\n  email: function (field) { return (\"The \" + field + \" field must be a valid email.\"); },\n  excluded: function (field) { return (\"The \" + field + \" field must be a valid value.\"); },\n  ext: function (field) { return (\"The \" + field + \" field must be a valid file.\"); },\n  image: function (field) { return (\"The \" + field + \" field must be an image.\"); },\n  included: function (field) { return (\"The \" + field + \" field must be a valid value.\"); },\n  integer: function (field) { return (\"The \" + field + \" field must be an integer.\"); },\n  ip: function (field) { return (\"The \" + field + \" field must be a valid ip address.\"); },\n  ip_or_fqdn: function (field) { return (\"The \" + field + \" field must be a valid ip address or FQDN.\"); },\n  length: function (field, ref) {\n    var length = ref[0];\n    var max = ref[1];\n\n    if (max) {\n      return (\"The \" + field + \" length must be between \" + length + \" and \" + max + \".\");\n    }\n\n    return (\"The \" + field + \" length must be \" + length + \".\");\n  },\n  max: function (field, ref) {\n    var length = ref[0];\n\n    return (\"The \" + field + \" field may not be greater than \" + length + \" characters.\");\n},\n  max_value: function (field, ref) {\n    var max = ref[0];\n\n    return (\"The \" + field + \" field must be \" + max + \" or less.\");\n},\n  mimes: function (field) { return (\"The \" + field + \" field must have a valid file type.\"); },\n  min: function (field, ref) {\n    var length = ref[0];\n\n    return (\"The \" + field + \" field must be at least \" + length + \" characters.\");\n},\n  min_value: function (field, ref) {\n    var min = ref[0];\n\n    return (\"The \" + field + \" field must be \" + min + \" or more.\");\n},\n  numeric: function (field) { return (\"The \" + field + \" field may only contain numeric characters.\"); },\n  regex: function (field) { return (\"The \" + field + \" field format is invalid.\"); },\n  required: function (field) { return (\"The \" + field + \" field is required.\"); },\n  required_if: function (field, ref) {\n    var target = ref[0];\n\n    return (\"The \" + field + \" field is required when the \" + target + \" field has this value.\");\n},\n  size: function (field, ref) {\n    var size = ref[0];\n\n    return (\"The \" + field + \" size must be less than \" + (formatFileSize(size)) + \".\");\n},\n  url: function (field) { return (\"The \" + field + \" field is not a valid URL.\"); }\n};\n\nvar locale = {\n  name: 'en',\n  messages: messages,\n  attributes: {}\n};\n\nif (isDefinedGlobally()) {\n  // eslint-disable-next-line\n  VeeValidate.Validator.localize(( obj = {}, obj[locale.name] = locale, obj ));\n}\n\nfunction toInteger (dirtyNumber) {\n  if (dirtyNumber === null || dirtyNumber === true || dirtyNumber === false) {\n    return NaN\n  }\n\n  var number = Number(dirtyNumber);\n\n  if (isNaN(number)) {\n    return number\n  }\n\n  return number < 0 ? Math.ceil(number) : Math.floor(number)\n}\n\nvar MILLISECONDS_IN_MINUTE = 60000;\n\n/**\n * Google Chrome as of 67.0.3396.87 introduced timezones with offset that includes seconds.\n * They usually appear for dates that denote time before the timezones were introduced\n * (e.g. for 'Europe/Prague' timezone the offset is GMT+00:57:44 before 1 October 1891\n * and GMT+01:00:00 after that date)\n *\n * Date#getTimezoneOffset returns the offset in minutes and would return 57 for the example above,\n * which would lead to incorrect calculations.\n *\n * This function returns the timezone offset in milliseconds that takes seconds in account.\n */\nfunction getTimezoneOffsetInMilliseconds (dirtyDate) {\n  var date = new Date(dirtyDate.getTime());\n  var baseTimezoneOffset = date.getTimezoneOffset();\n  date.setSeconds(0, 0);\n  var millisecondsPartOfTimezoneOffset = date.getTime() % MILLISECONDS_IN_MINUTE;\n\n  return baseTimezoneOffset * MILLISECONDS_IN_MINUTE + millisecondsPartOfTimezoneOffset\n}\n\nvar MILLISECONDS_IN_HOUR = 3600000;\nvar MILLISECONDS_IN_MINUTE$1 = 60000;\nvar DEFAULT_ADDITIONAL_DIGITS = 2;\n\nvar patterns = {\n  dateTimeDelimeter: /[T ]/,\n  plainTime: /:/,\n  timeZoneDelimeter: /[Z ]/i,\n\n  // year tokens\n  YY: /^(\\d{2})$/,\n  YYY: [\n    /^([+-]\\d{2})$/, // 0 additional digits\n    /^([+-]\\d{3})$/, // 1 additional digit\n    /^([+-]\\d{4})$/ // 2 additional digits\n  ],\n  YYYY: /^(\\d{4})/,\n  YYYYY: [\n    /^([+-]\\d{4})/, // 0 additional digits\n    /^([+-]\\d{5})/, // 1 additional digit\n    /^([+-]\\d{6})/ // 2 additional digits\n  ],\n\n  // date tokens\n  MM: /^-(\\d{2})$/,\n  DDD: /^-?(\\d{3})$/,\n  MMDD: /^-?(\\d{2})-?(\\d{2})$/,\n  Www: /^-?W(\\d{2})$/,\n  WwwD: /^-?W(\\d{2})-?(\\d{1})$/,\n\n  HH: /^(\\d{2}([.,]\\d*)?)$/,\n  HHMM: /^(\\d{2}):?(\\d{2}([.,]\\d*)?)$/,\n  HHMMSS: /^(\\d{2}):?(\\d{2}):?(\\d{2}([.,]\\d*)?)$/,\n\n  // timezone tokens\n  timezone: /([Z+-].*)$/,\n  timezoneZ: /^(Z)$/,\n  timezoneHH: /^([+-])(\\d{2})$/,\n  timezoneHHMM: /^([+-])(\\d{2}):?(\\d{2})$/\n};\n\n/**\n * @name toDate\n * @category Common Helpers\n * @summary Convert the given argument to an instance of Date.\n *\n * @description\n * Convert the given argument to an instance of Date.\n *\n * If the argument is an instance of Date, the function returns its clone.\n *\n * If the argument is a number, it is treated as a timestamp.\n *\n * If an argument is a string, the function tries to parse it.\n * Function accepts complete ISO 8601 formats as well as partial implementations.\n * ISO 8601: http://en.wikipedia.org/wiki/ISO_8601\n * If the function cannot parse the string or the values are invalid, it returns Invalid Date.\n *\n * If the argument is none of the above, the function returns Invalid Date.\n *\n * **Note**: *all* Date arguments passed to any *date-fns* function is processed by `toDate`.\n * All *date-fns* functions will throw `RangeError` if `options.additionalDigits` is not 0, 1, 2 or undefined.\n *\n * @param {Date|String|Number} argument - the value to convert\n * @param {Options} [options] - the object with options. See [Options]{@link https://date-fns.org/docs/Options}\n * @param {0|1|2} [options.additionalDigits=2] - the additional number of digits in the extended year format\n * @returns {Date} the parsed date in the local time zone\n * @throws {TypeError} 1 argument required\n * @throws {RangeError} `options.additionalDigits` must be 0, 1 or 2\n *\n * @example\n * // Convert string '2014-02-11T11:30:30' to date:\n * var result = toDate('2014-02-11T11:30:30')\n * //=> Tue Feb 11 2014 11:30:30\n *\n * @example\n * // Convert string '+02014101' to date,\n * // if the additional number of digits in the extended year format is 1:\n * var result = toDate('+02014101', {additionalDigits: 1})\n * //=> Fri Apr 11 2014 00:00:00\n */\nfunction toDate (argument, dirtyOptions) {\n  if (arguments.length < 1) {\n    throw new TypeError('1 argument required, but only ' + arguments.length + ' present')\n  }\n\n  if (argument === null) {\n    return new Date(NaN)\n  }\n\n  var options = dirtyOptions || {};\n\n  var additionalDigits = options.additionalDigits == null ? DEFAULT_ADDITIONAL_DIGITS : toInteger(options.additionalDigits);\n  if (additionalDigits !== 2 && additionalDigits !== 1 && additionalDigits !== 0) {\n    throw new RangeError('additionalDigits must be 0, 1 or 2')\n  }\n\n  // Clone the date\n  if (argument instanceof Date ||\n    (typeof argument === 'object' && Object.prototype.toString.call(argument) === '[object Date]')\n  ) {\n    // Prevent the date to lose the milliseconds when passed to new Date() in IE10\n    return new Date(argument.getTime())\n  } else if (typeof argument === 'number' || Object.prototype.toString.call(argument) === '[object Number]') {\n    return new Date(argument)\n  } else if (!(typeof argument === 'string' || Object.prototype.toString.call(argument) === '[object String]')) {\n    return new Date(NaN)\n  }\n\n  var dateStrings = splitDateString(argument);\n\n  var parseYearResult = parseYear(dateStrings.date, additionalDigits);\n  var year = parseYearResult.year;\n  var restDateString = parseYearResult.restDateString;\n\n  var date = parseDate(restDateString, year);\n\n  if (isNaN(date)) {\n    return new Date(NaN)\n  }\n\n  if (date) {\n    var timestamp = date.getTime();\n    var time = 0;\n    var offset;\n\n    if (dateStrings.time) {\n      time = parseTime(dateStrings.time);\n\n      if (isNaN(time)) {\n        return new Date(NaN)\n      }\n    }\n\n    if (dateStrings.timezone) {\n      offset = parseTimezone(dateStrings.timezone);\n      if (isNaN(offset)) {\n        return new Date(NaN)\n      }\n    } else {\n      // get offset accurate to hour in timezones that change offset\n      offset = getTimezoneOffsetInMilliseconds(new Date(timestamp + time));\n      offset = getTimezoneOffsetInMilliseconds(new Date(timestamp + time + offset));\n    }\n\n    return new Date(timestamp + time + offset)\n  } else {\n    return new Date(NaN)\n  }\n}\n\nfunction splitDateString (dateString) {\n  var dateStrings = {};\n  var array = dateString.split(patterns.dateTimeDelimeter);\n  var timeString;\n\n  if (patterns.plainTime.test(array[0])) {\n    dateStrings.date = null;\n    timeString = array[0];\n  } else {\n    dateStrings.date = array[0];\n    timeString = array[1];\n    if (patterns.timeZoneDelimeter.test(dateStrings.date)) {\n      dateStrings.date = dateString.split(patterns.timeZoneDelimeter)[0];\n      timeString = dateString.substr(dateStrings.date.length, dateString.length);\n    }\n  }\n\n  if (timeString) {\n    var token = patterns.timezone.exec(timeString);\n    if (token) {\n      dateStrings.time = timeString.replace(token[1], '');\n      dateStrings.timezone = token[1];\n    } else {\n      dateStrings.time = timeString;\n    }\n  }\n\n  return dateStrings\n}\n\nfunction parseYear (dateString, additionalDigits) {\n  var patternYYY = patterns.YYY[additionalDigits];\n  var patternYYYYY = patterns.YYYYY[additionalDigits];\n\n  var token;\n\n  // YYYY or ±YYYYY\n  token = patterns.YYYY.exec(dateString) || patternYYYYY.exec(dateString);\n  if (token) {\n    var yearString = token[1];\n    return {\n      year: parseInt(yearString, 10),\n      restDateString: dateString.slice(yearString.length)\n    }\n  }\n\n  // YY or ±YYY\n  token = patterns.YY.exec(dateString) || patternYYY.exec(dateString);\n  if (token) {\n    var centuryString = token[1];\n    return {\n      year: parseInt(centuryString, 10) * 100,\n      restDateString: dateString.slice(centuryString.length)\n    }\n  }\n\n  // Invalid ISO-formatted year\n  return {\n    year: null\n  }\n}\n\nfunction parseDate (dateString, year) {\n  // Invalid ISO-formatted year\n  if (year === null) {\n    return null\n  }\n\n  var token;\n  var date;\n  var month;\n  var week;\n\n  // YYYY\n  if (dateString.length === 0) {\n    date = new Date(0);\n    date.setUTCFullYear(year);\n    return date\n  }\n\n  // YYYY-MM\n  token = patterns.MM.exec(dateString);\n  if (token) {\n    date = new Date(0);\n    month = parseInt(token[1], 10) - 1;\n\n    if (!validateDate(year, month)) {\n      return new Date(NaN)\n    }\n\n    date.setUTCFullYear(year, month);\n    return date\n  }\n\n  // YYYY-DDD or YYYYDDD\n  token = patterns.DDD.exec(dateString);\n  if (token) {\n    date = new Date(0);\n    var dayOfYear = parseInt(token[1], 10);\n\n    if (!validateDayOfYearDate(year, dayOfYear)) {\n      return new Date(NaN)\n    }\n\n    date.setUTCFullYear(year, 0, dayOfYear);\n    return date\n  }\n\n  // YYYY-MM-DD or YYYYMMDD\n  token = patterns.MMDD.exec(dateString);\n  if (token) {\n    date = new Date(0);\n    month = parseInt(token[1], 10) - 1;\n    var day = parseInt(token[2], 10);\n\n    if (!validateDate(year, month, day)) {\n      return new Date(NaN)\n    }\n\n    date.setUTCFullYear(year, month, day);\n    return date\n  }\n\n  // YYYY-Www or YYYYWww\n  token = patterns.Www.exec(dateString);\n  if (token) {\n    week = parseInt(token[1], 10) - 1;\n\n    if (!validateWeekDate(year, week)) {\n      return new Date(NaN)\n    }\n\n    return dayOfISOWeekYear(year, week)\n  }\n\n  // YYYY-Www-D or YYYYWwwD\n  token = patterns.WwwD.exec(dateString);\n  if (token) {\n    week = parseInt(token[1], 10) - 1;\n    var dayOfWeek = parseInt(token[2], 10) - 1;\n\n    if (!validateWeekDate(year, week, dayOfWeek)) {\n      return new Date(NaN)\n    }\n\n    return dayOfISOWeekYear(year, week, dayOfWeek)\n  }\n\n  // Invalid ISO-formatted date\n  return null\n}\n\nfunction parseTime (timeString) {\n  var token;\n  var hours;\n  var minutes;\n\n  // hh\n  token = patterns.HH.exec(timeString);\n  if (token) {\n    hours = parseFloat(token[1].replace(',', '.'));\n\n    if (!validateTime(hours)) {\n      return NaN\n    }\n\n    return (hours % 24) * MILLISECONDS_IN_HOUR\n  }\n\n  // hh:mm or hhmm\n  token = patterns.HHMM.exec(timeString);\n  if (token) {\n    hours = parseInt(token[1], 10);\n    minutes = parseFloat(token[2].replace(',', '.'));\n\n    if (!validateTime(hours, minutes)) {\n      return NaN\n    }\n\n    return (hours % 24) * MILLISECONDS_IN_HOUR +\n      minutes * MILLISECONDS_IN_MINUTE$1\n  }\n\n  // hh:mm:ss or hhmmss\n  token = patterns.HHMMSS.exec(timeString);\n  if (token) {\n    hours = parseInt(token[1], 10);\n    minutes = parseInt(token[2], 10);\n    var seconds = parseFloat(token[3].replace(',', '.'));\n\n    if (!validateTime(hours, minutes, seconds)) {\n      return NaN\n    }\n\n    return (hours % 24) * MILLISECONDS_IN_HOUR +\n      minutes * MILLISECONDS_IN_MINUTE$1 +\n      seconds * 1000\n  }\n\n  // Invalid ISO-formatted time\n  return null\n}\n\nfunction parseTimezone (timezoneString) {\n  var token;\n  var absoluteOffset;\n\n  // Z\n  token = patterns.timezoneZ.exec(timezoneString);\n  if (token) {\n    return 0\n  }\n\n  var hours;\n\n  // ±hh\n  token = patterns.timezoneHH.exec(timezoneString);\n  if (token) {\n    hours = parseInt(token[2], 10);\n\n    if (!validateTimezone(hours)) {\n      return NaN\n    }\n\n    absoluteOffset = hours * MILLISECONDS_IN_HOUR;\n    return (token[1] === '+') ? -absoluteOffset : absoluteOffset\n  }\n\n  // ±hh:mm or ±hhmm\n  token = patterns.timezoneHHMM.exec(timezoneString);\n  if (token) {\n    hours = parseInt(token[2], 10);\n    var minutes = parseInt(token[3], 10);\n\n    if (!validateTimezone(hours, minutes)) {\n      return NaN\n    }\n\n    absoluteOffset = hours * MILLISECONDS_IN_HOUR + minutes * MILLISECONDS_IN_MINUTE$1;\n    return (token[1] === '+') ? -absoluteOffset : absoluteOffset\n  }\n\n  return 0\n}\n\nfunction dayOfISOWeekYear (isoWeekYear, week, day) {\n  week = week || 0;\n  day = day || 0;\n  var date = new Date(0);\n  date.setUTCFullYear(isoWeekYear, 0, 4);\n  var fourthOfJanuaryDay = date.getUTCDay() || 7;\n  var diff = week * 7 + day + 1 - fourthOfJanuaryDay;\n  date.setUTCDate(date.getUTCDate() + diff);\n  return date\n}\n\n// Validation functions\n\nvar DAYS_IN_MONTH = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\nvar DAYS_IN_MONTH_LEAP_YEAR = [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n\nfunction isLeapYearIndex (year) {\n  return year % 400 === 0 || (year % 4 === 0 && year % 100 !== 0)\n}\n\nfunction validateDate (year, month, date) {\n  if (month < 0 || month > 11) {\n    return false\n  }\n\n  if (date != null) {\n    if (date < 1) {\n      return false\n    }\n\n    var isLeapYear = isLeapYearIndex(year);\n    if (isLeapYear && date > DAYS_IN_MONTH_LEAP_YEAR[month]) {\n      return false\n    }\n    if (!isLeapYear && date > DAYS_IN_MONTH[month]) {\n      return false\n    }\n  }\n\n  return true\n}\n\nfunction validateDayOfYearDate (year, dayOfYear) {\n  if (dayOfYear < 1) {\n    return false\n  }\n\n  var isLeapYear = isLeapYearIndex(year);\n  if (isLeapYear && dayOfYear > 366) {\n    return false\n  }\n  if (!isLeapYear && dayOfYear > 365) {\n    return false\n  }\n\n  return true\n}\n\nfunction validateWeekDate (year, week, day) {\n  if (week < 0 || week > 52) {\n    return false\n  }\n\n  if (day != null && (day < 0 || day > 6)) {\n    return false\n  }\n\n  return true\n}\n\nfunction validateTime (hours, minutes, seconds) {\n  if (hours != null && (hours < 0 || hours >= 25)) {\n    return false\n  }\n\n  if (minutes != null && (minutes < 0 || minutes >= 60)) {\n    return false\n  }\n\n  if (seconds != null && (seconds < 0 || seconds >= 60)) {\n    return false\n  }\n\n  return true\n}\n\nfunction validateTimezone (hours, minutes) {\n  if (minutes != null && (minutes < 0 || minutes > 59)) {\n    return false\n  }\n\n  return true\n}\n\n/**\n * @name addMilliseconds\n * @category Millisecond Helpers\n * @summary Add the specified number of milliseconds to the given date.\n *\n * @description\n * Add the specified number of milliseconds to the given date.\n *\n * @param {Date|String|Number} date - the date to be changed\n * @param {Number} amount - the amount of milliseconds to be added\n * @param {Options} [options] - the object with options. See [Options]{@link https://date-fns.org/docs/Options}\n * @param {0|1|2} [options.additionalDigits=2] - passed to `toDate`. See [toDate]{@link https://date-fns.org/docs/toDate}\n * @returns {Date} the new date with the milliseconds added\n * @throws {TypeError} 2 arguments required\n * @throws {RangeError} `options.additionalDigits` must be 0, 1 or 2\n *\n * @example\n * // Add 750 milliseconds to 10 July 2014 12:45:30.000:\n * var result = addMilliseconds(new Date(2014, 6, 10, 12, 45, 30, 0), 750)\n * //=> Thu Jul 10 2014 12:45:30.750\n */\nfunction addMilliseconds (dirtyDate, dirtyAmount, dirtyOptions) {\n  if (arguments.length < 2) {\n    throw new TypeError('2 arguments required, but only ' + arguments.length + ' present')\n  }\n\n  var timestamp = toDate(dirtyDate, dirtyOptions).getTime();\n  var amount = toInteger(dirtyAmount);\n  return new Date(timestamp + amount)\n}\n\n/**\n * @name isValid\n * @category Common Helpers\n * @summary Is the given date valid?\n *\n * @description\n * Returns false if argument is Invalid Date and true otherwise.\n * Argument is converted to Date using `toDate`. See [toDate]{@link https://date-fns.org/docs/toDate}\n * Invalid Date is a Date, whose time value is NaN.\n *\n * Time value of Date: http://es5.github.io/#x15.9.1.1\n *\n * @param {*} date - the date to check\n * @param {Options} [options] - the object with options. See [Options]{@link https://date-fns.org/docs/Options}\n * @param {0|1|2} [options.additionalDigits=2] - passed to `toDate`. See [toDate]{@link https://date-fns.org/docs/toDate}\n * @returns {Boolean} the date is valid\n * @throws {TypeError} 1 argument required\n * @throws {RangeError} `options.additionalDigits` must be 0, 1 or 2\n *\n * @example\n * // For the valid date:\n * var result = isValid(new Date(2014, 1, 31))\n * //=> true\n *\n * @example\n * // For the value, convertable into a date:\n * var result = isValid('2014-02-31')\n * //=> true\n *\n * @example\n * // For the invalid date:\n * var result = isValid(new Date(''))\n * //=> false\n */\nfunction isValid (dirtyDate, dirtyOptions) {\n  if (arguments.length < 1) {\n    throw new TypeError('1 argument required, but only ' + arguments.length + ' present')\n  }\n\n  var date = toDate(dirtyDate, dirtyOptions);\n  return !isNaN(date)\n}\n\nvar formatDistanceLocale = {\n  lessThanXSeconds: {\n    one: 'less than a second',\n    other: 'less than {{count}} seconds'\n  },\n\n  xSeconds: {\n    one: '1 second',\n    other: '{{count}} seconds'\n  },\n\n  halfAMinute: 'half a minute',\n\n  lessThanXMinutes: {\n    one: 'less than a minute',\n    other: 'less than {{count}} minutes'\n  },\n\n  xMinutes: {\n    one: '1 minute',\n    other: '{{count}} minutes'\n  },\n\n  aboutXHours: {\n    one: 'about 1 hour',\n    other: 'about {{count}} hours'\n  },\n\n  xHours: {\n    one: '1 hour',\n    other: '{{count}} hours'\n  },\n\n  xDays: {\n    one: '1 day',\n    other: '{{count}} days'\n  },\n\n  aboutXMonths: {\n    one: 'about 1 month',\n    other: 'about {{count}} months'\n  },\n\n  xMonths: {\n    one: '1 month',\n    other: '{{count}} months'\n  },\n\n  aboutXYears: {\n    one: 'about 1 year',\n    other: 'about {{count}} years'\n  },\n\n  xYears: {\n    one: '1 year',\n    other: '{{count}} years'\n  },\n\n  overXYears: {\n    one: 'over 1 year',\n    other: 'over {{count}} years'\n  },\n\n  almostXYears: {\n    one: 'almost 1 year',\n    other: 'almost {{count}} years'\n  }\n};\n\nfunction formatDistance (token, count, options) {\n  options = options || {};\n\n  var result;\n  if (typeof formatDistanceLocale[token] === 'string') {\n    result = formatDistanceLocale[token];\n  } else if (count === 1) {\n    result = formatDistanceLocale[token].one;\n  } else {\n    result = formatDistanceLocale[token].other.replace('{{count}}', count);\n  }\n\n  if (options.addSuffix) {\n    if (options.comparison > 0) {\n      return 'in ' + result\n    } else {\n      return result + ' ago'\n    }\n  }\n\n  return result\n}\n\nfunction buildFormatLongFn (args) {\n  return function (dirtyOptions) {\n    var options = dirtyOptions || {};\n    var width = options.width ? String(options.width) : args.defaultWidth;\n    var format = args.formats[width] || args.formats[args.defaultWidth];\n    return format\n  }\n}\n\nvar dateFormats = {\n  full: 'EEEE, MMMM do, y',\n  long: 'MMMM do, y',\n  medium: 'MMM d, y',\n  short: 'MM/dd/yyyy'\n};\n\nvar timeFormats = {\n  full: 'h:mm:ss a zzzz',\n  long: 'h:mm:ss a z',\n  medium: 'h:mm:ss a',\n  short: 'h:mm a'\n};\n\nvar dateTimeFormats = {\n  full: \"{{date}} 'at' {{time}}\",\n  long: \"{{date}} 'at' {{time}}\",\n  medium: '{{date}}, {{time}}',\n  short: '{{date}}, {{time}}'\n};\n\nvar formatLong = {\n  date: buildFormatLongFn({\n    formats: dateFormats,\n    defaultWidth: 'full'\n  }),\n\n  time: buildFormatLongFn({\n    formats: timeFormats,\n    defaultWidth: 'full'\n  }),\n\n  dateTime: buildFormatLongFn({\n    formats: dateTimeFormats,\n    defaultWidth: 'full'\n  })\n};\n\nvar formatRelativeLocale = {\n  lastWeek: \"'last' eeee 'at' p\",\n  yesterday: \"'yesterday at' p\",\n  today: \"'today at' p\",\n  tomorrow: \"'tomorrow at' p\",\n  nextWeek: \"eeee 'at' p\",\n  other: 'P'\n};\n\nfunction formatRelative (token, date, baseDate, options) {\n  return formatRelativeLocale[token]\n}\n\nfunction buildLocalizeFn (args) {\n  return function (dirtyIndex, dirtyOptions) {\n    var options = dirtyOptions || {};\n    var width = options.width ? String(options.width) : args.defaultWidth;\n    var context = options.context ? String(options.context) : 'standalone';\n\n    var valuesArray;\n    if (context === 'formatting' && args.formattingValues) {\n      valuesArray = args.formattingValues[width] || args.formattingValues[args.defaultFormattingWidth];\n    } else {\n      valuesArray = args.values[width] || args.values[args.defaultWidth];\n    }\n    var index = args.argumentCallback ? args.argumentCallback(dirtyIndex) : dirtyIndex;\n    return valuesArray[index]\n  }\n}\n\nvar eraValues = {\n  narrow: ['B', 'A'],\n  abbreviated: ['BC', 'AD'],\n  wide: ['Before Christ', 'Anno Domini']\n};\n\nvar quarterValues = {\n  narrow: ['1', '2', '3', '4'],\n  abbreviated: ['Q1', 'Q2', 'Q3', 'Q4'],\n  wide: ['1st quarter', '2nd quarter', '3rd quarter', '4th quarter']\n};\n\n// Note: in English, the names of days of the week and months are capitalized.\n// If you are making a new locale based on this one, check if the same is true for the language you're working on.\n// Generally, formatted dates should look like they are in the middle of a sentence,\n// e.g. in Spanish language the weekdays and months should be in the lowercase.\nvar monthValues = {\n  narrow: ['J', 'F', 'M', 'A', 'M', 'J', 'J', 'A', 'S', 'O', 'N', 'D'],\n  abbreviated: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n  wide: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']\n};\n\nvar dayValues = {\n  narrow: ['S', 'M', 'T', 'W', 'T', 'F', 'S'],\n  short: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],\n  abbreviated: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n  wide: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']\n};\n\nvar dayPeriodValues = {\n  narrow: {\n    am: 'a',\n    pm: 'p',\n    midnight: 'mi',\n    noon: 'n',\n    morning: 'morning',\n    afternoon: 'afternoon',\n    evening: 'evening',\n    night: 'night'\n  },\n  abbreviated: {\n    am: 'AM',\n    pm: 'PM',\n    midnight: 'midnight',\n    noon: 'noon',\n    morning: 'morning',\n    afternoon: 'afternoon',\n    evening: 'evening',\n    night: 'night'\n  },\n  wide: {\n    am: 'a.m.',\n    pm: 'p.m.',\n    midnight: 'midnight',\n    noon: 'noon',\n    morning: 'morning',\n    afternoon: 'afternoon',\n    evening: 'evening',\n    night: 'night'\n  }\n};\nvar formattingDayPeriodValues = {\n  narrow: {\n    am: 'a',\n    pm: 'p',\n    midnight: 'mi',\n    noon: 'n',\n    morning: 'in the morning',\n    afternoon: 'in the afternoon',\n    evening: 'in the evening',\n    night: 'at night'\n  },\n  abbreviated: {\n    am: 'AM',\n    pm: 'PM',\n    midnight: 'midnight',\n    noon: 'noon',\n    morning: 'in the morning',\n    afternoon: 'in the afternoon',\n    evening: 'in the evening',\n    night: 'at night'\n  },\n  wide: {\n    am: 'a.m.',\n    pm: 'p.m.',\n    midnight: 'midnight',\n    noon: 'noon',\n    morning: 'in the morning',\n    afternoon: 'in the afternoon',\n    evening: 'in the evening',\n    night: 'at night'\n  }\n};\n\nfunction ordinalNumber (dirtyNumber, dirtyOptions) {\n  var number = Number(dirtyNumber);\n\n  // If ordinal numbers depend on context, for example,\n  // if they are different for different grammatical genders,\n  // use `options.unit`:\n  //\n  //   var options = dirtyOptions || {}\n  //   var unit = String(options.unit)\n  //\n  // where `unit` can be 'year', 'quarter', 'month', 'week', 'date', 'dayOfYear',\n  // 'day', 'hour', 'minute', 'second'\n\n  var rem100 = number % 100;\n  if (rem100 > 20 || rem100 < 10) {\n    switch (rem100 % 10) {\n      case 1:\n        return number + 'st'\n      case 2:\n        return number + 'nd'\n      case 3:\n        return number + 'rd'\n    }\n  }\n  return number + 'th'\n}\n\nvar localize = {\n  ordinalNumber: ordinalNumber,\n\n  era: buildLocalizeFn({\n    values: eraValues,\n    defaultWidth: 'wide'\n  }),\n\n  quarter: buildLocalizeFn({\n    values: quarterValues,\n    defaultWidth: 'wide',\n    argumentCallback: function (quarter) {\n      return Number(quarter) - 1\n    }\n  }),\n\n  month: buildLocalizeFn({\n    values: monthValues,\n    defaultWidth: 'wide'\n  }),\n\n  day: buildLocalizeFn({\n    values: dayValues,\n    defaultWidth: 'wide'\n  }),\n\n  dayPeriod: buildLocalizeFn({\n    values: dayPeriodValues,\n    defaultWidth: 'wide',\n    formattingValues: formattingDayPeriodValues,\n    defaulFormattingWidth: 'wide'\n  })\n};\n\nfunction buildMatchPatternFn (args) {\n  return function (dirtyString, dirtyOptions) {\n    var string = String(dirtyString);\n    var options = dirtyOptions || {};\n\n    var matchResult = string.match(args.matchPattern);\n    if (!matchResult) {\n      return null\n    }\n    var matchedString = matchResult[0];\n\n    var parseResult = string.match(args.parsePattern);\n    if (!parseResult) {\n      return null\n    }\n    var value = args.valueCallback ? args.valueCallback(parseResult[0]) : parseResult[0];\n    value = options.valueCallback ? options.valueCallback(value) : value;\n\n    return {\n      value: value,\n      rest: string.slice(matchedString.length)\n    }\n  }\n}\n\nfunction buildMatchFn (args) {\n  return function (dirtyString, dirtyOptions) {\n    var string = String(dirtyString);\n    var options = dirtyOptions || {};\n    var width = options.width;\n\n    var matchPattern = (width && args.matchPatterns[width]) || args.matchPatterns[args.defaultMatchWidth];\n    var matchResult = string.match(matchPattern);\n\n    if (!matchResult) {\n      return null\n    }\n    var matchedString = matchResult[0];\n\n    var parsePatterns = (width && args.parsePatterns[width]) || args.parsePatterns[args.defaultParseWidth];\n\n    var value;\n    if (Object.prototype.toString.call(parsePatterns) === '[object Array]') {\n      value = parsePatterns.findIndex(function (pattern) {\n        return pattern.test(string)\n      });\n    } else {\n      value = findKey(parsePatterns, function (pattern) {\n        return pattern.test(string)\n      });\n    }\n\n    value = args.valueCallback ? args.valueCallback(value) : value;\n    value = options.valueCallback ? options.valueCallback(value) : value;\n\n    return {\n      value: value,\n      rest: string.slice(matchedString.length)\n    }\n  }\n}\n\nfunction findKey (object, predicate) {\n  for (var key in object) {\n    if (object.hasOwnProperty(key) && predicate(object[key])) {\n      return key\n    }\n  }\n}\n\nvar matchOrdinalNumberPattern = /^(\\d+)(th|st|nd|rd)?/i;\nvar parseOrdinalNumberPattern = /\\d+/i;\n\nvar matchEraPatterns = {\n  narrow: /^(b|a)/i,\n  abbreviated: /^(b\\.?\\s?c\\.?|b\\.?\\s?c\\.?\\s?e\\.?|a\\.?\\s?d\\.?|c\\.?\\s?e\\.?)/i,\n  wide: /^(before christ|before common era|anno domini|common era)/i\n};\nvar parseEraPatterns = {\n  any: [/^b/i, /^(a|c)/i]\n};\n\nvar matchQuarterPatterns = {\n  narrow: /^[1234]/i,\n  abbreviated: /^q[1234]/i,\n  wide: /^[1234](th|st|nd|rd)? quarter/i\n};\nvar parseQuarterPatterns = {\n  any: [/1/i, /2/i, /3/i, /4/i]\n};\n\nvar matchMonthPatterns = {\n  narrow: /^[jfmasond]/i,\n  abbreviated: /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,\n  wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i\n};\nvar parseMonthPatterns = {\n  narrow: [/^j/i, /^f/i, /^m/i, /^a/i, /^m/i, /^j/i, /^j/i, /^a/i, /^s/i, /^o/i, /^n/i, /^d/i],\n  any: [/^ja/i, /^f/i, /^mar/i, /^ap/i, /^may/i, /^jun/i, /^jul/i, /^au/i, /^s/i, /^o/i, /^n/i, /^d/i]\n};\n\nvar matchDayPatterns = {\n  narrow: /^[smtwf]/i,\n  short: /^(su|mo|tu|we|th|fr|sa)/i,\n  abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i,\n  wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i\n};\nvar parseDayPatterns = {\n  narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i],\n  any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i]\n};\n\nvar matchDayPeriodPatterns = {\n  narrow: /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,\n  any: /^([ap]\\.?\\s?m\\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i\n};\nvar parseDayPeriodPatterns = {\n  any: {\n    am: /^a/i,\n    pm: /^p/i,\n    midnight: /^mi/i,\n    noon: /^no/i,\n    morning: /morning/i,\n    afternoon: /afternoon/i,\n    evening: /evening/i,\n    night: /night/i\n  }\n};\n\nvar match = {\n  ordinalNumber: buildMatchPatternFn({\n    matchPattern: matchOrdinalNumberPattern,\n    parsePattern: parseOrdinalNumberPattern,\n    valueCallback: function (value) {\n      return parseInt(value, 10)\n    }\n  }),\n\n  era: buildMatchFn({\n    matchPatterns: matchEraPatterns,\n    defaultMatchWidth: 'wide',\n    parsePatterns: parseEraPatterns,\n    defaultParseWidth: 'any'\n  }),\n\n  quarter: buildMatchFn({\n    matchPatterns: matchQuarterPatterns,\n    defaultMatchWidth: 'wide',\n    parsePatterns: parseQuarterPatterns,\n    defaultParseWidth: 'any',\n    valueCallback: function (index) {\n      return index + 1\n    }\n  }),\n\n  month: buildMatchFn({\n    matchPatterns: matchMonthPatterns,\n    defaultMatchWidth: 'wide',\n    parsePatterns: parseMonthPatterns,\n    defaultParseWidth: 'any'\n  }),\n\n  day: buildMatchFn({\n    matchPatterns: matchDayPatterns,\n    defaultMatchWidth: 'wide',\n    parsePatterns: parseDayPatterns,\n    defaultParseWidth: 'any'\n  }),\n\n  dayPeriod: buildMatchFn({\n    matchPatterns: matchDayPeriodPatterns,\n    defaultMatchWidth: 'any',\n    parsePatterns: parseDayPeriodPatterns,\n    defaultParseWidth: 'any'\n  })\n};\n\n/**\n * @type {Locale}\n * @category Locales\n * @summary English locale (United States).\n * @language English\n * @iso-639-2 eng\n * @author Sasha Koss [@kossnocorp]{@link https://github.com/kossnocorp}\n * @author Lesha Koss [@leshakoss]{@link https://github.com/leshakoss}\n */\nvar locale$1 = {\n  formatDistance: formatDistance,\n  formatLong: formatLong,\n  formatRelative: formatRelative,\n  localize: localize,\n  match: match,\n  options: {\n    weekStartsOn: 0 /* Sunday */,\n    firstWeekContainsDate: 1\n  }\n};\n\nvar MILLISECONDS_IN_DAY = 86400000;\n\n// This function will be a part of public API when UTC function will be implemented.\n// See issue: https://github.com/date-fns/date-fns/issues/376\nfunction getUTCDayOfYear (dirtyDate, dirtyOptions) {\n  if (arguments.length < 1) {\n    throw new TypeError('1 argument required, but only ' + arguments.length + ' present')\n  }\n\n  var date = toDate(dirtyDate, dirtyOptions);\n  var timestamp = date.getTime();\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n  var startOfYearTimestamp = date.getTime();\n  var difference = timestamp - startOfYearTimestamp;\n  return Math.floor(difference / MILLISECONDS_IN_DAY) + 1\n}\n\n// This function will be a part of public API when UTC function will be implemented.\n// See issue: https://github.com/date-fns/date-fns/issues/376\nfunction startOfUTCISOWeek (dirtyDate, dirtyOptions) {\n  if (arguments.length < 1) {\n    throw new TypeError('1 argument required, but only ' + arguments.length + ' present')\n  }\n\n  var weekStartsOn = 1;\n\n  var date = toDate(dirtyDate, dirtyOptions);\n  var day = date.getUTCDay();\n  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;\n\n  date.setUTCDate(date.getUTCDate() - diff);\n  date.setUTCHours(0, 0, 0, 0);\n  return date\n}\n\n// This function will be a part of public API when UTC function will be implemented.\n// See issue: https://github.com/date-fns/date-fns/issues/376\nfunction getUTCISOWeekYear (dirtyDate, dirtyOptions) {\n  if (arguments.length < 1) {\n    throw new TypeError('1 argument required, but only ' + arguments.length + ' present')\n  }\n\n  var date = toDate(dirtyDate, dirtyOptions);\n  var year = date.getUTCFullYear();\n\n  var fourthOfJanuaryOfNextYear = new Date(0);\n  fourthOfJanuaryOfNextYear.setUTCFullYear(year + 1, 0, 4);\n  fourthOfJanuaryOfNextYear.setUTCHours(0, 0, 0, 0);\n  var startOfNextYear = startOfUTCISOWeek(fourthOfJanuaryOfNextYear, dirtyOptions);\n\n  var fourthOfJanuaryOfThisYear = new Date(0);\n  fourthOfJanuaryOfThisYear.setUTCFullYear(year, 0, 4);\n  fourthOfJanuaryOfThisYear.setUTCHours(0, 0, 0, 0);\n  var startOfThisYear = startOfUTCISOWeek(fourthOfJanuaryOfThisYear, dirtyOptions);\n\n  if (date.getTime() >= startOfNextYear.getTime()) {\n    return year + 1\n  } else if (date.getTime() >= startOfThisYear.getTime()) {\n    return year\n  } else {\n    return year - 1\n  }\n}\n\n// This function will be a part of public API when UTC function will be implemented.\n// See issue: https://github.com/date-fns/date-fns/issues/376\nfunction startOfUTCISOWeekYear (dirtyDate, dirtyOptions) {\n  if (arguments.length < 1) {\n    throw new TypeError('1 argument required, but only ' + arguments.length + ' present')\n  }\n\n  var year = getUTCISOWeekYear(dirtyDate, dirtyOptions);\n  var fourthOfJanuary = new Date(0);\n  fourthOfJanuary.setUTCFullYear(year, 0, 4);\n  fourthOfJanuary.setUTCHours(0, 0, 0, 0);\n  var date = startOfUTCISOWeek(fourthOfJanuary, dirtyOptions);\n  return date\n}\n\nvar MILLISECONDS_IN_WEEK = 604800000;\n\n// This function will be a part of public API when UTC function will be implemented.\n// See issue: https://github.com/date-fns/date-fns/issues/376\nfunction getUTCISOWeek (dirtyDate, dirtyOptions) {\n  if (arguments.length < 1) {\n    throw new TypeError('1 argument required, but only ' + arguments.length + ' present')\n  }\n\n  var date = toDate(dirtyDate, dirtyOptions);\n  var diff = startOfUTCISOWeek(date, dirtyOptions).getTime() - startOfUTCISOWeekYear(date, dirtyOptions).getTime();\n\n  // Round the number of days to the nearest integer\n  // because the number of milliseconds in a week is not constant\n  // (e.g. it's different in the week of the daylight saving time clock shift)\n  return Math.round(diff / MILLISECONDS_IN_WEEK) + 1\n}\n\n// This function will be a part of public API when UTC function will be implemented.\n// See issue: https://github.com/date-fns/date-fns/issues/376\nfunction startOfUTCWeek (dirtyDate, dirtyOptions) {\n  if (arguments.length < 1) {\n    throw new TypeError('1 argument required, but only ' + arguments.length + ' present')\n  }\n\n  var options = dirtyOptions || {};\n  var locale = options.locale;\n  var localeWeekStartsOn = locale && locale.options && locale.options.weekStartsOn;\n  var defaultWeekStartsOn = localeWeekStartsOn == null ? 0 : toInteger(localeWeekStartsOn);\n  var weekStartsOn = options.weekStartsOn == null ? defaultWeekStartsOn : toInteger(options.weekStartsOn);\n\n  // Test if weekStartsOn is between 0 and 6 _and_ is not NaN\n  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {\n    throw new RangeError('weekStartsOn must be between 0 and 6 inclusively')\n  }\n\n  var date = toDate(dirtyDate, options);\n  var day = date.getUTCDay();\n  var diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;\n\n  date.setUTCDate(date.getUTCDate() - diff);\n  date.setUTCHours(0, 0, 0, 0);\n  return date\n}\n\n// This function will be a part of public API when UTC function will be implemented.\n// See issue: https://github.com/date-fns/date-fns/issues/376\nfunction getUTCWeekYear (dirtyDate, dirtyOptions) {\n  if (arguments.length < 1) {\n    throw new TypeError('1 argument required, but only ' + arguments.length + ' present')\n  }\n\n  var date = toDate(dirtyDate, dirtyOptions);\n  var year = date.getUTCFullYear();\n\n  var options = dirtyOptions || {};\n  var locale = options.locale;\n  var localeFirstWeekContainsDate = locale &&\n    locale.options &&\n    locale.options.firstWeekContainsDate;\n  var defaultFirstWeekContainsDate =\n    localeFirstWeekContainsDate == null\n      ? 1\n      : toInteger(localeFirstWeekContainsDate);\n  var firstWeekContainsDate =\n    options.firstWeekContainsDate == null\n      ? defaultFirstWeekContainsDate\n      : toInteger(options.firstWeekContainsDate);\n\n  // Test if weekStartsOn is between 1 and 7 _and_ is not NaN\n  if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {\n    throw new RangeError('firstWeekContainsDate must be between 1 and 7 inclusively')\n  }\n\n  var firstWeekOfNextYear = new Date(0);\n  firstWeekOfNextYear.setUTCFullYear(year + 1, 0, firstWeekContainsDate);\n  firstWeekOfNextYear.setUTCHours(0, 0, 0, 0);\n  var startOfNextYear = startOfUTCWeek(firstWeekOfNextYear, dirtyOptions);\n\n  var firstWeekOfThisYear = new Date(0);\n  firstWeekOfThisYear.setUTCFullYear(year, 0, firstWeekContainsDate);\n  firstWeekOfThisYear.setUTCHours(0, 0, 0, 0);\n  var startOfThisYear = startOfUTCWeek(firstWeekOfThisYear, dirtyOptions);\n\n  if (date.getTime() >= startOfNextYear.getTime()) {\n    return year + 1\n  } else if (date.getTime() >= startOfThisYear.getTime()) {\n    return year\n  } else {\n    return year - 1\n  }\n}\n\n// This function will be a part of public API when UTC function will be implemented.\n// See issue: https://github.com/date-fns/date-fns/issues/376\nfunction startOfUTCWeekYear (dirtyDate, dirtyOptions) {\n  if (arguments.length < 1) {\n    throw new TypeError('1 argument required, but only ' + arguments.length + ' present')\n  }\n\n  var options = dirtyOptions || {};\n  var locale = options.locale;\n  var localeFirstWeekContainsDate = locale &&\n    locale.options &&\n    locale.options.firstWeekContainsDate;\n  var defaultFirstWeekContainsDate =\n    localeFirstWeekContainsDate == null\n      ? 1\n      : toInteger(localeFirstWeekContainsDate);\n  var firstWeekContainsDate =\n    options.firstWeekContainsDate == null\n      ? defaultFirstWeekContainsDate\n      : toInteger(options.firstWeekContainsDate);\n\n  var year = getUTCWeekYear(dirtyDate, dirtyOptions);\n  var firstWeek = new Date(0);\n  firstWeek.setUTCFullYear(year, 0, firstWeekContainsDate);\n  firstWeek.setUTCHours(0, 0, 0, 0);\n  var date = startOfUTCWeek(firstWeek, dirtyOptions);\n  return date\n}\n\nvar MILLISECONDS_IN_WEEK$1 = 604800000;\n\n// This function will be a part of public API when UTC function will be implemented.\n// See issue: https://github.com/date-fns/date-fns/issues/376\nfunction getUTCWeek (dirtyDate, dirtyOptions) {\n  if (arguments.length < 1) {\n    throw new TypeError('1 argument required, but only ' + arguments.length + ' present')\n  }\n\n  var date = toDate(dirtyDate, dirtyOptions);\n  var diff = startOfUTCWeek(date, dirtyOptions).getTime() - startOfUTCWeekYear(date, dirtyOptions).getTime();\n\n  // Round the number of days to the nearest integer\n  // because the number of milliseconds in a week is not constant\n  // (e.g. it's different in the week of the daylight saving time clock shift)\n  return Math.round(diff / MILLISECONDS_IN_WEEK$1) + 1\n}\n\nvar dayPeriodEnum = {\n  am: 'am',\n  pm: 'pm',\n  midnight: 'midnight',\n  noon: 'noon',\n  morning: 'morning',\n  afternoon: 'afternoon',\n  evening: 'evening',\n  night: 'night'\n};\n\n/*\n * |     | Unit                           |     | Unit                           |\n * |-----|--------------------------------|-----|--------------------------------|\n * |  a  | AM, PM                         |  A* | Milliseconds in day            |\n * |  b  | AM, PM, noon, midnight         |  B  | Flexible day period            |\n * |  c  | Stand-alone local day of week  |  C* | Localized hour w/ day period   |\n * |  d  | Day of month                   |  D  | Day of year                    |\n * |  e  | Local day of week              |  E  | Day of week                    |\n * |  f  |                                |  F* | Day of week in month           |\n * |  g* | Modified Julian day            |  G  | Era                            |\n * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |\n * |  i! | ISO day of week                |  I! | ISO week of year               |\n * |  j* | Localized hour w/ day period   |  J* | Localized hour w/o day period  |\n * |  k  | Hour [1-24]                    |  K  | Hour [0-11]                    |\n * |  l* | (deprecated)                   |  L  | Stand-alone month              |\n * |  m  | Minute                         |  M  | Month                          |\n * |  n  |                                |  N  |                                |\n * |  o! | Ordinal number modifier        |  O  | Timezone (GMT)                 |\n * |  p! | Long localized time            |  P! | Long localized date            |\n * |  q  | Stand-alone quarter            |  Q  | Quarter                        |\n * |  r* | Related Gregorian year         |  R! | ISO week-numbering year        |\n * |  s  | Second                         |  S  | Fraction of second             |\n * |  t! | Seconds timestamp              |  T! | Milliseconds timestamp         |\n * |  u  | Extended year                  |  U* | Cyclic year                    |\n * |  v* | Timezone (generic non-locat.)  |  V* | Timezone (location)            |\n * |  w  | Local week of year             |  W* | Week of month                  |\n * |  x  | Timezone (ISO-8601 w/o Z)      |  X  | Timezone (ISO-8601)            |\n * |  y  | Year (abs)                     |  Y  | Local week-numbering year      |\n * |  z  | Timezone (specific non-locat.) |  Z* | Timezone (aliases)             |\n *\n * Letters marked by * are not implemented but reserved by Unicode standard.\n *\n * Letters marked by ! are non-standard, but implemented by date-fns:\n * - `o` modifies the previous token to turn it into an ordinal (see `format` docs)\n * - `i` is ISO day of week. For `i` and `ii` is returns numeric ISO week days,\n *   i.e. 7 for Sunday, 1 for Monday, etc.\n * - `I` is ISO week of year, as opposed to `w` which is local week of year.\n * - `R` is ISO week-numbering year, as opposed to `Y` which is local week-numbering year.\n *   `R` is supposed to be used in conjunction with `I` and `i`\n *   for universal ISO week-numbering date, whereas\n *   `Y` is supposed to be used in conjunction with `w` and `e`\n *   for week-numbering date specific to the locale.\n * - `P` is long localized date format\n * - `p` is long localized time format\n */\n\nvar formatters = {\n  // Era\n  G: function (date, token, localize) {\n    var era = date.getUTCFullYear() > 0 ? 1 : 0;\n    switch (token) {\n      // AD, BC\n      case 'G':\n      case 'GG':\n      case 'GGG':\n        return localize.era(era, {width: 'abbreviated'})\n      // A, B\n      case 'GGGGG':\n        return localize.era(era, {width: 'narrow'})\n      // Anno Domini, Before Christ\n      case 'GGGG':\n      default:\n        return localize.era(era, {width: 'wide'})\n    }\n  },\n\n  // Year\n  y: function (date, token, localize, options) {\n    // From http://www.unicode.org/reports/tr35/tr35-31/tr35-dates.html#Date_Format_tokens\n    // | Year     |     y | yy |   yyy |  yyyy | yyyyy |\n    // |----------|-------|----|-------|-------|-------|\n    // | AD 1     |     1 | 01 |   001 |  0001 | 00001 |\n    // | AD 12    |    12 | 12 |   012 |  0012 | 00012 |\n    // | AD 123   |   123 | 23 |   123 |  0123 | 00123 |\n    // | AD 1234  |  1234 | 34 |  1234 |  1234 | 01234 |\n    // | AD 12345 | 12345 | 45 | 12345 | 12345 | 12345 |\n\n    var signedYear = date.getUTCFullYear();\n\n    // Returns 1 for 1 BC (which is year 0 in JavaScript)\n    var year = signedYear > 0 ? signedYear : 1 - signedYear;\n\n    // Two digit year\n    if (token === 'yy') {\n      var twoDigitYear = year % 100;\n      return addLeadingZeros(twoDigitYear, 2)\n    }\n\n    // Ordinal number\n    if (token === 'yo') {\n      return localize.ordinalNumber(year, {unit: 'year'})\n    }\n\n    // Padding\n    return addLeadingZeros(year, token.length)\n  },\n\n  // Local week-numbering year\n  Y: function (date, token, localize, options) {\n    var signedWeekYear = getUTCWeekYear(date, options);\n    var weekYear = signedWeekYear > 0 ? signedWeekYear : 1 - signedWeekYear;\n\n    // Two digit year\n    if (token === 'YY') {\n      var twoDigitYear = weekYear % 100;\n      return addLeadingZeros(twoDigitYear, 2)\n    }\n\n    // Ordinal number\n    if (token === 'Yo') {\n      return localize.ordinalNumber(weekYear, {unit: 'year'})\n    }\n\n    // Padding\n    return addLeadingZeros(weekYear, token.length)\n  },\n\n  // ISO week-numbering year\n  R: function (date, token, localize, options) {\n    var isoWeekYear = getUTCISOWeekYear(date, options);\n\n    // Padding\n    return addLeadingZeros(isoWeekYear, token.length)\n  },\n\n  // Extended year. This is a single number designating the year of this calendar system.\n  // The main difference between `y` and `u` localizers are B.C. years:\n  // | Year | `y` | `u` |\n  // |------|-----|-----|\n  // | AC 1 |   1 |   1 |\n  // | BC 1 |   1 |   0 |\n  // | BC 2 |   2 |  -1 |\n  // Also `yy` always returns the last two digits of a year,\n  // while `uu` pads single digit years to 2 characters and returns other years unchanged.\n  u: function (date, token, localize, options) {\n    var year = date.getUTCFullYear();\n    return addLeadingZeros(year, token.length)\n  },\n\n  // Quarter\n  Q: function (date, token, localize, options) {\n    var quarter = Math.ceil((date.getUTCMonth() + 1) / 3);\n    switch (token) {\n      // 1, 2, 3, 4\n      case 'Q':\n        return String(quarter)\n      // 01, 02, 03, 04\n      case 'QQ':\n        return addLeadingZeros(quarter, 2)\n      // 1st, 2nd, 3rd, 4th\n      case 'Qo':\n        return localize.ordinalNumber(quarter, {unit: 'quarter'})\n      // Q1, Q2, Q3, Q4\n      case 'QQQ':\n        return localize.quarter(quarter, {width: 'abbreviated', context: 'formatting'})\n      // 1, 2, 3, 4 (narrow quarter; could be not numerical)\n      case 'QQQQQ':\n        return localize.quarter(quarter, {width: 'narrow', context: 'formatting'})\n      // 1st quarter, 2nd quarter, ...\n      case 'QQQQ':\n      default:\n        return localize.quarter(quarter, {width: 'wide', context: 'formatting'})\n    }\n  },\n\n  // Stand-alone quarter\n  q: function (date, token, localize, options) {\n    var quarter = Math.ceil((date.getUTCMonth() + 1) / 3);\n    switch (token) {\n      // 1, 2, 3, 4\n      case 'q':\n        return String(quarter)\n      // 01, 02, 03, 04\n      case 'qq':\n        return addLeadingZeros(quarter, 2)\n      // 1st, 2nd, 3rd, 4th\n      case 'qo':\n        return localize.ordinalNumber(quarter, {unit: 'quarter'})\n      // Q1, Q2, Q3, Q4\n      case 'qqq':\n        return localize.quarter(quarter, {width: 'abbreviated', context: 'standalone'})\n      // 1, 2, 3, 4 (narrow quarter; could be not numerical)\n      case 'qqqqq':\n        return localize.quarter(quarter, {width: 'narrow', context: 'standalone'})\n      // 1st quarter, 2nd quarter, ...\n      case 'qqqq':\n      default:\n        return localize.quarter(quarter, {width: 'wide', context: 'standalone'})\n    }\n  },\n\n  // Month\n  M: function (date, token, localize, options) {\n    var month = date.getUTCMonth();\n    switch (token) {\n      // 1, 2, ..., 12\n      case 'M':\n        return String(month + 1)\n      // 01, 02, ..., 12\n      case 'MM':\n        return addLeadingZeros(month + 1, 2)\n      // 1st, 2nd, ..., 12th\n      case 'Mo':\n        return localize.ordinalNumber(month + 1, {unit: 'month'})\n      // Jan, Feb, ..., Dec\n      case 'MMM':\n        return localize.month(month, {width: 'abbreviated', context: 'formatting'})\n      // J, F, ..., D\n      case 'MMMMM':\n        return localize.month(month, {width: 'narrow', context: 'formatting'})\n      // January, February, ..., December\n      case 'MMMM':\n      default:\n        return localize.month(month, {width: 'wide', context: 'formatting'})\n    }\n  },\n\n  // Stand-alone month\n  L: function (date, token, localize, options) {\n    var month = date.getUTCMonth();\n    switch (token) {\n      // 1, 2, ..., 12\n      case 'L':\n        return String(month + 1)\n      // 01, 02, ..., 12\n      case 'LL':\n        return addLeadingZeros(month + 1, 2)\n      // 1st, 2nd, ..., 12th\n      case 'Lo':\n        return localize.ordinalNumber(month + 1, {unit: 'month'})\n      // Jan, Feb, ..., Dec\n      case 'LLL':\n        return localize.month(month, {width: 'abbreviated', context: 'standalone'})\n      // J, F, ..., D\n      case 'LLLLL':\n        return localize.month(month, {width: 'narrow', context: 'standalone'})\n      // January, February, ..., December\n      case 'LLLL':\n      default:\n        return localize.month(month, {width: 'wide', context: 'standalone'})\n    }\n  },\n\n  // Local week of year\n  w: function (date, token, localize, options) {\n    var week = getUTCWeek(date, options);\n\n    if (token === 'wo') {\n      return localize.ordinalNumber(week, {unit: 'week'})\n    }\n\n    return addLeadingZeros(week, token.length)\n  },\n\n  // ISO week of year\n  I: function (date, token, localize, options) {\n    var isoWeek = getUTCISOWeek(date, options);\n\n    if (token === 'Io') {\n      return localize.ordinalNumber(isoWeek, {unit: 'week'})\n    }\n\n    return addLeadingZeros(isoWeek, token.length)\n  },\n\n  // Day of the month\n  d: function (date, token, localize, options) {\n    var dayOfMonth = date.getUTCDate();\n\n    if (token === 'do') {\n      return localize.ordinalNumber(dayOfMonth, {unit: 'date'})\n    }\n\n    return addLeadingZeros(dayOfMonth, token.length)\n  },\n\n  // Day of year\n  D: function (date, token, localize, options) {\n    var dayOfYear = getUTCDayOfYear(date, options);\n\n    if (token === 'Do') {\n      return localize.ordinalNumber(dayOfYear, {unit: 'dayOfYear'})\n    }\n\n    return addLeadingZeros(dayOfYear, token.length)\n  },\n\n  // Day of week\n  E: function (date, token, localize, options) {\n    var dayOfWeek = date.getUTCDay();\n    switch (token) {\n      // Tue\n      case 'E':\n      case 'EE':\n      case 'EEE':\n        return localize.day(dayOfWeek, {width: 'abbreviated', context: 'formatting'})\n      // T\n      case 'EEEEE':\n        return localize.day(dayOfWeek, {width: 'narrow', context: 'formatting'})\n      // Tu\n      case 'EEEEEE':\n        return localize.day(dayOfWeek, {width: 'short', context: 'formatting'})\n      // Tuesday\n      case 'EEEE':\n      default:\n        return localize.day(dayOfWeek, {width: 'wide', context: 'formatting'})\n    }\n  },\n\n  // Local day of week\n  e: function (date, token, localize, options) {\n    var dayOfWeek = date.getUTCDay();\n    var localDayOfWeek = ((dayOfWeek - options.weekStartsOn + 8) % 7) || 7;\n    switch (token) {\n      // Numerical value (Nth day of week with current locale or weekStartsOn)\n      case 'e':\n        return String(localDayOfWeek)\n      // Padded numerical value\n      case 'ee':\n        return addLeadingZeros(localDayOfWeek, 2)\n      // 1st, 2nd, ..., 7th\n      case 'eo':\n        return localize.ordinalNumber(localDayOfWeek, {unit: 'day'})\n      case 'eee':\n        return localize.day(dayOfWeek, {width: 'abbreviated', context: 'formatting'})\n      // T\n      case 'eeeee':\n        return localize.day(dayOfWeek, {width: 'narrow', context: 'formatting'})\n      // Tu\n      case 'eeeeee':\n        return localize.day(dayOfWeek, {width: 'short', context: 'formatting'})\n      // Tuesday\n      case 'eeee':\n      default:\n        return localize.day(dayOfWeek, {width: 'wide', context: 'formatting'})\n    }\n  },\n\n  // Stand-alone local day of week\n  c: function (date, token, localize, options) {\n    var dayOfWeek = date.getUTCDay();\n    var localDayOfWeek = ((dayOfWeek - options.weekStartsOn + 8) % 7) || 7;\n    switch (token) {\n      // Numerical value (same as in `e`)\n      case 'c':\n        return String(localDayOfWeek)\n      // Padded numberical value\n      case 'cc':\n        return addLeadingZeros(localDayOfWeek, token.length)\n      // 1st, 2nd, ..., 7th\n      case 'co':\n        return localize.ordinalNumber(localDayOfWeek, {unit: 'day'})\n      case 'ccc':\n        return localize.day(dayOfWeek, {width: 'abbreviated', context: 'standalone'})\n      // T\n      case 'ccccc':\n        return localize.day(dayOfWeek, {width: 'narrow', context: 'standalone'})\n      // Tu\n      case 'cccccc':\n        return localize.day(dayOfWeek, {width: 'short', context: 'standalone'})\n      // Tuesday\n      case 'cccc':\n      default:\n        return localize.day(dayOfWeek, {width: 'wide', context: 'standalone'})\n    }\n  },\n\n  // ISO day of week\n  i: function (date, token, localize, options) {\n    var dayOfWeek = date.getUTCDay();\n    var isoDayOfWeek = dayOfWeek === 0 ? 7 : dayOfWeek;\n    switch (token) {\n      // 2\n      case 'i':\n        return String(isoDayOfWeek)\n      // 02\n      case 'ii':\n        return addLeadingZeros(isoDayOfWeek, token.length)\n      // 2nd\n      case 'io':\n        return localize.ordinalNumber(isoDayOfWeek, {unit: 'day'})\n      // Tue\n      case 'iii':\n        return localize.day(dayOfWeek, {width: 'abbreviated', context: 'formatting'})\n      // T\n      case 'iiiii':\n        return localize.day(dayOfWeek, {width: 'narrow', context: 'formatting'})\n      // Tu\n      case 'iiiiii':\n        return localize.day(dayOfWeek, {width: 'short', context: 'formatting'})\n      // Tuesday\n      case 'iiii':\n      default:\n        return localize.day(dayOfWeek, {width: 'wide', context: 'formatting'})\n    }\n  },\n\n  // AM or PM\n  a: function (date, token, localize) {\n    var hours = date.getUTCHours();\n    var dayPeriodEnumValue = (hours / 12) >= 1 ? 'pm' : 'am';\n\n    switch (token) {\n      case 'a':\n      case 'aa':\n      case 'aaa':\n        return localize.dayPeriod(dayPeriodEnumValue, {width: 'abbreviated', context: 'formatting'})\n      case 'aaaaa':\n        return localize.dayPeriod(dayPeriodEnumValue, {width: 'narrow', context: 'formatting'})\n      case 'aaaa':\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {width: 'wide', context: 'formatting'})\n    }\n  },\n\n  // AM, PM, midnight, noon\n  b: function (date, token, localize) {\n    var hours = date.getUTCHours();\n    var dayPeriodEnumValue;\n    if (hours === 12) {\n      dayPeriodEnumValue = dayPeriodEnum.noon;\n    } else if (hours === 0) {\n      dayPeriodEnumValue = dayPeriodEnum.midnight;\n    } else {\n      dayPeriodEnumValue = (hours / 12) >= 1 ? 'pm' : 'am';\n    }\n\n    switch (token) {\n      case 'b':\n      case 'bb':\n      case 'bbb':\n        return localize.dayPeriod(dayPeriodEnumValue, {width: 'abbreviated', context: 'formatting'})\n      case 'bbbbb':\n        return localize.dayPeriod(dayPeriodEnumValue, {width: 'narrow', context: 'formatting'})\n      case 'bbbb':\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {width: 'wide', context: 'formatting'})\n    }\n  },\n\n  // in the morning, in the afternoon, in the evening, at night\n  B: function (date, token, localize) {\n    var hours = date.getUTCHours();\n    var dayPeriodEnumValue;\n    if (hours >= 17) {\n      dayPeriodEnumValue = dayPeriodEnum.evening;\n    } else if (hours >= 12) {\n      dayPeriodEnumValue = dayPeriodEnum.afternoon;\n    } else if (hours >= 4) {\n      dayPeriodEnumValue = dayPeriodEnum.morning;\n    } else {\n      dayPeriodEnumValue = dayPeriodEnum.night;\n    }\n\n    switch (token) {\n      case 'B':\n      case 'BB':\n      case 'BBB':\n        return localize.dayPeriod(dayPeriodEnumValue, {width: 'abbreviated', context: 'formatting'})\n      case 'BBBBB':\n        return localize.dayPeriod(dayPeriodEnumValue, {width: 'narrow', context: 'formatting'})\n      case 'BBBB':\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {width: 'wide', context: 'formatting'})\n    }\n  },\n\n  // Hour [1-12]\n  h: function (date, token, localize, options) {\n    var hours = date.getUTCHours() % 12;\n\n    if (hours === 0) {\n      hours = 12;\n    }\n\n    if (token === 'ho') {\n      return localize.ordinalNumber(hours, {unit: 'hour'})\n    }\n\n    return addLeadingZeros(hours, token.length)\n  },\n\n  // Hour [0-23]\n  H: function (date, token, localize, options) {\n    var hours = date.getUTCHours();\n\n    if (token === 'Ho') {\n      return localize.ordinalNumber(hours, {unit: 'hour'})\n    }\n\n    return addLeadingZeros(hours, token.length)\n  },\n\n  // Hour [0-11]\n  K: function (date, token, localize, options) {\n    var hours = date.getUTCHours() % 12;\n\n    if (token === 'Ko') {\n      return localize.ordinalNumber(hours, {unit: 'hour'})\n    }\n\n    return addLeadingZeros(hours, token.length)\n  },\n\n  // Hour [1-24]\n  k: function (date, token, localize, options) {\n    var hours = date.getUTCHours();\n\n    if (hours === 0) {\n      hours = 24;\n    }\n\n    if (token === 'ko') {\n      return localize.ordinalNumber(hours, {unit: 'hour'})\n    }\n\n    return addLeadingZeros(hours, token.length)\n  },\n\n  // Minute\n  m: function (date, token, localize, options) {\n    var minutes = date.getUTCMinutes();\n\n    if (token === 'mo') {\n      return localize.ordinalNumber(minutes, {unit: 'minute'})\n    }\n\n    return addLeadingZeros(minutes, token.length)\n  },\n\n  // Second\n  s: function (date, token, localize, options) {\n    var seconds = date.getUTCSeconds();\n\n    if (token === 'so') {\n      return localize.ordinalNumber(seconds, {unit: 'second'})\n    }\n\n    return addLeadingZeros(seconds, token.length)\n  },\n\n  // Fraction of second\n  S: function (date, token, localize, options) {\n    var numberOfDigits = token.length;\n    var milliseconds = date.getUTCMilliseconds();\n    var fractionalSeconds = Math.floor(milliseconds * Math.pow(10, numberOfDigits - 3));\n    return addLeadingZeros(fractionalSeconds, numberOfDigits)\n  },\n\n  // Timezone (ISO-8601. If offset is 0, output is always `'Z'`)\n  X: function (date, token, localize, options) {\n    var originalDate = options._originalDate || date;\n    var timezoneOffset = originalDate.getTimezoneOffset();\n\n    if (timezoneOffset === 0) {\n      return 'Z'\n    }\n\n    switch (token) {\n      // Hours and optional minutes\n      case 'X':\n        return formatTimezoneWithOptionalMinutes(timezoneOffset)\n\n      // Hours, minutes and optional seconds without `:` delimeter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `XX`\n      case 'XXXX':\n      case 'XX': // Hours and minutes without `:` delimeter\n        return formatTimezone(timezoneOffset)\n\n      // Hours, minutes and optional seconds with `:` delimeter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `XXX`\n      case 'XXXXX':\n      case 'XXX': // Hours and minutes with `:` delimeter\n      default:\n        return formatTimezone(timezoneOffset, ':')\n    }\n  },\n\n  // Timezone (ISO-8601. If offset is 0, output is `'+00:00'` or equivalent)\n  x: function (date, token, localize, options) {\n    var originalDate = options._originalDate || date;\n    var timezoneOffset = originalDate.getTimezoneOffset();\n\n    switch (token) {\n      // Hours and optional minutes\n      case 'x':\n        return formatTimezoneWithOptionalMinutes(timezoneOffset)\n\n      // Hours, minutes and optional seconds without `:` delimeter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `xx`\n      case 'xxxx':\n      case 'xx': // Hours and minutes without `:` delimeter\n        return formatTimezone(timezoneOffset)\n\n      // Hours, minutes and optional seconds with `:` delimeter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `xxx`\n      case 'xxxxx':\n      case 'xxx': // Hours and minutes with `:` delimeter\n      default:\n        return formatTimezone(timezoneOffset, ':')\n    }\n  },\n\n  // Timezone (GMT)\n  O: function (date, token, localize, options) {\n    var originalDate = options._originalDate || date;\n    var timezoneOffset = originalDate.getTimezoneOffset();\n\n    switch (token) {\n      // Short\n      case 'O':\n      case 'OO':\n      case 'OOO':\n        return 'GMT' + formatTimezoneShort(timezoneOffset, ':')\n      // Long\n      case 'OOOO':\n      default:\n        return 'GMT' + formatTimezone(timezoneOffset, ':')\n    }\n  },\n\n  // Timezone (specific non-location)\n  z: function (date, token, localize, options) {\n    var originalDate = options._originalDate || date;\n    var timezoneOffset = originalDate.getTimezoneOffset();\n\n    switch (token) {\n      // Short\n      case 'z':\n      case 'zz':\n      case 'zzz':\n        return 'GMT' + formatTimezoneShort(timezoneOffset, ':')\n      // Long\n      case 'zzzz':\n      default:\n        return 'GMT' + formatTimezone(timezoneOffset, ':')\n    }\n  },\n\n  // Seconds timestamp\n  t: function (date, token, localize, options) {\n    var originalDate = options._originalDate || date;\n    var timestamp = Math.floor(originalDate.getTime() / 1000);\n    return addLeadingZeros(timestamp, token.length)\n  },\n\n  // Milliseconds timestamp\n  T: function (date, token, localize, options) {\n    var originalDate = options._originalDate || date;\n    var timestamp = originalDate.getTime();\n    return addLeadingZeros(timestamp, token.length)\n  }\n};\n\nfunction addLeadingZeros (number, targetLength) {\n  var sign = number < 0 ? '-' : '';\n  var output = Math.abs(number).toString();\n  while (output.length < targetLength) {\n    output = '0' + output;\n  }\n  return sign + output\n}\n\nfunction formatTimezone (offset, dirtyDelimeter) {\n  var delimeter = dirtyDelimeter || '';\n  var sign = offset > 0 ? '-' : '+';\n  var absOffset = Math.abs(offset);\n  var hours = addLeadingZeros(Math.floor(absOffset / 60), 2);\n  var minutes = addLeadingZeros(absOffset % 60, 2);\n  return sign + hours + delimeter + minutes\n}\n\nfunction formatTimezoneWithOptionalMinutes (offset, dirtyDelimeter) {\n  if (offset % 60 === 0) {\n    var sign = offset > 0 ? '-' : '+';\n    return sign + addLeadingZeros(Math.abs(offset) / 60, 2)\n  }\n  return formatTimezone(offset, dirtyDelimeter)\n}\n\nfunction formatTimezoneShort (offset, dirtyDelimeter) {\n  var sign = offset > 0 ? '-' : '+';\n  var absOffset = Math.abs(offset);\n  var hours = Math.floor(absOffset / 60);\n  var minutes = absOffset % 60;\n  if (minutes === 0) {\n    return sign + String(hours)\n  }\n  var delimeter = dirtyDelimeter || '';\n  return sign + String(hours) + delimeter + addLeadingZeros(minutes, 2)\n}\n\nfunction dateLongFormatter (pattern, formatLong, options) {\n  switch (pattern) {\n    case 'P':\n      return formatLong.date({width: 'short'})\n    case 'PP':\n      return formatLong.date({width: 'medium'})\n    case 'PPP':\n      return formatLong.date({width: 'long'})\n    case 'PPPP':\n    default:\n      return formatLong.date({width: 'full'})\n  }\n}\n\nfunction timeLongFormatter (pattern, formatLong, options) {\n  switch (pattern) {\n    case 'p':\n      return formatLong.time({width: 'short'})\n    case 'pp':\n      return formatLong.time({width: 'medium'})\n    case 'ppp':\n      return formatLong.time({width: 'long'})\n    case 'pppp':\n    default:\n      return formatLong.time({width: 'full'})\n  }\n}\n\nfunction dateTimeLongFormatter (pattern, formatLong, options) {\n  var matchResult = pattern.match(/(P+)(p+)?/);\n  var datePattern = matchResult[1];\n  var timePattern = matchResult[2];\n\n  if (!timePattern) {\n    return dateLongFormatter(pattern, formatLong, options)\n  }\n\n  var dateTimeFormat;\n\n  switch (datePattern) {\n    case 'P':\n      dateTimeFormat = formatLong.dateTime({width: 'short'});\n      break\n    case 'PP':\n      dateTimeFormat = formatLong.dateTime({width: 'medium'});\n      break\n    case 'PPP':\n      dateTimeFormat = formatLong.dateTime({width: 'long'});\n      break\n    case 'PPPP':\n    default:\n      dateTimeFormat = formatLong.dateTime({width: 'full'});\n      break\n  }\n\n  return dateTimeFormat\n    .replace('{{date}}', dateLongFormatter(datePattern, formatLong, options))\n    .replace('{{time}}', timeLongFormatter(timePattern, formatLong, options))\n}\n\nvar longFormatters = {\n  p: timeLongFormatter,\n  P: dateTimeLongFormatter\n};\n\n/**\n * @name subMilliseconds\n * @category Millisecond Helpers\n * @summary Subtract the specified number of milliseconds from the given date.\n *\n * @description\n * Subtract the specified number of milliseconds from the given date.\n *\n * @param {Date|String|Number} date - the date to be changed\n * @param {Number} amount - the amount of milliseconds to be subtracted\n * @param {Options} [options] - the object with options. See [Options]{@link https://date-fns.org/docs/Options}\n * @param {0|1|2} [options.additionalDigits=2] - passed to `toDate`. See [toDate]{@link https://date-fns.org/docs/toDate}\n * @returns {Date} the new date with the milliseconds subtracted\n * @throws {TypeError} 2 arguments required\n * @throws {RangeError} `options.additionalDigits` must be 0, 1 or 2\n *\n * @example\n * // Subtract 750 milliseconds from 10 July 2014 12:45:30.000:\n * var result = subMilliseconds(new Date(2014, 6, 10, 12, 45, 30, 0), 750)\n * //=> Thu Jul 10 2014 12:45:29.250\n */\nfunction subMilliseconds (dirtyDate, dirtyAmount, dirtyOptions) {\n  if (arguments.length < 2) {\n    throw new TypeError('2 arguments required, but only ' + arguments.length + ' present')\n  }\n\n  var amount = toInteger(dirtyAmount);\n  return addMilliseconds(dirtyDate, -amount, dirtyOptions)\n}\n\nvar protectedTokens = ['D', 'DD', 'YY', 'YYYY'];\n\nfunction isProtectedToken(token) {\n  return protectedTokens.indexOf(token) !== -1\n}\n\nfunction throwProtectedError(token) {\n  throw new RangeError(\n    '`options.awareOfUnicodeTokens` must be set to `true` to use `' +\n      token +\n      '` token; see: https://git.io/fxCyr'\n  )\n}\n\n// This RegExp consists of three parts separated by `|`:\n// - [yYQqMLwIdDecihHKkms]o matches any available ordinal number token\n//   (one of the certain letters followed by `o`)\n// - (\\w)\\1* matches any sequences of the same letter\n// - '' matches two quote characters in a row\n// - '(''|[^'])+('|$) matches anything surrounded by two quote characters ('),\n//   except a single quote symbol, which ends the sequence.\n//   Two quote characters do not end the sequence.\n//   If there is no matching single quote\n//   then the sequence will continue until the end of the string.\n// - . matches any single character unmatched by previous parts of the RegExps\nvar formattingTokensRegExp = /[yYQqMLwIdDecihHKkms]o|(\\w)\\1*|''|'(''|[^'])+('|$)|./g;\n\n// This RegExp catches symbols escaped by quotes, and also\n// sequences of symbols P, p, and the combinations like `PPPPPPPppppp`\nvar longFormattingTokensRegExp = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;\n\nvar escapedStringRegExp = /^'(.*?)'?$/;\nvar doubleQuoteRegExp = /''/g;\n\n/**\n * @name format\n * @category Common Helpers\n * @summary Format the date.\n *\n * @description\n * Return the formatted date string in the given format. The result may vary by locale.\n *\n * > ⚠️ Please note that the `format` tokens differ from Moment.js and other libraries.\n * > See: https://git.io/fxCyr\n *\n * The characters wrapped between two single quotes characters (') are escaped.\n * Two single quotes in a row, whether inside or outside a quoted sequence, represent a 'real' single quote.\n * (see the last example)\n *\n * Format of the string is based on Unicode Technical Standard #35:\n * https://www.unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table\n * with a few additions (see note 7 below the table).\n *\n * Accepted patterns:\n * | Unit                            | Pattern | Result examples                   | Notes |\n * |---------------------------------|---------|-----------------------------------|-------|\n * | Era                             | G..GGG  | AD, BC                            |       |\n * |                                 | GGGG    | Anno Domini, Before Christ        | 2     |\n * |                                 | GGGGG   | A, B                              |       |\n * | Calendar year                   | y       | 44, 1, 1900, 2017                 | 5     |\n * |                                 | yo      | 44th, 1st, 0th, 17th              | 5,7   |\n * |                                 | yy      | 44, 01, 00, 17                    | 5     |\n * |                                 | yyy     | 044, 001, 1900, 2017              | 5     |\n * |                                 | yyyy    | 0044, 0001, 1900, 2017            | 5     |\n * |                                 | yyyyy   | ...                               | 3,5   |\n * | Local week-numbering year       | Y       | 44, 1, 1900, 2017                 | 5     |\n * |                                 | Yo      | 44th, 1st, 1900th, 2017th         | 5,7   |\n * |                                 | YY      | 44, 01, 00, 17                    | 5,8   |\n * |                                 | YYY     | 044, 001, 1900, 2017              | 5     |\n * |                                 | YYYY    | 0044, 0001, 1900, 2017            | 5,8   |\n * |                                 | YYYYY   | ...                               | 3,5   |\n * | ISO week-numbering year         | R       | -43, 0, 1, 1900, 2017             | 5,7   |\n * |                                 | RR      | -43, 00, 01, 1900, 2017           | 5,7   |\n * |                                 | RRR     | -043, 000, 001, 1900, 2017        | 5,7   |\n * |                                 | RRRR    | -0043, 0000, 0001, 1900, 2017     | 5,7   |\n * |                                 | RRRRR   | ...                               | 3,5,7 |\n * | Extended year                   | u       | -43, 0, 1, 1900, 2017             | 5     |\n * |                                 | uu      | -43, 01, 1900, 2017               | 5     |\n * |                                 | uuu     | -043, 001, 1900, 2017             | 5     |\n * |                                 | uuuu    | -0043, 0001, 1900, 2017           | 5     |\n * |                                 | uuuuu   | ...                               | 3,5   |\n * | Quarter (formatting)            | Q       | 1, 2, 3, 4                        |       |\n * |                                 | Qo      | 1st, 2nd, 3rd, 4th                | 7     |\n * |                                 | QQ      | 01, 02, 03, 04                    |       |\n * |                                 | QQQ     | Q1, Q2, Q3, Q4                    |       |\n * |                                 | QQQQ    | 1st quarter, 2nd quarter, ...     | 2     |\n * |                                 | QQQQQ   | 1, 2, 3, 4                        | 4     |\n * | Quarter (stand-alone)           | q       | 1, 2, 3, 4                        |       |\n * |                                 | qo      | 1st, 2nd, 3rd, 4th                | 7     |\n * |                                 | qq      | 01, 02, 03, 04                    |       |\n * |                                 | qqq     | Q1, Q2, Q3, Q4                    |       |\n * |                                 | qqqq    | 1st quarter, 2nd quarter, ...     | 2     |\n * |                                 | qqqqq   | 1, 2, 3, 4                        | 4     |\n * | Month (formatting)              | M       | 1, 2, ..., 12                     |       |\n * |                                 | Mo      | 1st, 2nd, ..., 12th               | 7     |\n * |                                 | MM      | 01, 02, ..., 12                   |       |\n * |                                 | MMM     | Jan, Feb, ..., Dec                |       |\n * |                                 | MMMM    | January, February, ..., December  | 2     |\n * |                                 | MMMMM   | J, F, ..., D                      |       |\n * | Month (stand-alone)             | L       | 1, 2, ..., 12                     |       |\n * |                                 | Lo      | 1st, 2nd, ..., 12th               | 7     |\n * |                                 | LL      | 01, 02, ..., 12                   |       |\n * |                                 | LLL     | Jan, Feb, ..., Dec                |       |\n * |                                 | LLLL    | January, February, ..., December  | 2     |\n * |                                 | LLLLL   | J, F, ..., D                      |       |\n * | Local week of year              | w       | 1, 2, ..., 53                     |       |\n * |                                 | wo      | 1st, 2nd, ..., 53th               | 7     |\n * |                                 | ww      | 01, 02, ..., 53                   |       |\n * | ISO week of year                | I       | 1, 2, ..., 53                     | 7     |\n * |                                 | Io      | 1st, 2nd, ..., 53th               | 7     |\n * |                                 | II      | 01, 02, ..., 53                   | 7     |\n * | Day of month                    | d       | 1, 2, ..., 31                     |       |\n * |                                 | do      | 1st, 2nd, ..., 31st               | 7     |\n * |                                 | dd      | 01, 02, ..., 31                   |       |\n * | Day of year                     | D       | 1, 2, ..., 365, 366               | 8     |\n * |                                 | Do      | 1st, 2nd, ..., 365th, 366th       | 7     |\n * |                                 | DD      | 01, 02, ..., 365, 366             | 8     |\n * |                                 | DDD     | 001, 002, ..., 365, 366           |       |\n * |                                 | DDDD    | ...                               | 3     |\n * | Day of week (formatting)        | E..EEE  | Mon, Tue, Wed, ..., Su            |       |\n * |                                 | EEEE    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | EEEEE   | M, T, W, T, F, S, S               |       |\n * |                                 | EEEEEE  | Mo, Tu, We, Th, Fr, Su, Sa        |       |\n * | ISO day of week (formatting)    | i       | 1, 2, 3, ..., 7                   | 7     |\n * |                                 | io      | 1st, 2nd, ..., 7th                | 7     |\n * |                                 | ii      | 01, 02, ..., 07                   | 7     |\n * |                                 | iii     | Mon, Tue, Wed, ..., Su            | 7     |\n * |                                 | iiii    | Monday, Tuesday, ..., Sunday      | 2,7   |\n * |                                 | iiiii   | M, T, W, T, F, S, S               | 7     |\n * |                                 | iiiiii  | Mo, Tu, We, Th, Fr, Su, Sa        | 7     |\n * | Local day of week (formatting)  | e       | 2, 3, 4, ..., 1                   |       |\n * |                                 | eo      | 2nd, 3rd, ..., 1st                | 7     |\n * |                                 | ee      | 02, 03, ..., 01                   |       |\n * |                                 | eee     | Mon, Tue, Wed, ..., Su            |       |\n * |                                 | eeee    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | eeeee   | M, T, W, T, F, S, S               |       |\n * |                                 | eeeeee  | Mo, Tu, We, Th, Fr, Su, Sa        |       |\n * | Local day of week (stand-alone) | c       | 2, 3, 4, ..., 1                   |       |\n * |                                 | co      | 2nd, 3rd, ..., 1st                | 7     |\n * |                                 | cc      | 02, 03, ..., 01                   |       |\n * |                                 | ccc     | Mon, Tue, Wed, ..., Su            |       |\n * |                                 | cccc    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | ccccc   | M, T, W, T, F, S, S               |       |\n * |                                 | cccccc  | Mo, Tu, We, Th, Fr, Su, Sa        |       |\n * | AM, PM                          | a..aaa  | AM, PM                            |       |\n * |                                 | aaaa    | a.m., p.m.                        | 2     |\n * |                                 | aaaaa   | a, p                              |       |\n * | AM, PM, noon, midnight          | b..bbb  | AM, PM, noon, midnight            |       |\n * |                                 | bbbb    | a.m., p.m., noon, midnight        | 2     |\n * |                                 | bbbbb   | a, p, n, mi                       |       |\n * | Flexible day period             | B..BBB  | at night, in the morning, ...     |       |\n * |                                 | BBBB    | at night, in the morning, ...     | 2     |\n * |                                 | BBBBB   | at night, in the morning, ...     |       |\n * | Hour [1-12]                     | h       | 1, 2, ..., 11, 12                 |       |\n * |                                 | ho      | 1st, 2nd, ..., 11th, 12th         | 7     |\n * |                                 | hh      | 01, 02, ..., 11, 12               |       |\n * | Hour [0-23]                     | H       | 0, 1, 2, ..., 23                  |       |\n * |                                 | Ho      | 0th, 1st, 2nd, ..., 23rd          | 7     |\n * |                                 | HH      | 00, 01, 02, ..., 23               |       |\n * | Hour [0-11]                     | K       | 1, 2, ..., 11, 0                  |       |\n * |                                 | Ko      | 1st, 2nd, ..., 11th, 0th          | 7     |\n * |                                 | KK      | 1, 2, ..., 11, 0                  |       |\n * | Hour [1-24]                     | k       | 24, 1, 2, ..., 23                 |       |\n * |                                 | ko      | 24th, 1st, 2nd, ..., 23rd         | 7     |\n * |                                 | kk      | 24, 01, 02, ..., 23               |       |\n * | Minute                          | m       | 0, 1, ..., 59                     |       |\n * |                                 | mo      | 0th, 1st, ..., 59th               | 7     |\n * |                                 | mm      | 00, 01, ..., 59                   |       |\n * | Second                          | s       | 0, 1, ..., 59                     |       |\n * |                                 | so      | 0th, 1st, ..., 59th               | 7     |\n * |                                 | ss      | 00, 01, ..., 59                   |       |\n * | Fraction of second              | S       | 0, 1, ..., 9                      |       |\n * |                                 | SS      | 00, 01, ..., 99                   |       |\n * |                                 | SSS     | 000, 0001, ..., 999               |       |\n * |                                 | SSSS    | ...                               | 3     |\n * | Timezone (ISO-8601 w/ Z)        | X       | -08, +0530, Z                     |       |\n * |                                 | XX      | -0800, +0530, Z                   |       |\n * |                                 | XXX     | -08:00, +05:30, Z                 |       |\n * |                                 | XXXX    | -0800, +0530, Z, +123456          | 2     |\n * |                                 | XXXXX   | -08:00, +05:30, Z, +12:34:56      |       |\n * | Timezone (ISO-8601 w/o Z)       | x       | -08, +0530, +00                   |       |\n * |                                 | xx      | -0800, +0530, +0000               |       |\n * |                                 | xxx     | -08:00, +05:30, +00:00            | 2     |\n * |                                 | xxxx    | -0800, +0530, +0000, +123456      |       |\n * |                                 | xxxxx   | -08:00, +05:30, +00:00, +12:34:56 |       |\n * | Timezone (GMT)                  | O...OOO | GMT-8, GMT+5:30, GMT+0            |       |\n * |                                 | OOOO    | GMT-08:00, GMT+05:30, GMT+00:00   | 2     |\n * | Timezone (specific non-locat.)  | z...zzz | GMT-8, GMT+5:30, GMT+0            | 6     |\n * |                                 | zzzz    | GMT-08:00, GMT+05:30, GMT+00:00   | 2,6   |\n * | Seconds timestamp               | t       | 512969520                         | 7     |\n * |                                 | tt      | ...                               | 3,7   |\n * | Milliseconds timestamp          | T       | 512969520900                      | 7     |\n * |                                 | TT      | ...                               | 3,7   |\n * | Long localized date             | P       | 05/29/1453                        | 7     |\n * |                                 | PP      | May 29, 1453                      | 7     |\n * |                                 | PPP     | May 29th, 1453                    | 7     |\n * |                                 | PPPP    | Sunday, May 29th, 1453            | 2,7   |\n * | Long localized time             | p       | 12:00 AM                          | 7     |\n * |                                 | pp      | 12:00:00 AM                       | 7     |\n * |                                 | ppp     | 12:00:00 AM GMT+2                 | 7     |\n * |                                 | pppp    | 12:00:00 AM GMT+02:00             | 2,7   |\n * | Combination of date and time    | Pp      | 05/29/1453, 12:00 AM              | 7     |\n * |                                 | PPpp    | May 29, 1453, 12:00:00 AM         | 7     |\n * |                                 | PPPppp  | May 29th, 1453 at ...             | 7     |\n * |                                 | PPPPpppp| Sunday, May 29th, 1453 at ...     | 2,7   |\n * Notes:\n * 1. \"Formatting\" units (e.g. formatting quarter) in the default en-US locale\n *    are the same as \"stand-alone\" units, but are different in some languages.\n *    \"Formatting\" units are declined according to the rules of the language\n *    in the context of a date. \"Stand-alone\" units are always nominative singular:\n *\n *    `format(new Date(2017, 10, 6), 'do LLLL', {locale: cs}) //=> '6. listopad'`\n *\n *    `format(new Date(2017, 10, 6), 'do MMMM', {locale: cs}) //=> '6. listopadu'`\n *\n * 2. Any sequence of the identical letters is a pattern, unless it is escaped by\n *    the single quote characters (see below).\n *    If the sequence is longer than listed in table (e.g. `EEEEEEEEEEE`)\n *    the output will be the same as default pattern for this unit, usually\n *    the longest one (in case of ISO weekdays, `EEEE`). Default patterns for units\n *    are marked with \"2\" in the last column of the table.\n *\n *    `format(new Date(2017, 10, 6), 'MMM') //=> 'Nov'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMM') //=> 'November'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMM') //=> 'N'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMMM') //=> 'November'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMMMM') //=> 'November'`\n *\n * 3. Some patterns could be unlimited length (such as `yyyyyyyy`).\n *    The output will be padded with zeros to match the length of the pattern.\n *\n *    `format(new Date(2017, 10, 6), 'yyyyyyyy') //=> '00002017'`\n *\n * 4. `QQQQQ` and `qqqqq` could be not strictly numerical in some locales.\n *    These tokens represent the shortest form of the quarter.\n *\n * 5. The main difference between `y` and `u` patterns are B.C. years:\n *\n *    | Year | `y` | `u` |\n *    |------|-----|-----|\n *    | AC 1 |   1 |   1 |\n *    | BC 1 |   1 |   0 |\n *    | BC 2 |   2 |  -1 |\n *\n *    Also `yy` always returns the last two digits of a year,\n *    while `uu` pads single digit years to 2 characters and returns other years unchanged:\n *\n *    | Year | `yy` | `uu` |\n *    |------|------|------|\n *    | 1    |   01 |   01 |\n *    | 14   |   14 |   14 |\n *    | 376  |   76 |  376 |\n *    | 1453 |   53 | 1453 |\n *\n *    The same difference is true for local and ISO week-numbering years (`Y` and `R`),\n *    except local week-numbering years are dependent on `options.weekStartsOn`\n *    and `options.firstWeekContainsDate` (compare [getISOWeekYear]{@link https://date-fns.org/docs/getISOWeekYear}\n *    and [getWeekYear]{@link https://date-fns.org/docs/getWeekYear}).\n *\n * 6. Specific non-location timezones are currently unavailable in `date-fns`,\n *    so right now these tokens fall back to GMT timezones.\n *\n * 7. These patterns are not in the Unicode Technical Standard #35:\n *    - `i`: ISO day of week\n *    - `I`: ISO week of year\n *    - `R`: ISO week-numbering year\n *    - `t`: seconds timestamp\n *    - `T`: milliseconds timestamp\n *    - `o`: ordinal number modifier\n *    - `P`: long localized date\n *    - `p`: long localized time\n *\n * 8. These tokens are often confused with others. See: https://git.io/fxCyr\n *\n * @param {Date|String|Number} date - the original date\n * @param {String} format - the string of tokens\n * @param {Options} [options] - the object with options. See [Options]{@link https://date-fns.org/docs/Options}\n * @param {0|1|2} [options.additionalDigits=2] - passed to `toDate`. See [toDate]{@link https://date-fns.org/docs/toDate}\n * @param {0|1|2|3|4|5|6} [options.weekStartsOn=0] - the index of the first day of the week (0 - Sunday)\n * @param {Number} [options.firstWeekContainsDate=1] - the day of January, which is\n * @param {Locale} [options.locale=defaultLocale] - the locale object. See [Locale]{@link https://date-fns.org/docs/Locale}\n * @param {Boolean} [options.awareOfUnicodeTokens=false] - if true, allows usage of Unicode tokens causes confusion:\n *   - Some of the day of year tokens (`D`, `DD`) that are confused with the day of month tokens (`d`, `dd`).\n *   - Some of the local week-numbering year tokens (`YY`, `YYYY`) that are confused with the calendar year tokens (`yy`, `yyyy`).\n *   See: https://git.io/fxCyr\n * @returns {String} the formatted date string\n * @throws {TypeError} 2 arguments required\n * @throws {RangeError} `options.additionalDigits` must be 0, 1 or 2\n * @throws {RangeError} `options.locale` must contain `localize` property\n * @throws {RangeError} `options.locale` must contain `formatLong` property\n * @throws {RangeError} `options.weekStartsOn` must be between 0 and 6\n * @throws {RangeError} `options.firstWeekContainsDate` must be between 1 and 7\n * @throws {RangeError} `options.awareOfUnicodeTokens` must be set to `true` to use `XX` token; see: https://git.io/fxCyr\n *\n * @example\n * // Represent 11 February 2014 in middle-endian format:\n * var result = format(\n *   new Date(2014, 1, 11),\n *   'MM/dd/yyyy'\n * )\n * //=> '02/11/2014'\n *\n * @example\n * // Represent 2 July 2014 in Esperanto:\n * import { eoLocale } from 'date-fns/locale/eo'\n * var result = format(\n *   new Date(2014, 6, 2),\n *   \"do 'de' MMMM yyyy\",\n *   {locale: eoLocale}\n * )\n * //=> '2-a de julio 2014'\n *\n * @example\n * // Escape string by single quote characters:\n * var result = format(\n *   new Date(2014, 6, 2, 15),\n *   \"h 'o''clock'\"\n * )\n * //=> \"3 o'clock\"\n */\nfunction format(dirtyDate, dirtyFormatStr, dirtyOptions) {\n  if (arguments.length < 2) {\n    throw new TypeError(\n      '2 arguments required, but only ' + arguments.length + ' present'\n    )\n  }\n\n  var formatStr = String(dirtyFormatStr);\n  var options = dirtyOptions || {};\n\n  var locale = options.locale || locale$1;\n\n  var localeFirstWeekContainsDate =\n    locale.options && locale.options.firstWeekContainsDate;\n  var defaultFirstWeekContainsDate =\n    localeFirstWeekContainsDate == null\n      ? 1\n      : toInteger(localeFirstWeekContainsDate);\n  var firstWeekContainsDate =\n    options.firstWeekContainsDate == null\n      ? defaultFirstWeekContainsDate\n      : toInteger(options.firstWeekContainsDate);\n\n  // Test if weekStartsOn is between 1 and 7 _and_ is not NaN\n  if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {\n    throw new RangeError(\n      'firstWeekContainsDate must be between 1 and 7 inclusively'\n    )\n  }\n\n  var localeWeekStartsOn = locale.options && locale.options.weekStartsOn;\n  var defaultWeekStartsOn =\n    localeWeekStartsOn == null ? 0 : toInteger(localeWeekStartsOn);\n  var weekStartsOn =\n    options.weekStartsOn == null\n      ? defaultWeekStartsOn\n      : toInteger(options.weekStartsOn);\n\n  // Test if weekStartsOn is between 0 and 6 _and_ is not NaN\n  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {\n    throw new RangeError('weekStartsOn must be between 0 and 6 inclusively')\n  }\n\n  if (!locale.localize) {\n    throw new RangeError('locale must contain localize property')\n  }\n\n  if (!locale.formatLong) {\n    throw new RangeError('locale must contain formatLong property')\n  }\n\n  var originalDate = toDate(dirtyDate, options);\n\n  if (!isValid(originalDate, options)) {\n    return 'Invalid Date'\n  }\n\n  // Convert the date in system timezone to the same date in UTC+00:00 timezone.\n  // This ensures that when UTC functions will be implemented, locales will be compatible with them.\n  // See an issue about UTC functions: https://github.com/date-fns/date-fns/issues/376\n  var timezoneOffset = getTimezoneOffsetInMilliseconds(originalDate);\n  var utcDate = subMilliseconds(originalDate, timezoneOffset, options);\n\n  var formatterOptions = {\n    firstWeekContainsDate: firstWeekContainsDate,\n    weekStartsOn: weekStartsOn,\n    locale: locale,\n    _originalDate: originalDate\n  };\n\n  var result = formatStr\n    .match(longFormattingTokensRegExp)\n    .map(function(substring) {\n      var firstCharacter = substring[0];\n      if (firstCharacter === 'p' || firstCharacter === 'P') {\n        var longFormatter = longFormatters[firstCharacter];\n        return longFormatter(substring, locale.formatLong, formatterOptions)\n      }\n      return substring\n    })\n    .join('')\n    .match(formattingTokensRegExp)\n    .map(function(substring) {\n      // Replace two single quote characters with one single quote character\n      if (substring === \"''\") {\n        return \"'\"\n      }\n\n      var firstCharacter = substring[0];\n      if (firstCharacter === \"'\") {\n        return cleanEscapedString(substring)\n      }\n\n      var formatter = formatters[firstCharacter];\n      if (formatter) {\n        if (!options.awareOfUnicodeTokens && isProtectedToken(substring)) {\n          throwProtectedError(substring);\n        }\n        return formatter(utcDate, substring, locale.localize, formatterOptions)\n      }\n\n      return substring\n    })\n    .join('');\n\n  return result\n}\n\nfunction cleanEscapedString(input) {\n  return input.match(escapedStringRegExp)[1].replace(doubleQuoteRegExp, \"'\")\n}\n\n/**\n * @name isAfter\n * @category Common Helpers\n * @summary Is the first date after the second one?\n *\n * @description\n * Is the first date after the second one?\n *\n * @param {Date|String|Number} date - the date that should be after the other one to return true\n * @param {Date|String|Number} dateToCompare - the date to compare with\n * @param {Options} [options] - the object with options. See [Options]{@link https://date-fns.org/docs/Options}\n * @param {0|1|2} [options.additionalDigits=2] - passed to `toDate`. See [toDate]{@link https://date-fns.org/docs/toDate}\n * @returns {Boolean} the first date is after the second date\n * @throws {TypeError} 2 arguments required\n * @throws {RangeError} `options.additionalDigits` must be 0, 1 or 2\n *\n * @example\n * // Is 10 July 1989 after 11 February 1987?\n * var result = isAfter(new Date(1989, 6, 10), new Date(1987, 1, 11))\n * //=> true\n */\nfunction isAfter (dirtyDate, dirtyDateToCompare, dirtyOptions) {\n  if (arguments.length < 2) {\n    throw new TypeError('2 arguments required, but only ' + arguments.length + ' present')\n  }\n\n  var date = toDate(dirtyDate, dirtyOptions);\n  var dateToCompare = toDate(dirtyDateToCompare, dirtyOptions);\n  return date.getTime() > dateToCompare.getTime()\n}\n\n/**\n * @name isBefore\n * @category Common Helpers\n * @summary Is the first date before the second one?\n *\n * @description\n * Is the first date before the second one?\n *\n * @param {Date|String|Number} date - the date that should be before the other one to return true\n * @param {Date|String|Number} dateToCompare - the date to compare with\n * @param {Options} [options] - the object with options. See [Options]{@link https://date-fns.org/docs/Options}\n * @param {0|1|2} [options.additionalDigits=2] - passed to `toDate`. See [toDate]{@link https://date-fns.org/docs/toDate}\n * @returns {Boolean} the first date is before the second date\n * @throws {TypeError} 2 arguments required\n * @throws {RangeError} `options.additionalDigits` must be 0, 1 or 2\n *\n * @example\n * // Is 10 July 1989 before 11 February 1987?\n * var result = isBefore(new Date(1989, 6, 10), new Date(1987, 1, 11))\n * //=> false\n */\nfunction isBefore (dirtyDate, dirtyDateToCompare, dirtyOptions) {\n  if (arguments.length < 2) {\n    throw new TypeError('2 arguments required, but only ' + arguments.length + ' present')\n  }\n\n  var date = toDate(dirtyDate, dirtyOptions);\n  var dateToCompare = toDate(dirtyDateToCompare, dirtyOptions);\n  return date.getTime() < dateToCompare.getTime()\n}\n\n/**\n * @name isDate\n * @category Common Helpers\n * @summary Is the given value a date?\n *\n * @description\n * Returns true if the given value is an instance of Date. The function works for dates transferred across iframes.\n *\n * @param {*} value - the value to check\n * @param {Options} [options] - the object with options. Unused; present for FP submodule compatibility sake. See [Options]{@link https://date-fns.org/docs/Options}\n * @returns {boolean} true if the given value is a date\n * @throws {TypeError} 1 arguments required\n *\n * @example\n * // For a valid date:\n * var result = isDate(new Date())\n * //=> true\n *\n * @example\n * // For an invalid date:\n * var result = isDate(new Date(NaN))\n * //=> true\n *\n * @example\n * // For some value:\n * var result = isDate('2014-02-31')\n * //=> false\n *\n * @example\n * // For an object:\n * var result = isDate({})\n * //=> false\n */\n\n/**\n * @name isEqual\n * @category Common Helpers\n * @summary Are the given dates equal?\n *\n * @description\n * Are the given dates equal?\n *\n * @param {Date|String|Number} dateLeft - the first date to compare\n * @param {Date|String|Number} dateRight - the second date to compare\n * @param {Options} [options] - the object with options. See [Options]{@link https://date-fns.org/docs/Options}\n * @param {0|1|2} [options.additionalDigits=2] - passed to `toDate`. See [toDate]{@link https://date-fns.org/docs/toDate}\n * @returns {Boolean} the dates are equal\n * @throws {TypeError} 2 arguments required\n * @throws {RangeError} `options.additionalDigits` must be 0, 1 or 2\n *\n * @example\n * // Are 2 July 2014 06:30:45.000 and 2 July 2014 06:30:45.500 equal?\n * var result = isEqual(\n *   new Date(2014, 6, 2, 6, 30, 45, 0)\n *   new Date(2014, 6, 2, 6, 30, 45, 500)\n * )\n * //=> false\n */\nfunction isEqual$1 (dirtyLeftDate, dirtyRightDate, dirtyOptions) {\n  if (arguments.length < 2) {\n    throw new TypeError('2 arguments required, but only ' + arguments.length + ' present')\n  }\n\n  var dateLeft = toDate(dirtyLeftDate, dirtyOptions);\n  var dateRight = toDate(dirtyRightDate, dirtyOptions);\n  return dateLeft.getTime() === dateRight.getTime()\n}\n\n// This function will be a part of public API when UTC function will be implemented.\n// See issue: https://github.com/date-fns/date-fns/issues/376\nfunction setUTCDay (dirtyDate, dirtyDay, dirtyOptions) {\n  if (arguments.length < 2) {\n    throw new TypeError('2 arguments required, but only ' + arguments.length + ' present')\n  }\n\n  var options = dirtyOptions || {};\n  var locale = options.locale;\n  var localeWeekStartsOn = locale && locale.options && locale.options.weekStartsOn;\n  var defaultWeekStartsOn = localeWeekStartsOn == null ? 0 : toInteger(localeWeekStartsOn);\n  var weekStartsOn = options.weekStartsOn == null ? defaultWeekStartsOn : toInteger(options.weekStartsOn);\n\n  // Test if weekStartsOn is between 0 and 6 _and_ is not NaN\n  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {\n    throw new RangeError('weekStartsOn must be between 0 and 6 inclusively')\n  }\n\n  var date = toDate(dirtyDate, dirtyOptions);\n  var day = toInteger(dirtyDay);\n\n  var currentDay = date.getUTCDay();\n\n  var remainder = day % 7;\n  var dayIndex = (remainder + 7) % 7;\n\n  var diff = (dayIndex < weekStartsOn ? 7 : 0) + day - currentDay;\n\n  date.setUTCDate(date.getUTCDate() + diff);\n  return date\n}\n\n// This function will be a part of public API when UTC function will be implemented.\n// See issue: https://github.com/date-fns/date-fns/issues/376\nfunction setUTCWeek (dirtyDate, dirtyWeek, dirtyOptions) {\n  if (arguments.length < 2) {\n    throw new TypeError('2 arguments required, but only ' + arguments.length + ' present')\n  }\n\n  var date = toDate(dirtyDate, dirtyOptions);\n  var week = toInteger(dirtyWeek);\n  var diff = getUTCWeek(date, dirtyOptions) - week;\n  date.setUTCDate(date.getUTCDate() - diff * 7);\n  return date\n}\n\n// This function will be a part of public API when UTC function will be implemented.\n// See issue: https://github.com/date-fns/date-fns/issues/376\nfunction setUTCISODay (dirtyDate, dirtyDay, dirtyOptions) {\n  if (arguments.length < 2) {\n    throw new TypeError('2 arguments required, but only ' + arguments.length + ' present')\n  }\n\n  var day = toInteger(dirtyDay);\n\n  if (day % 7 === 0) {\n    day = day - 7;\n  }\n\n  var weekStartsOn = 1;\n  var date = toDate(dirtyDate, dirtyOptions);\n  var currentDay = date.getUTCDay();\n\n  var remainder = day % 7;\n  var dayIndex = (remainder + 7) % 7;\n\n  var diff = (dayIndex < weekStartsOn ? 7 : 0) + day - currentDay;\n\n  date.setUTCDate(date.getUTCDate() + diff);\n  return date\n}\n\n// This function will be a part of public API when UTC function will be implemented.\n// See issue: https://github.com/date-fns/date-fns/issues/376\nfunction setUTCISOWeek (dirtyDate, dirtyISOWeek, dirtyOptions) {\n  if (arguments.length < 2) {\n    throw new TypeError('2 arguments required, but only ' + arguments.length + ' present')\n  }\n\n  var date = toDate(dirtyDate, dirtyOptions);\n  var isoWeek = toInteger(dirtyISOWeek);\n  var diff = getUTCISOWeek(date, dirtyOptions) - isoWeek;\n  date.setUTCDate(date.getUTCDate() - diff * 7);\n  return date\n}\n\nvar MILLISECONDS_IN_HOUR$1 = 3600000;\nvar MILLISECONDS_IN_MINUTE$2 = 60000;\nvar MILLISECONDS_IN_SECOND = 1000;\n\nvar numericPatterns = {\n  month: /^(1[0-2]|0?\\d)/, // 0 to 12\n  date: /^(3[0-1]|[0-2]?\\d)/, // 0 to 31\n  dayOfYear: /^(36[0-6]|3[0-5]\\d|[0-2]?\\d?\\d)/, // 0 to 366\n  week: /^(5[0-3]|[0-4]?\\d)/, // 0 to 53\n  hour23h: /^(2[0-3]|[0-1]?\\d)/, // 0 to 23\n  hour24h: /^(2[0-4]|[0-1]?\\d)/, // 0 to 24\n  hour11h: /^(1[0-1]|0?\\d)/, // 0 to 11\n  hour12h: /^(1[0-2]|0?\\d)/, // 0 to 12\n  minute: /^[0-5]?\\d/, // 0 to 59\n  second: /^[0-5]?\\d/, // 0 to 59\n\n  singleDigit: /^\\d/, // 0 to 9\n  twoDigits: /^\\d{1,2}/, // 0 to 99\n  threeDigits: /^\\d{1,3}/, // 0 to 999\n  fourDigits: /^\\d{1,4}/, // 0 to 9999\n\n  anyDigitsSigned: /^-?\\d+/,\n  singleDigitSigned: /^-?\\d/, // 0 to 9, -0 to -9\n  twoDigitsSigned: /^-?\\d{1,2}/, // 0 to 99, -0 to -99\n  threeDigitsSigned: /^-?\\d{1,3}/, // 0 to 999, -0 to -999\n  fourDigitsSigned: /^-?\\d{1,4}/ // 0 to 9999, -0 to -9999\n};\n\nvar timezonePatterns = {\n  basicOptionalMinutes: /^([+-])(\\d{2})(\\d{2})?|Z/,\n  basic: /^([+-])(\\d{2})(\\d{2})|Z/,\n  basicOptionalSeconds: /^([+-])(\\d{2})(\\d{2})((\\d{2}))?|Z/,\n  extended: /^([+-])(\\d{2}):(\\d{2})|Z/,\n  extendedOptionalSeconds: /^([+-])(\\d{2}):(\\d{2})(:(\\d{2}))?|Z/\n};\n\nfunction parseNumericPattern (pattern, string, valueCallback) {\n  var matchResult = string.match(pattern);\n\n  if (!matchResult) {\n    return null\n  }\n\n  var value = parseInt(matchResult[0], 10);\n\n  return {\n    value: valueCallback ? valueCallback(value) : value,\n    rest: string.slice(matchResult[0].length)\n  }\n}\n\nfunction parseTimezonePattern (pattern, string) {\n  var matchResult = string.match(pattern);\n\n  if (!matchResult) {\n    return null\n  }\n\n  // Input is 'Z'\n  if (matchResult[0] === 'Z') {\n    return {\n      value: 0,\n      rest: string.slice(1)\n    }\n  }\n\n  var sign = matchResult[1] === '+' ? 1 : -1;\n  var hours = matchResult[2] ? parseInt(matchResult[2], 10) : 0;\n  var minutes = matchResult[3] ? parseInt(matchResult[3], 10) : 0;\n  var seconds = matchResult[5] ? parseInt(matchResult[5], 10) : 0;\n\n  return {\n    value: sign * (\n      hours * MILLISECONDS_IN_HOUR$1 +\n        minutes * MILLISECONDS_IN_MINUTE$2 +\n        seconds * MILLISECONDS_IN_SECOND\n    ),\n    rest: string.slice(matchResult[0].length)\n  }\n}\n\nfunction parseAnyDigitsSigned (string, valueCallback) {\n  return parseNumericPattern(numericPatterns.anyDigitsSigned, string, valueCallback)\n}\n\nfunction parseNDigits (n, string, valueCallback) {\n  switch (n) {\n    case 1:\n      return parseNumericPattern(numericPatterns.singleDigit, string, valueCallback)\n    case 2:\n      return parseNumericPattern(numericPatterns.twoDigits, string, valueCallback)\n    case 3:\n      return parseNumericPattern(numericPatterns.threeDigits, string, valueCallback)\n    case 4:\n      return parseNumericPattern(numericPatterns.fourDigits, string, valueCallback)\n    default:\n      return parseNumericPattern(new RegExp('^\\\\d{1,' + n + '}'), string, valueCallback)\n  }\n}\n\nfunction parseNDigitsSigned (n, string, valueCallback) {\n  switch (n) {\n    case 1:\n      return parseNumericPattern(numericPatterns.singleDigitSigned, string, valueCallback)\n    case 2:\n      return parseNumericPattern(numericPatterns.twoDigitsSigned, string, valueCallback)\n    case 3:\n      return parseNumericPattern(numericPatterns.threeDigitsSigned, string, valueCallback)\n    case 4:\n      return parseNumericPattern(numericPatterns.fourDigitsSigned, string, valueCallback)\n    default:\n      return parseNumericPattern(new RegExp('^-?\\\\d{1,' + n + '}'), string, valueCallback)\n  }\n}\n\nfunction dayPeriodEnumToHours (enumValue) {\n  switch (enumValue) {\n    case 'morning':\n      return 4\n    case 'evening':\n      return 17\n    case 'pm':\n    case 'noon':\n    case 'afternoon':\n      return 12\n    case 'am':\n    case 'midnight':\n    case 'night':\n    default:\n      return 0\n  }\n}\n\nfunction normalizeTwoDigitYear (twoDigitYear, currentYear) {\n  var isCommonEra = currentYear > 0;\n  // Absolute number of the current year:\n  // 1 -> 1 AC\n  // 0 -> 1 BC\n  // -1 -> 2 BC\n  var absCurrentYear = isCommonEra ? currentYear : 1 - currentYear;\n\n  var result;\n  if (absCurrentYear <= 50) {\n    result = twoDigitYear || 100;\n  } else {\n    var rangeEnd = absCurrentYear + 50;\n    var rangeEndCentury = Math.floor(rangeEnd / 100) * 100;\n    var isPreviousCentury = twoDigitYear >= rangeEnd % 100;\n    result = twoDigitYear + rangeEndCentury - (isPreviousCentury ? 100 : 0);\n  }\n\n  return isCommonEra ? result : 1 - result\n}\n\nvar DAYS_IN_MONTH$1 = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\nvar DAYS_IN_MONTH_LEAP_YEAR$1 = [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n\n// User for validation\nfunction isLeapYearIndex$1 (year) {\n  return year % 400 === 0 || (year % 4 === 0 && year % 100 !== 0)\n}\n\n/*\n * |     | Unit                           |     | Unit                           |\n * |-----|--------------------------------|-----|--------------------------------|\n * |  a  | AM, PM                         |  A* | Milliseconds in day            |\n * |  b  | AM, PM, noon, midnight         |  B  | Flexible day period            |\n * |  c  | Stand-alone local day of week  |  C* | Localized hour w/ day period   |\n * |  d  | Day of month                   |  D  | Day of year                    |\n * |  e  | Local day of week              |  E  | Day of week                    |\n * |  f  |                                |  F* | Day of week in month           |\n * |  g* | Modified Julian day            |  G  | Era                            |\n * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |\n * |  i! | ISO day of week                |  I! | ISO week of year               |\n * |  j* | Localized hour w/ day period   |  J* | Localized hour w/o day period  |\n * |  k  | Hour [1-24]                    |  K  | Hour [0-11]                    |\n * |  l* | (deprecated)                   |  L  | Stand-alone month              |\n * |  m  | Minute                         |  M  | Month                          |\n * |  n  |                                |  N  |                                |\n * |  o! | Ordinal number modifier        |  O* | Timezone (GMT)                 |\n * |  p  |                                |  P  |                                |\n * |  q  | Stand-alone quarter            |  Q  | Quarter                        |\n * |  r* | Related Gregorian year         |  R! | ISO week-numbering year        |\n * |  s  | Second                         |  S  | Fraction of second             |\n * |  t! | Seconds timestamp              |  T! | Milliseconds timestamp         |\n * |  u  | Extended year                  |  U* | Cyclic year                    |\n * |  v* | Timezone (generic non-locat.)  |  V* | Timezone (location)            |\n * |  w  | Local week of year             |  W* | Week of month                  |\n * |  x  | Timezone (ISO-8601 w/o Z)      |  X  | Timezone (ISO-8601)            |\n * |  y  | Year (abs)                     |  Y  | Local week-numbering year      |\n * |  z* | Timezone (specific non-locat.) |  Z* | Timezone (aliases)             |\n *\n * Letters marked by * are not implemented but reserved by Unicode standard.\n *\n * Letters marked by ! are non-standard, but implemented by date-fns:\n * - `o` modifies the previous token to turn it into an ordinal (see `parse` docs)\n * - `i` is ISO day of week. For `i` and `ii` is returns numeric ISO week days,\n *   i.e. 7 for Sunday, 1 for Monday, etc.\n * - `I` is ISO week of year, as opposed to `w` which is local week of year.\n * - `R` is ISO week-numbering year, as opposed to `Y` which is local week-numbering year.\n *   `R` is supposed to be used in conjunction with `I` and `i`\n *   for universal ISO week-numbering date, whereas\n *   `Y` is supposed to be used in conjunction with `w` and `e`\n *   for week-numbering date specific to the locale.\n */\nvar parsers = {\n  // Era\n  G: {\n    priority: 140,\n    parse: function (string, token, match, options) {\n      switch (token) {\n        // AD, BC\n        case 'G':\n        case 'GG':\n        case 'GGG':\n          return match.era(string, {width: 'abbreviated'}) ||\n            match.era(string, {width: 'narrow'})\n        // A, B\n        case 'GGGGG':\n          return match.era(string, {width: 'narrow'})\n        // Anno Domini, Before Christ\n        case 'GGGG':\n        default:\n          return match.era(string, {width: 'wide'}) ||\n            match.era(string, {width: 'abbreviated'}) ||\n            match.era(string, {width: 'narrow'})\n      }\n    },\n    set: function (date, value, options) {\n      // Sets year 10 BC if BC, or 10 AC if AC\n      date.setUTCFullYear(value === 1 ? 10 : -9, 0, 1);\n      date.setUTCHours(0, 0, 0, 0);\n      return date\n    }\n  },\n\n  // Year\n  y: {\n    // From http://www.unicode.org/reports/tr35/tr35-31/tr35-dates.html#Date_Format_Patterns\n    // | Year     |     y | yy |   yyy |  yyyy | yyyyy |\n    // |----------|-------|----|-------|-------|-------|\n    // | AD 1     |     1 | 01 |   001 |  0001 | 00001 |\n    // | AD 12    |    12 | 12 |   012 |  0012 | 00012 |\n    // | AD 123   |   123 | 23 |   123 |  0123 | 00123 |\n    // | AD 1234  |  1234 | 34 |  1234 |  1234 | 01234 |\n    // | AD 12345 | 12345 | 45 | 12345 | 12345 | 12345 |\n\n    priority: 130,\n    parse: function (string, token, match, options) {\n      var valueCallback = function (year) {\n        return {\n          year: year,\n          isTwoDigitYear: token === 'yy'\n        }\n      };\n\n      switch (token) {\n        case 'y':\n          return parseNDigits(4, string, valueCallback)\n        case 'yo':\n          return match.ordinalNumber(string, {unit: 'year', valueCallback: valueCallback})\n        default:\n          return parseNDigits(token.length, string, valueCallback)\n      }\n    },\n    validate: function (date, value, options) {\n      return value.isTwoDigitYear || value.year > 0\n    },\n    set: function (date, value, options) {\n      var currentYear = getUTCWeekYear(date, options);\n\n      if (value.isTwoDigitYear) {\n        var normalizedTwoDigitYear = normalizeTwoDigitYear(value.year, currentYear);\n        date.setUTCFullYear(normalizedTwoDigitYear, 0, 1);\n        date.setUTCHours(0, 0, 0, 0);\n        return date\n      }\n\n      var year = currentYear > 0 ? value.year : 1 - value.year;\n      date.setUTCFullYear(year, 0, 1);\n      date.setUTCHours(0, 0, 0, 0);\n      return date\n    }\n  },\n\n  // Local week-numbering year\n  Y: {\n    priority: 130,\n    parse: function (string, token, match, options) {\n      var valueCallback = function (year) {\n        return {\n          year: year,\n          isTwoDigitYear: token === 'YY'\n        }\n      };\n\n      switch (token) {\n        case 'Y':\n          return parseNDigits(4, string, valueCallback)\n        case 'Yo':\n          return match.ordinalNumber(string, {unit: 'year', valueCallback: valueCallback})\n        default:\n          return parseNDigits(token.length, string, valueCallback)\n      }\n    },\n    validate: function (date, value, options) {\n      return value.isTwoDigitYear || value.year > 0\n    },\n    set: function (date, value, options) {\n      var currentYear = date.getUTCFullYear();\n\n      if (value.isTwoDigitYear) {\n        var normalizedTwoDigitYear = normalizeTwoDigitYear(value.year, currentYear);\n        date.setUTCFullYear(normalizedTwoDigitYear, 0, options.firstWeekContainsDate);\n        date.setUTCHours(0, 0, 0, 0);\n        return startOfUTCWeek(date, options)\n      }\n\n      var year = currentYear > 0 ? value.year : 1 - value.year;\n      date.setUTCFullYear(year, 0, options.firstWeekContainsDate);\n      date.setUTCHours(0, 0, 0, 0);\n      return startOfUTCWeek(date, options)\n    }\n  },\n\n  // ISO week-numbering year\n  R: {\n    priority: 130,\n    parse: function (string, token, match, options) {\n      if (token === 'R') {\n        return parseNDigitsSigned(4, string)\n      }\n\n      return parseNDigitsSigned(token.length, string)\n    },\n    set: function (date, value, options) {\n      var firstWeekOfYear = new Date(0);\n      firstWeekOfYear.setUTCFullYear(value, 0, 4);\n      firstWeekOfYear.setUTCHours(0, 0, 0, 0);\n      return startOfUTCISOWeek(firstWeekOfYear)\n    }\n  },\n\n  // Extended year\n  u: {\n    priority: 130,\n    parse: function (string, token, match, options) {\n      if (token === 'u') {\n        return parseNDigitsSigned(4, string)\n      }\n\n      return parseNDigitsSigned(token.length, string)\n    },\n    set: function (date, value, options) {\n      date.setUTCFullYear(value, 0, 1);\n      date.setUTCHours(0, 0, 0, 0);\n      return date\n    }\n  },\n\n  // Quarter\n  Q: {\n    priority: 120,\n    parse: function (string, token, match, options) {\n      switch (token) {\n        // 1, 2, 3, 4\n        case 'Q':\n        case 'QQ': // 01, 02, 03, 04\n          return parseNDigits(token.length, string)\n        // 1st, 2nd, 3rd, 4th\n        case 'Qo':\n          return match.ordinalNumber(string, {unit: 'quarter'})\n        // Q1, Q2, Q3, Q4\n        case 'QQQ':\n          return match.quarter(string, {width: 'abbreviated', context: 'formatting'}) ||\n            match.quarter(string, {width: 'narrow', context: 'formatting'})\n        // 1, 2, 3, 4 (narrow quarter; could be not numerical)\n        case 'QQQQQ':\n          return match.quarter(string, {width: 'narrow', context: 'formatting'})\n        // 1st quarter, 2nd quarter, ...\n        case 'QQQQ':\n        default:\n          return match.quarter(string, {width: 'wide', context: 'formatting'}) ||\n            match.quarter(string, {width: 'abbreviated', context: 'formatting'}) ||\n            match.quarter(string, {width: 'narrow', context: 'formatting'})\n      }\n    },\n    validate: function (date, value, options) {\n      return value >= 1 && value <= 4\n    },\n    set: function (date, value, options) {\n      date.setUTCMonth((value - 1) * 3, 1);\n      date.setUTCHours(0, 0, 0, 0);\n      return date\n    }\n  },\n\n  // Stand-alone quarter\n  q: {\n    priority: 120,\n    parse: function (string, token, match, options) {\n      switch (token) {\n        // 1, 2, 3, 4\n        case 'q':\n        case 'qq': // 01, 02, 03, 04\n          return parseNDigits(token.length, string)\n        // 1st, 2nd, 3rd, 4th\n        case 'qo':\n          return match.ordinalNumber(string, {unit: 'quarter'})\n        // Q1, Q2, Q3, Q4\n        case 'qqq':\n          return match.quarter(string, {width: 'abbreviated', context: 'standalone'}) ||\n            match.quarter(string, {width: 'narrow', context: 'standalone'})\n        // 1, 2, 3, 4 (narrow quarter; could be not numerical)\n        case 'qqqqq':\n          return match.quarter(string, {width: 'narrow', context: 'standalone'})\n        // 1st quarter, 2nd quarter, ...\n        case 'qqqq':\n        default:\n          return match.quarter(string, {width: 'wide', context: 'standalone'}) ||\n            match.quarter(string, {width: 'abbreviated', context: 'standalone'}) ||\n            match.quarter(string, {width: 'narrow', context: 'standalone'})\n      }\n    },\n    validate: function (date, value, options) {\n      return value >= 1 && value <= 4\n    },\n    set: function (date, value, options) {\n      date.setUTCMonth((value - 1) * 3, 1);\n      date.setUTCHours(0, 0, 0, 0);\n      return date\n    }\n  },\n\n  // Month\n  M: {\n    priority: 110,\n    parse: function (string, token, match, options) {\n      var valueCallback = function (value) {\n        return value - 1\n      };\n\n      switch (token) {\n        // 1, 2, ..., 12\n        case 'M':\n          return parseNumericPattern(numericPatterns.month, string, valueCallback)\n        // 01, 02, ..., 12\n        case 'MM':\n          return parseNDigits(2, string, valueCallback)\n        // 1st, 2nd, ..., 12th\n        case 'Mo':\n          return match.ordinalNumber(string, {unit: 'month', valueCallback: valueCallback})\n        // Jan, Feb, ..., Dec\n        case 'MMM':\n          return match.month(string, {width: 'abbreviated', context: 'formatting'}) ||\n            match.month(string, {width: 'narrow', context: 'formatting'})\n        // J, F, ..., D\n        case 'MMMMM':\n          return match.month(string, {width: 'narrow', context: 'formatting'})\n        // January, February, ..., December\n        case 'MMMM':\n        default:\n          return match.month(string, {width: 'wide', context: 'formatting'}) ||\n            match.month(string, {width: 'abbreviated', context: 'formatting'}) ||\n            match.month(string, {width: 'narrow', context: 'formatting'})\n      }\n    },\n    validate: function (date, value, options) {\n      return value >= 0 && value <= 11\n    },\n    set: function (date, value, options) {\n      date.setUTCMonth(value, 1);\n      date.setUTCHours(0, 0, 0, 0);\n      return date\n    }\n  },\n\n  // Stand-alone month\n  L: {\n    priority: 110,\n    parse: function (string, token, match, options) {\n      var valueCallback = function (value) {\n        return value - 1\n      };\n\n      switch (token) {\n        // 1, 2, ..., 12\n        case 'L':\n          return parseNumericPattern(numericPatterns.month, string, valueCallback)\n        // 01, 02, ..., 12\n        case 'LL':\n          return parseNDigits(2, string, valueCallback)\n        // 1st, 2nd, ..., 12th\n        case 'Lo':\n          return match.ordinalNumber(string, {unit: 'month', valueCallback: valueCallback})\n        // Jan, Feb, ..., Dec\n        case 'LLL':\n          return match.month(string, {width: 'abbreviated', context: 'standalone'}) ||\n            match.month(string, {width: 'narrow', context: 'standalone'})\n        // J, F, ..., D\n        case 'LLLLL':\n          return match.month(string, {width: 'narrow', context: 'standalone'})\n        // January, February, ..., December\n        case 'LLLL':\n        default:\n          return match.month(string, {width: 'wide', context: 'standalone'}) ||\n            match.month(string, {width: 'abbreviated', context: 'standalone'}) ||\n            match.month(string, {width: 'narrow', context: 'standalone'})\n      }\n    },\n    validate: function (date, value, options) {\n      return value >= 0 && value <= 11\n    },\n    set: function (date, value, options) {\n      date.setUTCMonth(value, 1);\n      date.setUTCHours(0, 0, 0, 0);\n      return date\n    }\n  },\n\n  // Local week of year\n  w: {\n    priority: 100,\n    parse: function (string, token, match, options) {\n      switch (token) {\n        case 'w':\n          return parseNumericPattern(numericPatterns.week, string)\n        case 'wo':\n          return match.ordinalNumber(string, {unit: 'week'})\n        default:\n          return parseNDigits(token.length, string)\n      }\n    },\n    validate: function (date, value, options) {\n      return value >= 1 && value <= 53\n    },\n    set: function (date, value, options) {\n      return startOfUTCWeek(setUTCWeek(date, value, options), options)\n    }\n  },\n\n  // ISO week of year\n  I: {\n    priority: 100,\n    parse: function (string, token, match, options) {\n      switch (token) {\n        case 'I':\n          return parseNumericPattern(numericPatterns.week, string)\n        case 'Io':\n          return match.ordinalNumber(string, {unit: 'week'})\n        default:\n          return parseNDigits(token.length, string)\n      }\n    },\n    validate: function (date, value, options) {\n      return value >= 1 && value <= 53\n    },\n    set: function (date, value, options) {\n      return startOfUTCISOWeek(setUTCISOWeek(date, value, options), options)\n    }\n  },\n\n  // Day of the month\n  d: {\n    priority: 90,\n    parse: function (string, token, match, options) {\n      switch (token) {\n        case 'd':\n          return parseNumericPattern(numericPatterns.date, string)\n        case 'do':\n          return match.ordinalNumber(string, {unit: 'date'})\n        default:\n          return parseNDigits(token.length, string)\n      }\n    },\n    validate: function (date, value, options) {\n      var year = date.getUTCFullYear();\n      var isLeapYear = isLeapYearIndex$1(year);\n      var month = date.getUTCMonth();\n      if (isLeapYear) {\n        return value >= 1 && value <= DAYS_IN_MONTH_LEAP_YEAR$1[month]\n      } else {\n        return value >= 1 && value <= DAYS_IN_MONTH$1[month]\n      }\n    },\n    set: function (date, value, options) {\n      date.setUTCDate(value);\n      date.setUTCHours(0, 0, 0, 0);\n      return date\n    }\n  },\n\n  // Day of year\n  D: {\n    priority: 90,\n    parse: function (string, token, match, options) {\n      switch (token) {\n        case 'D':\n        case 'DD':\n          return parseNumericPattern(numericPatterns.dayOfYear, string)\n        case 'Do':\n          return match.ordinalNumber(string, {unit: 'date'})\n        default:\n          return parseNDigits(token.length, string)\n      }\n    },\n    validate: function (date, value, options) {\n      var year = date.getUTCFullYear();\n      var isLeapYear = isLeapYearIndex$1(year);\n      if (isLeapYear) {\n        return value >= 1 && value <= 366\n      } else {\n        return value >= 1 && value <= 365\n      }\n    },\n    set: function (date, value, options) {\n      date.setUTCMonth(0, value);\n      date.setUTCHours(0, 0, 0, 0);\n      return date\n    }\n  },\n\n  // Day of week\n  E: {\n    priority: 90,\n    parse: function (string, token, match, options) {\n      switch (token) {\n        // Tue\n        case 'E':\n        case 'EE':\n        case 'EEE':\n          return match.day(string, {width: 'abbreviated', context: 'formatting'}) ||\n            match.day(string, {width: 'short', context: 'formatting'}) ||\n            match.day(string, {width: 'narrow', context: 'formatting'})\n        // T\n        case 'EEEEE':\n          return match.day(string, {width: 'narrow', context: 'formatting'})\n        // Tu\n        case 'EEEEEE':\n          return match.day(string, {width: 'short', context: 'formatting'}) ||\n          match.day(string, {width: 'narrow', context: 'formatting'})\n        // Tuesday\n        case 'EEEE':\n        default:\n          return match.day(string, {width: 'wide', context: 'formatting'}) ||\n            match.day(string, {width: 'abbreviated', context: 'formatting'}) ||\n            match.day(string, {width: 'short', context: 'formatting'}) ||\n            match.day(string, {width: 'narrow', context: 'formatting'})\n      }\n    },\n    validate: function (date, value, options) {\n      return value >= 0 && value <= 6\n    },\n    set: function (date, value, options) {\n      date = setUTCDay(date, value, options);\n      date.setUTCHours(0, 0, 0, 0);\n      return date\n    }\n  },\n\n  // Local day of week\n  e: {\n    priority: 90,\n    parse: function (string, token, match, options) {\n      var valueCallback = function (value) {\n        var wholeWeekDays = Math.floor((value - 1) / 7) * 7;\n        return (value + options.weekStartsOn + 6) % 7 + wholeWeekDays\n      };\n\n      switch (token) {\n        // 3\n        case 'e':\n        case 'ee': // 03\n          return parseNDigits(token.length, string, valueCallback)\n        // 3rd\n        case 'eo':\n          return match.ordinalNumber(string, {unit: 'day', valueCallback: valueCallback})\n        // Tue\n        case 'eee':\n          return match.day(string, {width: 'abbreviated', context: 'formatting'}) ||\n            match.day(string, {width: 'short', context: 'formatting'}) ||\n            match.day(string, {width: 'narrow', context: 'formatting'})\n        // T\n        case 'eeeee':\n          return match.day(string, {width: 'narrow', context: 'formatting'})\n        // Tu\n        case 'eeeeee':\n          return match.day(string, {width: 'short', context: 'formatting'}) ||\n          match.day(string, {width: 'narrow', context: 'formatting'})\n        // Tuesday\n        case 'eeee':\n        default:\n          return match.day(string, {width: 'wide', context: 'formatting'}) ||\n            match.day(string, {width: 'abbreviated', context: 'formatting'}) ||\n            match.day(string, {width: 'short', context: 'formatting'}) ||\n            match.day(string, {width: 'narrow', context: 'formatting'})\n      }\n    },\n    validate: function (date, value, options) {\n      return value >= 0 && value <= 6\n    },\n    set: function (date, value, options) {\n      date = setUTCDay(date, value, options);\n      date.setUTCHours(0, 0, 0, 0);\n      return date\n    }\n  },\n\n  // Stand-alone local day of week\n  c: {\n    priority: 90,\n    parse: function (string, token, match, options) {\n      var valueCallback = function (value) {\n        var wholeWeekDays = Math.floor((value - 1) / 7) * 7;\n        return (value + options.weekStartsOn + 6) % 7 + wholeWeekDays\n      };\n\n      switch (token) {\n        // 3\n        case 'c':\n        case 'cc': // 03\n          return parseNDigits(token.length, string, valueCallback)\n        // 3rd\n        case 'co':\n          return match.ordinalNumber(string, {unit: 'day', valueCallback: valueCallback})\n        // Tue\n        case 'ccc':\n          return match.day(string, {width: 'abbreviated', context: 'standalone'}) ||\n            match.day(string, {width: 'short', context: 'standalone'}) ||\n            match.day(string, {width: 'narrow', context: 'standalone'})\n        // T\n        case 'ccccc':\n          return match.day(string, {width: 'narrow', context: 'standalone'})\n        // Tu\n        case 'cccccc':\n          return match.day(string, {width: 'short', context: 'standalone'}) ||\n          match.day(string, {width: 'narrow', context: 'standalone'})\n        // Tuesday\n        case 'cccc':\n        default:\n          return match.day(string, {width: 'wide', context: 'standalone'}) ||\n            match.day(string, {width: 'abbreviated', context: 'standalone'}) ||\n            match.day(string, {width: 'short', context: 'standalone'}) ||\n            match.day(string, {width: 'narrow', context: 'standalone'})\n      }\n    },\n    validate: function (date, value, options) {\n      return value >= 0 && value <= 6\n    },\n    set: function (date, value, options) {\n      date = setUTCDay(date, value, options);\n      date.setUTCHours(0, 0, 0, 0);\n      return date\n    }\n  },\n\n  // ISO day of week\n  i: {\n    priority: 90,\n    parse: function (string, token, match, options) {\n      var valueCallback = function (value) {\n        if (value === 0) {\n          return 7\n        }\n        return value\n      };\n\n      switch (token) {\n        // 2\n        case 'i':\n        case 'ii': // 02\n          return parseNDigits(token.length, string)\n        // 2nd\n        case 'io':\n          return match.ordinalNumber(string, {unit: 'day'})\n        // Tue\n        case 'iii':\n          return match.day(string, {width: 'abbreviated', context: 'formatting', valueCallback: valueCallback}) ||\n            match.day(string, {width: 'short', context: 'formatting', valueCallback: valueCallback}) ||\n            match.day(string, {width: 'narrow', context: 'formatting', valueCallback: valueCallback})\n        // T\n        case 'iiiii':\n          return match.day(string, {width: 'narrow', context: 'formatting', valueCallback: valueCallback})\n        // Tu\n        case 'iiiiii':\n          return match.day(string, {width: 'short', context: 'formatting', valueCallback: valueCallback}) ||\n          match.day(string, {width: 'narrow', context: 'formatting', valueCallback: valueCallback})\n        // Tuesday\n        case 'iiii':\n        default:\n          return match.day(string, {width: 'wide', context: 'formatting', valueCallback: valueCallback}) ||\n            match.day(string, {width: 'abbreviated', context: 'formatting', valueCallback: valueCallback}) ||\n            match.day(string, {width: 'short', context: 'formatting', valueCallback: valueCallback}) ||\n            match.day(string, {width: 'narrow', context: 'formatting', valueCallback: valueCallback})\n      }\n    },\n    validate: function (date, value, options) {\n      return value >= 1 && value <= 7\n    },\n    set: function (date, value, options) {\n      date = setUTCISODay(date, value, options);\n      date.setUTCHours(0, 0, 0, 0);\n      return date\n    }\n  },\n\n  // AM or PM\n  a: {\n    priority: 80,\n    parse: function (string, token, match, options) {\n      switch (token) {\n        case 'a':\n        case 'aa':\n        case 'aaa':\n          return match.dayPeriod(string, {width: 'abbreviated', context: 'formatting'}) ||\n            match.dayPeriod(string, {width: 'narrow', context: 'formatting'})\n        case 'aaaaa':\n          return match.dayPeriod(string, {width: 'narrow', context: 'formatting'})\n        case 'aaaa':\n        default:\n          return match.dayPeriod(string, {width: 'wide', context: 'formatting'}) ||\n            match.dayPeriod(string, {width: 'abbreviated', context: 'formatting'}) ||\n            match.dayPeriod(string, {width: 'narrow', context: 'formatting'})\n      }\n    },\n    set: function (date, value, options) {\n      date.setUTCHours(dayPeriodEnumToHours(value), 0, 0, 0);\n      return date\n    }\n  },\n\n  // AM, PM, midnight\n  b: {\n    priority: 80,\n    parse: function (string, token, match, options) {\n      switch (token) {\n        case 'b':\n        case 'bb':\n        case 'bbb':\n          return match.dayPeriod(string, {width: 'abbreviated', context: 'formatting'}) ||\n            match.dayPeriod(string, {width: 'narrow', context: 'formatting'})\n        case 'bbbbb':\n          return match.dayPeriod(string, {width: 'narrow', context: 'formatting'})\n        case 'bbbb':\n        default:\n          return match.dayPeriod(string, {width: 'wide', context: 'formatting'}) ||\n            match.dayPeriod(string, {width: 'abbreviated', context: 'formatting'}) ||\n            match.dayPeriod(string, {width: 'narrow', context: 'formatting'})\n      }\n    },\n    set: function (date, value, options) {\n      date.setUTCHours(dayPeriodEnumToHours(value), 0, 0, 0);\n      return date\n    }\n  },\n\n  // in the morning, in the afternoon, in the evening, at night\n  B: {\n    priority: 80,\n    parse: function (string, token, match, options) {\n      switch (token) {\n        case 'B':\n        case 'BB':\n        case 'BBB':\n          return match.dayPeriod(string, {width: 'abbreviated', context: 'formatting'}) ||\n            match.dayPeriod(string, {width: 'narrow', context: 'formatting'})\n        case 'BBBBB':\n          return match.dayPeriod(string, {width: 'narrow', context: 'formatting'})\n        case 'BBBB':\n        default:\n          return match.dayPeriod(string, {width: 'wide', context: 'formatting'}) ||\n            match.dayPeriod(string, {width: 'abbreviated', context: 'formatting'}) ||\n            match.dayPeriod(string, {width: 'narrow', context: 'formatting'})\n      }\n    },\n    set: function (date, value, options) {\n      date.setUTCHours(dayPeriodEnumToHours(value), 0, 0, 0);\n      return date\n    }\n  },\n\n  // Hour [1-12]\n  h: {\n    priority: 70,\n    parse: function (string, token, match, options) {\n      switch (token) {\n        case 'h':\n          return parseNumericPattern(numericPatterns.hour12h, string)\n        case 'ho':\n          return match.ordinalNumber(string, {unit: 'hour'})\n        default:\n          return parseNDigits(token.length, string)\n      }\n    },\n    validate: function (date, value, options) {\n      return value >= 1 && value <= 12\n    },\n    set: function (date, value, options) {\n      var isPM = date.getUTCHours() >= 12;\n      if (isPM && value < 12) {\n        date.setUTCHours(value + 12, 0, 0, 0);\n      } else if (!isPM && value === 12) {\n        date.setUTCHours(0, 0, 0, 0);\n      } else {\n        date.setUTCHours(value, 0, 0, 0);\n      }\n      return date\n    }\n  },\n\n  // Hour [0-23]\n  H: {\n    priority: 70,\n    parse: function (string, token, match, options) {\n      switch (token) {\n        case 'H':\n          return parseNumericPattern(numericPatterns.hour23h, string)\n        case 'Ho':\n          return match.ordinalNumber(string, {unit: 'hour'})\n        default:\n          return parseNDigits(token.length, string)\n      }\n    },\n    validate: function (date, value, options) {\n      return value >= 0 && value <= 23\n    },\n    set: function (date, value, options) {\n      date.setUTCHours(value, 0, 0, 0);\n      return date\n    }\n  },\n\n  // Hour [0-11]\n  K: {\n    priority: 70,\n    parse: function (string, token, match, options) {\n      switch (token) {\n        case 'K':\n          return parseNumericPattern(numericPatterns.hour11h, string)\n        case 'Ko':\n          return match.ordinalNumber(string, {unit: 'hour'})\n        default:\n          return parseNDigits(token.length, string)\n      }\n    },\n    validate: function (date, value, options) {\n      return value >= 0 && value <= 11\n    },\n    set: function (date, value, options) {\n      var isPM = date.getUTCHours() >= 12;\n      if (isPM && value < 12) {\n        date.setUTCHours(value + 12, 0, 0, 0);\n      } else {\n        date.setUTCHours(value, 0, 0, 0);\n      }\n      return date\n    }\n  },\n\n  // Hour [1-24]\n  k: {\n    priority: 70,\n    parse: function (string, token, match, options) {\n      switch (token) {\n        case 'k':\n          return parseNumericPattern(numericPatterns.hour24h, string)\n        case 'ko':\n          return match.ordinalNumber(string, {unit: 'hour'})\n        default:\n          return parseNDigits(token.length, string)\n      }\n    },\n    validate: function (date, value, options) {\n      return value >= 1 && value <= 24\n    },\n    set: function (date, value, options) {\n      var hours = value <= 24 ? value % 24 : value;\n      date.setUTCHours(hours, 0, 0, 0);\n      return date\n    }\n  },\n\n  // Minute\n  m: {\n    priority: 60,\n    parse: function (string, token, match, options) {\n      switch (token) {\n        case 'm':\n          return parseNumericPattern(numericPatterns.minute, string)\n        case 'mo':\n          return match.ordinalNumber(string, {unit: 'minute'})\n        default:\n          return parseNDigits(token.length, string)\n      }\n    },\n    validate: function (date, value, options) {\n      return value >= 0 && value <= 59\n    },\n    set: function (date, value, options) {\n      date.setUTCMinutes(value, 0, 0);\n      return date\n    }\n  },\n\n  // Second\n  s: {\n    priority: 50,\n    parse: function (string, token, match, options) {\n      switch (token) {\n        case 's':\n          return parseNumericPattern(numericPatterns.second, string)\n        case 'so':\n          return match.ordinalNumber(string, {unit: 'second'})\n        default:\n          return parseNDigits(token.length, string)\n      }\n    },\n    validate: function (date, value, options) {\n      return value >= 0 && value <= 59\n    },\n    set: function (date, value, options) {\n      date.setUTCSeconds(value, 0);\n      return date\n    }\n  },\n\n  // Fraction of second\n  S: {\n    priority: 40,\n    parse: function (string, token, match, options) {\n      var valueCallback = function (value) {\n        return Math.floor(value * Math.pow(10, -token.length + 3))\n      };\n      return parseNDigits(token.length, string, valueCallback)\n    },\n    set: function (date, value, options) {\n      date.setUTCMilliseconds(value);\n      return date\n    }\n  },\n\n  // Timezone (ISO-8601. +00:00 is `'Z'`)\n  X: {\n    priority: 20,\n    parse: function (string, token, match, options) {\n      switch (token) {\n        case 'X':\n          return parseTimezonePattern(timezonePatterns.basicOptionalMinutes, string)\n        case 'XX':\n          return parseTimezonePattern(timezonePatterns.basic, string)\n        case 'XXXX':\n          return parseTimezonePattern(timezonePatterns.basicOptionalSeconds, string)\n        case 'XXXXX':\n          return parseTimezonePattern(timezonePatterns.extendedOptionalSeconds, string)\n        case 'XXX':\n        default:\n          return parseTimezonePattern(timezonePatterns.extended, string)\n      }\n    },\n    set: function (date, value, options) {\n      return new Date(date.getTime() - value)\n    }\n  },\n\n  // Timezone (ISO-8601)\n  x: {\n    priority: 20,\n    parse: function (string, token, match, options) {\n      switch (token) {\n        case 'x':\n          return parseTimezonePattern(timezonePatterns.basicOptionalMinutes, string)\n        case 'xx':\n          return parseTimezonePattern(timezonePatterns.basic, string)\n        case 'xxxx':\n          return parseTimezonePattern(timezonePatterns.basicOptionalSeconds, string)\n        case 'xxxxx':\n          return parseTimezonePattern(timezonePatterns.extendedOptionalSeconds, string)\n        case 'xxx':\n        default:\n          return parseTimezonePattern(timezonePatterns.extended, string)\n      }\n    },\n    set: function (date, value, options) {\n      return new Date(date.getTime() - value)\n    }\n  },\n\n  // Seconds timestamp\n  t: {\n    priority: 10,\n    parse: function (string, token, match, options) {\n      return parseAnyDigitsSigned(string)\n    },\n    set: function (date, value, options) {\n      return new Date(value * 1000)\n    }\n  },\n\n  // Milliseconds timestamp\n  T: {\n    priority: 10,\n    parse: function (string, token, match, options) {\n      return parseAnyDigitsSigned(string)\n    },\n    set: function (date, value, options) {\n      return new Date(value)\n    }\n  }\n};\n\nvar TIMEZONE_UNIT_PRIORITY = 20;\n\n// This RegExp consists of three parts separated by `|`:\n// - [yYQqMLwIdDecihHKkms]o matches any available ordinal number token\n//   (one of the certain letters followed by `o`)\n// - (\\w)\\1* matches any sequences of the same letter\n// - '' matches two quote characters in a row\n// - '(''|[^'])+('|$) matches anything surrounded by two quote characters ('),\n//   except a single quote symbol, which ends the sequence.\n//   Two quote characters do not end the sequence.\n//   If there is no matching single quote\n//   then the sequence will continue until the end of the string.\n// - . matches any single character unmatched by previous parts of the RegExps\nvar formattingTokensRegExp$1 = /[yYQqMLwIdDecihHKkms]o|(\\w)\\1*|''|'(''|[^'])+('|$)|./g;\n\nvar escapedStringRegExp$1 = /^'(.*?)'?$/;\nvar doubleQuoteRegExp$1 = /''/g;\n\nvar notWhitespaceRegExp = /\\S/;\n\n/**\n * @name parse\n * @category Common Helpers\n * @summary Parse the date.\n *\n * @description\n * Return the date parsed from string using the given format string.\n *\n * > ⚠️ Please note that the `format` tokens differ from Moment.js and other libraries.\n * > See: https://git.io/fxCyr\n *\n * The characters in the format string wrapped between two single quotes characters (') are escaped.\n * Two single quotes in a row, whether inside or outside a quoted sequence, represent a 'real' single quote.\n *\n * Format of the format string is based on Unicode Technical Standard #35:\n * https://www.unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table\n * with a few additions (see note 5 below the table).\n *\n * Accepted format string patterns:\n * | Unit                            |Prior| Pattern | Result examples                   | Notes |\n * |---------------------------------|-----|---------|-----------------------------------|-------|\n * | Era                             | 140 | G..GGG  | AD, BC                            |       |\n * |                                 |     | GGGG    | Anno Domini, Before Christ        | 2     |\n * |                                 |     | GGGGG   | A, B                              |       |\n * | Calendar year                   | 130 | y       | 44, 1, 1900, 2017, 9999           | 4     |\n * |                                 |     | yo      | 44th, 1st, 1900th, 9999999th      | 4,5   |\n * |                                 |     | yy      | 44, 01, 00, 17                    | 4     |\n * |                                 |     | yyy     | 044, 001, 123, 999                | 4     |\n * |                                 |     | yyyy    | 0044, 0001, 1900, 2017            | 4     |\n * |                                 |     | yyyyy   | ...                               | 2,4   |\n * | Local week-numbering year       | 130 | Y       | 44, 1, 1900, 2017, 9000           | 4     |\n * |                                 |     | Yo      | 44th, 1st, 1900th, 9999999th      | 4,5   |\n * |                                 |     | YY      | 44, 01, 00, 17                    | 4,6   |\n * |                                 |     | YYY     | 044, 001, 123, 999                | 4     |\n * |                                 |     | YYYY    | 0044, 0001, 1900, 2017            | 4,6   |\n * |                                 |     | YYYYY   | ...                               | 2,4   |\n * | ISO week-numbering year         | 130 | R       | -43, 1, 1900, 2017, 9999, -9999   | 4,5   |\n * |                                 |     | RR      | -43, 01, 00, 17                   | 4,5   |\n * |                                 |     | RRR     | -043, 001, 123, 999, -999         | 4,5   |\n * |                                 |     | RRRR    | -0043, 0001, 2017, 9999, -9999    | 4,5   |\n * |                                 |     | RRRRR   | ...                               | 2,4,5 |\n * | Extended year                   | 130 | u       | -43, 1, 1900, 2017, 9999, -999    | 4     |\n * |                                 |     | uu      | -43, 01, 99, -99                  | 4     |\n * |                                 |     | uuu     | -043, 001, 123, 999, -999         | 4     |\n * |                                 |     | uuuu    | -0043, 0001, 2017, 9999, -9999    | 4     |\n * |                                 |     | uuuuu   | ...                               | 2,4   |\n * | Quarter (formatting)            | 120 | Q       | 1, 2, 3, 4                        |       |\n * |                                 |     | Qo      | 1st, 2nd, 3rd, 4th                | 5     |\n * |                                 |     | QQ      | 01, 02, 03, 04                    |       |\n * |                                 |     | QQQ     | Q1, Q2, Q3, Q4                    |       |\n * |                                 |     | QQQQ    | 1st quarter, 2nd quarter, ...     | 2     |\n * |                                 |     | QQQQQ   | 1, 2, 3, 4                        | 4     |\n * | Quarter (stand-alone)           | 120 | q       | 1, 2, 3, 4                        |       |\n * |                                 |     | qo      | 1st, 2nd, 3rd, 4th                | 5     |\n * |                                 |     | qq      | 01, 02, 03, 04                    |       |\n * |                                 |     | qqq     | Q1, Q2, Q3, Q4                    |       |\n * |                                 |     | qqqq    | 1st quarter, 2nd quarter, ...     | 2     |\n * |                                 |     | qqqqq   | 1, 2, 3, 4                        | 3     |\n * | Month (formatting)              | 110 | M       | 1, 2, ..., 12                     |       |\n * |                                 |     | Mo      | 1st, 2nd, ..., 12th               | 5     |\n * |                                 |     | MM      | 01, 02, ..., 12                   |       |\n * |                                 |     | MMM     | Jan, Feb, ..., Dec                |       |\n * |                                 |     | MMMM    | January, February, ..., December  | 2     |\n * |                                 |     | MMMMM   | J, F, ..., D                      |       |\n * | Month (stand-alone)             | 110 | L       | 1, 2, ..., 12                     |       |\n * |                                 |     | Lo      | 1st, 2nd, ..., 12th               | 5     |\n * |                                 |     | LL      | 01, 02, ..., 12                   |       |\n * |                                 |     | LLL     | Jan, Feb, ..., Dec                |       |\n * |                                 |     | LLLL    | January, February, ..., December  | 2     |\n * |                                 |     | LLLLL   | J, F, ..., D                      |       |\n * | Local week of year              | 100 | w       | 1, 2, ..., 53                     |       |\n * |                                 |     | wo      | 1st, 2nd, ..., 53th               | 5     |\n * |                                 |     | ww      | 01, 02, ..., 53                   |       |\n * | ISO week of year                | 100 | I       | 1, 2, ..., 53                     | 5     |\n * |                                 |     | Io      | 1st, 2nd, ..., 53th               | 5     |\n * |                                 |     | II      | 01, 02, ..., 53                   | 5     |\n * | Day of month                    |  90 | d       | 1, 2, ..., 31                     |       |\n * |                                 |     | do      | 1st, 2nd, ..., 31st               | 5     |\n * |                                 |     | dd      | 01, 02, ..., 31                   |       |\n * | Day of year                     |  90 | D       | 1, 2, ..., 365, 366               | 6     |\n * |                                 |     | Do      | 1st, 2nd, ..., 365th, 366th       | 5     |\n * |                                 |     | DD      | 01, 02, ..., 365, 366             | 6     |\n * |                                 |     | DDD     | 001, 002, ..., 365, 366           |       |\n * |                                 |     | DDDD    | ...                               | 2     |\n * | Day of week (formatting)        |  90 | E..EEE  | Mon, Tue, Wed, ..., Su            |       |\n * |                                 |     | EEEE    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 |     | EEEEE   | M, T, W, T, F, S, S               |       |\n * |                                 |     | EEEEEE  | Mo, Tu, We, Th, Fr, Su, Sa        |       |\n * | ISO day of week (formatting)    |  90 | i       | 1, 2, 3, ..., 7                   | 5     |\n * |                                 |     | io      | 1st, 2nd, ..., 7th                | 5     |\n * |                                 |     | ii      | 01, 02, ..., 07                   | 5     |\n * |                                 |     | iii     | Mon, Tue, Wed, ..., Su            | 5     |\n * |                                 |     | iiii    | Monday, Tuesday, ..., Sunday      | 2,5   |\n * |                                 |     | iiiii   | M, T, W, T, F, S, S               | 5     |\n * |                                 |     | iiiiii  | Mo, Tu, We, Th, Fr, Su, Sa        | 5     |\n * | Local day of week (formatting)  |  90 | e       | 2, 3, 4, ..., 1                   |       |\n * |                                 |     | eo      | 2nd, 3rd, ..., 1st                | 5     |\n * |                                 |     | ee      | 02, 03, ..., 01                   |       |\n * |                                 |     | eee     | Mon, Tue, Wed, ..., Su            |       |\n * |                                 |     | eeee    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 |     | eeeee   | M, T, W, T, F, S, S               |       |\n * |                                 |     | eeeeee  | Mo, Tu, We, Th, Fr, Su, Sa        |       |\n * | Local day of week (stand-alone) |  90 | c       | 2, 3, 4, ..., 1                   |       |\n * |                                 |     | co      | 2nd, 3rd, ..., 1st                | 5     |\n * |                                 |     | cc      | 02, 03, ..., 01                   |       |\n * |                                 |     | ccc     | Mon, Tue, Wed, ..., Su            |       |\n * |                                 |     | cccc    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 |     | ccccc   | M, T, W, T, F, S, S               |       |\n * |                                 |     | cccccc  | Mo, Tu, We, Th, Fr, Su, Sa        |       |\n * | AM, PM                          |  80 | a..aaa  | AM, PM                            |       |\n * |                                 |     | aaaa    | a.m., p.m.                        | 2     |\n * |                                 |     | aaaaa   | a, p                              |       |\n * | AM, PM, noon, midnight          |  80 | b..bbb  | AM, PM, noon, midnight            |       |\n * |                                 |     | bbbb    | a.m., p.m., noon, midnight        | 2     |\n * |                                 |     | bbbbb   | a, p, n, mi                       |       |\n * | Flexible day period             |  80 | B..BBB  | at night, in the morning, ...     |       |\n * |                                 |     | BBBB    | at night, in the morning, ...     | 2     |\n * |                                 |     | BBBBB   | at night, in the morning, ...     |       |\n * | Hour [1-12]                     |  70 | h       | 1, 2, ..., 11, 12                 |       |\n * |                                 |     | ho      | 1st, 2nd, ..., 11th, 12th         | 5     |\n * |                                 |     | hh      | 01, 02, ..., 11, 12               |       |\n * | Hour [0-23]                     |  70 | H       | 0, 1, 2, ..., 23                  |       |\n * |                                 |     | Ho      | 0th, 1st, 2nd, ..., 23rd          | 5     |\n * |                                 |     | HH      | 00, 01, 02, ..., 23               |       |\n * | Hour [0-11]                     |  70 | K       | 1, 2, ..., 11, 0                  |       |\n * |                                 |     | Ko      | 1st, 2nd, ..., 11th, 0th          | 5     |\n * |                                 |     | KK      | 1, 2, ..., 11, 0                  |       |\n * | Hour [1-24]                     |  70 | k       | 24, 1, 2, ..., 23                 |       |\n * |                                 |     | ko      | 24th, 1st, 2nd, ..., 23rd         | 5     |\n * |                                 |     | kk      | 24, 01, 02, ..., 23               |       |\n * | Minute                          |  60 | m       | 0, 1, ..., 59                     |       |\n * |                                 |     | mo      | 0th, 1st, ..., 59th               | 5     |\n * |                                 |     | mm      | 00, 01, ..., 59                   |       |\n * | Second                          |  50 | s       | 0, 1, ..., 59                     |       |\n * |                                 |     | so      | 0th, 1st, ..., 59th               | 5     |\n * |                                 |     | ss      | 00, 01, ..., 59                   |       |\n * | Fraction of second              |  40 | S       | 0, 1, ..., 9                      |       |\n * |                                 |     | SS      | 00, 01, ..., 99                   |       |\n * |                                 |     | SSS     | 000, 0001, ..., 999               |       |\n * |                                 |     | SSSS    | ...                               | 2     |\n * | Timezone (ISO-8601 w/ Z)        |  20 | X       | -08, +0530, Z                     |       |\n * |                                 |     | XX      | -0800, +0530, Z                   |       |\n * |                                 |     | XXX     | -08:00, +05:30, Z                 |       |\n * |                                 |     | XXXX    | -0800, +0530, Z, +123456          | 2     |\n * |                                 |     | XXXXX   | -08:00, +05:30, Z, +12:34:56      |       |\n * | Timezone (ISO-8601 w/o Z)       |  20 | x       | -08, +0530, +00                   |       |\n * |                                 |     | xx      | -0800, +0530, +0000               |       |\n * |                                 |     | xxx     | -08:00, +05:30, +00:00            | 2     |\n * |                                 |     | xxxx    | -0800, +0530, +0000, +123456      |       |\n * |                                 |     | xxxxx   | -08:00, +05:30, +00:00, +12:34:56 |       |\n * | Seconds timestamp               |  10 | t       | 512969520                         |       |\n * |                                 |     | tt      | ...                               | 2     |\n * | Milliseconds timestamp          |  10 | T       | 512969520900                      |       |\n * |                                 |     | TT      | ...                               | 2     |\n * Notes:\n * 1. \"Formatting\" units (e.g. formatting quarter) in the default en-US locale\n *    are the same as \"stand-alone\" units, but are different in some languages.\n *    \"Formatting\" units are declined according to the rules of the language\n *    in the context of a date. \"Stand-alone\" units are always nominative singular.\n *    In `format` function, they will produce different result:\n *\n *    `format(new Date(2017, 10, 6), 'do LLLL', {locale: cs}) //=> '6. listopad'`\n *\n *    `format(new Date(2017, 10, 6), 'do MMMM', {locale: cs}) //=> '6. listopadu'`\n *\n *    `parse` will try to match both formatting and stand-alone units interchangably.\n *\n * 2. Any sequence of the identical letters is a pattern, unless it is escaped by\n *    the single quote characters (see below).\n *    If the sequence is longer than listed in table:\n *    - for numerical units (`yyyyyyyy`) `parse` will try to match a number\n *      as wide as the sequence\n *    - for text units (`MMMMMMMM`) `parse` will try to match the widest variation of the unit.\n *      These variations are marked with \"2\" in the last column of the table.\n *\n * 3. `QQQQQ` and `qqqqq` could be not strictly numerical in some locales.\n *    These tokens represent the shortest form of the quarter.\n *\n * 4. The main difference between `y` and `u` patterns are B.C. years:\n *\n *    | Year | `y` | `u` |\n *    |------|-----|-----|\n *    | AC 1 |   1 |   1 |\n *    | BC 1 |   1 |   0 |\n *    | BC 2 |   2 |  -1 |\n *\n *    Also `yy` will try to guess the century of two digit year by proximity with `baseDate`:\n *\n *    `parse('50', 'yy', new Date(2018, 0, 1)) //=> Sat Jan 01 2050 00:00:00`\n *\n *    `parse('75', 'yy', new Date(2018, 0, 1)) //=> Wed Jan 01 1975 00:00:00`\n *\n *    while `uu` will just assign the year as is:\n *\n *    `parse('50', 'uu', new Date(2018, 0, 1)) //=> Sat Jan 01 0050 00:00:00`\n *\n *    `parse('75', 'uu', new Date(2018, 0, 1)) //=> Tue Jan 01 0075 00:00:00`\n *\n *    The same difference is true for local and ISO week-numbering years (`Y` and `R`),\n *    except local week-numbering years are dependent on `options.weekStartsOn`\n *    and `options.firstWeekContainsDate` (compare [setISOWeekYear]{@link https://date-fns.org/docs/setISOWeekYear}\n *    and [setWeekYear]{@link https://date-fns.org/docs/setWeekYear}).\n *\n * 5. These patterns are not in the Unicode Technical Standard #35:\n *    - `i`: ISO day of week\n *    - `I`: ISO week of year\n *    - `R`: ISO week-numbering year\n *    - `o`: ordinal number modifier\n *\n * 6. These tokens are often confused with others. See: https://git.io/fxCyr\n *\n * Values will be assigned to the date in the descending order of its unit's priority.\n * Units of an equal priority overwrite each other in the order of appearance.\n *\n * If no values of higher priority are parsed (e.g. when parsing string 'January 1st' without a year),\n * the values will be taken from 3rd argument `baseDate` which works as a context of parsing.\n *\n * `baseDate` must be passed for correct work of the function.\n * If you're not sure which `baseDate` to supply, create a new instance of Date:\n * `parse('02/11/2014', 'MM/dd/yyyy', new Date())`\n * In this case parsing will be done in the context of the current date.\n * If `baseDate` is `Invalid Date` or a value not convertible to valid `Date`,\n * then `Invalid Date` will be returned.\n *\n * The result may vary by locale.\n *\n * If `formatString` matches with `dateString` but does not provides tokens, `baseDate` will be returned.\n *\n * If parsing failed, `Invalid Date` will be returned.\n * Invalid Date is a Date, whose time value is NaN.\n * Time value of Date: http://es5.github.io/#x15.9.1.1\n *\n * @param {String} dateString - the string to parse\n * @param {String} formatString - the string of tokens\n * @param {Date|String|Number} baseDate - defines values missing from the parsed dateString\n * @param {Options} [options] - the object with options. See [Options]{@link https://date-fns.org/docs/Options}\n * @param {0|1|2} [options.additionalDigits=2] - passed to `toDate`. See [toDate]{@link https://date-fns.org/docs/toDate}\n * @param {Locale} [options.locale=defaultLocale] - the locale object. See [Locale]{@link https://date-fns.org/docs/Locale}\n * @param {0|1|2|3|4|5|6} [options.weekStartsOn=0] - the index of the first day of the week (0 - Sunday)\n * @param {1|2|3|4|5|6|7} [options.firstWeekContainsDate=1] - the day of January, which is always in the first week of the year\n * @param {Boolean} [options.awareOfUnicodeTokens=false] - if true, allows usage of Unicode tokens causes confusion:\n *   - Some of the day of year tokens (`D`, `DD`) that are confused with the day of month tokens (`d`, `dd`).\n *   - Some of the local week-numbering year tokens (`YY`, `YYYY`) that are confused with the calendar year tokens (`yy`, `yyyy`).\n *   See: https://git.io/fxCyr\n * @returns {Date} the parsed date\n * @throws {TypeError} 3 arguments required\n * @throws {RangeError} `options.additionalDigits` must be 0, 1 or 2\n * @throws {RangeError} `options.weekStartsOn` must be between 0 and 6\n * @throws {RangeError} `options.firstWeekContainsDate` must be between 1 and 7\n * @throws {RangeError} `options.locale` must contain `match` property\n * @throws {RangeError} `options.awareOfUnicodeTokens` must be set to `true` to use `XX` token; see: https://git.io/fxCyr\n *\n * @example\n * // Parse 11 February 2014 from middle-endian format:\n * var result = parse(\n *   '02/11/2014',\n *   'MM/dd/yyyy',\n *   new Date()\n * )\n * //=> Tue Feb 11 2014 00:00:00\n *\n * @example\n * // Parse 28th of February in Esperanto locale in the context of 2010 year:\n * import eo from 'date-fns/locale/eo'\n * var result = parse(\n *   '28-a de februaro',\n *   \"do 'de' MMMM\",\n *   new Date(2010, 0, 1),\n *   {locale: eo}\n * )\n * //=> Sun Feb 28 2010 00:00:00\n */\nfunction parse(\n  dirtyDateString,\n  dirtyFormatString,\n  dirtyBaseDate,\n  dirtyOptions\n) {\n  if (arguments.length < 3) {\n    throw new TypeError(\n      '3 arguments required, but only ' + arguments.length + ' present'\n    )\n  }\n\n  var dateString = String(dirtyDateString);\n  var formatString = String(dirtyFormatString);\n  var options = dirtyOptions || {};\n\n  var locale = options.locale || locale$1;\n\n  if (!locale.match) {\n    throw new RangeError('locale must contain match property')\n  }\n\n  var localeFirstWeekContainsDate =\n    locale.options && locale.options.firstWeekContainsDate;\n  var defaultFirstWeekContainsDate =\n    localeFirstWeekContainsDate == null\n      ? 1\n      : toInteger(localeFirstWeekContainsDate);\n  var firstWeekContainsDate =\n    options.firstWeekContainsDate == null\n      ? defaultFirstWeekContainsDate\n      : toInteger(options.firstWeekContainsDate);\n\n  // Test if weekStartsOn is between 1 and 7 _and_ is not NaN\n  if (!(firstWeekContainsDate >= 1 && firstWeekContainsDate <= 7)) {\n    throw new RangeError(\n      'firstWeekContainsDate must be between 1 and 7 inclusively'\n    )\n  }\n\n  var localeWeekStartsOn = locale.options && locale.options.weekStartsOn;\n  var defaultWeekStartsOn =\n    localeWeekStartsOn == null ? 0 : toInteger(localeWeekStartsOn);\n  var weekStartsOn =\n    options.weekStartsOn == null\n      ? defaultWeekStartsOn\n      : toInteger(options.weekStartsOn);\n\n  // Test if weekStartsOn is between 0 and 6 _and_ is not NaN\n  if (!(weekStartsOn >= 0 && weekStartsOn <= 6)) {\n    throw new RangeError('weekStartsOn must be between 0 and 6 inclusively')\n  }\n\n  if (formatString === '') {\n    if (dateString === '') {\n      return toDate(dirtyBaseDate, options)\n    } else {\n      return new Date(NaN)\n    }\n  }\n\n  var subFnOptions = {\n    firstWeekContainsDate: firstWeekContainsDate,\n    weekStartsOn: weekStartsOn,\n    locale: locale\n  };\n\n  // If timezone isn't specified, it will be set to the system timezone\n  var setters = [\n    {\n      priority: TIMEZONE_UNIT_PRIORITY,\n      set: dateToSystemTimezone,\n      index: 0\n    }\n  ];\n\n  var i;\n\n  var tokens = formatString.match(formattingTokensRegExp$1);\n\n  for (i = 0; i < tokens.length; i++) {\n    var token = tokens[i];\n\n    if (!options.awareOfUnicodeTokens && isProtectedToken(token)) {\n      throwProtectedError(token);\n    }\n\n    var firstCharacter = token[0];\n    var parser = parsers[firstCharacter];\n    if (parser) {\n      var parseResult = parser.parse(\n        dateString,\n        token,\n        locale.match,\n        subFnOptions\n      );\n\n      if (!parseResult) {\n        return new Date(NaN)\n      }\n\n      setters.push({\n        priority: parser.priority,\n        set: parser.set,\n        validate: parser.validate,\n        value: parseResult.value,\n        index: setters.length\n      });\n\n      dateString = parseResult.rest;\n    } else {\n      // Replace two single quote characters with one single quote character\n      if (token === \"''\") {\n        token = \"'\";\n      } else if (firstCharacter === \"'\") {\n        token = cleanEscapedString$1(token);\n      }\n\n      // Cut token from string, or, if string doesn't match the token, return Invalid Date\n      if (dateString.indexOf(token) === 0) {\n        dateString = dateString.slice(token.length);\n      } else {\n        return new Date(NaN)\n      }\n    }\n  }\n\n  // Check if the remaining input contains something other than whitespace\n  if (dateString.length > 0 && notWhitespaceRegExp.test(dateString)) {\n    return new Date(NaN)\n  }\n\n  var uniquePrioritySetters = setters\n    .map(function(setter) {\n      return setter.priority\n    })\n    .sort(function(a, b) {\n      return b - a\n    })\n    .filter(function(priority, index, array) {\n      return array.indexOf(priority) === index\n    })\n    .map(function(priority) {\n      return setters\n        .filter(function(setter) {\n          return setter.priority === priority\n        })\n        .reverse()\n    })\n    .map(function(setterArray) {\n      return setterArray[0]\n    });\n\n  var date = toDate(dirtyBaseDate, options);\n\n  if (isNaN(date)) {\n    return new Date(NaN)\n  }\n\n  // Convert the date in system timezone to the same date in UTC+00:00 timezone.\n  // This ensures that when UTC functions will be implemented, locales will be compatible with them.\n  // See an issue about UTC functions: https://github.com/date-fns/date-fns/issues/37\n  var utcDate = subMilliseconds(date, getTimezoneOffsetInMilliseconds(date));\n\n  for (i = 0; i < uniquePrioritySetters.length; i++) {\n    var setter = uniquePrioritySetters[i];\n\n    if (\n      setter.validate &&\n      !setter.validate(utcDate, setter.value, subFnOptions)\n    ) {\n      return new Date(NaN)\n    }\n\n    utcDate = setter.set(utcDate, setter.value, subFnOptions);\n  }\n\n  return utcDate\n}\n\nfunction dateToSystemTimezone(date) {\n  var convertedDate = new Date(0);\n  convertedDate.setFullYear(\n    date.getUTCFullYear(),\n    date.getUTCMonth(),\n    date.getUTCDate()\n  );\n  convertedDate.setHours(\n    date.getUTCHours(),\n    date.getUTCMinutes(),\n    date.getUTCSeconds(),\n    date.getUTCMilliseconds()\n  );\n  return convertedDate\n}\n\nfunction cleanEscapedString$1(input) {\n  return input.match(escapedStringRegExp$1)[1].replace(doubleQuoteRegExp$1, \"'\")\n}\n\n// This file is generated automatically by `scripts/build/indices.js`. Please, don't change it.\n\n// \n\n/**\n * Custom parse behavior on top of date-fns parse function.\n */\nfunction parseDate$1 (date, format$1) {\n  if (typeof date !== 'string') {\n    return isValid(date) ? date : null;\n  }\n\n  var parsed = parse(date, format$1, new Date());\n\n  // if date is not valid or the formatted output after parsing does not match\n  // the string value passed in (avoids overflows)\n  if (!isValid(parsed) || format(parsed, format$1) !== date) {\n    return null;\n  }\n\n  return parsed;\n}\n\nvar afterValidator = function (value, ref) {\n  if ( ref === void 0 ) ref = {};\n  var targetValue = ref.targetValue;\n  var inclusion = ref.inclusion; if ( inclusion === void 0 ) inclusion = false;\n  var format = ref.format;\n\n  if (typeof format === 'undefined') {\n    format = inclusion;\n    inclusion = false;\n  }\n\n  value = parseDate$1(value, format);\n  targetValue = parseDate$1(targetValue, format);\n\n  // if either is not valid.\n  if (!value || !targetValue) {\n    return false;\n  }\n\n  return isAfter(value, targetValue) || (inclusion && isEqual$1(value, targetValue));\n};\n\nvar options = {\n  hasTarget: true,\n  isDate: true\n};\n\n// required to convert from a list of array values to an object.\nvar paramNames = ['targetValue', 'inclusion', 'format'];\n\nvar after = {\n  validate: afterValidator,\n  options: options,\n  paramNames: paramNames\n};\n\n/**\n * Some Alpha Regex helpers.\n * https://github.com/chriso/validator.js/blob/master/src/lib/alpha.js\n */\n\nvar alpha = {\n  en: /^[A-Z]*$/i,\n  cs: /^[A-ZÁČĎÉĚÍŇÓŘŠŤÚŮÝŽ]*$/i,\n  da: /^[A-ZÆØÅ]*$/i,\n  de: /^[A-ZÄÖÜß]*$/i,\n  es: /^[A-ZÁÉÍÑÓÚÜ]*$/i,\n  fr: /^[A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ]*$/i,\n  it: /^[A-Z\\xC0-\\xFF]*$/i,\n  lt: /^[A-ZĄČĘĖĮŠŲŪŽ]*$/i,\n  nl: /^[A-ZÉËÏÓÖÜ]*$/i,\n  hu: /^[A-ZÁÉÍÓÖŐÚÜŰ]*$/i,\n  pl: /^[A-ZĄĆĘŚŁŃÓŻŹ]*$/i,\n  pt: /^[A-ZÃÁÀÂÇÉÊÍÕÓÔÚÜ]*$/i,\n  ru: /^[А-ЯЁ]*$/i,\n  sk: /^[A-ZÁÄČĎÉÍĹĽŇÓŔŠŤÚÝŽ]*$/i,\n  sr: /^[A-ZČĆŽŠĐ]*$/i,\n  sv: /^[A-ZÅÄÖ]*$/i,\n  tr: /^[A-ZÇĞİıÖŞÜ]*$/i,\n  uk: /^[А-ЩЬЮЯЄІЇҐ]*$/i,\n  ar: /^[ءآأؤإئابةتثجحخدذرزسشصضطظعغفقكلمنهوىيًٌٍَُِّْٰ]*$/,\n  az: /^[A-ZÇƏĞİıÖŞÜ]*$/i\n};\n\nvar alphaSpaces = {\n  en: /^[A-Z\\s]*$/i,\n  cs: /^[A-ZÁČĎÉĚÍŇÓŘŠŤÚŮÝŽ\\s]*$/i,\n  da: /^[A-ZÆØÅ\\s]*$/i,\n  de: /^[A-ZÄÖÜß\\s]*$/i,\n  es: /^[A-ZÁÉÍÑÓÚÜ\\s]*$/i,\n  fr: /^[A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ\\s]*$/i,\n  it: /^[A-Z\\xC0-\\xFF\\s]*$/i,\n  lt: /^[A-ZĄČĘĖĮŠŲŪŽ\\s]*$/i,\n  nl: /^[A-ZÉËÏÓÖÜ\\s]*$/i,\n  hu: /^[A-ZÁÉÍÓÖŐÚÜŰ\\s]*$/i,\n  pl: /^[A-ZĄĆĘŚŁŃÓŻŹ\\s]*$/i,\n  pt: /^[A-ZÃÁÀÂÇÉÊÍÕÓÔÚÜ\\s]*$/i,\n  ru: /^[А-ЯЁ\\s]*$/i,\n  sk: /^[A-ZÁÄČĎÉÍĹĽŇÓŔŠŤÚÝŽ\\s]*$/i,\n  sr: /^[A-ZČĆŽŠĐ\\s]*$/i,\n  sv: /^[A-ZÅÄÖ\\s]*$/i,\n  tr: /^[A-ZÇĞİıÖŞÜ\\s]*$/i,\n  uk: /^[А-ЩЬЮЯЄІЇҐ\\s]*$/i,\n  ar: /^[ءآأؤإئابةتثجحخدذرزسشصضطظعغفقكلمنهوىيًٌٍَُِّْٰ\\s]*$/,\n  az: /^[A-ZÇƏĞİıÖŞÜ\\s]*$/i\n};\n\nvar alphanumeric = {\n  en: /^[0-9A-Z]*$/i,\n  cs: /^[0-9A-ZÁČĎÉĚÍŇÓŘŠŤÚŮÝŽ]*$/i,\n  da: /^[0-9A-ZÆØÅ]$/i,\n  de: /^[0-9A-ZÄÖÜß]*$/i,\n  es: /^[0-9A-ZÁÉÍÑÓÚÜ]*$/i,\n  fr: /^[0-9A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ]*$/i,\n  it: /^[0-9A-Z\\xC0-\\xFF]*$/i,\n  lt: /^[0-9A-ZĄČĘĖĮŠŲŪŽ]*$/i,\n  hu: /^[0-9A-ZÁÉÍÓÖŐÚÜŰ]*$/i,\n  nl: /^[0-9A-ZÉËÏÓÖÜ]*$/i,\n  pl: /^[0-9A-ZĄĆĘŚŁŃÓŻŹ]*$/i,\n  pt: /^[0-9A-ZÃÁÀÂÇÉÊÍÕÓÔÚÜ]*$/i,\n  ru: /^[0-9А-ЯЁ]*$/i,\n  sk: /^[0-9A-ZÁÄČĎÉÍĹĽŇÓŔŠŤÚÝŽ]*$/i,\n  sr: /^[0-9A-ZČĆŽŠĐ]*$/i,\n  sv: /^[0-9A-ZÅÄÖ]*$/i,\n  tr: /^[0-9A-ZÇĞİıÖŞÜ]*$/i,\n  uk: /^[0-9А-ЩЬЮЯЄІЇҐ]*$/i,\n  ar: /^[٠١٢٣٤٥٦٧٨٩0-9ءآأؤإئابةتثجحخدذرزسشصضطظعغفقكلمنهوىيًٌٍَُِّْٰ]*$/,\n  az: /^[0-9A-ZÇƏĞİıÖŞÜ]*$/i\n};\n\nvar alphaDash = {\n  en: /^[0-9A-Z_-]*$/i,\n  cs: /^[0-9A-ZÁČĎÉĚÍŇÓŘŠŤÚŮÝŽ_-]*$/i,\n  da: /^[0-9A-ZÆØÅ_-]*$/i,\n  de: /^[0-9A-ZÄÖÜß_-]*$/i,\n  es: /^[0-9A-ZÁÉÍÑÓÚÜ_-]*$/i,\n  fr: /^[0-9A-ZÀÂÆÇÉÈÊËÏÎÔŒÙÛÜŸ_-]*$/i,\n  it: /^[0-9A-Z\\xC0-\\xFF_-]*$/i,\n  lt: /^[0-9A-ZĄČĘĖĮŠŲŪŽ_-]*$/i,\n  nl: /^[0-9A-ZÉËÏÓÖÜ_-]*$/i,\n  hu: /^[0-9A-ZÁÉÍÓÖŐÚÜŰ_-]*$/i,\n  pl: /^[0-9A-ZĄĆĘŚŁŃÓŻŹ_-]*$/i,\n  pt: /^[0-9A-ZÃÁÀÂÇÉÊÍÕÓÔÚÜ_-]*$/i,\n  ru: /^[0-9А-ЯЁ_-]*$/i,\n  sk: /^[0-9A-ZÁÄČĎÉÍĹĽŇÓŔŠŤÚÝŽ_-]*$/i,\n  sr: /^[0-9A-ZČĆŽŠĐ_-]*$/i,\n  sv: /^[0-9A-ZÅÄÖ_-]*$/i,\n  tr: /^[0-9A-ZÇĞİıÖŞÜ_-]*$/i,\n  uk: /^[0-9А-ЩЬЮЯЄІЇҐ_-]*$/i,\n  ar: /^[٠١٢٣٤٥٦٧٨٩0-9ءآأؤإئابةتثجحخدذرزسشصضطظعغفقكلمنهوىيًٌٍَُِّْٰ_-]*$/,\n  az: /^[0-9A-ZÇƏĞİıÖŞÜ_-]*$/i\n};\n\nvar validate = function (value, ref) {\n  if ( ref === void 0 ) ref = {};\n  var locale = ref.locale;\n\n  if (Array.isArray(value)) {\n    return value.every(function (val) { return validate(val, [locale]); });\n  }\n\n  // Match at least one locale.\n  if (! locale) {\n    return Object.keys(alpha).some(function (loc) { return alpha[loc].test(value); });\n  }\n\n  return (alpha[locale] || alpha.en).test(value);\n};\n\nvar paramNames$1 = ['locale'];\n\nvar alpha$1 = {\n  validate: validate,\n  paramNames: paramNames$1\n};\n\nvar validate$1 = function (value, ref) {\n  if ( ref === void 0 ) ref = {};\n  var locale = ref.locale;\n\n  if (Array.isArray(value)) {\n    return value.every(function (val) { return validate$1(val, [locale]); });\n  }\n\n  // Match at least one locale.\n  if (! locale) {\n    return Object.keys(alphaDash).some(function (loc) { return alphaDash[loc].test(value); });\n  }\n\n  return (alphaDash[locale] || alphaDash.en).test(value);\n};\n\nvar paramNames$2 = ['locale'];\n\nvar alpha_dash = {\n  validate: validate$1,\n  paramNames: paramNames$2\n};\n\nvar validate$2 = function (value, ref) {\n  if ( ref === void 0 ) ref = {};\n  var locale = ref.locale;\n\n  if (Array.isArray(value)) {\n    return value.every(function (val) { return validate$2(val, [locale]); });\n  }\n\n  // Match at least one locale.\n  if (! locale) {\n    return Object.keys(alphanumeric).some(function (loc) { return alphanumeric[loc].test(value); });\n  }\n\n  return (alphanumeric[locale] || alphanumeric.en).test(value);\n};\n\nvar paramNames$3 = ['locale'];\n\nvar alpha_num = {\n  validate: validate$2,\n  paramNames: paramNames$3\n};\n\nvar validate$3 = function (value, ref) {\n  if ( ref === void 0 ) ref = {};\n  var locale = ref.locale;\n\n  if (Array.isArray(value)) {\n    return value.every(function (val) { return validate$3(val, [locale]); });\n  }\n\n  // Match at least one locale.\n  if (! locale) {\n    return Object.keys(alphaSpaces).some(function (loc) { return alphaSpaces[loc].test(value); });\n  }\n\n  return (alphaSpaces[locale] || alphaSpaces.en).test(value);\n};\n\nvar paramNames$4 = ['locale'];\n\nvar alpha_spaces = {\n  validate: validate$3,\n  paramNames: paramNames$4\n};\n\nvar validate$4 = function (value, ref) {\n  if ( ref === void 0 ) ref = {};\n  var targetValue = ref.targetValue;\n  var inclusion = ref.inclusion; if ( inclusion === void 0 ) inclusion = false;\n  var format = ref.format;\n\n  if (typeof format === 'undefined') {\n    format = inclusion;\n    inclusion = false;\n  }\n\n  value = parseDate$1(value, format);\n  targetValue = parseDate$1(targetValue, format);\n\n  // if either is not valid.\n  if (!value || !targetValue) {\n    return false;\n  }\n\n  return isBefore(value, targetValue) || (inclusion && isEqual$1(value, targetValue));\n};\n\nvar options$1 = {\n  hasTarget: true,\n  isDate: true\n};\n\nvar paramNames$5 = ['targetValue', 'inclusion', 'format'];\n\nvar before = {\n  validate: validate$4,\n  options: options$1,\n  paramNames: paramNames$5\n};\n\nvar validate$5 = function (value, ref) {\n  if ( ref === void 0 ) ref = {};\n  var min = ref.min;\n  var max = ref.max;\n\n  if (Array.isArray(value)) {\n    return value.every(function (val) { return validate$5(val, { min: min, max: max }); });\n  }\n\n  return Number(min) <= value && Number(max) >= value;\n};\n\nvar paramNames$6 = ['min', 'max'];\n\nvar between = {\n  validate: validate$5,\n  paramNames: paramNames$6\n};\n\nvar validate$6 = function (value, ref) {\n  var targetValue = ref.targetValue;\n\n  return String(value) === String(targetValue);\n};\nvar options$2 = {\n  hasTarget: true\n};\n\nvar paramNames$7 = ['targetValue'];\n\nvar confirmed = {\n  validate: validate$6,\n  options: options$2,\n  paramNames: paramNames$7\n};\n\nfunction unwrapExports (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x.default : x;\n}\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar assertString_1 = createCommonjsModule(function (module, exports) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.default = assertString;\nfunction assertString(input) {\n  var isString = typeof input === 'string' || input instanceof String;\n\n  if (!isString) {\n    var invalidType = void 0;\n    if (input === null) {\n      invalidType = 'null';\n    } else {\n      invalidType = typeof input === 'undefined' ? 'undefined' : _typeof(input);\n      if (invalidType === 'object' && input.constructor && input.constructor.hasOwnProperty('name')) {\n        invalidType = input.constructor.name;\n      } else {\n        invalidType = 'a ' + invalidType;\n      }\n    }\n    throw new TypeError('Expected string but received ' + invalidType + '.');\n  }\n}\nmodule.exports = exports['default'];\n});\n\nunwrapExports(assertString_1);\n\nvar isCreditCard_1 = createCommonjsModule(function (module, exports) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isCreditCard;\n\n\n\nvar _assertString2 = _interopRequireDefault(assertString_1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable max-len */\nvar creditCard = /^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|(222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\\d{3})\\d{11}|6[27][0-9]{14})$/;\n/* eslint-enable max-len */\n\nfunction isCreditCard(str) {\n  (0, _assertString2.default)(str);\n  var sanitized = str.replace(/[- ]+/g, '');\n  if (!creditCard.test(sanitized)) {\n    return false;\n  }\n  var sum = 0;\n  var digit = void 0;\n  var tmpNum = void 0;\n  var shouldDouble = void 0;\n  for (var i = sanitized.length - 1; i >= 0; i--) {\n    digit = sanitized.substring(i, i + 1);\n    tmpNum = parseInt(digit, 10);\n    if (shouldDouble) {\n      tmpNum *= 2;\n      if (tmpNum >= 10) {\n        sum += tmpNum % 10 + 1;\n      } else {\n        sum += tmpNum;\n      }\n    } else {\n      sum += tmpNum;\n    }\n    shouldDouble = !shouldDouble;\n  }\n  return !!(sum % 10 === 0 ? sanitized : false);\n}\nmodule.exports = exports['default'];\n});\n\nvar isCreditCard = unwrapExports(isCreditCard_1);\n\nvar validate$7 = function (value) { return isCreditCard(String(value)); };\n\nvar credit_card = {\n  validate: validate$7\n};\n\nvar validate$8 = function (value, ref) {\n  if ( ref === void 0 ) ref = {};\n  var min = ref.min;\n  var max = ref.max;\n  var inclusivity = ref.inclusivity; if ( inclusivity === void 0 ) inclusivity = '()';\n  var format = ref.format;\n\n  if (typeof format === 'undefined') {\n    format = inclusivity;\n    inclusivity = '()';\n  }\n\n  var minDate = parseDate$1(String(min), format);\n  var maxDate = parseDate$1(String(max), format);\n  var dateVal = parseDate$1(String(value), format);\n\n  if (!minDate || !maxDate || !dateVal) {\n    return false;\n  }\n\n  if (inclusivity === '()') {\n    return isAfter(dateVal, minDate) && isBefore(dateVal, maxDate);\n  }\n\n  if (inclusivity === '(]') {\n    return isAfter(dateVal, minDate) && (isEqual$1(dateVal, maxDate) || isBefore(dateVal, maxDate));\n  }\n\n  if (inclusivity === '[)') {\n    return isBefore(dateVal, maxDate) && (isEqual$1(dateVal, minDate) || isAfter(dateVal, minDate));\n  }\n\n  return isEqual$1(dateVal, maxDate) || isEqual$1(dateVal, minDate) ||\n    (isBefore(dateVal, maxDate) && isAfter(dateVal, minDate));\n};\n\nvar options$3 = {\n  isDate: true\n};\n\nvar paramNames$8 = ['min', 'max', 'inclusivity', 'format'];\n\nvar date_between = {\n  validate: validate$8,\n  options: options$3,\n  paramNames: paramNames$8\n};\n\nvar validate$9 = function (value, ref) {\n  var format = ref.format;\n\n  return !!parseDate$1(value, format);\n};\n\nvar options$4 = {\n  isDate: true\n};\n\nvar paramNames$9 = ['format'];\n\nvar date_format = {\n  validate: validate$9,\n  options: options$4,\n  paramNames: paramNames$9\n};\n\nvar validate$a = function (value, ref) {\n  if ( ref === void 0 ) ref = {};\n  var decimals = ref.decimals; if ( decimals === void 0 ) decimals = '*';\n  var separator = ref.separator; if ( separator === void 0 ) separator = '.';\n\n  if (isNullOrUndefined(value) || value === '') {\n    return false;\n  }\n\n  if (Array.isArray(value)) {\n    return value.every(function (val) { return validate$a(val, { decimals: decimals, separator: separator }); });\n  }\n\n  // if is 0.\n  if (Number(decimals) === 0) {\n    return /^-?\\d*$/.test(value);\n  }\n\n  var regexPart = decimals === '*' ? '+' : (\"{1,\" + decimals + \"}\");\n  var regex = new RegExp((\"^[-+]?\\\\d*(\\\\\" + separator + \"\\\\d\" + regexPart + \")?([eE]{1}[-]?\\\\d+)?$\"));\n\n  if (! regex.test(value)) {\n    return false;\n  }\n\n  var parsedValue = parseFloat(value);\n\n  // eslint-disable-next-line\n  return parsedValue === parsedValue;\n};\n\nvar paramNames$a = ['decimals', 'separator'];\n\nvar decimal = {\n  validate: validate$a,\n  paramNames: paramNames$a\n};\n\nvar validate$b = function (value, ref) {\n  var length = ref[0];\n\n  if (Array.isArray(value)) {\n    return value.every(function (val) { return validate$b(val, [length]); });\n  }\n  var strVal = String(value);\n\n  return /^[0-9]*$/.test(strVal) && strVal.length === Number(length);\n};\n\nvar digits = {\n  validate: validate$b\n};\n\nvar imageRegex = /\\.(jpg|svg|jpeg|png|bmp|gif)$/i;\n\nvar validateImage = function (file, width, height) {\n  var URL = window.URL || window.webkitURL;\n  return new Promise(function (resolve) {\n    var image = new Image();\n    image.onerror = function () { return resolve({ valid: false }); };\n    image.onload = function () { return resolve({\n      valid: image.width === Number(width) && image.height === Number(height)\n    }); };\n\n    image.src = URL.createObjectURL(file);\n  });\n};\n\nvar validate$c = function (files, ref) {\n  var width = ref[0];\n  var height = ref[1];\n\n  var images = ensureArray(files).filter(function (file) { return imageRegex.test(file.name); });\n  if (images.length === 0) {\n    return false;\n  }\n  return Promise.all(images.map(function (image) { return validateImage(image, width, height); }));\n};\n\nvar dimensions = {\n  validate: validate$c\n};\n\nvar merge_1 = createCommonjsModule(function (module, exports) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = merge;\nfunction merge() {\n  var obj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var defaults = arguments[1];\n\n  for (var key in defaults) {\n    if (typeof obj[key] === 'undefined') {\n      obj[key] = defaults[key];\n    }\n  }\n  return obj;\n}\nmodule.exports = exports['default'];\n});\n\nunwrapExports(merge_1);\n\nvar isByteLength_1 = createCommonjsModule(function (module, exports) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.default = isByteLength;\n\n\n\nvar _assertString2 = _interopRequireDefault(assertString_1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable prefer-rest-params */\nfunction isByteLength(str, options) {\n  (0, _assertString2.default)(str);\n  var min = void 0;\n  var max = void 0;\n  if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object') {\n    min = options.min || 0;\n    max = options.max;\n  } else {\n    // backwards compatibility: isByteLength(str, min [, max])\n    min = arguments[1];\n    max = arguments[2];\n  }\n  var len = encodeURI(str).split(/%..|./).length - 1;\n  return len >= min && (typeof max === 'undefined' || len <= max);\n}\nmodule.exports = exports['default'];\n});\n\nunwrapExports(isByteLength_1);\n\nvar isFQDN_1 = createCommonjsModule(function (module, exports) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isFQDN;\n\n\n\nvar _assertString2 = _interopRequireDefault(assertString_1);\n\n\n\nvar _merge2 = _interopRequireDefault(merge_1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar default_fqdn_options = {\n  require_tld: true,\n  allow_underscores: false,\n  allow_trailing_dot: false\n};\n\nfunction isFQDN(str, options) {\n  (0, _assertString2.default)(str);\n  options = (0, _merge2.default)(options, default_fqdn_options);\n\n  /* Remove the optional trailing dot before checking validity */\n  if (options.allow_trailing_dot && str[str.length - 1] === '.') {\n    str = str.substring(0, str.length - 1);\n  }\n  var parts = str.split('.');\n  for (var i = 0; i < parts.length; i++) {\n    if (parts[i].length > 63) {\n      return false;\n    }\n  }\n  if (options.require_tld) {\n    var tld = parts.pop();\n    if (!parts.length || !/^([a-z\\u00a1-\\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(tld)) {\n      return false;\n    }\n    // disallow spaces\n    if (/[\\s\\u2002-\\u200B\\u202F\\u205F\\u3000\\uFEFF\\uDB40\\uDC20]/.test(tld)) {\n      return false;\n    }\n  }\n  for (var part, _i = 0; _i < parts.length; _i++) {\n    part = parts[_i];\n    if (options.allow_underscores) {\n      part = part.replace(/_/g, '');\n    }\n    if (!/^[a-z\\u00a1-\\uffff0-9-]+$/i.test(part)) {\n      return false;\n    }\n    // disallow full-width chars\n    if (/[\\uff01-\\uff5e]/.test(part)) {\n      return false;\n    }\n    if (part[0] === '-' || part[part.length - 1] === '-') {\n      return false;\n    }\n  }\n  return true;\n}\nmodule.exports = exports['default'];\n});\n\nvar isFQDN = unwrapExports(isFQDN_1);\n\nvar isIP_1 = createCommonjsModule(function (module, exports) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isIP;\n\n\n\nvar _assertString2 = _interopRequireDefault(assertString_1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar ipv4Maybe = /^(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})$/;\nvar ipv6Block = /^[0-9A-F]{1,4}$/i;\n\nfunction isIP(str) {\n  var version = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n  (0, _assertString2.default)(str);\n  version = String(version);\n  if (!version) {\n    return isIP(str, 4) || isIP(str, 6);\n  } else if (version === '4') {\n    if (!ipv4Maybe.test(str)) {\n      return false;\n    }\n    var parts = str.split('.').sort(function (a, b) {\n      return a - b;\n    });\n    return parts[3] <= 255;\n  } else if (version === '6') {\n    var blocks = str.split(':');\n    var foundOmissionBlock = false; // marker to indicate ::\n\n    // At least some OS accept the last 32 bits of an IPv6 address\n    // (i.e. 2 of the blocks) in IPv4 notation, and RFC 3493 says\n    // that '::ffff:a.b.c.d' is valid for IPv4-mapped IPv6 addresses,\n    // and '::a.b.c.d' is deprecated, but also valid.\n    var foundIPv4TransitionBlock = isIP(blocks[blocks.length - 1], 4);\n    var expectedNumberOfBlocks = foundIPv4TransitionBlock ? 7 : 8;\n\n    if (blocks.length > expectedNumberOfBlocks) {\n      return false;\n    }\n    // initial or final ::\n    if (str === '::') {\n      return true;\n    } else if (str.substr(0, 2) === '::') {\n      blocks.shift();\n      blocks.shift();\n      foundOmissionBlock = true;\n    } else if (str.substr(str.length - 2) === '::') {\n      blocks.pop();\n      blocks.pop();\n      foundOmissionBlock = true;\n    }\n\n    for (var i = 0; i < blocks.length; ++i) {\n      // test for a :: which can not be at the string start/end\n      // since those cases have been handled above\n      if (blocks[i] === '' && i > 0 && i < blocks.length - 1) {\n        if (foundOmissionBlock) {\n          return false; // multiple :: in address\n        }\n        foundOmissionBlock = true;\n      } else if (foundIPv4TransitionBlock && i === blocks.length - 1) ; else if (!ipv6Block.test(blocks[i])) {\n        return false;\n      }\n    }\n    if (foundOmissionBlock) {\n      return blocks.length >= 1;\n    }\n    return blocks.length === expectedNumberOfBlocks;\n  }\n  return false;\n}\nmodule.exports = exports['default'];\n});\n\nvar isIP = unwrapExports(isIP_1);\n\nvar isEmail_1 = createCommonjsModule(function (module, exports) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isEmail;\n\n\n\nvar _assertString2 = _interopRequireDefault(assertString_1);\n\n\n\nvar _merge2 = _interopRequireDefault(merge_1);\n\n\n\nvar _isByteLength2 = _interopRequireDefault(isByteLength_1);\n\n\n\nvar _isFQDN2 = _interopRequireDefault(isFQDN_1);\n\n\n\nvar _isIP2 = _interopRequireDefault(isIP_1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar default_email_options = {\n  allow_display_name: false,\n  require_display_name: false,\n  allow_utf8_local_part: true,\n  require_tld: true\n};\n\n/* eslint-disable max-len */\n/* eslint-disable no-control-regex */\nvar displayName = /^[a-z\\d!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~\\.\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+[a-z\\d!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~\\,\\.\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\s]*<(.+)>$/i;\nvar emailUserPart = /^[a-z\\d!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]+$/i;\nvar gmailUserPart = /^[a-z\\d]+$/;\nvar quotedEmailUser = /^([\\s\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f\\x21\\x23-\\x5b\\x5d-\\x7e]|(\\\\[\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]))*$/i;\nvar emailUserUtf8Part = /^[a-z\\d!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+$/i;\nvar quotedEmailUserUtf8 = /^([\\s\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f\\x21\\x23-\\x5b\\x5d-\\x7e\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]|(\\\\[\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))*$/i;\n/* eslint-enable max-len */\n/* eslint-enable no-control-regex */\n\nfunction isEmail(str, options) {\n  (0, _assertString2.default)(str);\n  options = (0, _merge2.default)(options, default_email_options);\n\n  if (options.require_display_name || options.allow_display_name) {\n    var display_email = str.match(displayName);\n    if (display_email) {\n      str = display_email[1];\n    } else if (options.require_display_name) {\n      return false;\n    }\n  }\n\n  var parts = str.split('@');\n  var domain = parts.pop();\n  var user = parts.join('@');\n\n  var lower_domain = domain.toLowerCase();\n\n  if (options.domain_specific_validation && (lower_domain === 'gmail.com' || lower_domain === 'googlemail.com')) {\n    /*\n      Previously we removed dots for gmail addresses before validating.\n      This was removed because it allows `multiple..dots@gmail.com`\n      to be reported as valid, but it is not.\n      Gmail only normalizes single dots, removing them from here is pointless,\n      should be done in normalizeEmail\n    */\n    user = user.toLowerCase();\n\n    // Removing sub-address from username before gmail validation\n    var username = user.split('+')[0];\n\n    // Dots are not included in gmail length restriction\n    if (!(0, _isByteLength2.default)(username.replace('.', ''), { min: 6, max: 30 })) {\n      return false;\n    }\n\n    var _user_parts = username.split('.');\n    for (var i = 0; i < _user_parts.length; i++) {\n      if (!gmailUserPart.test(_user_parts[i])) {\n        return false;\n      }\n    }\n  }\n\n  if (!(0, _isByteLength2.default)(user, { max: 64 }) || !(0, _isByteLength2.default)(domain, { max: 254 })) {\n    return false;\n  }\n\n  if (!(0, _isFQDN2.default)(domain, { require_tld: options.require_tld })) {\n    if (!options.allow_ip_domain) {\n      return false;\n    }\n\n    if (!(0, _isIP2.default)(domain)) {\n      if (!domain.startsWith('[') || !domain.endsWith(']')) {\n        return false;\n      }\n\n      var noBracketdomain = domain.substr(1, domain.length - 2);\n\n      if (noBracketdomain.length === 0 || !(0, _isIP2.default)(noBracketdomain)) {\n        return false;\n      }\n    }\n  }\n\n  if (user[0] === '\"') {\n    user = user.slice(1, user.length - 1);\n    return options.allow_utf8_local_part ? quotedEmailUserUtf8.test(user) : quotedEmailUser.test(user);\n  }\n\n  var pattern = options.allow_utf8_local_part ? emailUserUtf8Part : emailUserPart;\n\n  var user_parts = user.split('.');\n  for (var _i = 0; _i < user_parts.length; _i++) {\n    if (!pattern.test(user_parts[_i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\nmodule.exports = exports['default'];\n});\n\nvar isEmail = unwrapExports(isEmail_1);\n\nfunction objectWithoutProperties (obj, exclude) { var target = {}; for (var k in obj) if (Object.prototype.hasOwnProperty.call(obj, k) && exclude.indexOf(k) === -1) target[k] = obj[k]; return target; }\n\nvar validate$d = function (value, ref) {\n  if ( ref === void 0 ) ref = {};\n  var multiple = ref.multiple; if ( multiple === void 0 ) multiple = false;\n  var rest = objectWithoutProperties( ref, [\"multiple\"] );\n  var options = rest;\n\n  if (multiple && !Array.isArray(value)) {\n    value = String(value).split(',').map(function (emailStr) { return emailStr.trim(); });\n  }\n\n  var validatorOptions = assign({}, options);\n\n  if (Array.isArray(value)) {\n    return value.every(function (val) { return isEmail(String(val), validatorOptions); });\n  }\n\n  return isEmail(String(value), validatorOptions);\n};\n\nvar email = {\n  validate: validate$d\n};\n\nvar validate$e = function (value, options) {\n  if (Array.isArray(value)) {\n    return value.every(function (val) { return validate$e(val, options); });\n  }\n\n  return toArray(options).some(function (item) {\n    // eslint-disable-next-line\n    return item == value;\n  });\n};\n\nvar included = {\n  validate: validate$e\n};\n\nvar validate$f = function () {\n  var args = [], len = arguments.length;\n  while ( len-- ) args[ len ] = arguments[ len ];\n\n  return !validate$e.apply(void 0, args);\n};\n\nvar excluded = {\n  validate: validate$f\n};\n\nvar validate$g = function (files, extensions) {\n  var regex = new RegExp((\".(\" + (extensions.join('|')) + \")$\"), 'i');\n  return ensureArray(files).every(function (file) { return regex.test(file.name); });\n};\n\nvar ext = {\n  validate: validate$g\n};\n\nvar validate$h = function (files) { return (Array.isArray(files) ? files : [files]).every(function (file) { return /\\.(jpg|svg|jpeg|png|bmp|gif)$/i.test(file.name); }); };\n\nvar image = {\n  validate: validate$h\n};\n\nvar validate$i = function (value) {\n  if (Array.isArray(value)) {\n    return value.every(function (val) { return /^-?[0-9]+$/.test(String(val)); });\n  }\n\n  return /^-?[0-9]+$/.test(String(value));\n};\n\nvar integer = {\n  validate: validate$i\n};\n\nvar validate$j = function (value, ref) {\n  if ( ref === void 0 ) ref = {};\n  var version = ref.version; if ( version === void 0 ) version = 4;\n\n  if (isNullOrUndefined(value)) {\n    value = '';\n  }\n\n  if (Array.isArray(value)) {\n    return value.every(function (val) { return isIP(val, version); });\n  }\n\n  return isIP(value, version);\n};\n\nvar paramNames$b = ['version'];\n\nvar ip = {\n  validate: validate$j,\n  paramNames: paramNames$b\n};\n\nvar validate$k = function (value) {\n  if (isNullOrUndefined(value)) {\n    value = '';\n  }\n\n  if (Array.isArray(value)) {\n    return value.every(function (val) { return (isIP(val, '') || isFQDN(val)); });\n  }\n\n  return isIP(value, '') || isFQDN(value);\n};\n\nvar ip_or_fqdn = {\n  validate: validate$k\n};\n\nvar validate$l = function (value, ref) {\n  if ( ref === void 0 ) ref = [];\n  var other = ref[0];\n\n  return value === other;\n};\n\nvar is = {\n  validate: validate$l\n};\n\nvar validate$m = function (value, ref) {\n  if ( ref === void 0 ) ref = [];\n  var other = ref[0];\n\n  return value !== other;\n};\n\nvar is_not = {\n  validate: validate$m\n};\n\n/**\n * @param {Array|String} value\n * @param {Number} length\n * @param {Number} max\n */\nvar compare = function (value, length, max) {\n  if (max === undefined) {\n    return value.length === length;\n  }\n\n  // cast to number.\n  max = Number(max);\n\n  return value.length >= length && value.length <= max;\n};\n\nvar validate$n = function (value, ref) {\n  var length = ref[0];\n  var max = ref[1]; if ( max === void 0 ) max = undefined;\n\n  if (isNullOrUndefined(value)) {\n    return false;\n  }\n\n  length = Number(length);\n  if (typeof value === 'number') {\n    value = String(value);\n  }\n\n  if (!value.length) {\n    value = toArray(value);\n  }\n\n  return compare(value, length, max);\n};\n\nvar length = {\n  validate: validate$n\n};\n\nvar validate$o = function (value, ref) {\n  var length = ref[0];\n\n  if (isNullOrUndefined(value)) {\n    return length >= 0;\n  }\n\n  if (Array.isArray(value)) {\n    return value.every(function (val) { return validate$o(val, [length]); });\n  }\n\n  return String(value).length <= length;\n};\n\nvar max = {\n  validate: validate$o\n};\n\nvar validate$p = function (value, ref) {\n  var max = ref[0];\n\n  if (isNullOrUndefined(value) || value === '') {\n    return false;\n  }\n\n  if (Array.isArray(value)) {\n    return value.length > 0 && value.every(function (val) { return validate$p(val, [max]); });\n  }\n\n  return Number(value) <= max;\n};\n\nvar max_value = {\n  validate: validate$p\n};\n\nvar validate$q = function (files, mimes) {\n  var regex = new RegExp(((mimes.join('|').replace('*', '.+')) + \"$\"), 'i');\n  return ensureArray(files).every(function (file) { return regex.test(file.type); });\n};\n\nvar mimes = {\n  validate: validate$q\n};\n\nvar validate$r = function (value, ref) {\n  var length = ref[0];\n\n  if (isNullOrUndefined(value)) {\n    return false;\n  }\n\n  if (Array.isArray(value)) {\n    return value.every(function (val) { return validate$r(val, [length]); });\n  }\n\n  return String(value).length >= length;\n};\n\nvar min = {\n  validate: validate$r\n};\n\nvar validate$s = function (value, ref) {\n  var min = ref[0];\n\n  if (isNullOrUndefined(value) || value === '') {\n    return false;\n  }\n\n  if (Array.isArray(value)) {\n    return value.length > 0 && value.every(function (val) { return validate$s(val, [min]); });\n  }\n\n  return Number(value) >= min;\n};\n\nvar min_value = {\n  validate: validate$s\n};\n\nvar ar = /^[٠١٢٣٤٥٦٧٨٩]+$/;\nvar en = /^[0-9]+$/;\n\nvar validate$t = function (value) {\n  var testValue = function (val) {\n    var strValue = String(val);\n\n    return en.test(strValue) || ar.test(strValue);\n  };\n\n  if (Array.isArray(value)) {\n    return value.every(testValue);\n  }\n\n  return testValue(value);\n};\n\nvar numeric = {\n  validate: validate$t\n};\n\nvar validate$u = function (value, ref) {\n  var expression = ref.expression;\n\n  if (typeof expression === 'string') {\n    expression = new RegExp(expression);\n  }\n\n  if (Array.isArray(value)) {\n    return value.every(function (val) { return validate$u(val, { expression: expression }); });\n  }\n\n  return expression.test(String(value));\n};\n\nvar paramNames$c = ['expression'];\n\nvar regex = {\n  validate: validate$u,\n  paramNames: paramNames$c\n};\n\nvar validate$v = function (value, ref) {\n  if ( ref === void 0 ) ref = [];\n  var invalidateFalse = ref[0]; if ( invalidateFalse === void 0 ) invalidateFalse = false;\n\n  if (isNullOrUndefined(value) || isEmptyArray(value)) {\n    return false;\n  }\n\n  // incase a field considers `false` as an empty value like checkboxes.\n  if (value === false && invalidateFalse) {\n    return false;\n  }\n\n  return !!String(value).trim().length;\n};\n\nvar required = {\n  validate: validate$v\n};\n\nvar validate$w = function (value, ref) {\n  if ( ref === void 0 ) ref = [];\n  var otherFieldVal = ref[0];\n  var possibleVals = ref.slice(1);\n\n  var required = possibleVals.includes(String(otherFieldVal).trim());\n\n  if (!required) {\n    return {\n      valid: true,\n      data: {\n        required: required\n      }\n    };\n  }\n\n  var invalid = (isEmptyArray(value) || [false, null, undefined].includes(value));\n\n  invalid = invalid || !String(value).trim().length;\n\n  return {\n    valid: !invalid,\n    data: {\n      required: required\n    }\n  };\n};\n\nvar options$5 = {\n  hasTarget: true,\n  computesRequired: true\n};\n\nvar required_if = {\n  validate: validate$w,\n  options: options$5\n};\n\nvar validate$x = function (files, ref) {\n  var size = ref[0];\n\n  if (isNaN(size)) {\n    return false;\n  }\n  var nSize = Number(size) * 1024;\n  return ensureArray(files).every(function (file) { return file.size <= nSize; });\n};\n\nvar size = {\n  validate: validate$x\n};\n\nvar isURL_1 = createCommonjsModule(function (module, exports) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isURL;\n\n\n\nvar _assertString2 = _interopRequireDefault(assertString_1);\n\n\n\nvar _isFQDN2 = _interopRequireDefault(isFQDN_1);\n\n\n\nvar _isIP2 = _interopRequireDefault(isIP_1);\n\n\n\nvar _merge2 = _interopRequireDefault(merge_1);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar default_url_options = {\n  protocols: ['http', 'https', 'ftp'],\n  require_tld: true,\n  require_protocol: false,\n  require_host: true,\n  require_valid_protocol: true,\n  allow_underscores: false,\n  allow_trailing_dot: false,\n  allow_protocol_relative_urls: false\n};\n\nvar wrapped_ipv6 = /^\\[([^\\]]+)\\](?::([0-9]+))?$/;\n\nfunction isRegExp(obj) {\n  return Object.prototype.toString.call(obj) === '[object RegExp]';\n}\n\nfunction checkHost(host, matches) {\n  for (var i = 0; i < matches.length; i++) {\n    var match = matches[i];\n    if (host === match || isRegExp(match) && match.test(host)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction isURL(url, options) {\n  (0, _assertString2.default)(url);\n  if (!url || url.length >= 2083 || /[\\s<>]/.test(url)) {\n    return false;\n  }\n  if (url.indexOf('mailto:') === 0) {\n    return false;\n  }\n  options = (0, _merge2.default)(options, default_url_options);\n  var protocol = void 0,\n      auth = void 0,\n      host = void 0,\n      hostname = void 0,\n      port = void 0,\n      port_str = void 0,\n      split = void 0,\n      ipv6 = void 0;\n\n  split = url.split('#');\n  url = split.shift();\n\n  split = url.split('?');\n  url = split.shift();\n\n  split = url.split('://');\n  if (split.length > 1) {\n    protocol = split.shift().toLowerCase();\n    if (options.require_valid_protocol && options.protocols.indexOf(protocol) === -1) {\n      return false;\n    }\n  } else if (options.require_protocol) {\n    return false;\n  } else if (url.substr(0, 2) === '//') {\n    if (!options.allow_protocol_relative_urls) {\n      return false;\n    }\n    split[0] = url.substr(2);\n  }\n  url = split.join('://');\n\n  if (url === '') {\n    return false;\n  }\n\n  split = url.split('/');\n  url = split.shift();\n\n  if (url === '' && !options.require_host) {\n    return true;\n  }\n\n  split = url.split('@');\n  if (split.length > 1) {\n    auth = split.shift();\n    if (auth.indexOf(':') >= 0 && auth.split(':').length > 2) {\n      return false;\n    }\n  }\n  hostname = split.join('@');\n\n  port_str = null;\n  ipv6 = null;\n  var ipv6_match = hostname.match(wrapped_ipv6);\n  if (ipv6_match) {\n    host = '';\n    ipv6 = ipv6_match[1];\n    port_str = ipv6_match[2] || null;\n  } else {\n    split = hostname.split(':');\n    host = split.shift();\n    if (split.length) {\n      port_str = split.join(':');\n    }\n  }\n\n  if (port_str !== null) {\n    port = parseInt(port_str, 10);\n    if (!/^[0-9]+$/.test(port_str) || port <= 0 || port > 65535) {\n      return false;\n    }\n  }\n\n  if (!(0, _isIP2.default)(host) && !(0, _isFQDN2.default)(host, options) && (!ipv6 || !(0, _isIP2.default)(ipv6, 6))) {\n    return false;\n  }\n\n  host = host || ipv6;\n\n  if (options.host_whitelist && !checkHost(host, options.host_whitelist)) {\n    return false;\n  }\n  if (options.host_blacklist && checkHost(host, options.host_blacklist)) {\n    return false;\n  }\n\n  return true;\n}\nmodule.exports = exports['default'];\n});\n\nvar isURL = unwrapExports(isURL_1);\n\nvar validate$y = function (value, options) {\n  if ( options === void 0 ) options = {};\n\n  if (isNullOrUndefined(value)) {\n    value = '';\n  }\n\n  var validatorOptions = assign({}, options);\n\n  if (Array.isArray(value)) {\n    return value.every(function (val) { return isURL(val, validatorOptions); });\n  }\n\n  return isURL(value, validatorOptions);\n};\n\nvar url = {\n  validate: validate$y\n};\n\n/* eslint-disable camelcase */\n\nvar Rules = /*#__PURE__*/Object.freeze({\n  after: after,\n  alpha_dash: alpha_dash,\n  alpha_num: alpha_num,\n  alpha_spaces: alpha_spaces,\n  alpha: alpha$1,\n  before: before,\n  between: between,\n  confirmed: confirmed,\n  credit_card: credit_card,\n  date_between: date_between,\n  date_format: date_format,\n  decimal: decimal,\n  digits: digits,\n  dimensions: dimensions,\n  email: email,\n  ext: ext,\n  image: image,\n  included: included,\n  integer: integer,\n  length: length,\n  ip: ip,\n  ip_or_fqdn: ip_or_fqdn,\n  is_not: is_not,\n  is: is,\n  max: max,\n  max_value: max_value,\n  mimes: mimes,\n  min: min,\n  min_value: min_value,\n  excluded: excluded,\n  numeric: numeric,\n  regex: regex,\n  required: required,\n  required_if: required_if,\n  size: size,\n  url: url\n});\n\n// \n\nvar normalize = function (fields) {\n  if (Array.isArray(fields)) {\n    return fields.reduce(function (prev, curr) {\n      if (includes(curr, '.')) {\n        prev[curr.split('.')[1]] = curr;\n      } else {\n        prev[curr] = curr;\n      }\n\n      return prev;\n    }, {});\n  }\n\n  return fields;\n};\n\n// Combines two flags using either AND or OR depending on the flag type.\nvar combine = function (lhs, rhs) {\n  var mapper = {\n    pristine: function (lhs, rhs) { return lhs && rhs; },\n    dirty: function (lhs, rhs) { return lhs || rhs; },\n    touched: function (lhs, rhs) { return lhs || rhs; },\n    untouched: function (lhs, rhs) { return lhs && rhs; },\n    valid: function (lhs, rhs) { return lhs && rhs; },\n    invalid: function (lhs, rhs) { return lhs || rhs; },\n    pending: function (lhs, rhs) { return lhs || rhs; },\n    required: function (lhs, rhs) { return lhs || rhs; },\n    validated: function (lhs, rhs) { return lhs && rhs; }\n  };\n\n  return Object.keys(mapper).reduce(function (flags, flag) {\n    flags[flag] = mapper[flag](lhs[flag], rhs[flag]);\n\n    return flags;\n  }, {});\n};\n\nvar mapScope = function (scope, deep) {\n  if ( deep === void 0 ) deep = true;\n\n  return Object.keys(scope).reduce(function (flags, field) {\n    if (!flags) {\n      flags = assign({}, scope[field]);\n      return flags;\n    }\n\n    // scope.\n    var isScope = field.indexOf('$') === 0;\n    if (deep && isScope) {\n      return combine(mapScope(scope[field]), flags);\n    } else if (!deep && isScope) {\n      return flags;\n    }\n\n    flags = combine(flags, scope[field]);\n\n    return flags;\n  }, null);\n};\n\n/**\n * Maps fields to computed functions.\n */\nvar mapFields = function (fields) {\n  if (!fields) {\n    return function () {\n      return mapScope(this.$validator.flags);\n    };\n  }\n\n  var normalized = normalize(fields);\n  return Object.keys(normalized).reduce(function (prev, curr) {\n    var field = normalized[curr];\n    prev[curr] = function mappedField () {\n      // if field exists\n      if (this.$validator.flags[field]) {\n        return this.$validator.flags[field];\n      }\n\n      // scopeless fields were selected.\n      if (normalized[curr] === '*') {\n        return mapScope(this.$validator.flags, false);\n      }\n\n      // if it has a scope defined\n      var index = field.indexOf('.');\n      if (index <= 0) {\n        return {};\n      }\n\n      var ref = field.split('.');\n      var scope = ref[0];\n      var name = ref.slice(1);\n\n      scope = this.$validator.flags[(\"$\" + scope)];\n      name = name.join('.');\n\n      // an entire scope was selected: scope.*\n      if (name === '*' && scope) {\n        return mapScope(scope);\n      }\n\n      if (scope && scope[name]) {\n        return scope[name];\n      }\n\n      return {};\n    };\n\n    return prev;\n  }, {});\n};\n\nvar $validator = null;\n\nvar PROVIDER_COUNTER = 0;\n\nfunction createValidationCtx (ctx) {\n  return {\n    errors: ctx.messages,\n    flags: ctx.flags,\n    classes: ctx.classes,\n    valid: ctx.isValid,\n    failedRules: ctx.failedRules,\n    reset: function () { return ctx.reset(); },\n    validate: function () {\n      var args = [], len = arguments.length;\n      while ( len-- ) args[ len ] = arguments[ len ];\n\n      return ctx.validate.apply(ctx, args);\n  },\n    aria: {\n      'aria-invalid': ctx.flags.invalid ? 'true' : 'false',\n      'aria-required': ctx.isRequired ? 'true' : 'false'\n    }\n  };\n}\n\nfunction normalizeValue$1 (value) {\n  if (isEvent(value)) {\n    return value.target.type === 'file' ? toArray(value.target.files) : value.target.value;\n  }\n\n  return value;\n}\n\n/**\n * Determines if a provider needs to run validation.\n */\nfunction shouldValidate (ctx, model) {\n  // when an immediate/initial validation is needed and wasn't done before.\n  if (!ctx._ignoreImmediate && ctx.immediate) {\n    return true;\n  }\n\n  // when the value changes for whatever reason.\n  if (ctx.value !== model.value) {\n    return true;\n  }\n\n  // when it needs validation due to props/cross-fields changes.\n  if (ctx._needsValidation) {\n    return true;\n  }\n\n  // when the initial value is undefined and the field wasn't rendered yet.\n  if (!ctx.initialized && model.value === undefined) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction computeModeSetting (ctx) {\n  var compute = isCallable(ctx.mode) ? ctx.mode : modes[ctx.mode];\n\n  return compute({\n    errors: ctx.messages,\n    value: ctx.value,\n    flags: ctx.flags\n  });\n}\n\nfunction onRenderUpdate (model) {\n  if (!this.initialized) {\n    this.initialValue = model.value;\n  }\n\n  var validateNow = shouldValidate(this, model);\n  this._needsValidation = false;\n  this.value = model.value;\n  this._ignoreImmediate = true;\n\n  if (!validateNow) {\n    return;\n  }\n\n  this.validateSilent().then(this.immediate || this.flags.validated ? this.applyResult : function (x) { return x; });\n}\n\n// Creates the common handlers for a validatable context.\nfunction createCommonHandlers (ctx) {\n  var onInput = function (e) {\n    ctx.syncValue(e); // track and keep the value updated.\n    ctx.setFlags({ dirty: true, pristine: false });\n  };\n\n  // Blur event listener.\n  var onBlur = function () {\n    ctx.setFlags({ touched: true, untouched: false });\n  };\n\n  var onValidate = ctx.$veeHandler;\n  var mode = computeModeSetting(ctx);\n\n  // Handle debounce changes.\n  if (!onValidate || ctx.$veeDebounce !== ctx.debounce) {\n    onValidate = debounce(\n      function () {\n        ctx.$nextTick(function () {\n          var pendingPromise = ctx.validateSilent();\n          // avoids race conditions between successive validations.\n          ctx._pendingValidation = pendingPromise;\n          pendingPromise.then(function (result) {\n            if (pendingPromise === ctx._pendingValidation) {\n              ctx.applyResult(result);\n              ctx._pendingValidation = null;\n            }\n          });\n        });\n      },\n      mode.debounce || ctx.debounce\n    );\n\n    // Cache the handler so we don't create it each time.\n    ctx.$veeHandler = onValidate;\n    // cache the debounce value so we detect if it was changed.\n    ctx.$veeDebounce = ctx.debounce;\n  }\n\n  return { onInput: onInput, onBlur: onBlur, onValidate: onValidate };\n}\n\n// Adds all plugin listeners to the vnode.\nfunction addListeners (node) {\n  var model = findModel(node);\n  // cache the input eventName.\n  this._inputEventName = this._inputEventName || getInputEventName(node, model);\n\n  onRenderUpdate.call(this, model);\n\n  var ref = createCommonHandlers(this);\n  var onInput = ref.onInput;\n  var onBlur = ref.onBlur;\n  var onValidate = ref.onValidate;\n  addVNodeListener(node, this._inputEventName, onInput);\n  addVNodeListener(node, 'blur', onBlur);\n\n  // add the validation listeners.\n  this.normalizedEvents.forEach(function (evt) {\n    addVNodeListener(node, evt, onValidate);\n  });\n\n  this.initialized = true;\n}\n\nfunction createValuesLookup (ctx) {\n  var providers = ctx.$_veeObserver.refs;\n\n  return ctx.fieldDeps.reduce(function (acc, depName) {\n    if (!providers[depName]) {\n      return acc;\n    }\n\n    acc[depName] = providers[depName].value;\n\n    return acc;\n  }, {});\n}\n\nfunction updateRenderingContextRefs (ctx) {\n  // IDs should not be nullable.\n  if (isNullOrUndefined(ctx.id) && ctx.id === ctx.vid) {\n    ctx.id = PROVIDER_COUNTER;\n    PROVIDER_COUNTER++;\n  }\n\n  var id = ctx.id;\n  var vid = ctx.vid;\n  // Nothing has changed.\n  if (ctx.isDeactivated || (id === vid && ctx.$_veeObserver.refs[id])) {\n    return;\n  }\n\n  // vid was changed.\n  if (id !== vid && ctx.$_veeObserver.refs[id] === ctx) {\n    ctx.$_veeObserver.unsubscribe(ctx);\n  }\n\n  ctx.$_veeObserver.subscribe(ctx);\n  ctx.id = vid;\n}\n\nfunction createObserver () {\n  return {\n    refs: {},\n    subscribe: function subscribe (ctx) {\n      this.refs[ctx.vid] = ctx;\n    },\n    unsubscribe: function unsubscribe (ctx) {\n      delete this.refs[ctx.vid];\n    }\n  };\n}\n\nvar ValidationProvider = {\n  $__veeInject: false,\n  inject: {\n    $_veeObserver: {\n      from: '$_veeObserver',\n      default: function default$1 () {\n        if (!this.$vnode.context.$_veeObserver) {\n          this.$vnode.context.$_veeObserver = createObserver();\n        }\n\n        return this.$vnode.context.$_veeObserver;\n      }\n    }\n  },\n  props: {\n    vid: {\n      type: [String, Number],\n      default: function () {\n        PROVIDER_COUNTER++;\n\n        return (\"_vee_\" + PROVIDER_COUNTER);\n      }\n    },\n    name: {\n      type: String,\n      default: null\n    },\n    mode: {\n      type: [String, Function],\n      default: function () {\n        return getConfig().mode;\n      }\n    },\n    events: {\n      type: Array,\n      validate: function () {\n        /* istanbul ignore next */\n        if (process.env.NODE_ENV !== 'production') {\n          warn('events prop and config will be deprecated in future version please use the interaction modes instead');\n        }\n\n        return true;\n      },\n      default: function () {\n        var events = getConfig().events;\n        if (typeof events === 'string') {\n          return events.split('|');\n        }\n\n        return events;\n      }\n    },\n    rules: {\n      type: [Object, String],\n      default: null\n    },\n    immediate: {\n      type: Boolean,\n      default: false\n    },\n    persist: {\n      type: Boolean,\n      default: false\n    },\n    bails: {\n      type: Boolean,\n      default: function () { return getConfig().fastExit; }\n    },\n    debounce: {\n      type: Number,\n      default: function () { return getConfig().delay || 0; }\n    },\n    tag: {\n      type: String,\n      default: 'span'\n    }\n  },\n  watch: {\n    rules: {\n      deep: true,\n      handler: function handler (val, oldVal) {\n        this._needsValidation = !isEqual(val, oldVal);\n      }\n    }\n  },\n  data: function () { return ({\n    messages: [],\n    value: undefined,\n    initialized: false,\n    initialValue: undefined,\n    flags: createFlags(),\n    failedRules: {},\n    forceRequired: false,\n    isDeactivated: false,\n    id: null\n  }); },\n  computed: {\n    isValid: function isValid () {\n      return this.flags.valid;\n    },\n    fieldDeps: function fieldDeps () {\n      var this$1 = this;\n\n      var rules = normalizeRules(this.rules);\n      var providers = this.$_veeObserver.refs;\n\n      return Object.keys(rules).filter(RuleContainer.isTargetRule).map(function (rule) {\n        var depName = rules[rule][0];\n        var watcherName = \"$__\" + depName;\n        if (!isCallable(this$1[watcherName]) && providers[depName]) {\n          this$1[watcherName] = providers[depName].$watch('value', function () {\n            if (this$1.flags.validated) {\n              this$1._needsValidation = true;\n              this$1.validate();\n            }\n          });\n        }\n\n        return depName;\n      });\n    },\n    normalizedEvents: function normalizedEvents () {\n      var this$1 = this;\n\n      var ref = computeModeSetting(this);\n      var on = ref.on;\n\n      return normalizeEvents(on || this.events || []).map(function (e) {\n        if (e === 'input') {\n          return this$1._inputEventName;\n        }\n\n        return e;\n      });\n    },\n    isRequired: function isRequired () {\n      var rules = normalizeRules(this.rules);\n      var forceRequired = this.forceRequired;\n\n      var isRequired = rules.required || forceRequired;\n      this.flags.required = isRequired;\n\n      return isRequired;\n    },\n    classes: function classes () {\n      var this$1 = this;\n\n      var names = getConfig().classNames;\n      return Object.keys(this.flags).reduce(function (classes, flag) {\n        var className = (names && names[flag]) || flag;\n        if (isNullOrUndefined(this$1.flags[flag])) {\n          return classes;\n        }\n\n        if (className) {\n          classes[className] = this$1.flags[flag];\n        }\n\n        return classes;\n      }, {});\n    }\n  },\n  render: function render (h) {\n    var this$1 = this;\n\n    this.registerField();\n    var ctx = createValidationCtx(this);\n\n    // Gracefully handle non-existent scoped slots.\n    var slot = this.$scopedSlots.default;\n    /* istanbul ignore next */\n    if (!isCallable(slot)) {\n      if (process.env.NODE_ENV !== 'production') {\n        warn('ValidationProvider expects a scoped slot. Did you forget to add \"slot-scope\" to your slot?');\n      }\n\n      return h(this.tag, this.$slots.default);\n    }\n\n    var nodes = slot(ctx);\n    // Handle single-root slot.\n    extractVNodes(nodes).forEach(function (input) {\n      addListeners.call(this$1, input);\n    });\n\n    return h(this.tag, nodes);\n  },\n  beforeDestroy: function beforeDestroy () {\n    // cleanup reference.\n    this.$_veeObserver.unsubscribe(this);\n  },\n  activated: function activated () {\n    this.$_veeObserver.subscribe(this);\n    this.isDeactivated = false;\n  },\n  deactivated: function deactivated () {\n    this.$_veeObserver.unsubscribe(this);\n    this.isDeactivated = true;\n  },\n  methods: {\n    setFlags: function setFlags (flags) {\n      var this$1 = this;\n\n      Object.keys(flags).forEach(function (flag) {\n        this$1.flags[flag] = flags[flag];\n      });\n    },\n    syncValue: function syncValue (e) {\n      var value = normalizeValue$1(e);\n      this.value = value;\n      this.flags.changed = this.initialValue !== value;\n    },\n    reset: function reset () {\n      this.messages = [];\n      this._pendingValidation = null;\n      this.initialValue = this.value;\n      var flags = createFlags();\n      this.setFlags(flags);\n    },\n    validate: function validate () {\n      var this$1 = this;\n      var args = [], len = arguments.length;\n      while ( len-- ) args[ len ] = arguments[ len ];\n\n      if (args.length > 0) {\n        this.syncValue(args[0]);\n      }\n\n      return this.validateSilent().then(function (result) {\n        this$1.applyResult(result);\n\n        return result;\n      });\n    },\n    validateSilent: function validateSilent () {\n      var this$1 = this;\n\n      this.setFlags({ pending: true });\n\n      return $validator.verify(this.value, this.rules, {\n        name: this.name,\n        values: createValuesLookup(this),\n        bails: this.bails\n      }).then(function (result) {\n        this$1.setFlags({ pending: false });\n        if (!this$1.isRequired) {\n          this$1.setFlags({ valid: result.valid, invalid: !result.valid });\n        }\n\n        return result;\n      });\n    },\n    applyResult: function applyResult (ref) {\n      var errors = ref.errors;\n      var failedRules = ref.failedRules;\n\n      this.messages = errors;\n      this.failedRules = assign({}, failedRules);\n      this.setFlags({\n        valid: !errors.length,\n        changed: this.value !== this.initialValue,\n        invalid: !!errors.length,\n        validated: true\n      });\n    },\n    registerField: function registerField () {\n      if (!$validator) {\n        $validator = getValidator() || new Validator(null, { fastExit: getConfig().fastExit });\n      }\n\n      updateRenderingContextRefs(this);\n    }\n  }\n};\n\nvar flagMergingStrategy = {\n  pristine: 'every',\n  dirty: 'some',\n  touched: 'some',\n  untouched: 'every',\n  valid: 'every',\n  invalid: 'some',\n  pending: 'some',\n  validated: 'every'\n};\n\nfunction mergeFlags (lhs, rhs, strategy) {\n  var stratName = flagMergingStrategy[strategy];\n\n  return [lhs, rhs][stratName](function (f) { return f; });\n}\n\nvar OBSERVER_COUNTER = 0;\n\nvar ValidationObserver = {\n  name: 'ValidationObserver',\n  provide: function provide () {\n    return {\n      $_veeObserver: this\n    };\n  },\n  inject: {\n    $_veeObserver: {\n      from: '$_veeObserver',\n      default: function default$1 () {\n        if (!this.$vnode.context.$_veeObserver) {\n          return null;\n        }\n\n        return this.$vnode.context.$_veeObserver;\n      }\n    }\n  },\n  props: {\n    tag: {\n      type: String,\n      default: 'span'\n    }\n  },\n  data: function () { return ({\n    vid: (\"obs_\" + (OBSERVER_COUNTER++)),\n    refs: {},\n    observers: [],\n  }); },\n  computed: {\n    ctx: function ctx () {\n      var this$1 = this;\n\n      var ctx = {\n        errors: {},\n        validate: function (arg) {\n          var promise = this$1.validate(arg);\n\n          return {\n            then: function then (thenable) {\n              promise.then(function (success) {\n                if (success && isCallable(thenable)) {\n                  return Promise.resolve(thenable());\n                }\n\n                return Promise.resolve(success);\n              });\n            }\n          };\n        },\n        reset: function () { return this$1.reset(); }\n      };\n\n      return values(this.refs).concat( this.observers ).reduce(function (acc, provider) {\n        Object.keys(flagMergingStrategy).forEach(function (flag) {\n          var flags = provider.flags || provider.ctx;\n          if (!(flag in acc)) {\n            acc[flag] = flags[flag];\n            return;\n          }\n\n          acc[flag] = mergeFlags(acc[flag], flags[flag], flag);\n        });\n\n        acc.errors[provider.vid] = provider.messages || values(provider.ctx.errors).reduce(function (errs, obsErrors) {\n          return errs.concat(obsErrors);\n        }, []);\n\n        return acc;\n      }, ctx);\n    }\n  },\n  created: function created () {\n    if (this.$_veeObserver) {\n      this.$_veeObserver.subscribe(this, 'observer');\n    }\n  },\n  activated: function activated () {\n    if (this.$_veeObserver) {\n      this.$_veeObserver.subscribe(this, 'observer');\n    }\n  },\n  deactivated: function deactivated () {\n    if (this.$_veeObserver) {\n      this.$_veeObserver.unsubscribe(this, 'observer');\n    }\n  },\n  beforeDestroy: function beforeDestroy () {\n    if (this.$_veeObserver) {\n      this.$_veeObserver.unsubscribe(this, 'observer');\n    }\n  },\n  render: function render (h) {\n    var slots = this.$scopedSlots.default;\n    this._persistedStore = this._persistedStore || {};\n    if (!isCallable(slots)) {\n      return h(this.tag, this.$slots.default);\n    }\n\n    return h(this.tag, {\n      on: this.$listeners,\n      attrs: this.$attrs\n    }, slots(this.ctx));\n  },\n  methods: {\n    subscribe: function subscribe (subscriber, kind) {\n      var obj;\n\n      if ( kind === void 0 ) kind = 'provider';\n      if (kind === 'observer') {\n        this.observers.push(subscriber);\n        return;\n      }\n\n      this.refs = Object.assign({}, this.refs, ( obj = {}, obj[subscriber.vid] = subscriber, obj ));\n      if (subscriber.persist && this._persistedStore[subscriber.vid]) {\n        this.restoreProviderState(subscriber);\n      }\n    },\n    unsubscribe: function unsubscribe (ref, kind) {\n      var vid = ref.vid;\n      if ( kind === void 0 ) kind = 'provider';\n\n      if (kind === 'provider') {\n        this.removeProvider(vid);\n      }\n\n      var idx = findIndex(this.observers, function (o) { return o.vid === vid; });\n      if (idx !== -1) {\n        this.observers.splice(idx, 1);\n      }\n    },\n    validate: function validate (ref) {\n      if ( ref === void 0 ) ref = { silent: false };\n      var silent = ref.silent;\n\n      return Promise.all(values(this.refs).map(function (ref) { return ref[silent ? 'validateSilent' : 'validate']().then(function (r) { return r.valid; }); }).concat( this.observers.map(function (obs) { return obs.validate({ silent: silent }); })\n      )).then(function (results) { return results.every(function (r) { return r; }); });\n    },\n    reset: function reset () {\n      return values(this.refs).concat( this.observers).forEach(function (ref) { return ref.reset(); });\n    },\n    restoreProviderState: function restoreProviderState (provider) {\n      var state = this._persistedStore[provider.vid];\n      provider.setFlags(state.flags);\n      provider.applyResult(state);\n      delete this._persistedStore[provider.vid];\n    },\n    removeProvider: function removeProvider (vid) {\n      var provider = this.refs[vid];\n      // save it for the next time.\n      if (provider && provider.persist) {\n        /* istanbul ignore else */\n        if (process.env.NODE_ENV !== 'production') {\n          if (vid.indexOf('_vee_') === 0) {\n            warn('Please provide a `vid` prop when using `persist`, there might be unexpected issues otherwise.');\n          }\n        }\n\n        this._persistedStore[vid] = {\n          flags: provider.flags,\n          errors: provider.messages,\n          failedRules: provider.failedRules\n        };\n      }\n\n      this.$delete(this.refs, vid);\n    },\n  }\n};\n\nfunction withValidation (component, ctxToProps) {\n  if ( ctxToProps === void 0 ) ctxToProps = null;\n\n  var options = isCallable(component) ? component.options : component;\n  options.$__veeInject = false;\n  var hoc = {\n    name: ((options.name || 'AnonymousHoc') + \"WithValidation\"),\n    props: assign({}, ValidationProvider.props),\n    data: ValidationProvider.data,\n    computed: assign({}, ValidationProvider.computed),\n    methods: assign({}, ValidationProvider.methods),\n    $__veeInject: false,\n    beforeDestroy: ValidationProvider.beforeDestroy,\n    inject: ValidationProvider.inject\n  };\n\n  // Default ctx converts ctx props to component props.\n  if (!ctxToProps) {\n    ctxToProps = function (ctx) { return ctx; };\n  }\n\n  var eventName = (options.model && options.model.event) || 'input';\n\n  hoc.render = function (h) {\n    var obj;\n\n    this.registerField();\n    var vctx = createValidationCtx(this);\n    var listeners = assign({}, this.$listeners);\n\n    var model = findModel(this.$vnode);\n    this._inputEventName = this._inputEventName || getInputEventName(this.$vnode, model);\n    onRenderUpdate.call(this, model);\n\n    var ref = createCommonHandlers(this);\n    var onInput = ref.onInput;\n    var onBlur = ref.onBlur;\n    var onValidate = ref.onValidate;\n\n    mergeVNodeListeners(listeners, eventName, onInput);\n    mergeVNodeListeners(listeners, 'blur', onBlur);\n    this.normalizedEvents.forEach(function (evt, idx) {\n      mergeVNodeListeners(listeners, evt, onValidate);\n    });\n\n    // Props are any attrs not associated with ValidationProvider Plus the model prop.\n    // WARNING: Accidental prop overwrite will probably happen.\n    var ref$1 = findModelConfig(this.$vnode) || { prop: 'value' };\n    var prop = ref$1.prop;\n    var props = assign({}, this.$attrs, ( obj = {}, obj[prop] = model.value, obj ), ctxToProps(vctx));\n\n    return h(options, {\n      attrs: this.$attrs,\n      props: props,\n      on: listeners\n    }, normalizeSlots(this.$slots, this.$vnode.context));\n  };\n\n  return hoc;\n}\n\nvar version = '2.2.7';\n\nObject.keys(Rules).forEach(function (rule) {\n  Validator.extend(rule, Rules[rule].validate, assign({}, Rules[rule].options, { paramNames: Rules[rule].paramNames }));\n});\n\n// Merge the english messages.\nValidator.localize({ en: locale });\n\nvar install = VeeValidate$1.install;\n\nVeeValidate$1.version = version;\nVeeValidate$1.mapFields = mapFields;\nVeeValidate$1.ValidationProvider = ValidationProvider;\nVeeValidate$1.ValidationObserver = ValidationObserver;\nVeeValidate$1.withValidation = withValidation;\n\nexport default VeeValidate$1;\nexport { install, directive, mixin, mapFields, Validator, ErrorBag, Rules, version, ValidationProvider, ValidationObserver, withValidation };\n"]}]}